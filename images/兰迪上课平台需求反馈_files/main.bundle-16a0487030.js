webpackJsonp([34],Array(20).concat([function(e,t,n){var r,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===o)for(var a in r)i.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}var i={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(r=[],void 0!==(o=function(){return n}.apply(t,r))&&(e.exports=o))}()},,function(e,t,n){function r(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}function o(e){var t=r();return t.open("GET",e,!0),t.send(),new Promise(function(e,n){t.onreadystatechange=function(){4===t.readyState&&(200===t.status?e(JSON.parse(t.responseText)):n(t.responseText))}})}function i(e,t){var n=r();n.open("POST",e),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),window.cow._csrf&&n.setRequestHeader("X-CSRF-Token",window.cow._csrf);var o="";return Object.keys(t).forEach(function(e){o+=encodeURIComponent(e)+"="+encodeURIComponent(t[e])+"&"}),n.send(o),new Promise(function(e,t){n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var r=void 0;try{r=JSON.parse(n.responseText)}catch(e){r=n.responseText}e(r)}else t(n.responseText)}})}function a(e,t){var n=r();n.open("PUT",e),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),window.cow._csrf&&n.setRequestHeader("X-CSRF-Token",window.cow._csrf);var o="";return t&&Object.keys(t).forEach(function(e){o+=e+"="+t[e]+"&"}),n.send(o),new Promise(function(e,t){n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var r=void 0;try{r=JSON.parse(n.responseText)}catch(e){r=n.responseText}e(r)}else t(n.responseText)}})}function s(e,t){var n=r();n.open("PATCH",e),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),window.cow._csrf&&n.setRequestHeader("X-CSRF-Token",window.cow._csrf);var o="";return t&&Object.keys(t).forEach(function(e){o+=e+"="+t[e]+"&"}),n.send(o),new Promise(function(e,t){n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var r=void 0;try{r=JSON.parse(n.responseText)}catch(e){r=n.responseText}e(r)}else t(n.responseText)}})}function u(e){var t=r();return t.open("DELETE",e),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(),new Promise(function(e,n){t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status){var r=JSON.parse(t.responseText);0===r.code?e(r):n(new Error(r.message))}else n(new Error(t.responseText))}})}Object.defineProperty(t,"__esModule",{value:!0}),t.default={ajaxGet:o,ajaxPost:i,ajaxPut:a,ajaxPatch:s,ajaxDelete:u},e.exports=t.default},,,,,,,,,,,,,,,function(e,t,n){e.exports=n(459)()},,,,,,,,,,,,,,function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(54),d=n(20),p=r(d),h=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={open:e.open||!1},n.bodyTpl=n.bodyTpl.bind(n),n}return s(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){void 0!==e.open&&e.open!==this.state.open&&this.setState({open:e.open})}},{key:"_headTpl",value:function(e){return this.props.hasCloseButton?c.default.createElement("div",null,c.default.createElement("span",{className:"dialog-title"},e),c.default.createElement("span",{className:"hicon icon-close dialog-close",onTouchTap:this._close.bind(this)})):c.default.createElement("span",{className:"dialog-title"},e)}},{key:"_close",value:function(){this.setState({open:!1});var e=this.props.onClose;"function"==typeof e&&e()}},{key:"bodyTpl",value:function(){if("function"==typeof this.props.bodyTpl)return this.props.bodyTpl;if(this.props.children){var e=c.default.Children.map(this.props.children,function(e){return c.default.cloneElement(e)});return function(){return e}}}},{key:"render",value:function(){var e,t=this.props,n=t.customClass,r=t.title,i=t.onClose,a=t.actions,s=t.enableCloseClickMask,u=t.hasCloseButton,l=this.state.open,d=this.props.buttonLayout,h=!1;a&&a.length>0&&(h=!0,d=d||"vertical",a.map(function(e){e.customClass+=" flat-footer-button "+d}));var m=(0,p.default)((e={"flat-dialog":!0},o(e,""+n,!!n),o(e,"no-title",!r&&!u),o(e,"no-action",!a||!a.length),e));return c.default.createElement(f.Dialog,{ref:"dialog",customClass:m,title:r,headTpl:this._headTpl.bind(this),bodyTpl:this.bodyTpl.bind(this)(),onClose:i||function(){},actions:a||[],open:"boolean"==typeof l&&l,enableCloseClickMask:s,hasActions:h})}}]),t}(l.Component);t.default=h,h.propTypes={customClass:l.PropTypes.string,title:l.PropTypes.string,bodyTpl:l.PropTypes.func,onClose:l.PropTypes.func,actions:l.PropTypes.array,open:l.PropTypes.bool,hasCloseButton:l.PropTypes.bool,enableCloseClickMask:l.PropTypes.bool,buttonLayout:l.PropTypes.oneOf(["vertical","horizontal"])},e.exports=t.default},,function(e,t,n){"use strict";function r(e){var t=e[0].toString(),n=t[t.length-1];return a[t.slice(0,t.length-1)].unpack([n,e[1],e[2]])}var o=n(1);t.Attribute=n(260),t.Delta=n(192);var i={TableOperator:n(558),CellOperator:n(332),TextOperator:n(560),Operator:n(193)};o.assign(t,i),t.pack=function(e){if("function"==typeof e.toJSON)return JSON.stringify(e);throw new Error("Only delta can be packed")},t.unpack=function(e){return t.Delta.unpack(JSON.parse(e))},t.print=function(e){e.print(!0)};var a=o.reduce(Object.keys(i),function(e,t){var n=i[t];return e[n.packId]=n,e},{});t.Delta.operatorUnpacker=r,Object.keys(i).forEach(function(e){i[e].operatorUnpacker=r});var s=n(131);t.parsePosition=s.parsePosition,t.stringifyPosition=s.stringifyPosition},,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(451),i=r(o);t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},,,,function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){e||(e="无标题");var n={name:e},r=window.cow.currentFile.guid;P.default.post(I.UPDATE_FILE.replace("{%guid%}",r),n).then(function(){"function"==typeof t&&t(),N.default.notify("file:updateTitle",e)}).fail(function(){console.log("name modify failed")})}function s(e,t){var n=r.Deferred(),o=[],i={};for(var a in t)e[a]!==t[a]&&(o.push(a),i[a]=t[a]);if(0===o.length)n.resolve({});else{var s="/api/file/"+e.guid;P.default.post(s,i,function(t){0===t.code?(g(e.guid,t.data),n.resolve(t.data)):n.reject()},function(e){n.reject(e)})}return n.promise()}function u(e){return(0,j.ajaxPut)("/smapi/files/"+e.id+"/star").then(function(e){if(0!==e.code)throw new Error("标星失败。错误码："+e.code);return{starred:!0}})}function l(e){return(0,j.ajaxDelete)("/smapi/files/"+e.id+"/star").then(function(e){if(0!==e.code)throw new Error("取消标星失败。错误码："+e.code);return{starred:!1}})}function c(e){var t=r.Deferred(),n={guid:e};return P.default.post("/api/file/create_copy",n,function(e){0===e.code?(t.resolve(e.data),cow.currentFile.children.push(e.data)):t.reject()},function(e){t.reject(e)}),t.promise()}function f(e){var t=r.Deferred();return P.default.post("/api/file/create",e,function(e){0===e.code?(t.resolve(e.data),cow.currentFile.children.push(e.data)):t.reject(new Error(e.message))},function(e){t.reject(e)}),t.promise()}function d(e){var t=r.Deferred(),n="/api/file/"+e+"/ancestors";return P.default.get(n,function(e){if(0===e.code){var n=e.data,r=n.ancestors||[];r.unshift({name:"我的桌面",type:"desktop",link:"/desktop"}),p(r),t.resolve(r)}else t.reject()},function(){t.reject()}),t.promise()}function p(e){e.map(function(e,t){return 0!==t&&(e.link="/folder/"+e.guid,e.type="folder"),e})}function h(e){var t=r.Deferred(),n={guid:e.guid,user_id:window.cow.currentUser.id,file_type:e.shortcut_id?"shortcut":"file"};return P.default.post("/api/share/delete",n,function(n){0===n.code?(t.resolve(n),g(e.guid,{is_delete:1})):t.reject()},function(){t.reject()}),t.promise()}function m(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"info",i=r.Deferred(),a={from:e,to:t,file_type:n,action_type:o};return P.default.post("/api/file/move",a,function(t){i.resolve(t),"action"===o&&g(e,{is_delete:1})},function(e){i.reject(e)}),i.promise()}function y(e,t){var n=r.Deferred();return P.default.post("/smapi/files/"+e+"/action/sort",{before:t}).then(function(r){0===r.code?(n.resolve(),v(e,t)):n.reject()}).fail(function(e){n.reject(e)}),n.promise()}function v(e,t){var n=cow.currentFile.children,r=null,o=-1,i=-1;(n||[]).some(function(n,a){return n.id===e&&(r=n,o=a),n.id===t&&(i=a),o>=0&&(i>=0||null===t||void 0===t)}),i>=0&&o>=0?(n.splice(i,0,r),i>o?n.splice(o,1):n.splice(o+1,1)):void 0!==t&&null!==t||(n.splice(o,1),n.push(r))}function g(e,t){var n=cow.currentFile.children;(n||[]).some(function(r,o){if(r.guid===e){for(var i in t)r[i]=t[i],"is_delete"===i&&+t.is_delete>=1&&n.splice(o,1);return!0}return!1})}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return new Promise(function(r,o){(0,j.ajaxPost)("/smapi/search/files",{keyword:e,page:t,pageSize:n}).then(function(e){0===e.code&&e.data?r({page:e.data.page,results:e.data.results||[],count:e.data.count,pageCount:e.data.pageCount}):o(new Error(e.message))},function(e){o(e)})})}function _(e){return new Promise(function(t,n){var r="/smapi/files/"+e+"/star";(0,j.ajaxPut)(r).then(function(e){0===e.code?t():n(new Error("标星操作失败"))},function(){n(new Error("标星操作失败"))})})}function w(e){return new Promise(function(t,n){var r="/smapi/files/"+e+"/star";(0,j.ajaxDelete)(r).then(function(e){0===e.code?t():n(new Error("标星操作失败"))},function(){n(new Error("标星操作失败"))})})}function k(e){return new Promise(function(t,n){var r=I.COLLABORATORS.replace("{%guid%}",e);(0,j.ajaxGet)(r).then(function(e){0===e.code?t(e.data):n(new Error(e.error))},function(e){n(e)})})}function E(){return""===cow.welcomeFile?"欢迎使用石墨文档"===cow.currentFile.name:cow.currentFile.guid===cow.welcomeFile}function C(e){var t=e;return!(!cow.exampleFiles||!cow.exampleFiles.length)&&(t||(t=cow.currentFile.guid),cow.exampleFiles.split(",").some(function(e){return t===e}))}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise(function(n,r){e=e||"";var i="/-/"+e;(0,j.ajaxGet)(i).then(function(e){0===e.code&&e.data.file?(t.length&&(e.data.file=o.pick(e.data.file,t),t.indexOf("children")>-1&&e.data.file.children&&(e.data.file.children=e.data.file.children.map(function(e){return o.pick(e,t)}))),n(e.data.file)):r(new Error("文件获取失败"))},function(){return r(new Error("文件获取失败"))})})}function T(){return M("",arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])}function S(e){return new Promise(function(t,n){if(!e)return n(new Error("get file failed"));d(e.guid).then(function(r){var o="";r.length&&(o=r.slice(-1)[0].guid),M(o).then(function(n){var o={includedFileGuid:e.guid,crumbList:r};t({crumbInfo:o,file:n})},function(){return n(new Error("文件已被删除，或失去访问权限"))})},function(){return n(new Error("文件已被删除，或失去访问权限"))})})}Object.defineProperty(t,"__esModule",{value:!0});var O=n(5),P=i(O),x=n(9),N=i(x),j=n(22),I=n(69);t.default={updateTitle:a,updateFile:s,destroyFavoriteFile:l,createFavoriteFile:u,createCopyFile:c,createFile:f,getAncestors:d,quiteShare:h,resortList:y,moveToFolder:m,searchFile:b,starFile:_,unstarFile:w,getFileCollaborators:k,checkIsWelcomeFile:E,checkIsExampleFile:C,getFile:M,getDesktop:T,getDirectoryInfo:S},e.exports=t.default}).call(t,n(2),n(1))},,,,,,function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(135),o=n(303),i=n(202),a=Object.defineProperty;t.f=n(80)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(137)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(306),o=n(203);e.exports=function(e){return r(o(e))}},,function(e,t,n){var r=n(68),o=n(78),i=n(302),a=n(85),s="prototype",u=function(e,t,n){var l,c,f,d=e&u.F,p=e&u.G,h=e&u.S,m=e&u.P,y=e&u.B,v=e&u.W,g=p?o:o[t]||(o[t]={}),b=g[s],_=p?r:h?r[t]:(r[t]||{})[s];p&&(n=t);for(l in n)(c=!d&&_&&void 0!==_[l])&&l in g||(f=c?_[l]:n[l],g[l]=p&&"function"!=typeof _[l]?n[l]:y&&c?i(f,r):v&&_[l]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[s]=e[s],t}(f):m&&"function"==typeof f?i(Function.call,f):f,m&&((g.virtual||(g.virtual={}))[l]=f,e&u.R&&b&&!b[l]&&a(b,l,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(79),o=n(153);e.exports=n(80)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(206)("wks"),o=n(154),i=n(68).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},,function(e,t,n){var r,o;r=[n(196)],void 0!==(o=function(e){var t={};return t.error=function(e){var t=new Error(e);throw t.easysync=!0,t},t.assert=function(e,n){if(!e){var r=Array.prototype.slice.call(arguments,1).join("");t.error("Failed assertion: "+r)}},t.parseNum=function(e){return parseInt(e,36)},t.numToString=function(e){return e.toString(36).toLowerCase()},t.toBaseTen=function(e){var n=e.indexOf("$"),r=e.substring(0,n),o=e.substring(n);return r.replace(/[0-9a-z]+/g,function(e){return String(t.parseNum(e))})+o},t.oldLen=function(e){return t.unpack(e).oldLen},t.newLen=function(e){return t.unpack(e).newLen},t.opIterator=function(e,n){function r(){c=l;var n;return s.lastIndex=l,n=s.exec(e),l=s.lastIndex,"?"==n[0]&&t.error("Hit error opcode in op stream"),n}function o(e){var n=e||d;return f[0]?(n.attribs=f[1],n.lines=t.parseNum(f[2]||0),n.opcode=f[3],n.chars=t.parseNum(f[4]),f=r()):t.clearOp(n),n}function i(){return!!f[0]}function a(){return c}var s=/((?:\*[0-9a-z]+)*)(?:\|([0-9a-z]+))?([-+=])([0-9a-z]+)|\?|/g,u=n||0,l=u,c=l,f=r(),d=t.newOp();return{next:o,hasNext:i,lastIndex:a}},t.clearOp=function(e){e.opcode="",e.chars=0,e.lines=0,e.attribs=""},t.newOp=function(e){return{opcode:e||"",chars:0,lines:0,attribs:""}},t.cloneOp=function(e){return{opcode:e.opcode,chars:e.chars,lines:e.lines,attribs:e.attribs}},t.copyOp=function(e,t){t.opcode=e.opcode,t.chars=e.chars,t.lines=e.lines,t.attribs=e.attribs},t.opString=function(e){if(!e.opcode)return"null";var n=t.opAssembler();return n.append(e),n.toString()},t.stringOp=function(e){return t.opIterator(e).next()},t.checkRep=function(e){for(var n=t.unpack(e),r=n.oldLen,o=n.newLen,i=n.ops,a=n.charBank,s=t.smartOpAssembler(),u=0,l=0,c=0,f=t.opIterator(i);f.hasNext();){var d=f.next();switch(d.opcode){case"=":u+=d.chars,l+=d.chars;break;case"-":u+=d.chars,t.assert(u<r,u," >= ",r," in ",e);break;case"+":l+=d.chars,c+=d.chars,t.assert(l<o,l," >= ",o," in ",e)}s.append(d)}for(l+=r-u,a=a.substring(0,c);a.length<c;)a+="?";s.endDocument();var p=t.pack(r,l,s.toString(),a);return t.assert(p==e,"Invalid changeset (checkRep failed)"),e},t.smartOpAssembler=function(){function e(){d.append(f.toString()),f.clear()}function n(){d.append(l.toString()),l.clear(),d.append(c.toString()),c.clear()}function r(t){t.opcode&&t.chars&&("-"==t.opcode?("="==p&&e(),l.append(t),h-=t.chars):"+"==t.opcode?("="==p&&e(),c.append(t),h+=t.chars):"="==t.opcode&&("="!=p&&n(),f.append(t)),p=t.opcode)}function o(e,n,o,i){var a=t.newOp(e);a.attribs=t.makeAttribsString(e,o,i);var s=n.lastIndexOf("\n");s<0?(a.chars=n.length,a.lines=0,r(a)):(a.chars=s+1,a.lines=n.match(/\n/g).length,r(a),a.chars=n.length-(s+1),a.lines=0,r(a))}function i(){return n(),e(),d.toString()}function a(){l.clear(),c.clear(),f.clear(),d.clear(),h=0}function s(){f.endDocument()}function u(){return h}var l=t.mergingOpAssembler(),c=t.mergingOpAssembler(),f=t.mergingOpAssembler(),d=t.stringAssembler(),p="",h=0;return{append:r,toString:i,clear:a,endDocument:s,appendOpWithText:o,getLengthChange:u}},t.mergingOpAssembler=function(){function e(e){s.opcode&&(e&&"="==s.opcode&&!s.attribs||(a.append(s),u&&(s.chars=u,s.lines=0,a.append(s),u=0)),s.opcode="")}function n(n){n.chars>0&&(s.opcode==n.opcode&&s.attribs==n.attribs?n.lines>0?(s.chars+=u+n.chars,s.lines+=n.lines,u=0):0==s.lines?s.chars+=n.chars:u+=n.chars:(e(),t.copyOp(n,s)))}function r(){e(!0)}function o(){return e(),a.toString()}function i(){a.clear(),t.clearOp(s)}var a=t.opAssembler(),s=t.newOp(),u=0;return{append:n,toString:o,clear:i,endDocument:r}},t.opAssembler=function(){function e(e){o.push(e.attribs),e.lines&&o.push("|",t.numToString(e.lines)),o.push(e.opcode),o.push(t.numToString(e.chars))}function n(){return o.join("")}function r(){o.length=0}var o=[];return{append:e,toString:n,clear:r}},t.stringIterator=function(e){function n(e){t.assert(e<=a(),"!(",e," <= ",a(),")")}function r(t){n(t);var r=e.substr(u,t);return u+=t,r}function o(t){return n(t),e.substr(u,t)}function i(e){n(e),u+=e}function a(){return e.length-u}function s(){return u}var u=0;return{take:r,skip:i,remaining:a,peek:o,currentIndex:s}},t.stringAssembler=function(){function e(e){var t=String(e);i.push(t),a+=t.length}function t(){var e=i.pop();return a-=e.length,e}function n(){return i[i.length-1]}function r(){return i.join("")}function o(){return a}var i=[],a=0;return{append:e,pop:t,last:n,toString:r,length:o}},t.textLinesMutator=function(e){function n(t){e.splice.apply(e,t)}function r(t){return e.get?e.get(t):e[t]}function o(t,n){return e.slice?e.slice(t,n):[]}function i(){return"number"==typeof e.length?e.length:e.length()}function a(){v[0]=b,v[1]=0,_>0&&l(),g=!0}function s(){n(v),v.length=2,v[0]=v[1]=0,g=!1}function u(){return b-v[0]<v.length-2}function l(){return u()||(v.push(r(v[0]+v[1])),v[1]++),2+b-v[0]}function c(e,t){if(e)if(t){g||a();for(var n=0;n<e;n++)_=0,l(),b++}else g&&(e>1?s():l()),b+=e,_=0}function f(e,t,n){e&&(t?c(t,n):(n&&!g&&a(),g&&l(),_+=e))}function d(e){var t="";if(e){var n=function(e){var t=v[0]+v[1];return o(t,t+e).join("")};if(g||a(),u())if(0==_)t=v[v.length-1],v.length--,t+=n(e-1),v[1]+=e-1;else{t=n(e-1),v[1]+=e-1;var i=v.length-1;t=v[i].substring(_)+t,v[i]=v[i].substring(0,_)+r(v[0]+v[1]),v[1]+=1}else t=n(e),v[1]+=e}return t}function p(e,t){var n="";if(e){if(t)return d(t);g||a();var r=l();n=v[r].substring(_,_+e),v[r]=v[r].substring(0,_)+v[r].substring(_+e)}return n}function h(e,n){if(e)if(g||a(),n){var r=t.splitTextLines(e);if(u()){var o=v.length-1,i=v[o],s=_;v[o]=i.substring(0,s)+r[0],b++,r.splice(0,1),Array.prototype.push.apply(v,r),b+=r.length,v.push(i.substring(s)),_=0}else Array.prototype.push.apply(v,r),b+=r.length}else{var o=l();v[o]=v[o].substring(0,_)+e+v[o].substring(_),_+=e.length}}function m(){var e=i();return g&&(e+=v.length-2-v[1]),b<e}function y(){g&&s()}var v=[0,0],g=!1,b=0,_=0;return{skip:f,remove:p,insert:h,close:y,hasMore:m,removeLines:d,skipLines:c}},t.applyZip=function(e,n,r,o,i){for(var a=t.opIterator(e,n),s=t.opIterator(r,o),u=t.smartOpAssembler(),l=t.newOp(),c=t.newOp(),f=t.newOp();l.opcode||a.hasNext()||c.opcode||s.hasNext();)!l.opcode&&a.hasNext()&&a.next(l),!c.opcode&&s.hasNext()&&s.next(c),i(l,c,f),f.opcode&&(u.append(f),f.opcode="");return u.endDocument(),u.toString()},t.unpack=function(e){var n=/Z:([0-9a-z]+)([><])([0-9a-z]+)|/,r=n.exec(e);r&&r[0]||t.error("Not a exports: "+e);var o=t.parseNum(r[1]),i=">"==r[2]?1:-1,a=t.parseNum(r[3]),s=o+i*a,u=r[0].length,l=e.indexOf("$");return l<0&&(l=e.length),{oldLen:o,newLen:s,ops:e.substring(u,l),charBank:e.substring(l+1)}},t.pack=function(e,n,r,o){var i=n-e,a=i>=0?">"+t.numToString(i):"<"+t.numToString(-i),s=[];return s.push("Z:",t.numToString(e),a,r,"$",o),s.join("")},t.applyToText=function(e,n){var r=t.unpack(e);t.assert(n.length==r.oldLen,"mismatched apply: ",n.length," / ",r.oldLen);for(var o=t.opIterator(r.ops),i=t.stringIterator(r.charBank),a=t.stringIterator(n),s=t.stringAssembler();o.hasNext();){var u=o.next();switch(u.opcode){case"+":if(u.lines!=i.peek(u.chars).split("\n").length-1)throw new Error("newline count is wrong in op +; cs:"+e+" and text:"+n);s.append(i.take(u.chars));break;case"-":if(u.lines!=a.peek(u.chars).split("\n").length-1)throw new Error("newline count is wrong in op -; cs:"+e+" and text:"+n);a.skip(u.chars);break;case"=":if(u.lines!=a.peek(u.chars).split("\n").length-1)throw new Error("newline count is wrong in op =; cs:"+e+" and text:"+n);s.append(a.take(u.chars))}}return s.append(a.take(a.remaining())),s.toString()},t.mutateTextLines=function(e,n){for(var r=t.unpack(e),o=t.opIterator(r.ops),i=t.stringIterator(r.charBank),a=t.textLinesMutator(n);o.hasNext();){var s=o.next();switch(s.opcode){case"+":a.insert(i.take(s.chars),s.lines);break;case"-":a.remove(s.chars,s.lines);break;case"=":a.skip(s.chars,s.lines,!!s.attribs)}}a.close()},t.composeAttributes=function(e,n,r,o){if(!e&&r)return n;if(!n)return e;var i=[];e.replace(/\*([0-9a-z]+)/g,function(e,n){return i.push(o.getAttrib(t.parseNum(n))),""}),n.replace(/\*([0-9a-z]+)/g,function(e,n){for(var a=o.getAttrib(t.parseNum(n)),s=!1,u=0;u<i.length;u++){var l=i[u];if(l[0]==a[0]){a[1]||r?l[1]=a[1]:i.splice(u,1),s=!0;break}}return s||!a[1]&&!r||i.push(a),""}),i.sort();for(var a=t.stringAssembler(),s=0;s<i.length;s++)a.append("*"),a.append(t.numToString(o.putAttrib(i[s])));return a.toString()},t._slicerZipperFunc=function(e,n,r,o){if("-"==e.opcode)t.copyOp(e,r),e.opcode="";else if(e.opcode)switch(n.opcode){case"-":n.chars<=e.chars?("="==e.opcode&&(r.opcode="-",r.chars=n.chars,r.lines=n.lines,r.attribs=""),e.chars-=n.chars,e.lines-=n.lines,n.opcode="",e.chars||(e.opcode="")):("="==e.opcode&&(r.opcode="-",r.chars=e.chars,r.lines=e.lines,r.attribs=""),n.chars-=e.chars,n.lines-=e.lines,e.opcode="");break;case"+":t.copyOp(n,r),n.opcode="";break;case"=":n.chars<=e.chars?(r.opcode=e.opcode,r.chars=n.chars,r.lines=n.lines,r.attribs=t.composeAttributes(e.attribs,n.attribs,"="==e.opcode,o),n.opcode="",e.chars-=n.chars,e.lines-=n.lines,e.chars||(e.opcode="")):(r.opcode=e.opcode,r.chars=e.chars,r.lines=e.lines,r.attribs=t.composeAttributes(e.attribs,n.attribs,"="==e.opcode,o),e.opcode="",n.chars-=e.chars,n.lines-=e.lines);break;case"":t.copyOp(e,r),e.opcode=""}else t.copyOp(n,r),n.opcode=""},t.applyToAttribution=function(e,n,r){var o=t.unpack(e);return t.applyZip(n,0,o.ops,0,function(e,n,o){return t._slicerZipperFunc(e,n,o,r)})},t.mutateAttributionLines=function(e,n,r){function o(){return d&&d.hasNext()||f.hasMore()}function i(e){if((!d||!d.hasNext())&&f.hasMore()){var n=f.removeLines(1);d=t.opIterator(n)}d&&d.hasNext()?d.next(e):e.opcode=""}function a(e){p||(p=t.mergingOpAssembler()),p.append(e),e.lines>0&&(t.assert(1==e.lines,"Can't have op.lines of ",e.lines," in attribution lines"),f.insert(p.toString(),1),p=null)}for(var s=t.unpack(e),u=t.opIterator(s.ops),l=s.charBank,c=0,f=t.textLinesMutator(n),d=null,p=null,h=t.newOp(),m=t.newOp(),y=t.newOp();(h.opcode||u.hasNext()||m.opcode||o())&&(!h.opcode&&u.hasNext()&&u.next(h),h.opcode||m.opcode||p||d&&d.hasNext());)if(!("="==h.opcode&&h.lines>0)||h.attribs||m.opcode||p||d&&d.hasNext())if("+"==h.opcode){if(h.lines>1){var v=l.indexOf("\n",c)+1-c;t.copyOp(h,y),h.chars-=v,h.lines--,y.lines=1,y.chars=v}else t.copyOp(h,y),h.opcode="";a(y),c+=y.chars,y.opcode=""}else!m.opcode&&o()&&i(m),t._slicerZipperFunc(m,h,y,r),y.opcode&&(a(y),y.opcode="");else f.skipLines(h.lines),h.opcode="";t.assert(!p,"line assembler not finished"),f.close()},t.joinAttributionLines=function(e){for(var n=t.mergingOpAssembler(),r=0;r<e.length;r++)for(var o=e[r],i=t.opIterator(o);i.hasNext();)n.append(i.next());return n.toString()},t.splitAttributionLines=function(e,n){function r(e){i.append(e),e.lines>0&&(a.push(i.toString()),i.clear()),s+=e.chars}for(var o=t.opIterator(e),i=t.mergingOpAssembler(),a=[],s=0;o.hasNext();){for(var u=o.next(),l=u.chars,c=u.lines;c>1;){var f=n.indexOf("\n",s)+1;t.assert(f>0,"newlineEnd <= 0 in splitAttributionLines"),u.chars=f-s,u.lines=1,r(u),l-=u.chars,c-=u.lines}1==c&&(u.chars=l,u.lines=1),r(u)}return a},t.splitTextLines=function(e){return e.match(/[^\n]*(?:\n|[^\n]$)/g)},t.compose=function(e,n,r){var o=t.unpack(e),i=t.unpack(n),a=o.oldLen,s=o.newLen;t.assert(s==i.oldLen,"mismatched composition of two changesets");var u=i.newLen,l=t.stringIterator(o.charBank),c=t.stringIterator(i.charBank),f=t.stringAssembler(),d=t.applyZip(o.ops,0,i.ops,0,function(e,n,o){var i=e.opcode,a=n.opcode;"+"==i&&"-"==a&&l.skip(Math.min(e.chars,n.chars)),t._slicerZipperFunc(e,n,o,r),"+"==o.opcode&&("+"==a?f.append(c.take(o.chars)):f.append(l.take(o.chars)))});return t.pack(a,u,d,f.toString())},t.attributeTester=function(e,n){function r(e){return!1}if(!n)return r;var o=n.putAttrib(e,!0);if(o<0)return r;var i=new RegExp("\\*"+t.numToString(o)+"(?!\\w)");return function(e){return i.test(e)}},t.identity=function(e){return t.pack(e,e,"","")},t.makeSplice=function(e,n,r,o,i,a){var s=e.length;n>=s&&(n=s-1),r>e.length-n-1&&(r=e.length-n-1);var u=e.substring(n,n+r),l=s+o.length-u.length,c=t.smartOpAssembler();return c.appendOpWithText("=",e.substring(0,n)),c.appendOpWithText("-",u),c.appendOpWithText("+",o,i,a),c.endDocument(),t.pack(s,l,c.toString(),o)},t.toSplices=function(e){for(var n=t.unpack(e),r=[],o=0,i=t.opIterator(n.ops),a=t.stringIterator(n.charBank),s=!1;i.hasNext();){var u=i.next();"="==u.opcode?(o+=u.chars,s=!1):(s||(r.push([o,o,""]),s=!0),"-"==u.opcode?(o+=u.chars,r[r.length-1][1]+=u.chars):"+"==u.opcode&&(r[r.length-1][2]+=a.take(u.chars)))}return r},t.characterRangeFollow=function(e,n,r,o){for(var i=n,a=r,s=t.toSplices(e),u=0,l=0;l<s.length;l++){var c=s[l],f=c[0]+u,d=c[1]+u,p=c[2].length,h=p-(d-f);f<=i&&d>=a?i=a=o?f:f+p:d<=i?(i+=h,a+=h):f>=a||(f>=i&&d<=a?a+=h:d<a?(i=f+p,a+=h):a=f),u+=h}return[i,a]},t.moveOpsToNewPool=function(e,n,r){var o=e.indexOf("$");o<0&&(o=e.length);var i=e.substring(0,o),a=e.substring(o);return i.replace(/\*([0-9a-z]+)/g,function(e,o){var i=t.parseNum(o),a=n.getAttrib(i);a||t.error("Can't copy unknown attrib (reference attrib string to non-existant pool entry). Inconsistent attrib state!");var s=r.putAttrib(a);return"*"+t.numToString(s)})+a},t.makeAttribution=function(e){var n=t.smartOpAssembler();return n.appendOpWithText("+",e),n.toString()},t.eachAttribNumber=function(e,n){var r=e.indexOf("$");r<0&&(r=e.length),e.substring(0,r).replace(/\*([0-9a-z]+)/g,function(e,r){return n(t.parseNum(r)),""})},t.filterAttribNumbers=function(e,n){return t.mapAttribNumbers(e,n)},t.mapAttribNumbers=function(e,n){var r=e.indexOf("$");return r<0&&(r=e.length),e.substring(0,r).replace(/\*([0-9a-z]+)/g,function(e,r){var o=n(t.parseNum(r));return!0===o?e:"number"==typeof o?"*"+t.numToString(o):""})+e.substring(r)},t.makeAText=function(e,n){return{text:e,attribs:n||t.makeAttribution(e)}},t.applyToAText=function(e,n,r){return{text:t.applyToText(e,n.text),attribs:t.applyToAttribution(e,n.attribs,r)}},t.cloneAText=function(e){return{text:e.text,attribs:e.attribs}},t.copyAText=function(e,t){t.text=e.text,t.attribs=e.attribs},t.appendATextToAssembler=function(e,n){for(var r=t.opIterator(e.attribs),o=t.newOp();r.hasNext();)if(r.next(o),r.hasNext())n.append(o);else if(o.lines<=1)o.lines=0,--o.chars&&n.append(o);else{var i=e.text.lastIndexOf("\n",e.text.length-2)+1,a=e.text.length-i-1;o.lines--,o.chars-=a+1,n.append(o),o.lines=0,o.chars=a,o.chars&&n.append(o)}},t.prepareForWire=function(n,r){var o=new e;return{translated:t.moveOpsToNewPool(n,r,o),pool:o}},t.isIdentity=function(e){var n=t.unpack(e);return""==n.ops&&n.oldLen==n.newLen},t.opAttributeValue=function(e,n,r){return t.attribsAttributeValue(e.attribs,n,r)},t.attribsAttributeValue=function(e,n,r){var o="";return e&&t.eachAttribNumber(e,function(e){r.getAttribKey(e)==n&&(o=r.getAttribValue(e))}),o},t.builder=function(e){var n=t.smartOpAssembler(),r=t.newOp(),o=t.stringAssembler(),i={keep:function(e,o,a,s){return r.opcode="=",r.attribs=a&&t.makeAttribsString("=",a,s)||"",r.chars=e,r.lines=o||0,n.append(r),i},keepText:function(e,t,r){return n.appendOpWithText("=",e,t,r),i},insert:function(e,t,r){return n.appendOpWithText("+",e,t,r),o.append(e),i},remove:function(e,t){return r.opcode="-",r.attribs="",r.chars=e,r.lines=t||0,n.append(r),i},toString:function(){n.endDocument();var r=e+n.getLengthChange();return t.pack(e,r,n.toString(),o.toString())}};return i},t.makeAttribsString=function(e,n,r){if(!n)return"";if("string"==typeof n)return n;if(r&&n&&n.length){n.length>1&&(n=n.slice(),n.sort());for(var o=[],i=0;i<n.length;i++){var a=n[i];("="==e||"+"==e&&a[1])&&o.push("*"+t.numToString(r.putAttrib(a)))}return o.join("")}},t.subattribution=function(e,n,r){function o(){if(u.chars)for(;u.opcode&&(s.opcode||i.hasNext());)s.opcode||i.next(s),u.opcode&&s.opcode&&u.chars>=s.chars&&s.lines>0&&u.lines<=0&&u.lines++,t._slicerZipperFunc(s,u,l,null),l.opcode&&(a.append(l),l.opcode="")}var i=t.opIterator(e,0),a=t.smartOpAssembler(),s=t.newOp(),u=t.newOp(),l=t.newOp();if(u.opcode="-",u.chars=n,o(),void 0===r)for(s.opcode&&a.append(s);i.hasNext();)i.next(s),a.append(s);else u.opcode="=",u.chars=r-n,o();return a.toString()},t.inverse=function(e,n,r,o){function i(e){return n.get?n.get(e):n[e]}function a(e){return r.get?r.get(e):r[e]}function s(e,n){if(!h||f!=d){h=t.opIterator(a(d)),f=d;for(var r=0,o=!1;!o&&h.hasNext();)h.next(m),r+m.chars>=p?(m.chars-=p-r,o=!0):r+=m.chars}for(;e>0;){m.chars||h.hasNext()||(d++,p=0,f=d,m.chars=0,h=t.opIterator(a(d))),m.chars||h.next(m);var i=Math.min(e,m.chars);n(i,m.attribs,i==m.chars&&m.lines>0),e-=i,m.chars-=i,p+=i}m.chars||h.hasNext()||(d++,p=0)}function u(e,t){t?(d+=t,p=0):h&&f==d?s(e,function(){}):p+=e}function l(e){var n=0,r=t.stringAssembler(),o=i(d).substring(p);n+=o.length,r.append(o);for(var a=d+1;n<e;){var s=i(a);n+=s.length,r.append(s),a++}return r.toString().substring(0,e)}function c(e){var t={};return function(n){return t[n]||(t[n]=e(n)),t[n]}}for(var f,d=0,p=0,h=null,m=t.newOp("+"),y=t.unpack(e),v=t.opIterator(y.ops),g=t.builder(y.newLen),b=[],_=[];v.hasNext();){var w=v.next();if("="==w.opcode)if(w.attribs){b.length=0,_.length=0,t.eachAttribNumber(w.attribs,function(e){b.push(o.getAttribKey(e)),_.push(o.getAttribValue(e))});var k=c(function(e){for(var n=[],r=0;r<b.length;r++){var i=b[r],a=_[r],s=t.attribsAttributeValue(e,i,o);a!=s&&n.push([i,s])}return t.makeAttribsString("=",n,o)});s(w.chars,function(e,t,n){g.keep(e,n?1:0,k(t))})}else u(w.chars,w.lines),g.keep(w.chars,w.lines);else if("+"==w.opcode)g.remove(w.chars,w.lines);else if("-"==w.opcode){var E=l(w.chars),C=0;s(w.chars,function(e,t,n){g.insert(E.substr(C,e),t),C+=e})}}return t.checkRep(g.toString())},t.follow=function(e,n,r,o){var i=t.unpack(e),a=t.unpack(n),s=i.oldLen,u=a.oldLen;t.assert(s==u,"mismatched follow - cannot transform cs1 on top of cs2");var l=t.stringIterator(i.charBank),c=t.stringIterator(a.charBank),f=i.newLen,d=0,p=0,h=t.attributeTester(["insertorder","first"],o),m=t.applyZip(i.ops,0,a.ops,0,function(e,n,i){if("+"==e.opcode||"+"==n.opcode){var a;if("+"!=n.opcode)a=1;else if("+"!=e.opcode)a=2;else{var s=l.peek(1),u=c.peek(1),f=h(e.attribs),m=h(n.attribs);a=f&&!m?1:m&&!f?2:"\n"==s&&"\n"!=u?2:"\n"!=s&&"\n"==u?1:r?2:1}1==a?(l.skip(e.chars),i.opcode="=",i.lines=e.lines,i.chars=e.chars,i.attribs="",e.opcode=""):(c.skip(n.chars),t.copyOp(n,i),n.opcode="")}else"-"==e.opcode?n.opcode?e.chars<=n.chars?(n.chars-=e.chars,n.lines-=e.lines,e.opcode="",n.chars||(n.opcode="")):(e.chars-=n.chars,e.lines-=n.lines,n.opcode=""):e.opcode="":"-"==n.opcode?(t.copyOp(n,i),e.opcode?n.chars<=e.chars?(e.chars-=n.chars,e.lines-=n.lines,n.opcode="",e.chars||(e.opcode="")):(i.lines=e.lines,i.chars=e.chars,n.lines-=e.lines,n.chars-=e.chars,e.opcode=""):n.opcode=""):e.opcode?n.opcode?(i.opcode="=",i.attribs=t.followAttributes(e.attribs,n.attribs,o),e.chars<=n.chars?(i.chars=e.chars,i.lines=e.lines,n.chars-=e.chars,n.lines-=e.lines,e.opcode="",n.chars||(n.opcode="")):(i.chars=n.chars,i.lines=n.lines,e.chars-=n.chars,e.lines-=n.lines,n.opcode="")):e.opcode="":(t.copyOp(n,i),n.opcode="");switch(i.opcode){case"=":d+=i.chars,p+=i.chars;break;case"-":d+=i.chars;break;case"+":p+=i.chars}});return p+=f-d,t.pack(f,p,m,a.charBank)},t.followAttributes=function(e,n,r){if(!n||!r)return"";if(!e)return n;var o=[];n.replace(/\*([0-9a-z]+)/g,function(e,n){return o.push(r.getAttrib(t.parseNum(n))),""}),e.replace(/\*([0-9a-z]+)/g,function(e,n){for(var i=r.getAttrib(t.parseNum(n)),a=0;a<o.length;a++){var s=o[a];if(i[0]==s[0]){i[1]<=s[1]&&o.splice(a,1);break}}return""});for(var i=t.stringAssembler(),a=0;a<o.length;a++)i.append("*"),i.append(t.numToString(r.putAttrib(o[a])));return i.toString()},t.composeWithDeletions=function(e,n,r){var o=t.unpack(e),i=t.unpack(n),a=o.oldLen,s=o.newLen;t.assert(s==i.oldLen,"mismatched composition of two changesets");var u=i.newLen,l=t.stringIterator(o.charBank),c=t.stringIterator(i.charBank),f=t.stringAssembler(),d=t.applyZip(o.ops,0,i.ops,0,function(e,n,o){var i=e.opcode,a=n.opcode;"+"==i&&"-"==a&&l.skip(Math.min(e.chars,n.chars)),t._slicerZipperFuncWithDeletions(e,n,o,r),"+"==o.opcode&&("+"==a?f.append(c.take(o.chars)):f.append(l.take(o.chars)))});return t.pack(a,u,d,f.toString())},t._slicerZipperFuncWithDeletions=function(e,n,r,o){if("-"==e.opcode)t.copyOp(e,r),e.opcode="";else if(e.opcode)switch(n.opcode){case"-":n.chars<=e.chars?("="==e.opcode&&(r.opcode="-",r.chars=n.chars,r.lines=n.lines,r.attribs=n.attribs),e.chars-=n.chars,e.lines-=n.lines,n.opcode="",e.chars||(e.opcode="")):("="==e.opcode&&(r.opcode="-",r.chars=e.chars,r.lines=e.lines,r.attribs=n.attribs),n.chars-=e.chars,n.lines-=e.lines,e.opcode="");break;case"+":t.copyOp(n,r),n.opcode="";break;case"=":n.chars<=e.chars?(r.opcode=e.opcode,r.chars=n.chars,r.lines=n.lines,r.attribs=t.composeAttributes(e.attribs,n.attribs,"="==e.opcode,o),n.opcode="",e.chars-=n.chars,e.lines-=n.lines,e.chars||(e.opcode="")):(r.opcode=e.opcode,r.chars=e.chars,r.lines=e.lines,r.attribs=t.composeAttributes(e.attribs,n.attribs,"="==e.opcode,o),e.opcode="",n.chars-=e.chars,n.lines-=e.lines);break;case"":t.copyOp(e,r),e.opcode=""}else t.copyOp(n,r),n.opcode=""},t}.apply(t,r))&&(e.exports=o)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1);t.clone=function(e){return"object"!=typeof e||null===e?e:i.cloneDeep(e,function(e){if("object"==typeof e&&e&&"function"==typeof e.clone)return e.clone()})},t.freeze=function(e){return e},t.isFrozen=function(e){return!1};var a=function(){function e(t){r(this,e),this.ops=t,this.index=0,this.offset=0}return o(e,[{key:"hasNext",value:function(){return this.peekLength()<1/0}},{key:"next",value:function(e){e||(e=1/0);var t=this.ops[this.index];if(!t)return null;var n=this.offset,r=t.length;if(0===n&&r===e)return this.index+=1,t;e>=r-n?(e=r-n,this.index+=1,this.offset=0):this.offset+=e;var o={action:t.action,attributes:t.attributes};switch(t.action){case"remove":o.data=e;break;case"retain":if("number"==typeof t.data)o.data=e;else{if("string"==typeof t.data)throw new Error("retain with a string is not allowed");o.data=t.data}break;case"insert":"string"==typeof t.data?o.data=t.data.substr(n,e):"number"==typeof t.data?o.data=e:o.data=t.data}return t.createInstance(o)}},{key:"peekLength",value:function(){var e=this.ops[this.index];return e?e.length-this.offset:1/0}},{key:"peekAction",value:function(){var e=this.ops[this.index];return e?e.action:"retain"}}]),e}();t.OperatorIterator=a,t.parsePosition=function(e){for(var t=0,n=0,r=0;r<e.length;r++){var o=e[r].charCodeAt(0);if(o>=65&&o<=90)n=26*n+o-64;else{if(!(o>=48&&o<=57))throw new Error("Invalid cell position "+e);t=10*t+o-48}}return{row:t-1,col:n-1}},t.stringifyPosition=function(e,t){if(!(e>=0&&t>=0))throw new Error("Invalid cell position "+e+":"+t);for(var n=t+1,r="";n>0;){var o=(n-1)%26;r=String.fromCharCode(65+o)+r,n=Math.floor((n-o)/26)}return r+(e+1)}},,,,function(e,t,n){var r=n(136);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(305),o=n(207);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(309),i=r(o);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(184),i=r(o);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(490),i=r(o),a=n(494),s=r(a),u=n(184),l=r(u);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,l.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";function r(e,t){return e+t}function o(e,t,n){var r=n;{if("object"!==(void 0===t?"undefined":M(t)))return void 0!==r?("number"==typeof r&&(r+="px"),void(e.style[t]=r)):O(e,t);for(var i in t)t.hasOwnProperty(i)&&o(e,i,t[i])}}function i(e){var t=void 0,n=void 0,r=void 0,o=e.ownerDocument,i=o.body,a=o&&o.documentElement;return t=e.getBoundingClientRect(),n=t.left,r=t.top,n-=a.clientLeft||i.clientLeft||0,r-=a.clientTop||i.clientTop||0,{left:n,top:r}}function a(e,t){var n=e["page"+(t?"Y":"X")+"Offset"],r="scroll"+(t?"Top":"Left");if("number"!=typeof n){var o=e.document;n=o.documentElement[r],"number"!=typeof n&&(n=o.body[r])}return n}function s(e){return a(e)}function u(e){return a(e,!0)}function l(e){var t=i(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=s(r),t.top+=u(r),t}function c(e,t,n){var r=n,o="",i=e.ownerDocument;return r=r||i.defaultView.getComputedStyle(e,null),r&&(o=r.getPropertyValue(t)||r[t]),o}function f(e,t){var n=e[N]&&e[N][t];if(P.test(n)&&!x.test(t)){var r=e.style,o=r[I],i=e[j][I];e[j][I]=e[N][I],r[I]="fontSize"===t?"1em":n||0,n=r.pixelLeft+D,r[I]=o,e[j][I]=i}return""===n?"auto":n}function d(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function p(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function h(e,t,n){"static"===o(e,"position")&&(e.style.position="relative");var i=-999,a=-999,s=d("left",n),u=d("top",n),c=p(s),f=p(u);"left"!==s&&(i=999),"top"!==u&&(a=999);var h="",m=l(e);("left"in t||"top"in t)&&(h=(0,T.getTransitionProperty)(e)||"",(0,T.setTransitionProperty)(e,"none")),"left"in t&&(e.style[c]="",e.style[s]=i+"px"),"top"in t&&(e.style[f]="",e.style[u]=a+"px");var y=l(e),v={};for(var g in t)if(t.hasOwnProperty(g)){var b=d(g,n),_="left"===g?i:a,w=m[g]-y[g];v[b]=b===g?_+w:_-w}o(e,v),r(e.offsetTop,e.offsetLeft),("left"in t||"top"in t)&&(0,T.setTransitionProperty)(e,h);var k={};for(var E in t)if(t.hasOwnProperty(E)){var C=d(E,n),M=t[E]-m[E];k[C]=E===C?v[C]+M:v[C]-M}o(e,k)}function m(e,t){var n=l(e),r=(0,T.getTransformXY)(e),o={x:r.x,y:r.y};"left"in t&&(o.x=r.x+t.left-n.left),"top"in t&&(o.y=r.y+t.top-n.top),(0,T.setTransformXY)(e,o)}function y(e,t,n){n.useCssRight||n.useCssBottom?h(e,t,n):n.useCssTransform&&(0,T.getTransformName)()in document.body.style?m(e,t,n):h(e,t,n)}function v(e,t){for(var n=0;n<e.length;n++)t(e[n])}function g(e){return"border-box"===O(e,"boxSizing")}function b(e,t,n){var r={},o=e.style,i=void 0;for(i in t)t.hasOwnProperty(i)&&(r[i]=o[i],o[i]=t[i]);n.call(e);for(i in t)t.hasOwnProperty(i)&&(o[i]=r[i])}function _(e,t,n){var r=0,o=void 0,i=void 0,a=void 0;for(i=0;i<t.length;i++)if(o=t[i])for(a=0;a<n.length;a++){var s=void 0;s="border"===o?""+o+n[a]+"Width":o+n[a],r+=parseFloat(O(e,s))||0}return r}function w(e){return null!==e&&void 0!==e&&e==e.window}function k(e,t,n){var r=n;if(w(e))return"width"===t?H.viewportWidth(e):H.viewportHeight(e);if(9===e.nodeType)return"width"===t?H.docWidth(e):H.docHeight(e);var o="width"===t?["Left","Right"]:["Top","Bottom"],i="width"===t?e.offsetWidth:e.offsetHeight,a=O(e),s=g(e,a),u=0;(null===i||void 0===i||i<=0)&&(i=void 0,u=O(e,t),(null===u||void 0===u||Number(u)<0)&&(u=e.style[t]||0),u=parseFloat(u)||0),void 0===r&&(r=s?R:F);var l=void 0!==i||s,c=i||u;return r===F?l?c-_(e,["border","padding"],o,a):u:l?r===R?c:c+(r===L?-_(e,["border"],o,a):_(e,["margin"],o,a)):u+_(e,A.slice(r),o,a)}function E(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=void 0,o=t[0];return 0!==o.offsetWidth?r=k.apply(void 0,t):b(o,B,function(){r=k.apply(void 0,t)}),r}function C(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}Object.defineProperty(t,"__esModule",{value:!0});var M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T=n(500),S=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,O=void 0,P=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),x=/^(top|right|bottom|left)$/,N="currentStyle",j="runtimeStyle",I="left",D="px";"undefined"!=typeof window&&(O=window.getComputedStyle?c:f);var A=["margin","border","padding"],F=-1,L=2,R=1,U=0,H={};v(["Width","Height"],function(e){H["doc"+e]=function(t){var n=t.document;return Math.max(n.documentElement["scroll"+e],n.body["scroll"+e],H["viewport"+e](n))},H["viewport"+e]=function(t){var n="client"+e,r=t.document,o=r.body,i=r.documentElement,a=i[n];return"CSS1Compat"===r.compatMode&&a||o&&o[n]||a}});var B={position:"absolute",visibility:"hidden",display:"block"};v(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);H["outer"+t]=function(t,n){return t&&E(t,e,n?U:R)};var n="width"===e?["Left","Right"]:["Top","Bottom"];H[e]=function(t,r){var i=r;if(void 0===i)return t&&E(t,e,F);if(t){var a=O(t);return g(t)&&(i+=_(t,["padding","border"],n,a)),o(t,e,i)}}});var W={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},offset:function(e,t,n){if(void 0===t)return l(e);y(e,t,n||{})},isWindow:w,each:v,css:o,clone:function(e){var t=void 0,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:C,getWindowScrollLeft:function(e){return s(e)},getWindowScrollTop:function(e){return u(e)},merge:function(){for(var e={},t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0;o<n.length;o++)W.mix(e,n[o]);return e},viewportWidth:0,viewportHeight:0};C(W,H),t.default=W,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(22);t.default={ajaxGet:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.ajaxGet.apply(null,t).then(function(e){if(e.code>0)throw new Error(e.message);return e}).catch(function(e){throw new Error(e)})},ajaxPost:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.ajaxPost.apply(null,t).then(function(e){if(e.code>0)throw new Error(e.message);return e}).catch(function(e){throw new Error(e)})}},e.exports=t.default},function(e,t,n){"use strict";var r=n(0),o=n(461);if(void 0===r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new r.Component).updater;e.exports=o(r.Component,r.isValidElement,i)},,,,,function(e,t,n){var r=n(417),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(412),i=r(o),a=n(583),s=r(a),u=n(585),l=r(u),c=n(586),f=r(c),d=n(415),p=r(d);t.createStore=i.default,t.combineReducers=s.default,t.bindActionCreators=l.default,t.applyMiddleware=f.default,t.compose=p.default},,function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},,,,,,,,,,,,,,,,,,,,function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){function r(e,t,n){var r=t&&n||0,o=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){o<16&&(t[r+o++]=l[e])});o<16;)t[r+o++]=0;return t}function o(e,t){var n=t||0,r=u;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function i(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var a=void 0!==e.clockseq?e.clockseq:p,s=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:m+1,l=s-h+(u-m)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||s>h)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=s,m=u,p=a,s+=122192928e5;var c=(1e4*(268435455&s)+u)%4294967296;i[r++]=c>>>24&255,i[r++]=c>>>16&255,i[r++]=c>>>8&255,i[r++]=255&c;var f=s/4294967296*1e4&268435455;i[r++]=f>>>8&255,i[r++]=255&f,i[r++]=f>>>24&15|16,i[r++]=f>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var y=e.node||d,v=0;v<6;v++)i[r+v]=y[v];return t||o(i)}function a(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;a++)t[r+a]=i[a];return t||o(i)}for(var s=n(561),u=[],l={},c=0;c<256;c++)u[c]=(c+256).toString(16).substr(1),l[u[c]]=c;var f=s(),d=[1|f[0],f[1],f[2],f[3],f[4],f[5]],p=16383&(f[6]<<8|f[7]),h=0,m=0,y=a;y.v1=i,y.v4=a,y.parse=r,y.unparse=o,e.exports=y},,,function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(201),a=o(i),s=n(148),u=o(s),l=function(){var e=navigator.userAgent,t=void 0,n=void 0;return t=e.match(/mobile.*dingtalk/i)?a.default.toast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e=(0,u.default)(e,{whiteList:{span:["class"],br:[]}});var i=r("#toast-wrap");if(n&&clearTimeout(n),i.length>0)i.html(e),i[0].className="toast fadein "+o;else{var a=document.createElement("div");a.id="toast-wrap",a.className="toast fadein "+o,a.innerHTML=e,r("body").append(a)}n=setTimeout(function(){r("#toast-wrap").addClass("hide")},t)},window.toast=t,t}();t.default=l,e.exports=t.default}).call(t,n(2))},,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(467),i=r(o),a=n(479),s=r(a),u="function"==typeof s.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===u(i.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":u(e)}},function(e,t,n){function r(e,t,n,r){if(e&&0<=n&&n<t){var o,i,a=[];for(i=n;i<t;i++)void 0!==e[i]&&a.push(i);for(o=a.length,i=0;i<o;i++){var s=a[o-i-1],u=e[s];e[s]=null,e[Math.floor(s)+r]=u}}}function o(e,t,n,r){if(e&&0<=n&&n<t){var o,i,a=[],s=n+r;for(i=n;i<t;i++)void 0!==e[i]&&(n<=i&&i<s?e[i]=null:i>=s&&a.push(i));for(o=a.length,i=0;i<o;i++){var u=a[i],l=e[u];e[u]=null,e[Math.floor(u)-r]=l}}}function i(e,t){return e.hasOwnProperty(t)}function a(e,t){return e instanceof t}var s={},u=n(249).CultureManager,l=function(e){return function(){var t=u.culture();if(e&&t){var n=t.substr(0,2).toLowerCase();return e.hasOwnProperty(n)?e[n]:e.en}return{}}};s._addElements=r,s._deleteElements=o,s._getResource=l,s._hasOwnProperty=i,s._isInstanceOf=a,e.exports=s},function(e,t,n){var r={};r._each=function(e,t){if(r._isArraylike(e))for(var n=0,o=e.length;n<o&&!1!==t.call(e[n],n,e[n]);n++);else for(var i in e)if(e.hasOwnProperty(i)&&!1===t.call(e[i],i,e[i]))break;return e},r._isEmptyObject=function(e){return!e||"object"==typeof e&&0===Object.keys(e).length},r._isFunction=function(e){return"function"===r._getType(e)},r._isArray=function(e){return Array.isArray?Array.isArray(e):"array"===r._getType(e)},r._isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},r._getType=function(e){if(null===e)return"null";var t=r._class2type;if(!t){t=r._class2type={};for(var n=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],o=0,i=n.length;o<i;o++)t["[object "+n[o]+"]"]=n[o].toLowerCase()}var a=t.toString,s=typeof e;return"object"===s||"function"===s?t[a.call(e)]||"object":s},r._inArray=function(e,t,n){var o;if(t){var i=[].indexOf;if(i)return i.call(t,e,n);for(o=t.length,r._isNullOrUndefined(n)&&(n=0),n=n<0?Math.max(0,o+n):n;n<o;n++)if(n in t&&t[n]===e)return n}return-1},r._merge=function(e,t){var n=t.length,r=e.length,o=0;if("number"==typeof n)for(;o<n;o++)e[r++]=t[o];else for(;void 0!==t[o];)e[r++]=t[o++];return e.length=r,e},r._map=function(e,t,n){var o,i=0,a=e.length,s=r._isArraylike(e),u=[];if(s)for(;i<a;i++)null!==(o=t(e[i],i,n))&&(u[u.length]=o);else for(i in e)e.hasOwnProperty(i)&&null!==(o=t(e[i],i,n))&&(u[u.length]=o);return[].concat.apply([],u)},r._extend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,o,i,a,s,u,l=arguments[0]||{},c=1,f=arguments.length,d=!1;for("boolean"==typeof l&&(d=l,l=arguments[1]||{},c=2),"object"==typeof l||r._isFunction(l)||(l={}),f===c&&(l=this,--c);c<f;c++)if(!r._isNullOrUndefined(s=arguments[c]))for(a in s)n=l[a],i=s[a],l!==i&&(d&&i&&(r._isPlainObject(i)||(o=r._isArray(i)))?(o?(o=!1,u=n&&r._isArray(n)?n:[]):u=n&&r._isPlainObject(n)?n:{},l[a]=r._extend(d,u,i)):void 0!==i&&(l[a]=i));return l},r._inherit=function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},r._isWindow=function(e){return null!==e&&e===e.window},r._isPlainObject=function(e){if(!e||"object"!==r._getType(e)||e.nodeType||r._isWindow(e))return!1;var t={}.hasOwnProperty;try{if(e.constructor&&!t.call(e,"constructor")&&!t.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var n;for(n in e);return void 0===n||t.call(e,n)},r._isArraylike=function(e){if(r._isNullOrUndefined(e))return!1;var t=e.length,n=r._getType(e);return!r._isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)))},r._makeArray=function(e,t){var n=t||[];return null!==e&&(r._isArraylike(Object(e))?r._merge(n,"string"==typeof e?[e]:e):[].push.call(n,e)),n},r._isType=function(e,t){return r._isNullOrUndefined(e)?"null"===t:!!t&&(t instanceof Function&&e instanceof t||(typeof e===t||(!("function"!==t||!/^\s*\bfunction\b/.test(""+e))||(Object.prototype.toString.call(e).slice(8,-1).toLowerCase()===t.toLowerCase()||("DateTime"===t||"TimeSpan"===t?e instanceof Date:("string"==typeof t&&"undefined number boolean string".indexOf(t),!1))))))},r._isNullOrUndefined=function(e){return void 0===e||null===e},r._isNumber=function(e,t){return e=n(250)._replaceCultureSymbolToNormal(e,t),r._isType(e,"number")||r._isType(e,"DateTime")||r._isType(e,"TimeSpan")||e&&!r._isType(e,"boolean")&&!isNaN(e)&&!isNaN(parseFloat(e))&&!(e.length>=2&&"0"===e[0]&&"x"===e[1])},r._toDouble=function(e){var t=n(321);return r._isNullOrUndefined(e)||""===e?0:r._isType(e,"number")?e:r._isType(e,"string")&&!isNaN(e)?n(250)._parseLocale(e):r._isType(e,"boolean")?e?1:0:r._isType(e,"DateTime")?t._toOADate(e):r._isType(e,"TimeSpan")?Math.floor(t._toOADate(e)):parseFloat(e)},r._cloneObject=function(e){if(!e)return e;if("number"==typeof e||"string"==typeof e||"boolean"==typeof e||r._isNullOrUndefined(e))return e;if(e.clone)return e.clone();if(e instanceof Date)return new Date(e);var t,n,o;t=e instanceof Object?new e.constructor:new e.constructor(e.valueOf());for(n in e)e.hasOwnProperty(n)&&(o=e[n],e.hasOwnProperty(n)&&t[n]!==o&&(t[n]="object"==typeof o?r._cloneObject(o):o));return t.toString=e.toString,t.valueOf=e.valueOf,t},e.exports=r},function(e,t,n){var r=n(188),o=function(){function e(){}return e._getReg=function(t){var n=e._regDict[t];return n||(n=e._regDict[t]=new RegExp(t,"g")),n.lastIndex=0,n},e._getRegIgnoreCase=function(t){var n=e._regDictIgnoreCase[t];return n||(n=e._regDictIgnoreCase[t]=new RegExp(t,"gi")),n.lastIndex=0,n},e._getWildcardCriteria=function(t,n){if(e._wildcardParseRecord[t])return e._wildcardParseResultBuffer[t];if(e._getReg("[~?*]+").test(t)){for(var r,o=[],i=t.split(""),a=0;a<i.length;a++)r=i[a],"~"===r&&a<i.length-1?(a++,r=i[a],"*"===r||"?"===r?o.push("\\"):n&&o.push("~"),o.push(r)):"?"===r?o.push("."):"*"===r?(o.push("."),o.push("*")):o.push(r);return o.join("")}return null},e._getWildcardCriteriaFullMatch=function(t,n){var r=e._getWildcardCriteria(t,n);return r&&(r="^"+r+"$"),r},e._getReplaceSymbol=function(e,t){for(var n="#"+e+"0#",o=1;t.indexOf(n)>0;)n=r._join(n,"#"+e+(o-1)+"#","#"+e+o+"#"),o++;return n},e._regDict={},e._regDictIgnoreCase={},e._wildcardParseRecord={},e._wildcardParseResultBuffer={},e._replaceRegString2NormalString=function(e){return e.replace(/([\~\!\@\#\$\%\^\&\*\(\)\-\_\+\=\[\]\{\}\|\\\;\:\'\"\,\.\/\<\>\?])/,"\\$1")},e}();e.exports=o},function(e,t,n){function r(e,t,n){return e.substr(t,n)}function o(e,t,n,r){if(!t)throw new Error;if(""===t)return!0;if(t.length>e.length)return!1;var o=e,i=t;return n&&(o=o.toLowerCase(),i=i.toLowerCase()),r(o,i)}var i=n(186)._isNullOrUndefined,a={_contains:function(e,t,n){return n&&(e=e.toLowerCase(),t=t.toLowerCase()),""===t||e.indexOf(t)>=0},_indexOf:function(e,t,n){if(!n)return e.indexOf(t);if(n){var r=e.toLowerCase(),o=t.toLowerCase();return r.indexOf(o)}return e.indexOf(t)},_trimStart:function(e,t){if(!t)return e;for(var n=e;r(n,0,t.length)===t;)n=r(n,t.length);return n},_trimEnd:function(e,t){if(!t)return e;for(var n=e;r(n,n.length-t.length,t.length)===t;)n=r(n,0,n.length-t.length);return n},_insert:function(e,t,n){if(t<0||t>e.length||i(n))throw new Error;return r(e,0,t)+n+r(e,t,e.length-t)},_remove:function(e,t,n){if(i(n)&&(n=e.length-t),t<0||n<0||t+n>e.length)throw new Error;return r(e,0,t)+r(e,t+n,e.length-t-n)},_startsWith:function(e,t,n){return o(e,t,n,function(e,t){return e.slice(0,t.length)===t})},_endsWith:function(e,t,n){return o(e,t,n,function(e,t){return e.slice(-t.length)===t})},_replace:function(e,t,n,r){if(!t||""===t)throw new Error;return n=(""+n).replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"+(r?"i":"")),n)},_replaceAllNoReg:function(e,t,r,o){return t=n(187)._replaceRegString2NormalString(t),this._replace(e,t,r,o)},_leftBefore:function(e,t){var n=e.indexOf(t);return n<0||n>=e.length?e:r(e,0,n)},_count:function(e,t){for(var n=0,r=e.indexOf(t);r>=0;)n+=1,r=e.indexOf(t,r+1);return n},_join:function(e,t,n){return e.split(t).join(n)},_format:function(e,t){for(var n=e,r=0;r<t.length;r++){var o=new RegExp("\\{"+r+"\\}","g");n=n.replace(o,t[r])}return n},_padZero:function(e,t,n){for(var r=e.toString(),o=r.length;o<t;o++)r=n?"0"+r:r+"0";return r},_padZeroLeft:function(e,t){return a._padZero(e,t,!0)},_padZeroRight:function(e,t){return a._padZero(e,t,!1)},_compareStringIgnoreCase:function(e,t){return e===t||!e&&!t||e&&t&&e.toLowerCase()===t.toLowerCase()},_toUpperCase:function(e){return e.toUpperCase()},_escapeHtml:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=n(187)._getReg("(?:&|<|>|\"|'|`)");return r.test(e)?e.replace(r,function(e){return t[e]}):e},_unescapeHtml:function(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x60;":"`"},r=n(187)._getReg("(?:&amp;|&lt;|&gt;|&quot;|&#x27;|&#x60;)");return r.test(e)?e.replace(r,function(e){return t[e]}):e}};e.exports=a},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],n=null,r=function(){for(var r=0;r<t.length;r++){var o=t[r];if(o.condition===e)return"function"==typeof o.result?o.result():o.result}return"function"==typeof n?n():n||null},o=function(e){return n=e,{done:r}};return{when:function e(n,i){return t.push({condition:n,result:i}),{when:e,others:o,done:r}},others:o,done:r}},e.exports=t.default},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.getAmount=function(e){return Number((e/100).toFixed(2)).toString()},t.allowNumber=function(e){return Number(e.replace(/[^0-9]/g,""))}},,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=n(131),s=n(557),u=n(535),l=String.fromCharCode(0),c=n(260),f=function(){function e(t,n){if(r(this,e),this.ops=[],Array.isArray(t)){for(var o=0;o<t.length;o++)this.pushWithMutations(t[o]);n&&this.chopWithMutations()}else"function"==typeof t&&t(this);a.freeze(this)}return o(e,[{key:"freeze",value:function(){a.freeze(this.ops)}},{key:"createCleaner",value:function(){for(var t=[],n=0;n<this.ops.length;n++){var r=this.ops[n],o=r.createInstance({action:"remove",data:r.length});t.push(o)}return new e(t)}},{key:"clone",value:function(){return new e(this.ops.map(a.clone))}},{key:"toJSON",value:function(){return this.ops}},{key:"pack",value:function(){return this.ops.map(function(e){return e.pack()})}},{key:"isDocument",value:function(){for(var e=0;e<this.ops.length;e++)if("insert"!==this.ops[e].action)return!1;return!0}},{key:"isEmpty",value:function(){return 0===this.ops.length}},{key:"_genericPush",value:function(e,t){var n=e.length,r=e[n-1];if(r&&"remove"===r.action&&"insert"===t.action&&(n-=1,r=e[n-1]),!r)return e.unshift(t),e;var o=t.merge(r);return o?e[n-1]=o:n===e.length?e.push(t):e.splice(n,0,t),e}},{key:"push",value:function(t){if(!t.length)return this;var n=this.ops.slice(0);if(Array.isArray(t)){for(var r=!1,o=0;o<t.length;o++)t[o].length&&(r=!0,n=this._genericPush(n,t[o]));if(!r)return this}else n=this._genericPush(n,t);return new e(n)}},{key:"pushWithMutations",value:function(e){return e.length&&this._genericPush(this.ops,e),this}},{key:"concat",value:function(t){var n=this;return t.ops.length?this.ops.length?new e(function(e){e.ops=n.ops.slice(),e.pushWithMutations(t.ops[0]),t.ops.length>1&&(e.ops=e.ops.concat(t.ops.slice(1)))}):t:this}},{key:"_genericChop",value:function(e){for(;e.length&&e[e.length-1].isEmpty();)e.pop();return e}},{key:"chop",value:function(){return new e(this._genericChop(this.ops.slice(0)))}},{key:"chopWithMutations",value:function(){return this._genericChop(this.ops),this}},{key:"slice",value:function(t,n){t=t||0,"number"!=typeof n&&(n=1/0);for(var r=[],o=this.getIter(),i=0;i<n&&o.hasNext();){var a=void 0;i<t?a=o.next(t-i):(a=o.next(n-i),r.push(a)),i+=a.length}return new e(r)}},{key:"getIter",value:function(){return new a.OperatorIterator(this.ops)}},{key:"validate",value:function(){for(var e={},t=0;t<this.ops.length;t++){var n=this.ops[t];if(n&&"TableOperator"===n.name()){var r=n.getAttributes(),o=r.name;if(!o)continue;var i="$$"+o+"$$";if(e.hasOwnProperty(i))throw new Error("Duplicated table name found: "+o);e[i]=!0}}return this}},{key:"compose",value:function(t){for(var n=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],r=this.getIter(),o=t.getIter(),i=[];r.hasNext()||o.hasNext();)if("insert"===o.peekAction())i.push(o.next());else if("remove"===r.peekAction())i.push(r.next());else{var a=Math.min(r.peekLength(),o.peekLength()),s=r.next(a),u=o.next(a);u&&"retain"!==u.action?s&&"retain"!==s.action||i.push(u):s?u?i.push(s.compose(u,n)):i.push(s):i.push(u)}var l=new e(i,!0);return n||l.validate(),l}},{key:"composePosition",value:function(e){for(var t=this.getIter(),n=0;t.hasNext()&&n<=e;){var r=t.peekLength(),o=t.peekAction();switch(t.next(),o){case"remove":if(r>e-n)return null;e-=r;continue;case"insert":e+=r}n+=r}return e}},{key:"invert",value:function(t){for(var n=this.getIter(),r=t.getIter(),o=[];r.hasNext();)if("insert"===r.peekAction()){var i=r.next(),a=i.createInstance({action:"remove",data:i.length});o.push(a)}else{if(!n.hasNext())throw new Error(this.constructor.name+" should be smaller than document");var s=Math.min(n.peekLength(),r.peekLength()),u=n.next(s),l=r.next(s);if("insert"!==u.action)throw new Error("Only document can invert deltas");"retain"===l.action?o.push(u.invert(l)):o.push(u)}return new e(o,!0)}},{key:"invertPosition",value:function(e){for(var t=this.getIter(),n=0;t.hasNext()&&n<=e;){var r=t.peekLength(),o=t.peekAction();switch(t.next(),o){case"insert":if(r>e-n)return null;e-=r;continue;case"remove":e+=r}n+=r}return e}},{key:"transform",value:function(t,n){for(var r=this.getIter(),o=t.getIter(),i=[];o.hasNext();)if("insert"!==r.peekAction()||!n&&"insert"===o.peekAction())if("insert"===o.peekAction())i.push(o.next());else{var a=Math.min(r.peekLength(),o.peekLength()),s=r.next(a),u=o.next(a);if(s&&"remove"===s.action)continue;u&&"remove"===u.action?i.push(u):s?i.push(s.transform(u,n)):i.push(u)}else{var l=r.next();i.push(l.createInstance({action:"retain",data:l.length}))}return new e(i,!0)}},{key:"transformPosition",value:function(e,t){for(var n=this.getIter(),r=0;n.hasNext()&&r<=e;){var o=n.peekLength(),i=n.peekAction();switch(n.next(),i){case"remove":e-=Math.min(o,e-r);continue;case"insert":(r<e||!t)&&(e+=o)}r+=o}return e}},{key:"toString",value:function(){for(var e="",t=0;t<this.ops.length;t++){var n=this.ops[t];if("insert"!==n.action)throw new Error("toString() called on non-document");e+="string"==typeof n.data?n.data:l}return e}},{key:"diff",value:function(t,n){if(this.ops===t.ops)return new e;if(!this.ops.length){if(!t.isDocument())throw new Error("diff() called on non-document");return t}for(var r=i.bind(this.ops[0].createInstance,this.ops[0]),o=[],a=s(this.toString(),t.toString(),n),l=this.getIter(),f=t.getIter(),d=0,p=a.length;d<p;d++)for(var h=a[d],m=h[1].length;m>0;){var y=0;switch(h[0]){case s.INSERT:y=Math.min(f.peekLength(),m),o.push(f.next(y));break;case s.DELETE:y=Math.min(m,l.peekLength()),l.next(y),o.push(r({action:"remove",data:y}));break;case s.EQUAL:y=Math.min(l.peekLength(),f.peekLength(),m);var v=l.next(y),g=f.next(y),b=v.skipDiff()&&g.skipDiff()&&v.name()===g.name()||u(v.data,g.data);b?o.push(r({action:"retain",data:y,attributes:c.diff(v.attributes,g.attributes)})):(o.push(g),o.push(r({action:"remove",data:y})))}m-=y}return new e(o,!0)}},{key:"print",value:function(e){console[e?"group":"groupCollapsed"]("Delta["+this.length+"] with "+this.ops.length+" operators"),this.ops.forEach(function(e){return e.print()}),console.groupEnd()}},{key:"length",get:function(){for(var e=0,t=0;t<this.ops.length;t++)e+=this.ops[t].length;return e}}],[{key:"unpack",value:function(e){var t=this;return new this(e.map(function(e){return t.operatorUnpacker(e)}))}}]),e}();e.exports=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){"function"==typeof e.pack?e.print():"object"==typeof e?Object.keys(e).forEach(function(t){var n=e[t];console.groupCollapsed(t),o(n),console.groupEnd()}):console.log(e)}var i=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(192),u=n(131).clone,l=n(260),c=n(131),f=function(){function e(t){r(this,e),this.setWithMutations(t);var n="Operator"!==this.name()&&this.isGeneric(),o=n?this.toGeneric():this;return c.freeze(o),o}return a(e,[{key:"name",value:function(){return"Operator"}},{key:"skipDiff",value:function(){return!1}},{key:"isGeneric",value:function(){return"number"==typeof this.data}},{key:"toGeneric",value:function(){return new e({action:this.action,data:this.data,attributes:this.attributes})}},{key:"clone",value:function(){var e=this.createInstance(this);return e.data=u(e.data),e}},{key:"_genericSet",value:function(e){var t={action:this.action,data:this.data,attributes:this.attributes},n=!1,r=e.action;if(r&&r!==t.action){if(n=!0,"insert"!==r&&"retain"!==r&&"remove"!==r)throw new Error('Action "'+r+'" is invalid');t.action=r}var o=e.data;if(null!=o&&o!==t.data){if(n=!0,"remove"===t.action&&("number"!=typeof o||o<0))throw new Error("Expect the data of remove action to be a positive number, got "+o);t.data=o}if(null==t.data)throw new Error("Expect data to have a non-empty value, got "+t.data);var i=e.attributes;if(i){var a=typeof i;if("object"===a&&Object.keys(i).length){var s=l.pack(i);s&&t.attributes!==s&&(n=!0,t.attributes=s)}else"string"===a&&t.attributes!==i&&(n=!0,t.attributes=i)}return{changed:n,op:t}}},{key:"set",value:function(e){var t=this._genericSet(e),n=t.changed,r=t.op;return n?this.createInstance(r):this}},{key:"setWithMutations",value:function(e){var t=this._genericSet(e),n=t.op;return this.action=n.action,this.data=n.data,this.attributes=n.attributes,this}},{key:"createInstance",value:function(e){return new this.constructor(e)}},{key:"toJSON",value:function(){return this.pack()}},{key:"pack",value:function(){var e=void 0;switch(this.action){case"insert":e=0;break;case"remove":e=1;break;case"retain":e=2}var t="function"==typeof this.data.pack?this.data.pack():this.data,n=[Number(""+this.constructor.packId+e),t];return this.attributes&&n.push(this.attributes),n}},{key:"getEmbedObject",value:function(){throw new Error("#getEmbedObject() not implemented")}},{key:"isEmpty",value:function(){return"retain"===this.action&&!this.attributes&&"number"==typeof this.data}},{key:"getAttributes",value:function(){return l.unpack(this.attributes)}},{key:"merge",value:function(e){if(this.name()!==e.name())return!1;var t=typeof this.data;return!(this.action!==e.action||t!==typeof e.data||"number"!==t&&"string"!==t||this.attributes!==e.attributes)&&e.set({data:e.data+this.data})}},{key:"compose",value:function(e){if("remove"===this.action)throw new Error("Removing operator cannot compose other operators");if("retain"!==e.action)throw new Error("Only retaining operator can be composed");if(this.constructor!==e.constructor&&!this.isGeneric()&&!e.isGeneric())throw new Error('Failed to compose operators. Expect constructor "'+e.constructor.name+'" to equal "'+this.constructor.name+'"');var t=void 0;return t="function"==typeof this.data.compose&&e.data.constructor===this.data.constructor?this.data.compose(e.data):"number"==typeof this.data?e.data:this.data,(this.isGeneric()?e:this).createInstance({data:t,attributes:l.merge(this.attributes,e.attributes,"insert"!==this.action),action:this.action})}},{key:"invert",value:function(e){if("insert"!==this.action)throw new Error('invert should only apply to the "insert" action ('+this.constructor.name+")");if("retain"!==e.action)throw new Error("Only retaining operator can be inverted");if(this.constructor!==e.constructor&&!e.isGeneric())throw new Error('Failed to invert operators. Expect constructor "'+e.constructor.name+'" to equal "'+this.constructor.name+'"');var t=void 0;return t="function"==typeof this.data.invert&&e.data.constructor===this.data.constructor?this.data.invert(e.data):"number"==typeof e.data?e.data:this.data,this.createInstance({data:t,attributes:l.invert(this.attributes,e.attributes),action:"retain"})}},{key:"transform",value:function(e,t){if("retain"!==this.action)throw new Error("Only retaining operator can transform other operators");if("retain"!==e.action)throw new Error("Only retaining operator can be transformd");if(this.constructor!==e.constructor&&!e.isGeneric()&&!this.isGeneric())throw new Error('Failed to transform operators. Expect constructor "'+e.constructor.name+'" to equal "'+this.constructor.name+'"');return(this.isGeneric()?e:this).createInstance({attributes:l.transform(this.attributes,e.attributes,t),action:"retain",data:"function"==typeof this.data.transform&&"function"==typeof e.data.transform?this.data.transform(e.data,t):e.data})}},{key:"print",value:function(){var e=[this.action+": %c"+this.name(),"color: #51c6ed"];this.attributes&&(e[0]=e[0]+"%c, %O",e.push("font-weight: normal; color: #000",this.attributes.toJS())),console.groupCollapsed.apply(console,e),o(this.data),console.groupEnd()}},{key:"length",get:function(){switch(typeof this.data){case"number":return this.data;case"string":return this.data.length;default:return 1}}}],[{key:"unpack",value:function(e){var t=i(e,3),n=t[0],r=t[1],o=t[2];return new this({action:["insert","remove","retain"][n],data:Array.isArray(r)?s.unpack(r):r,attributes:o})}},{key:"insert",value:function(e,t){return new this({action:"insert",data:e,attributes:t})}},{key:"retain",value:function(e,t){return new this({action:"retain",data:e,attributes:t})}},{key:"remove",value:function(e){return new this({action:"remove",data:e})}}]),e}();f.packId=1,e.exports=f},function(e,t,n){(function(r){var o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=[n(5)],void 0!==(i=function(e){return new(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.eventMap={"click .btn-ok":"clickOK","click .btn-cancel":"clickCancel","click .dialog":"clickSelf","click .confirm-close":"close","click .confirm-checkbox":"changeCheckBox",click:"click"},t.prototype.init=function(){return this.$view=r("#confirm"),this.$head=this.$(".dialog-head"),this.$headSpan=this.$(".header-text"),this.$body=this.$(".dialog-body"),this.$foot=this.$(".dialog-foot"),this.$okBtn=this.$(".btn-ok"),this.$cancelBtn=this.$(".btn-cancel"),this.buttons=["ok","cancel"],this.modal=!1,this.reset()},t.prototype.domEvents={clickOK:function(e){if(!r(e.target).hasClass("custom-confirm-btn"))return"function"==typeof this.okCallback&&this.okCallback({checkBoxValue:this.checkBoxValue}),this.hide(),e.stopPropagation()},clickCancel:function(e){if(!r(e.target).hasClass("custom-confirm-btn"))return"function"==typeof this.cancelCallback&&this.cancelCallback(),this.hide(),e.stopPropagation()},click:function(e){if(!this.modal)return"function"==typeof this.cancelCallback&&this.cancelCallback(),this.hide(),e.stopPropagation()},clickSelf:function(e){return e.stopPropagation()},changeCheckBox:function(e){return this.checkBoxValue=!this.checkBoxValue,r(".confirm-checkbox").toggleClass("active")},close:function(e){return this.hide()}},t.prototype.reset=function(){return this.headText="确认",this.bodyText="确认吗？",this.okText="确认",this.cancelText="取消",this.externalClass="",this.okCallback=null,this.cancelCallback=null,this.checkBox=null,this.checkBoxValue=!1},t.prototype.show=function(e){var t;return this.$foot.empty(),this.okCallback=e.okCallback,this.cancelCallback=e.cancelCallback,this.headText=e.headText||this.headText,this.bodyText=e.bodyText||this.bodyText,this.okText=e.okText||this.okText,this.cancelText=e.cancelText||this.cancelText,this.externalClass=e.externalClass||this.externalClass,this.modal=e.modal||!1,this.buttons=e.buttons||["ok","cancel"],e.checkBox&&(this.checkBox=e.checkBox,this.checkBoxValue=e.checkBoxValue||!1),"object"==typeof this.buttons[0]?(this.$okBtn.hide(),this.$cancelBtn.hide(),this.createFoot()):(this.$foot.append('<div class="btn btn-ok">确认</div><div class="btn btn-cancel">取消</div>'),this.$okBtn=this.$(".btn-ok"),this.$cancelBtn=this.$(".btn-cancel"),-1===this.buttons.indexOf("ok")?this.$okBtn.hide():this.$okBtn.show(),-1===this.buttons.indexOf("cancel")?this.$cancelBtn.hide():this.$cancelBtn.show(),this.$okBtn.text(this.okText),this.$cancelBtn.text(this.cancelText)),this.$headSpan.text(this.headText),this.$body.html(this.bodyText),this.checkBox&&(t=this.checkBoxValue?"active":"",this.$body.append('<div class="confirm-checkbox '+t+'">'+this.checkBox+"</div>")),this.$view.addClass(this.externalClass).show()},t.prototype.createFoot=function(){var e,t,n,o,i,a,s,u,l,c,f,d,p,h,m;for(p=this,t=r(),d=this.buttons,l=0,c=d.length;l<c;l++)n=d[l],m=n.type||"button",h=n.target||"_blank",u=n.href||"",s="custom-confirm-btn "+(n.customClass||""),o=n.label||n.buttonLabel||"",a=!!n.closeAfterClick,f="function"==typeof n.onClick?n.onClick:function(){},e=r(),"button"===m?e=r(document.createElement("div")):"link-button"===m&&(e=r(document.createElement("a")),e.attr({href:u,target:h})),e.addClass(n.class||s),e.text(o),i=function(e,t){return function(n){if(e(n),t)return p.hide(),n.stopPropagation()}}(f,a),e.on("click",i),t.push(e[0]);if(t.length>0)return this.$foot.append(t)},t.prototype.hide=function(){return this.$view.removeClass(this.externalClass).hide(),this.reset()},t}(e.DomModule))("#confirm")}.apply(t,o))&&(e.exports=i)}).call(t,n(2))},,function(e,t,n){var r;void 0!==(r=function(){var e=function(){this.numToAttrib={},this.attribToNum={},this.nextNum=0};return e.prototype.putAttrib=function(e,t){var n=String(e);if(n in this.attribToNum)return this.attribToNum[n];if(t)return-1;var r=this.nextNum++;return this.attribToNum[n]=r,this.numToAttrib[r]=[String(e[0]||""),String(e[1]||"")],r},e.prototype.getAttrib=function(e){var t=this.numToAttrib[e];return t?[t[0],t[1]]:t},e.prototype.getAttribKey=function(e){var t=this.numToAttrib[e];return t?t[0]:""},e.prototype.getAttribValue=function(e){var t=this.numToAttrib[e];return t?t[1]:""},e.prototype.eachAttrib=function(e){for(var t in this.numToAttrib){var n=this.numToAttrib[t];e(n[0],n[1])}},e.prototype.toJsonable=function(){return{numToAttrib:this.numToAttrib,nextNum:this.nextNum}},e.prototype.fromJsonable=function(e){if(e){this.numToAttrib=e.numToAttrib,this.nextNum=e.nextNum,this.attribToNum={};for(var t in this.numToAttrib)this.attribToNum[String(this.numToAttrib[t])]=Number(t);return this}},e}.call(t,n,t,e))&&(e.exports=r)},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){m&&p&&(m=!1,p.length?h=p.concat(h):y=-1,h.length&&s())}function s(){if(!m){var e=o(a);m=!0;for(var t=h.length;t;){for(p=h,h=[];++y<t;)p&&p[y].run();y=-1,t=h.length}p=null,m=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,f,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var p,h=[],m=!1,y=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||m||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){function r(e){return null==e?void 0===e?u:s:l&&l in Object(e)?i(e):a(e)}var o=n(324),i=n(588),a=n(589),s="[object Null]",u="[object Undefined]",l=o?o.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},,function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["agentId","corpId","timeStamp","nonceStr","signature","onReady"]),o=r.agentId,i=r.corpId,a=r.timeStamp,s=r.nonceStr,u=r.signature,l=r.onReady;if(!(o&&i&&a&&s&&u))return console.dir(r),void console.log("签名需要的信息不完整");U&&R||(U=i,R=o),F.default.config({agentId:o,corpId:i,timeStamp:a,nonceStr:s,signature:u,jsApiList:["device.notification.confirm","device.notification.alert","device.notification.prompt","device.notification.toast","device.notification.showPreloader","device.notification.hidePreloader","device.notification.actionSheet","biz.util.previewImage","biz.util.uploadImage","biz.util.share","biz.util.ut","biz.util.openLink","biz.util.open","biz.contact.choose","biz.customContact.multipleChoose","biz.customContact.choose","biz.chat.chooseConversation","biz.navigation.close","biz.navigation.setMenu","biz.navigation.setIcon","biz.navigation.setRight","biz.navigation.setLeft","biz.navigation.setTitle","biz.ding.post","runtime.permission.requestAuthCode","biz.chat.chooseConversationByCorpId","biz.chat.pickConversation","ui.webViewBounce"]}),F.default.ready(function(){j(l)&&(P(),l())}),F.default.error(function(e){(0,L.ajaxPost)("/api/log/jserror",{msg:"dingtalk_signature_mobile",url:window.location.href,error_code:e.errorCode,error_message:e.errorMessage})})}function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["message","title","buttonName","onSuccess","onFail"]),o=r.message,i=r.title,a=r.buttonName,s=r.onSuccess,u=r.onFail;F.default.device.notification.alert({message:o||"提示信息",title:i||"提示",buttonName:a||"确定",onSuccess:s||function(){},onFail:u||function(){}})}function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["message","title","buttons"]),o=r.message,i=r.title,a=r.buttons,s={};if(a&&1!==a.length){var u=[];a.forEach(function(e){u.push(e.name)}),s={message:o||"",title:i||"",buttonLabels:u,onSuccess:function(e){var t=a[e.buttonIndex].onClick;j(t)&&t()}}}else s={message:o||"",title:i||"",buttonLabels:["确定"]};F.default.device.notification.confirm(s)}function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["text","icon","delay","duration"]),o=r.icon,i=r.text,a=r.delay,s=r.duration;F.default.device.notification.toast({icon:o||"",text:i||"toast",duration:s||1,delay:N(a)?0:a,onSuccess:function(){},onFail:function(){}})}function u(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["text","showIcon"]),o=r.text,i=r.showIcon;i=void 0===i||i,F.default.device.notification.showPreloader({text:o||"正在加载..",showIcon:i,onSuccess:function(){},onFail:function(){}})}function l(){F.default.device.notification.hidePreloader({onSuccess:function(){},onFail:function(){}})}function c(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["message","title","buttons"]),o=r.message,i=r.title,a=r.buttons;if(N(a)||0===a.length)return void console.log("buttons is required");var s=[];a.forEach(function(e){s.push(e.name)}),F.default.device.notification.prompt({message:o||"",title:i||"提示",buttonLabels:s||[],onSuccess:function(e){var t=e.buttonIndex,n=e.value,r=a[t];j(r.onClick)&&r.onClick(n)}})}function f(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["title","buttons","cancelButton"]),o=r.title,i=r.buttons,a=r.cancelButton;if(0===i.length)return void console.log("buttons is required");var s=[];i.forEach(function(e){s.push(e.name)}),F.default.device.notification.actionSheet({title:o||"选择列表",otherButtons:s||[],cancelButton:a||"取消",onSuccess:function(e){var t=e.buttonIndex,n=i[t];n&&j(n.onClick)&&n.onClick()},onFail:function(){}})}function d(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["urls","current"]),o=r.urls,i=r.current;F.default.biz.util.previewImage({urls:o||[],current:i||(o&&o[0]?o[0]:"")})}function p(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["multiple","max","onSuccess"]),o=r.multiple,i=r.max,a=r.onSuccess;F.default.biz.util.uploadImage({multiple:!N(o)&&o,max:N(i)?10:i,onSuccess:a||function(){}})}function h(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["users","multiple","max","onSuccess","corpId","startWithDepartmentId"]),o=r.corpId,i=r.multiple,a=r.max,s=r.users,u=r.startWithDepartmentId,l=r.onSuccess;F.default.biz.contact.choose({startWithDepartmentId:N(u)?0:u,multiple:!!N(i)||i,corpId:o||U,max:N(a)?150:a,users:N(s)?[]:s,onSuccess:function(e){j(l)&&l(e)},onFail:function(e){console.dir(e)}})}function m(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["corpId","title","users","isShowCompanyName","selectedUsers","disabledUsers","multiple","onSuccess"]),o=r.corpId,i=r.title,a=r.users,s=r.isShowCompanyName,u=r.selectedUsers,l=r.disabledUsers,c=r.multiple,f=r.onSuccess;if(N(o))return void console.log("corpId is required");var d={title:i||"选择人员",users:a||[],corpId:o,isShowCompanyName:!N(s)&&s,selectedUsers:u||[],disabledUsers:l||[],onSuccess:function(e){j(f)&&f(e)},onFail:function(e){console.dir(e)}};c?F.default.biz.customContact.multipleChoose(d):F.default.biz.customContact.choose(d)}function y(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["title","url","content","image"]),o=r.title,i=r.url,a=r.content,s=r.image;F.default.biz.util.share({title:o||"分享",url:i||window.location.href,content:a||"石墨文档",image:s||"",type:0})}function v(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["users","corpId","type","alertType","alertDate","attachment","text"]),o=r.users,i=r.corpId,a=r.alertType,s=r.alertDate,u=r.attachment,l=r.text,c=r.type;c=c||1;var f={users:o||[],corpId:i||U,type:c,alertType:a||2,text:l||""};if(1===c?f.attachment=u||{images:[""]}:2===c&&(f.attachment=u||{title:"",url:"",image:"",text:""}),!s){var d=new Date,p=d.getMonth()+1;p=p<10?"0"+p:""+p;var h=d.getDate();h=h<10?"0"+h:""+h;var m=d.getHours();m=m<10?"0"+m:""+m;var y=d.getMinutes();y=y<10?"0"+y:""+y,f.alertDate={format:"yyyy-MM-dd HH:mm",value:d.getFullYear()+"-"+p+"-"+h+" "+m+":"+y}}F.default.biz.ding.post(f)}function g(e){document.title=e,F.default.biz.navigation.setTitle({title:e,onSuccess:function(){},onFail:function(e){console.dir(e)}})}function b(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["iconIndex","showIcon","onSuccess"]),o=r.iconIndex,i=r.showIcon,a=r.onSuccess;F.default.biz.navigation.setIcon({showIcon:!!N(i)||i,iconIndex:N(o)?1:o,onSuccess:a||function(){},onFail:function(e){console.dir(e)}})}function _(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["text","onSuccess","show","control"]),o=r.text,i=r.onSuccess,a=r.show,s=r.control;F.default.biz.navigation.setRight({text:o||"",show:N(a)?!!o:a,control:N(s)?j(i):s,onSuccess:i||function(){}})}function w(){F.default.biz.navigation.close()}function k(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["buttons","backgroundColor"]),o=r.buttons,i=r.backgroundColor,a={};if(N(o)||0===o.length)a={backgroundColor:i||"#FFF",items:[],onSuccess:function(e){console.dir(e)},onFail:function(e){console.dir(e)}};else{var s=[];o.forEach(function(e,t){var n={id:""+t,text:e.text||"item",iconId:e.iconId};s.push(n)}),a={backgroundColor:i||"#FFF",items:s,onSuccess:function(e){var t=o[+e.id];j(t.onClick)&&t.onClick()},onFail:function(e){console.dir(e)}}}F.default.biz.navigation.setMenu(a)}function E(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["key","type"]),o=r.key,i=r.type;if(!R||!U)return void console.log("埋点失败，签名信息不完整");F.default.biz.util.ut({key:o||"",value:"'corpId': "+U+", 'agentId': "+R+", 'type': "+(i||"")})}function C(e){F.default.biz.util.openLink({url:e})}function M(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=I(t,["name","params"]);r.onFail=function(e){i(JSON.stringify(e))},F.default.biz.util.open(r)}function T(e,t){if(!U)return void console.log("corpid is required");F.default.runtime.permission.requestAuthCode({corpId:U,onSuccess:function(t){j(e)&&e(t)},onFail:function(e){(0,L.ajaxPost)("/api/log/jserror",{msg:"dingtalk_requestAuthCode_5",url:window.location.href,error_code:e.errorCode,error_message:function(){var t=[];return window.cow.signInfo&&t.push(JSON.stringify(window.cow.signInfo)),window.cow.userId&&t.push("userId:"+window.cow.userId),t.push(JSON.stringify(e)),t.join("\n")}()}),j(t)&&t(e)}})}function S(e){if(!U)return void console.log("corpid is required");F.default.biz.chat.chooseConversationByCorpId({corpId:U||"",onSuccess:e||function(){},onFail:function(e){console.dir(e)}})}function O(e){if(!U)return void console.log("corpid is required");F.default.biz.chat.pickConversation({corpId:U||"",isConfirm:"false",onSuccess:e||function(){},onFail:function(e){console.dir(e)}})}function P(){F.default.ui.webViewBounce.disable()}function x(e){return"object"===(void 0===e?"undefined":D(e))}function N(e){return void 0===e||null===e}function j(e){return"function"==typeof e}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};if(0===e.length)return n;if(1===e.length&&x(e[0])){var r=e[0];return t.length&&!t.some(function(e){return r.hasOwnProperty(e)})?(n[t[0]]=r,n):r}return t.forEach(function(t,r){var o=e[r];N(o)||(n[t]=o)}),n}Object.defineProperty(t,"__esModule",{value:!0});var D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A=n(318),F=r(A),L=n(22),R="",U="";window.cow.signInfo&&(R=window.cow.signInfo.agentId,U=window.cow.signInfo.corpId),t.default={signature:o,alert:i,confirm:a,toast:s,showLoading:u,hideLoading:l,prompt:c,actionSheet:f,previewImage:d,uploadImage:p,customContactChoose:m,contactChoose:h,setTitle:g,setIcon:b,setRight:_,close:w,setMenu:k,ding:v,share:y,ut:E,openLink:C,open:M,requestAuthCode:T,chooseChatByCorpId:S,pickChat:O,disableBounce:P},e.exports=t.default},function(e,t,n){var r=n(136);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(206)("keys"),o=n(154);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(68),o="__core-js_shared__",i=r[o]||(r[o]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){e.exports=!0},function(e,t){e.exports={}},function(e,t,n){var r=n(135),o=n(472),i=n(207),a=n(205)("IE_PROTO"),s=function(){},u="prototype",l=function(){var e,t=n(304)("iframe"),r=i.length,o="<",a=">";for(t.style.display="none",n(473).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(o+"script"+a+"document.F=Object"+o+"/script"+a),e.close(),l=e.F;r--;)delete l[u][i[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[u]=r(e),n=new s,s[u]=null,n[a]=e):n=l(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(79).f,o=n(81),i=n(86)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){t.f=n(86)},function(e,t,n){var r=n(68),o=n(78),i=n(209),a=n(213),s=n(79).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){function r(e,t,n){for(var r,o=this,i=0,a=t.length;i<a;i++)r=t[i],o[e][r]=n[i]}var o=n(186),i=void 0,a=null,s=o._inherit,u=o._each,l=function(){function e(){}return e._isValidEraDate=function(e){return e>=this._getEraMin()&&e<=this._getEraMax()},e._getEraDates=function(){var e=c.eras;if(e!==i){for(var t=[],n=0;n<e.length;n++)t[n]=new Date(e[n].startDate.replace(/-/g,"/"));return t}return this._EraDates},e._getEraPropByFormat=function(e){var t,n,r=this;switch(e){case"g":t="symbol",n=r._symbols;break;case"gg":t="abbreviation",n=r._abbreviations;break;case"ggg":t="name",n=r._names;break;default:return[]}var o=c.eras,a=[];if(o!==i){for(var s=0;s<o.length;s++)a[s]=o[s][t];return a}return n},e._getEraMax=function(){var e=c.eras;if(e!==i&&e.length>0){var t=new Date(e[e.length-1].startDate.replace(/-/g,"/"));return t.setFullYear(t.getFullYear()+99),t}return this._EraMax},e._getEraMin=function(){var e=c.eras;return e!==i&&e.length>0?new Date(e[0].startDate.replace(/-/g,"/")):this._EraMin},e._getEraCount=function(){var e=c.eras;return e!==i?e.length:this._EraCount},e._getEraYears=function(){var e=c.eras;if(e!==i){for(var t=[],n=1;n<e.length;n++){var r=new Date(e[n-1].startDate.replace(/-/g,"/")),o=new Date(e[n].startDate.replace(/-/g,"/"));t[n-1]=o.getFullYear()-r.getFullYear()+1}return t[n-1]=99,t}return this._EraYears},e._getEraDate=function(e){var t={};t._era=-1,t._eraYear=-1;var n=this;if(!n._isValidEraDate(e))return t;for(var r=0;r<n._getEraCount();r++){if(e<(r+1!==n._getEraCount()?n._getEraDates()[r+1]:n._addMilliseconds(n._getEraMax(),1))){t._era=r,t._eraYear=e.getFullYear()-n._getEraDates()[r].getFullYear()+1;break}}return t},e._addMilliseconds=function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());return n.setMilliseconds(n.getMilliseconds()+t),new Date(n.valueOf())},e._getYearFromEra=function(t,n){return e._getEraDates()[t].getFullYear()+n-1},e._parseEraPart=function(t,n){n=n.toUpperCase();for(var r=e._getEraPropByFormat(t),o=0;o<r.length;o++)if(r[o]===n)return o;return-1},e._formatEraPart=function(t,n){var r=e,o=r._getEraDate(n),i=o._era;if(i>=0){var a=r._getEraPropByFormat(t);if(a.length>0)return a[i]}var s=o._eraYear;if(s>=0){var u=s.toString();if("ee"===t)return 1===u.length&&(u="0"+u),u;if("e"===t)return u}return""},e._EraDates=[new Date(1868,8,8),new Date(1912,6,30),new Date(1926,11,25),new Date(1989,0,8)],e._EraCount=4,e._EraYears=[45,15,64,99],e._EraMax=new Date(2087,11,31,23,59,59),e._EraMin=new Date(1868,8,8),e._shortcuts=["1,m","2,t","3,s","4,h"],e._EraIndices=[0,1,2,3,0,1,2,3],e._names=["明治","大正","昭和","平成"],e._symbols=["M","T","S","H"],e._abbreviations=["明","大","昭","平"],e._EraYearMax=99,e}(),c=function(){function e(){this.NumberFormat={currencyDecimalDigits:2,currencyDecimalSeparator:".",currencyGroupSeparator:",",currencyGroupSizes:[3],currencyNegativePattern:0,currencyPositivePattern:0,currencySymbol:"¤",digitSubstitution:1,isReadOnly:!0,numberGroupSizes:[3],nanSymbol:"NaN",nativeDigits:["0","1","2","3","4","5","6","7","8","9"],numberNegativePattern:1,negativeInfinitySymbol:"-Infinity",negativeSign:"-",numberDecimalDigits:2,numberDecimalSeparator:".",numberGroupSeparator:",",positiveInfinitySymbol:"Infinity",positiveSign:"+",percentDecimalDigits:2,percentDecimalSeparator:".",percentGroupSeparator:",",percentGroupSizes:[3],percentNegativePattern:0,percentPositivePattern:0,percentSymbol:"%",perMilleSymbol:"‰",listSeparator:",",arrayListSeparator:",",arrayGroupSeparator:";",dbNumber:{}},this.DateTimeFormat={abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],abbreviatedMonthGenitiveNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],amDesignator:"AM",calendarIsReadOnly:!0,calendarWeekRule:0,Calendar:{MinSupportedDateTime:"@-62135568000000@",MaxSupportedDateTime:"@253402300799999@",AlgorithmType:1,CalendarType:1,Eras:[1],TwoDigitYearMax:2029,isReadOnly:!0},dateSeparator:"/",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],firstDayOfWeek:0,fullDateTimePattern:"dddd, dd MMMM yyyy HH:mm:ss",longDatePattern:"dddd, dd MMMM yyyy",longTimePattern:"HH:mm:ss",monthDayPattern:"MMMM dd",monthGenitiveNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],nativeCalendarName:"Gregorian Calendar",pmDesignator:"PM",rfc1123Pattern:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",shortDatePattern:"YYYY/MM/DD",shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],shortTimePattern:"HH:mm:ss",sortableDateTimePattern:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",timeSeparator:":",universalSortableDateTimePattern:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",yearMonthPattern:"yyyy MMMM"},this.name=function(){return""},this.id=-1}function t(e){return e.split(" ").join(" ").toUpperCase()}function n(e){for(var n=[],r=0,o=e.length;r<o;r++)n[r]=t(e[r]);return n}function r(e,n,r){var o=t(e),i=n.indexOf(o);return-1===i&&(i=r.indexOf(o)),i}return e.prototype={constructor:e,_getDateTimePattern:function(){return this._dateTimeFormatPattern||(this._dateTimeFormatPattern=g),this._dateTimeFormatPattern},_getMonthIndex:function(e){var t=this;return t._upperMonths||(t._upperMonths=n(t.DateTimeFormat.monthNames),t._upperMonthsGenitive=n(t.DateTimeFormat.monthGenitiveNames)),r(e,t._upperMonths,t._upperMonthsGenitive)},_getAbbrMonthIndex:function(e){var t=this;return t._upperAbbrMonths||(t._upperAbbrMonths=n(t.DateTimeFormat.abbreviatedMonthNames),t._upperAbbrMonthsGenitive=n(t.DateTimeFormat.abbreviatedMonthGenitiveNames)),r(e,t._upperAbbrMonths,t._upperAbbrMonthsGenitive)},_getDayIndex:function(e){var r=this;return r._upperDays||(r._upperDays=n(r.DateTimeFormat.dayNames)),r._upperDays.indexOf(t(e))},_getAbbrDayIndex:function(e){var r=this;return r._upperAbbrDays||(r._upperAbbrDays=n(r.DateTimeFormat.abbreviatedDayNames)),r._upperAbbrDays.indexOf(t(e))}},e}(),f=function(e){function t(){e.apply(this,arguments),r.call(this,"NumberFormat",["currencySymbol","isReadOnly"],["$",!1]),r.call(this,"DateTimeFormat",["fullDateTimePattern","longDatePattern","longTimePattern","shortDatePattern","shortTimePattern","yearMonthPattern","calendarIsReadOnly"],["dddd, MMMM dd, yyyy h:mm:ss tt","dddd, MMMM dd, yyyy","h:mm:ss tt","YYYY/MM/DD","h:mm tt","MMMM, yyyy",!1]),this.name=function(){return"en-US"},this.id=1033}return s(t,e),t}(c),d=function(e){function t(){e.apply(this,arguments);var t={1:{letters:["兆","千","百","十","亿","千","百","十","万","千","百","十",""],numbers:["〇","一","二","三","四","五","六","七","八","九"]},2:{letters:["兆","阡","百","拾","億","阡","百","拾","萬","阡","百","拾",""],numbers:["〇","壱","弐","参","四","伍","六","七","八","九"]},3:{letters:a,numbers:["０","１","２","３","４","５","６","７","８","９"]}};r.call(this,"NumberFormat",["currencyDecimalDigits","currencyNegativePattern","currencySymbol","isReadOnly","nanSymbol","negativeInfinitySymbol","percentNegativePattern","percentPositivePattern","positiveInfinitySymbol","dbNumber"],[0,1,"¥",!1,"NaN (非数値)","-∞",1,1,"+∞",t]);var n=["1","2","3","4","5","6","7","8","9","10","11","12",""],o=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月",""];r.call(this,"DateTimeFormat",["abbreviatedDayNames","abbreviatedMonthGenitiveNames","abbreviatedMonthNames","amDesignator","calendarIsReadOnly","dayNames","fullDateTimePattern","longDatePattern","longTimePattern","monthDayPattern","monthGenitiveNames","monthNames","nativeCalendarName","pmDesignator","shortDatePattern","shortestDayNames","shortTimePattern","yearMonthPattern"],[["日","月","火","水","木","金","土"],n,n,"午前",!1,["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],"yyyy'年'M'月'd'日' H:mm:ss","yyyy'年'M'月'd'日'","H:mm:ss","M'月'd'日'",o,o,"西暦 (日本語)","午後","yyyy/MM/dd",["日","月","火","水","木","金","土"],"H:mm","yyyy'年'M'月'"]),this.DateTimeFormat.eras=l,this.name=function(){return"ja-JP"},this.id=1041}return s(t,e),t}(c),p=function(e){function t(){e.apply(this,arguments);var t={1:{letters:["兆","千","百","十","亿","千","百","十","万","千","百","十",""],numbers:["○","一","二","三","四","五","六","七","八","九"]},2:{letters:["兆","仟","佰","拾","亿","仟","佰","拾","万","仟","佰","拾",""],numbers:["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"]},3:{letters:a,numbers:["０","１","２","３","４","５","６","７","８","９"]}};r.call(this,"NumberFormat",["currencyNegativePattern","currencySymbol","isReadOnly","nanSymbol","negativeInfinitySymbol","percentNegativePattern","percentPositivePattern","positiveInfinitySymbol","dbNumber"],[2,"¥",!1,"非数字","负无穷大",1,1,"正无穷大",t]);var n=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月",""],o=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月",""];r.call(this,"DateTimeFormat",["abbreviatedDayNames","abbreviatedMonthGenitiveNames","abbreviatedMonthNames","amDesignator","calendarIsReadOnly","dayNames","firstDayOfWeek","fullDateTimePattern","longDatePattern","longTimePattern","monthDayPattern","monthGenitiveNames","monthNames","nativeCalendarName","pmDesignator","shortDatePattern","shortestDayNames","shortTimePattern","yearMonthPattern"],[["周日","周一","周二","周三","周四","周五","周六"],n,n,"上午",!1,["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],1,"yyyy'年'M'月'd'日' H:mm:ss","yyyy'年'M'月'd'日'","HH:mm:ss","M'月'd'日'",o,o,"公历","下午","YYYY/MM/DD",["日","一","二","三","四","五","六"],"H:mm","yyyy'年'M'月'"]),this.name=function(){return"zh-cn"},this.id=2052}return s(t,e),t}(c),h={invariant:new c,"en-us":new f,"ja-jp":new d,"zh-cn":new p},m=["MM/dd/yyyy","MM/d/yyyy","M/dd/yyyy","M/d/yyyy","yy/MM/dd","yy/MM/d","yy/M/dd","yy/M/d","yyyy/MM/dd","yyyy/MM/d","yyyy/M/dd","yyyy/M/d"],y=["hh:mm:ss","hh:mm:s","hh:m:ss","hh:m:s","h:mm:ss","h:mm:s","h:m:ss","h:m:s","hh:mm:ss tt","hh:mm:s tt","hh:m:ss tt","hh:m:s tt","h:mm:ss tt","h:mm:s tt","h:m:ss tt","h:m:s tt","hh:mm","hh:m","h:mm","h:m","hh:mm tt","hh:m tt","h:mm tt","h:m tt"],v=["MM-dd-yyyy","MM-d-yyyy","M-dd-yyyy","M-d-yyyy","yy-MM-dd","yy-MM-d","yy-M-dd","yy-M-d","yyyy-MM-dd","yyyy-MM-d","yyyy-M-dd","yyyy-M-d","dd-MMMM-yy","dd-MMM-yy"],g=m.concat(y);u(m,function(e,t){u(y,function(e,n){e<y.length-4&&g.push(t+" "+n)})}),g=g.concat(v),u(v,function(e,t){u(y,function(e,n){e<y.length-4&&g.push(t+" "+n)})});var b=function(){function e(){var r="zh-cn";this.culture=function(e){if(0===arguments.length)return r;e&&r!==e&&(r=e.toLowerCase(),t(r))},this.addCultureInfo=function(e,t){var r=t.NumberFormat.numberDecimalSeparator,o=t.NumberFormat.arrayListSeparator,i=t.NumberFormat.arrayGroupSeparator;if(r===t.NumberFormat.listSeparator||i===o){var a=n(185);throw a._getResource(a.SR)().Exp_Separator}h[e.toLowerCase()]=t},this.getCultureInfo=function(e){if(0===arguments.length)return h[r];e="string"==typeof e?e.toLowerCase():e;var t=h,n=a;for(var o in t)if(o===e||t[o].id!==i&&t[o].id===e){n=t[o];break}return n},this._getCultureInfo=function(e){var t=this.getCultureInfo(e);return t||(t=h[r])||(t=new c),t},e.instance=this}function t(e){var t;"function"!=typeof CustomEvent?(t=document.createEvent("CustomEvent"),t.initCustomEvent("cultureChanged",!1,!1,void 0)):t=new CustomEvent("cultureChanged",{}),t.cultureInfo=e,document.dispatchEvent(t)}return"object"==typeof e.instance?e.instance:e}();e.exports={CultureInfo:c,CultureManager:new b}},function(e,t,n){function r(e,t,n){return e.substr(t,n)}function o(e){return s._getReg(e)}var i=n(185),a=n(186)._isNullOrUndefined,s=n(187),u=n(188),l=u._padZeroLeft,c=u._padZeroRight,f=n(249).CultureManager,d=null,p=void 0,h=parseInt,m=parseFloat,y=!1,v=!0,g=Math.floor,b=Math.abs,_=Math.pow,w=function(){return i._getResource(i.SR)()},k=function(){function e(e,t,n){return t&&0!==t.length&&"i"!==t?k().test(t)?i(e,t,n.NumberFormat):s(e,t,n.NumberFormat):n&&n.name.length>0?e.toLocaleString():e.toString()}function t(e,t,n,r,o,i){return n="n",t=j(b(e),r.charAt(0),-1===o?6:o,i.numberGroupSizes,i.numberGroupSeparator,i.numberDecimalSeparator,i.negativeSign),e<0&&(t="-"+t),[t,n]}function n(e,t,n,r,o,i){n=e<0?B[i.numberNegativePattern]:"n",-1===o&&(o=2);var a=m(t),s=g(a);return t=S(a-s,o,i.numberGroupSizes,i.numberGroupSeparator,i.numberDecimalSeparator,i.negativeSign),t=""+(s+(+t>=1?1:0))+t.substring(1),[t,n]}function i(e,r,o){var i=b(e).toString();r||(r="D");var a=-1;r.length>1&&(a=h(r.slice(1),10));var s,u;switch(r.charAt(0)){case"d":case"D":s="n",-1!==a&&(i=l(""+i,a)),e<0&&(i="-"+i);break;case"c":case"C":s=e<0?V[o.currencyNegativePattern]:W[o.currencyPositivePattern],-1===a&&(a=o.currencyDecimalDigits),i=S(b(e),a,o.currencyGroupSizes,o.currencyGroupSeparator,o.currencyDecimalSeparator,o.negativeSign);break;case"n":case"N":s=e<0?B[o.numberNegativePattern]:"n",-1===a&&(a=o.numberDecimalDigits),i=S(b(e),a,o.numberGroupSizes,o.numberGroupSeparator,o.numberDecimalSeparator,o.negativeSign);break;case"p":case"P":s=e<0?H[o.percentNegativePattern]:U[o.percentPositivePattern],-1===a&&(a=o.percentDecimalDigits),i=S(100*b(e),a,o.percentGroupSizes,o.percentGroupSeparator,o.percentDecimalSeparator,o.negativeSign);break;case"F":case"f":u=n(e,i,s,r,a,o),i=u[0],s=u[1];break;case"e":case"E":u=t(e,i,s,r,a,o),i=u[0],s=u[1];break;case"x":case"X":s="n",i=N(e,"x"===r.charAt(0),-1===a?0:a);break;case"g":case"G":var c=e.toString();u=[],u=-1===c.indexOf("e")&&-1===c.indexOf("E")?n(e,i,s,r,a,o):t(e,i,s,r.replace("g","e").replace("G","E"),a,o),i=u[0],s=u[1];break;default:throw new Error(w().Exp_BadFormatSpecifier)}for(var f=/n|\$|-|%/g,d="";;){var p=f.lastIndex,m=f.exec(s);if(d+=s.slice(p,m?m.index:s.length),!m)break;switch(m[0]){case"n":d+=i;break;case"$":d+=o.currencySymbol;break;case"-":/[1-9]/.test(i)&&(d+=o.negativeSign);break;case"%":d+=o.percentSymbol;break;default:throw new Error(w().Exp_InvalidNumberFormat)}}return d}function s(e,t,n){var r=M(t),o=d;0===e?o=r._zero:e<0&&(o=r._negative),o||(o=r._normal);var i=O(e,o,n)+"";return 1===i.indexOf(n.negativeSign)&&0===i.indexOf(n.currencySymbol)&&(i=i[1]+i[0]+i.substring(2)),i}function k(){return/^(C|c|D|d|E|e|F|f|G|g|N|n|P|p|R|r|X|x)(\d*)$/g}function E(e,t){for(var n=g(b(e)),o={_integer:1,_decimal:0};n>=10;)n/=10,o._integer++;var i,a=e.toString(),s=a.search(/e/gi),u=a.indexOf(t);if(-1!==s){var l=r(a,0,s),c=r(a,s+1),f=0;-1!==u&&(f=r(l,u+1).length);i=f-m(c),i<0&&(i=0),o._decimal=i}else i=0,-1!==u&&(i=r(a,u+1).length),o._decimal=i;return o}function C(e){for(var t={_symbol:e.charAt(0),_sign:0,_exp:0},n="",r=1;r<e.length;r++)if("+"===(n=e.charAt(r)))t._sign=1;else{if("-"!==n){if("0"===n){t._exp=e.length-r;break}throw new Error(w().Exp_InvalidExponentFormat)}t._sign=-1}return t}function M(e){for(var t=d,n=d,r=d,o={_intPart:d,_decPart:d,_group:y,_scale:0,_percent:0,_permile:0,_exponent:d},i="",s=y,u=y,l=y,c=y,p=y,h=y,m=y,g=y,b=d,_=d,k=[],E=0;E<e.length;E++)if(b=e.charAt(E),s)"'"!==b?i+=b:(k.push(i),i="",s=y),_=b;else if(u)'"'!==b?i+=b:(k.push(i),i="",u=y),_=b;else if(l)k.push(i+b),i="",_=b;else{if(c){if("E"===_||"e"===_){if("+"===b||"-"===b||"0"===b){i+=b;continue}c=y}else if("+"===_||"-"===_){if("0"===b){i+=b;continue}c=y,k.push(i),i=""}else if("0"===_){if("0"===b){i+=b;continue}c=y,m||(m=v,o._exponent=C(i)),k.push(i),i=""}}else if("0"===b||"#"===b){if(g=v,"0"===_||"#"===_){i+=b,_=b;continue}""!==i&&(k.push(i),i="")}else"0"!==_&&"#"!==_||"0"===b||"#"===b||(k.push(i),i="");if(";"===b){if(""!==i&&(c&&!m&&(o._exponent=C(i)),k.push(i),i=""),p?o._decPart=b:o._intPart=k,k=[],a(t))t=o;else if(a(n))n=o;else{if(!a(r))throw new Error(w().Exp_InvalidSemicolons);r=o}p=y,g=y,h&&(o._group=v,h=y),o={}}else if(p||"."!==b)if("'"===b)s=v;else if('"'===b)u=v;else if("%"===b)o._percent++,""!==i&&(k.push(i),i=""),k.push(b);else if(b===f._getCultureInfo().NumberFormat.perMilleSymbol)o._permile++,k.push(b);else if("0"===b||"#"===b)i+=b;else if(","===b)if(p)""!==i&&(k.push(i),i="");else{if(""!==i&&(k.push(i),i=""),!g)continue;for(var M=v,T="",S=E+1;S<e.length;S++){var O=e.charAt(S);if(""===T)if("'"===O||'"'===O)T=O;else{if("0"===O||"#"===O){M=y;break}if("."===O||";"===O)break}else"'"!==O&&'"'!==O||(T="")}M?o._scale++:h=v}else"E"===b||"e"===b?(c=v,""!==i&&k.push(i),i=b):i+=b;else"#"!==_&&"0"!==_&&(k.push(i),i="#"),""!==i&&(k.push(i),i=""),o._intPart=k,k=[],p=v,g=y,h&&(o._group=v,h=y);_=b}return""!==i&&(c&&!m&&(o._exponent=C(i)),k.push(i)),h&&(o._group=v),p?o._decPart=k:o._intPart=k,a(t)?t=o:a(n)?n=o:a(r)&&(r=o),{_normal:t,_negative:n,_zero:r}}function T(e,t,n){for(var r=t[0],o=1,i=e.length-1,a="",s=0,u=y;i>=0;){if(r<1||r>9)throw new Error(w().Exp_InvalidNumberGroupSize);/\d/gi.test(e[i])?(u&&(a=n+a,u=y),s++):s=0,a=e[i]+a,s===r&&(u=v,s=0,o<t.length&&(r=t[o],o++)),i--}return a}function S(e,t,n,o,i,a,s){var u=I(e,-t);isFinite(u)||(u=e),e=u;var f,d,p=e.toString(),m=p.split(/e/i);return p=m[0],d=m.length>1?h(m[1],10):0,m=p.split("."),p=m[0],f=m.length>1?m[1]:"",d>0?(f=c(f,d),p+=f.slice(0,d),f=r(f,d)):d<0&&(d=-d,p=e<0?a+l(p.replace(a,""),d+1):l(p,d+1),f=p.slice(-d,p.length)+f,p=p.slice(0,-d)),t>0?(f=f.length>t?f.slice(0,t):c(f,t),f=i+f):f="",s===v?p+f:T(p,n,o,a)+f}function O(e,t,n){var o="";e*=_(100,t._percent),e*=_(1e3,t._permile),e/=_(10,3*t._scale);var i=t._intPart,a=t._decPart;if(!i&&!a)return"";var s,u,c,f,p,h=d,m=d;if(i)for(h="",s=0;s<i.length;s++)u=i[s],/^(0|#)+/g.test(u)&&(h+=u);if(a)for(m="",c=0;c<a.length;c++)f=a[c],/^(0|#)+/g.test(f)&&(m+=f);if(!h&&!m)return(i?i.join(""):"")+(a?a.join(""):"");m||(m="");var g=0,w=E(e,".");if(t._exponent){var k=b(e),C=h?h.length:1;if(k>=1)w._integer>C?(w._integer-=C,w._decimal+=C,e/=_(10,w._integer),g=w._integer):g=(w._integer,0),-1===t._exponent._sign&&(t._exponent._sign=0);else if(k<1&&k>0){t._exponent._sign=-1,w._integer=C,w._decimal-=C;for(var M=_(10,C);10*k<M;)k*=10,g++;e*=_(10,g)}}var O=m.lastIndexOf("0"),P=m.lastIndexOf("#"),x=w._decimal;O>=0&&(x=O+1),P>O&&P<w._decimal&&(x=P+1),a||(x=0);var N=S(e,x,n.numberGroupSizes,n.numberGroupSeparator,n.numberDecimalSeparator,n.negativeSign,v);if(""===N)return(i?i.join(""):"")+(a?a.join(""):"");var j=y;if(i){var I=N.split(".")[0],D=r(I,0,1);D===n.negativeSign&&(I=r(I,1));var R=0,U="",H=h.indexOf("0"),B=1===I.length&&"0"===I?0:I.length,W=-1===H?B:h.length-H;for(I=0===W?"":I,s=i.length-1;s>=0;s--)if(u=i[s],/^(0|#)+/g.test(u))if((U=u+U)!==h){for(var V=u.length,z=I.length-R-1;z>=0&&V>0;z--){var Y=I.charAt(z);o=Y+o,V--,R++}R>=I.length&&R<W&&V>0&&(o=new Array(V+1).join("0")+o,R+=V)}else{var G=r(I,0,I.length-R);H>=0&&H<h.length-R-G.length&&(G=new Array(h.length-R-H-G.length+1).join("0")+G),o=G+o}else t._exponent&&!j&&/^((E(\+|-)?|e(\+|-)?)\d+)/g.test(u)?(j=v,p="",p+=t._exponent._symbol,p+=L[t._exponent._sign],p+=l(g.toString(),t._exponent._exp),o=p+o):o=u+o;D===n.negativeSign&&(o=D+o),t._group===v&&(o=T(o,n.numberGroupSizes,n.numberGroupSeparator,n.negativeSign))}if(a){var $="";if(x>0){var q=N.indexOf(".");-1!==q&&($=N.substring(q+1),""===h&&(o+=r(N,0,q)),o+=n.numberDecimalSeparator)}else/^(#+)$/gi.test(m)&&a.join("").length===m.length||(O<=0&&N.indexOf(".")<0&&h===A&&m===F||(o+="."),O>0&&($=new Array(O+1).join("0")));var K=0;for(c=0;c<a.length;c++)f=a[c],/^(0|#)+/g.test(f)?(o+=r($,K,f.length),K+=f.length):t._exponent&&!j&&/^((E(\+|-)?|e(\+|-)?)\d+)/g.test(f)?(j=v,p="",p+=t._exponent._symbol,p+=L[t._exponent._sign],p+=l(g.toString(),t._exponent._exp),o+=p):o+=f}var J=o.indexOf("0.");return 0===J&&(J+2===o.length&&0===w._decimal?o=o.replace("0.","."):J+2<o.length&&(/[0-9]+/g.test(o.charAt(J+2))||(o=o.replace("0.",".")))),o}function P(e,t){if(e=a(e)?"":u._trimEnd(e,""),e.match(/^[+-]?infinity$/i))return m(e);if(e.match(/^0x[a-f0-9]+$/i))return h(e,10);var n=t.NumberFormat,o=n.numberNegativePattern,i=x(e,n,o),s=i[0],l=i[1];""===s&&1!==o&&(i=x(e,n,1),s=i[0],l=i[1]),""===s&&(s="+"),l[0]===n.currencySymbol&&(l=r(l,1));var c,f,p=l.indexOf("e");p<0&&(p=l.indexOf("E")),p<0?(f=l,c=d):(f=r(l,0,p),c=r(l,p+1));var y,v,g=f.indexOf(".");g<0?(y=f,v=d):(y=r(f,0,g),v=r(f,g+".".length)),y=y.split(",").join("");var b=",".replace(/\u00A0/g," ");","!==b&&(y=y.split(b).join(""));var _=s+y;if(v!==d&&(_+="."+v),_[_.length-1]===n.percentSymbol){_=r(_,0,_.length-1),_=u._trimEnd(_,"");var w=_.indexOf(".");-1===w&&(w=_.length);var k="";k+=r(_,0,w-2),k+=".",k+=r(_,w-2,2),k+=r(_,w+1),_=k}if(c!==d){var E=x(c,n,1);""===E[0]&&(E[0]="+"),_+="e"+E[0]+E[1]}return _.match(/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/)?m(_):NaN}function x(e,t,n){var o=t.negativeSign,i=t.positiveSign,a=u;if(4!==n&&2!==n||(o=" "+o,i=" "+i),4===n||3===n){if(a._endsWith(e,o))return["-",r(e,0,e.length-o.length)];if(a._endsWith(e,i))return["+",r(e,0,e.length-i.length)]}else if(2===n||1===n){if(a._startsWith(e,o))return["-",r(e,o.length)];if(a._startsWith(e,i))return["+",r(e,i.length)]}else{if(0!==n)throw new Error("");if(a._startsWith(e,"(")&&a._endsWith(e,")"))return["-",r(e,1,e.length-2)]}return["",e]}function N(e,t,n){if(0!==b(g(e)-e))throw new Error(w().Exp_BadFormatSpecifier);var r=e>=0?e.toString(16):(R+e+1).toString(16);return r=t?r.toLowerCase():r.toUpperCase(),!a(n)&&r.length<n?l(r,n):r}function j(e,t,n,r,o,i,a){for(var s=0,u=e>=1||0===e;s<1e3;){var c=_(10,s);if(u&&e/c<10||!u&&e*c>=1)break;s++}e=u?b(e)/_(10,s):b(e)*_(10,s);var f=S(e,n,r,o,i,a);return f+=t+(u?"+":"-")+l(s.toString(),3)}function I(e,t){return typeof t===p||0==+t?Math.round(e):(e=+e,t=+t,isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t))),e=e.toString().split("e"),+(e[0]+"e"+(e[1]?+e[1]+t:t))))}function D(e){var t=f._getCultureInfo().NumberFormat;return"string"==typeof e&&(t=f._getCultureInfo(e).NumberFormat),t}var A="##################0",F="################",L={1:"+",0:"","-1":"-"},R=4294967295,U=["n %","n%","%n","% n"],H=["-n %","-n%","-%n","%-n","%n-","n-%","n%-","-% n","n %-","% n-","% -n","n- %"],B=["(n)","-n","- n","n-","n -"],W=["$n","n$","$ n","n $"],V=["($n)","-$n","$-n","$n-","(n$)","-n$","n-$","n$-","-n $","-$ n","n $-","$ n-","$ -n","n- $","($ n)","(n $)"],z="#dot#",Y="#group#";return{_parseLocale:function(e){return P(e,f._getCultureInfo())},_parseInvariant:function(e){return P(e,f._getCultureInfo("invariant"))},_customCultureFormat:function(t,n,r){return r||(r=f._getCultureInfo()),e(t,n,r)},_replaceNormalToCultureSymbol:function(e,t){if("string"!=typeof e)return e;var n=D(t),r=n.numberDecimalSeparator,i=n.numberGroupSeparator;return"."!==r&&(e=e.replace(o("[.]"),z)),","!==i&&(e=e.replace(o("[,]"),Y)),"."!==r&&(e=e.replace(o(z),r)),","!==i&&(e=e.replace(o(Y),i)),e},_replaceCultureSymbolToNormal:function(e,t){if("string"!=typeof e)return e;var n=D(t),r=n.numberDecimalSeparator,i=n.numberGroupSeparator;return"."!==r&&(e=e.replace(o("["+r+"]"),z)),","!==i&&(e=e.replace(o("["+i+"]"),Y)),"."!==r&&(e=e.replace(o(z),".")),","!==i&&(e=e.replace(o(Y),",")),e},_parseFloat:function(e,t){return m(this._replaceCultureSymbolToNormal(e,t))},_toHexString:N}}();e.exports=k},,function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.register=t.reducer=t.actions=t.ModalRoot=t.Modal=void 0;var i=n(678),a=o(i),s=n(679),u=o(s),l=n(650),c=r(l),f=n(680),d=o(f);t.Modal=u.default,t.ModalRoot=a.default,t.actions=c,t.reducer=d.default,t.register=i.register},function(e,t,n){(function(e){function r(e){return new p.CellOperator({action:"retain",data:1,attributes:e})}function o(e){return new p.Operator({action:"remove",data:e})}function i(e){var t={};for(var n in e)t[n]=null;return t}function a(t,n){var r=t.ops||[],o=2===arguments.length;return e.find(r,function(e){var t=e.getAttributes()||{};return s(e)&&(o&&t.id===n||!o)})}function s(t){var n=t.getAttributes()||{},r=t.action,o=t.data;return!("retain"===r&&"number"==typeof o&&e.isEmpty(n)||"remove"===r)}function u(e){return"retain"!==e.action||"retain"===e.action&&e.getAttributes().name}function l(e){for(var t=e.ops,n=0,r=t.length;n<r;n++)if(u(t[n]))return!0;return!1}function c(e){function t(e,t){return e[0]-t[0]}for(var n,r,o,i,a=[],s=[],u={},l=0,c=e.length;l<c;l++)n=e[l].getAttributes(),r=n.id,o=n.order,s.push([o,r]),u[r]=e[l];i=s.sort(t);for(var f=0,d=i.length;f<d;f++)a.push(u[i[f][1]]);return a}function f(e){var t=[],n=[];return e.ops.forEach(function(e){var r=e.getAttributes(),o=Object.keys(r);"object"===d(e.data)&&t.push(r.id),o.length&&n.push(r.id)}),t.length?t[0]:n.length?n[0]:void 0}Object.defineProperty(t,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.changeCellAttrs=r,t.genRemoveOps=o,t.clearAttrs=i,t.findTableOpInApplyCsById=a,t.isTableChanged=s,t.isSheetChangeCs=u,t.isSheetChangeByOps=l,t.sortOps=c,t.getFirstModifiedSheetIdByCs=f;var p=n(53)}).call(t,n(1))},function(e,t){function n(e){var t=e&&e.toString();return!/^0+\d*$/.test(t)&&t-parseFloat(t)+1>=0}function r(e){var t=String(e),n=0;return!isNaN(Number(e))&&t.indexOf(".")>-1&&(n=t.split(".")[1].length),n}function o(e){return!!(n(e)&&e.toString().length>16)}function i(e){return!!(n(e)&&e.toString().length<=16)}function a(e){return n(e)&&e.toString().length<=16?Number(e,10):e}Object.defineProperty(t,"__esModule",{value:!0}),t.isNumeric=n,t.getFractionLen=r,t.isBigNumber=o,t.isValidNumber=i,t.strToNum=a},,function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(13),d=r(f);t.default=function(e){return function(t){function n(){o(this,n);var e=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.checkClick=e.checkClick.bind(e),e.checkResize=e.checkResize.bind(e),e}return a(n,t),u(n,[{key:"componentDidMount",value:function(){this.bindClick(),this.bindResize()}},{key:"componentWillUnmount",value:function(){this.unbindClick(),this.unbindResize()}},{key:"isDescendant",value:function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1}},{key:"checkClick",value:function(e){var t=d.default.findDOMNode(this),n=e.target,r=this.refs.composedComponent.componentClick;n!==t&&!this.isDescendant(t,n)&&document.documentElement.contains(n)&&"function"==typeof r&&r(e,t)}},{key:"checkResize",value:function(e){var t=this.refs.composedComponent.componentResize;"function"==typeof t&&t(e)}},{key:"bindClick",value:function(){document.addEventListener("mouseup",this.checkClick),document.addEventListener("touchend",this.checkClick)}},{key:"unbindClick",value:function(){document.removeEventListener("mouseup",this.checkClick),document.removeEventListener("touchend",this.checkClick)}},{key:"bindResize",value:function(){window.addEventListener("resize",this.checkResize)}},{key:"unbindResize",value:function(){window.removeEventListener("resize",this.checkResize)}},{key:"render",value:function(){return c.default.createElement(e,s({ref:"composedComponent"},this.props))}}]),n}(l.Component)},e.exports=t.default},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var r=u.default.unstable_batchedUpdates?function(e){u.default.unstable_batchedUpdates(n,e)}:n;return(0,a.default)(e,t,r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(462),a=r(i),s=n(13),u=r(s);e.exports=t.default},,function(e,t,n){"use strict";var r=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=[{name:"color"},{name:"background"},{name:"font-size"},{name:"width"},{name:"height"},{name:"rowspan"},{name:"colspan"},{name:"align",values:["left","center","right"]},{name:"bold",values:[!1,!0]},{name:"italic",values:[!1,!0]},{name:"underline",values:[!1,!0]},{name:"vertical",values:["top","middle","bottom"]},{name:"strike",values:[!1,!0]},{name:"wrap",values:["text-wrap","text-no-wrap"]},{name:"fixedRowsTop"},{name:"fixedColumnsLeft"},{name:"link"},{name:"format",values:["normal","0,0","0,0.00","0%","0.00%","0.00E+00","(0,0)","(0,0.00)","¥0,0","¥0,0.00","$0,0","$0,0.00","YYYY/MM/DD","YYYY-MM-DD","HH:mm:ss","YYYY/MM/DD HH:mm:ss"]},{name:"formula"},{name:"filter"},{name:"border-top"},{name:"border-right"},{name:"border-bottom"},{name:"border-left"}],i="|",a=":",s=o.reduce(function(e,t,n){return t.index=n,e[t.name]=t,e},{});e.exports={pack:function(e){if("object"==typeof e&&null!==e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(void 0!==r){var o=s[n];o&&(n=o.index,o.values&&null!==r&&-1===(r=o.values.indexOf(r)))||t.push(null===r?n:n+a+JSON.stringify("string"==typeof r?encodeURIComponent(r):r))}}return t.sort().join(i)}},unpack:function(e){if("string"!=typeof e)return{};for(var t={},n=e.split(i),s=0;s<n.length;s++){var u=n[s].split(a),l=r(u,2),c=l[0],f=l[1],d=o[c];if(f){f=JSON.parse(f);var p=typeof f;"string"===p&&(f=decodeURIComponent(f)),d&&(c=d.name,d.values&&"number"===p&&void 0!==d.values[f]&&(f=d.values[f]))}else d&&(c=d.name),f=null;t[c]=f}return t},merge:function(e,t,n){if(n&&!e)return t;if(!t)return e;e=this.unpack(e),t=this.unpack(t);for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r],n||null!==e[r]||delete e[r]);return this.pack(e)},invert:function(e,t){if(t){if(!e)return t.split(i).map(function(e){var t=e.indexOf(a);return-1===t?e:e.slice(0,t)}).join(i);e=this.unpack(e),t=this.unpack(t);for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]?t[n]=e[n]:t[n]=null);return this.pack(t)}},transform:function(e,t,n){if(n)return t;if(t){if(!e)return t;e=this.unpack(e),t=this.unpack(t);for(var r in t)t.hasOwnProperty(r)&&void 0!==e[r]&&delete t[r];return this.pack(t)}},diff:function(e,t){if(!e)return t;e=this.unpack(e),t&&(t=this.unpack(t));for(var n={},r=!0,o=t?Object.keys(e).concat(Object.keys(t)):Object.keys(e),i=0;i<o.length;i++){var a=o[i],s=t?t[a]:void 0;e[a]!==s&&(r=!1,n[a]=void 0===s?null:s)}return r?void 0:this.pack(n)}}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var r,o;!function(i){r=[n(2)],void 0!==(o=function(e){return i(e)}.apply(t,r))&&(e.exports=o)}(function(e){"use strict";function t(e){void 0===e&&(e=window.navigator.userAgent),e=e.toLowerCase();var t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(windows phone)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[],r={},o={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",versionNumber:t[4]||t[2]||"0",platform:n[0]||""};if(o.browser&&(r[o.browser]=!0,r.version=o.version,r.versionNumber=parseInt(o.versionNumber,10)),o.platform&&(r[o.platform]=!0),(r.android||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"])&&(r.mobile=!0),(r.cros||r.mac||r.linux||r.win)&&(r.desktop=!0),(r.chrome||r.opr||r.safari)&&(r.webkit=!0),r.rv||r.edge){var i="msie";o.browser=i,r[i]=!0}if(r.safari&&r.blackberry){var a="blackberry";o.browser=a,r[a]=!0}if(r.safari&&r.playbook){var s="playbook";o.browser=s,r[s]=!0}if(r.bb){var u="blackberry";o.browser=u,r[u]=!0}if(r.opr){var l="opera";o.browser=l,r[l]=!0}if(r.safari&&r.android){var c="android";o.browser=c,r[c]=!0}if(r.safari&&r.kindle){var f="kindle";o.browser=f,r[f]=!0}if(r.safari&&r.silk){var d="silk";o.browser=d,r[d]=!0}return r.name=o.browser,r.platform=o.platform,r}return window.jQBrowser=t(window.navigator.userAgent),window.jQBrowser.uaMatch=t,e&&(e.browser=window.jQBrowser),window.jQBrowser})},,,function(e,t,n){function r(e){return null!=e&&i(e.length)&&!o(e)}var o=n(416),i=n(336);e.exports=r},,function(e,t,n){"use strict";var r=function(e,t,n,r,o,i,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,i,a,s],c=0;u=new Error(t.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};e.exports=r},function(e,t,n){"use strict";t.__esModule=!0;var r=n(664);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return r.default}});var o=n(665);Object.defineProperty(t,"connect",{enumerable:!0,get:function(){return o.default}})},function(e,t,n){function r(e,t){var n=i(e,t);return o(n)?n:void 0}var o=n(587),i=n(592);e.exports=r},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(608),i=r(o),a=n(774),s=r(a);i.default.Timeago=s.default,t.default=i.default,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(448),i=r(o);t.default=i.default,e.exports=t.default},,,,function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(447),i=r(o);t.default=i.default,e.exports=t.default},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(309),i=r(o);t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={adjustX:1,adjustY:1},o=[0,0],i=t.placements={left:{points:["cr","cl"],overflow:r,offset:[-4,0],targetOffset:o},right:{points:["cl","cr"],overflow:r,offset:[4,0],targetOffset:o},top:{points:["bc","tc"],overflow:r,offset:[0,-4],targetOffset:o},bottom:{points:["tc","bc"],overflow:r,offset:[0,4],targetOffset:o},topLeft:{points:["bl","tl"],overflow:r,offset:[0,-4],targetOffset:o},leftTop:{points:["tr","tl"],overflow:r,offset:[-4,0],targetOffset:o},topRight:{points:["br","tr"],overflow:r,offset:[0,-4],targetOffset:o},rightTop:{points:["tl","tr"],overflow:r,offset:[4,0],targetOffset:o},bottomRight:{points:["tr","br"],overflow:r,offset:[0,4],targetOffset:o},rightBottom:{points:["bl","br"],overflow:r,offset:[4,0],targetOffset:o},bottomLeft:{points:["tl","bl"],overflow:r,offset:[0,4],targetOffset:o},leftBottom:{points:["br","bl"],overflow:r,offset:[-4,0],targetOffset:o}};t.default=i},function(e,t,n){var r=n(454);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){e.exports=!n(80)&&!n(137)(function(){return 7!=Object.defineProperty(n(304)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(136),o=n(68).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(81),o=n(82),i=n(456)(!1),a=n(205)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),u=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~i(l,n)||l.push(n));return l}},function(e,t,n){var r=n(307);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(203);e.exports=function(e){return Object(r(e))}},function(e,t,n){e.exports={default:n(465),__esModule:!0}},function(e,t,n){"use strict";var r=n(209),o=n(84),i=n(311),a=n(85),s=n(81),u=n(210),l=n(471),c=n(212),f=n(474),d=n(86)("iterator"),p=!([].keys&&"next"in[].keys()),h="keys",m="values",y=function(){return this};e.exports=function(e,t,n,v,g,b,_){l(n,t,v);var w,k,E,C=function(e){if(!p&&e in O)return O[e];switch(e){case h:case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},M=t+" Iterator",T=g==m,S=!1,O=e.prototype,P=O[d]||O["@@iterator"]||g&&O[g],x=P||C(g),N=g?T?C("entries"):x:void 0,j="Array"==t?O.entries||P:P;if(j&&(E=f(j.call(new e)))!==Object.prototype&&(c(E,M,!0),r||s(E,d)||a(E,d,y)),T&&P&&P.name!==m&&(S=!0,x=function(){return P.call(this)}),r&&!_||!p&&!S&&O[d]||a(O,d,x),u[t]=x,u[M]=y,g)if(w={values:T?x:C(m),keys:b?x:C(h),entries:N},_)for(k in w)k in O||i(O,k,w[k]);else o(o.P+o.F*(p||S),t,w);return w}},function(e,t,n){e.exports=n(85)},function(e,t,n){var r=n(305),o=n(207).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(155),o=n(153),i=n(82),a=n(202),s=n(81),u=n(303),l=Object.getOwnPropertyDescriptor;t.f=n(80)?l:function(e,t){if(e=i(e),t=a(t,!0),u)try{return l(e,t)}catch(e){}if(s(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.ownerDocument,n=t.body,r=void 0,o=a.default.css(e,"position");if("fixed"!==o&&"absolute"!==o)return"html"===e.nodeName.toLowerCase()?null:e.parentNode;for(r=e.parentNode;r&&r!==n;r=r.parentNode)if("static"!==(o=a.default.css(r,"position")))return r;return null}Object.defineProperty(t,"__esModule",{value:!0});var i=n(143),a=r(i);t.default=o,e.exports=t.default},function(e,t){e.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},,,function(e,t,n){(function(e){var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){"use strict";var i={},a=navigator.userAgent,s=a.match(/AliApp\(\w+\/([a-zA-Z0-9.-]+)\)/);null===s&&(s=a.match(/DingTalk\/([a-zA-Z0-9.-]+)/));var u=s&&s[1];i.ios=/iPhone|iPad|iPod/i.test(a),i.android=/Android/i.test(a),i.version=u,i.cfg={},i.extend=function(e,t){if(t)for(var n in t)e[n]=t[n];return e},i.type=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},"object"==o(e)&&e&&"object"==o(e.exports)?e.exports=i:(n(319)||n(320).cmd)&&(void 0!==(r=function(){return i}.call(t,n,t,e))&&(e.exports=r)),void 0===this.dd&&(this.dd=i),this.__dd=i}).call(window),function(e){"use strict";var t=["backbutton","online","offline","pause","resume","swipeRefresh","appLinkResponse","internalPageLinkResponse","networkEvent","hostTaskEvent"];e.extend(e,{events:t})}(__dd),function(e){"use strict";var t={device:[{namespace:"device.notification.alert",name:"弹窗alert",ios:"2.4.0",android:"2.4.0",defaultParams:{title:"",buttonName:"确定"}},{namespace:"device.notification.confirm",name:"弹窗confirm",ios:"2.4.0",android:"2.4.0",defaultParams:{title:"",buttonLabels:["确定","取消"]}},{namespace:"device.notification.prompt",name:"弹窗prompt",ios:"2.4.0",android:"2.4.0",defaultParams:{title:"",buttonLabels:["确定","取消"]}},{namespace:"device.notification.vibrate",name:"震动",ios:"2.4.0",android:"2.4.0",defaultParams:{duration:300}},{namespace:"device.accelerometer.watchShake",name:"启动摇一摇",ios:"2.4.0",android:"2.4.0",defaultParams:{watch:!0},paramsCallback:function(t){e.ios&&(t.sensitivity=3.2)}},{namespace:"device.notification.toast",name:"Toast",ios:"2.4.0",android:"2.4.0",defaultParams:{text:"toast",duration:3,delay:0}},{namespace:"device.notification.showPreloader",name:"显示浮层",ios:"2.4.0",android:"2.4.0",defaultParams:{text:"加载中...",showIcon:!0}},{namespace:"device.notification.hidePreloader",name:"隐藏浮层",ios:"2.4.0",android:"2.4.0"},{namespace:"device.geolocation.get",name:"获取经纬度",ios:"2.4.0",android:"2.4.0"},{namespace:"device.notification.actionSheet",name:"ActionSheet控件",ios:"2.4.0",android:"2.4.0"},{namespace:"device.connection.getNetworkType",name:"获取当前网络类型",ios:"2.4.0",android:"2.4.0"},{namespace:"device.base.getUUID",name:"获取通用唯一识别码（卸载重新安装会改变）",ios:"2.4.0",android:"2.4.0"},{namespace:"device.base.getInterface",name:"获取热点接入信息",ios:"2.4.0",android:"2.4.0"},{namespace:"device.launcher.checkInstalledApps",name:"检测应用是否安装",ios:"2.4.0",android:"2.4.0"},{namespace:"device.launcher.launchApp",name:"启动第三方app",ios:"2.4.0",android:"2.4.0"},{namespace:"device.notification.modal",name:"弹浮层",ios:"2.4.0",android:"2.4.0"},{namespace:"device.geolocation.openGps",name:"打开设置，只有android有效",ios:"2.5.0",android:"2.5.0"},{namespace:"device.notification.extendModal",name:"弹层，支持多张图片",ios:"2.5.0",android:"2.5.0"},{namespace:"device.base.getSettings",name:"获取手机设置（目前只有ios支持）",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"device.audio.download",name:"下载音频",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.play",name:"播放音频",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.onPlayEnd",name:"监听播放音频停止的事件接口",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.resume",name:"暂停之后继续播放音频",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.pause",name:"暂停播放音频",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.stop",name:"停止播放音频",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.startRecord",name:"开始录制音频",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.stopRecord",name:"停止录制音频",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.onRecordEnd",name:"监听录音自动停止",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.upload",name:"上传已录制的音频",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.base.getScanWifiList",name:"获取wifi列表",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.base.getWifiStatus",name:"获取wifi是否打开",ios:"2.11.0",android:"2.11.0",release:!1}],biz:[{namespace:"biz.util.open",name:"打开应用内页面",ios:"2.4.0",android:"2.4.0",defaultParams:{}},{namespace:"biz.util.openLink",name:"新开页面",ios:"2.4.0",android:"2.4.0",defaultParams:{credible:!0,showMenuBar:!0}},{namespace:"biz.util.share",name:"分享",ios:"2.4.0",android:"2.4.0",defaultParams:{title:"",buttonName:"确定"}},{namespace:"biz.util.ut",name:"上报埋点",ios:"2.4.0",android:"2.4.0",paramsCallback:function(t){var n=t.value,r=[];if(n&&"Object"==e.type(n))if(e.ios)n=JSON.stringify(n);else if(e.android){for(var o in n)r.push(o+"="+n[o]);n=r.join(",")}t.value=n}},{namespace:"biz.util.datepicker",name:"日期选择器",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.util.timepicker",name:"弹窗alert",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.user.get",name:"获取当前登录用户信息",ios:"2.4.0",android:"2.4.0",offline:!0},{namespace:"biz.navigation.setLeft",name:"设置导航左侧按钮",ios:"2.4.0",android:"2.4.0",defaultParams:{watch:!0,show:!0,control:!1,showIcon:!0,text:""}},{namespace:"biz.navigation.setRight",name:"设置导航右侧按钮",ios:"2.4.0",android:"2.4.0",defaultParams:{watch:!0,show:!0,control:!1,showIcon:!0,text:""}},{namespace:"biz.navigation.setTitle",name:"弹窗alert",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.navigation.back",name:"弹窗alert",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.util.uploadImage",name:"弹窗alert",ios:"2.4.0",android:"2.4.0",defaultParams:{multiple:!1}},{namespace:"biz.util.previewImage",name:"弹窗alert",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.util.qrcode",name:"弹窗alert",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.ding.post",name:"发钉",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.telephone.call",name:"打电话",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.chat.chooseConversation",name:"选会话",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.contact.createGroup",name:"创建群",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.util.datetimepicker",name:"日期时间控件",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.util.chosen",name:"下拉控件",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.chat.getConversationInfo",name:"查询会话信息",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.map.search",name:"地图搜索",ios:"2.4.0",android:"2.4.0",release:!1,defaultParams:{scope:500}},{namespace:"biz.map.locate",name:"地图定位",ios:"2.4.0",android:"2.4.0",release:!1},{namespace:"biz.map.view",name:"查看定位",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.util.scan",name:"扫码(支持二维码和条形码)",ios:"2.4.0",android:"2.4.0",defaultParams:{type:"qrCode"}},{namespace:"biz.contact.choose",name:"修改企业通讯录选人",ios:"2.4.0",android:"2.4.0",defaultParams:{multiple:!0,startWithDepartmentId:0,users:[]},paramsCallback:function(t){e.cfg&&e.cfg.corpId&&(t.corpId=e.cfg.corpId)}},{namespace:"biz.contact.complexChoose",name:"企业通讯录同时选人，选部门",ios:"2.4.0",android:"2.4.0",defaultParams:{startWithDepartmentId:0,selectedUsers:[],selectedDepartments:[]},paramsCallback:function(t){e.cfg&&e.cfg.corpId&&(t.corpId=e.cfg.corpId)}},{namespace:"biz.navigation.createEditor",name:"创建通用组件",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.navigation.finishEditor",name:"销毁通用组件",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.chat.pickConversation",name:"选群组",ios:"2.4.2",android:"2.4.2"},{namespace:"biz.contact.complexChoose",name:"企业通讯录同时选人，选部门",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.navigation.setIcon",name:"设置导航icon",ios:"2.4.0",android:"2.4.0",defaultParams:{watch:!0,showIcon:!0,iconIndex:1}},{namespace:"biz.navigation.close",name:"关闭webview",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.util.uploadImageFromCamera",name:"上传图片",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.user.secretID",name:"获取用户登录唯一标识",ios:"2.5.2",android:"2.5.2"},{namespace:"biz.customContact.choose",name:"自定义选人组件",ios:"2.5.2",android:"2.5.2",defaultParams:{isShowCompanyName:!1,max:50},paramsCallback:function(t){e.cfg&&e.cfg.corpId&&(t.corpId=e.cfg.corpId)}},{namespace:"biz.customContact.multipleChoose",name:"自定义选人组件（多选）",ios:"2.4.0",android:"2.4.0",defaultParams:{isShowCompanyName:!1,max:50},paramsCallback:function(t){e.cfg&&e.cfg.corpId&&(t.corpId=e.cfg.corpId)}},{namespace:"biz.util.pageClick",name:"页面打点",ios:"2.5.2",android:"2.5.2"},{namespace:"biz.chat.chooseConversationByCorpId",name:"选择企业会话",ios:"2.6.0",android:"2.6.0",defaultParams:{max:50},paramsCallback:function(t){e.cfg&&e.cfg.corpId&&(t.corpId=e.cfg.corpId)}},{namespace:"biz.chat.toConversation",name:"跳转会话",ios:"2.6.0",android:"2.6.0",paramsCallback:function(t){e.cfg&&e.cfg.corpId&&(t.corpId=e.cfg.corpId)}},{namespace:"biz.navigation.goBack",name:"",ios:"2.6.0",android:"2.6.0"},{namespace:"biz.navigation.setMenu",name:"设置导航左侧按钮",ios:"2.6.0",android:"2.6.0",defaultParams:{watch:!0}},{namespace:"biz.util.uploadAttachment",name:"附件上传",ios:"2.7.0",release:!1,android:"2.7.0"},{namespace:"biz.cspace.preview",name:"附件预览",ios:"2.7.0",android:"2.7.0",release:!1,defaultParams:{}},{namespace:"biz.cspace.saveFile",name:"转存附件",ios:"2.7.6",android:"2.7.6"},{namespace:"biz.clipboardData.setData",name:"添加到黏贴板",ios:"2.7.0",android:"2.7.0",release:!1},{namespace:"biz.util.warn",name:"报警接口",ios:"2.7.6",android:"2.7.6",release:!1,paramsCallback:function(e){var t=e.logName||"h5_common_error",n="url="+location.href,r=[],o=e.obj||{};for(var i in o)r.push(i+"="+o[i]);e.message={msg:t+" "+n+" "+r.join(" ")}}},{namespace:"biz.util.multiSelect",name:"下拉多选",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.contact.getMobileContact",name:"查询手机联系人",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.telephone.showCallMenu",name:"打电话选择面板",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.util.presentWindow",name:"打开窗口",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.contact.changeCustomerFollower",name:"企业通讯录选人，加入微应用权限过滤",ios:"2.8.0",android:"2.8.0",paramsCallback:function(t){e.cfg&&e.cfg.corpId&&(t.corpId=e.cfg.corpId)}},{namespace:"biz.notify.send",name:"消息通知H5到Native",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.alipay.pay",name:"支付宝移动支付SDK，订单支付JS-API封装",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.alipay.auth",name:"支付宝移动支付SDK，授权JS-API封装",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.util.fetchImageData",name:"在相册中拾取某张图片，对图片数据base64编码后返回给js",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.util.scanCard",name:"名片扫描",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.util.addDesktopShortcuts",name:"添加桌面快捷方式",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.util.timestamp",name:"获取服务器时间",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"biz.contact.complexPicker",name:"选人",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"biz.util.encrypt",name:"加密",ios:"2.9.1",android:"2.9.1",release:!1},{namespace:"biz.util.decrypt",name:"解密",ios:"2.9.1",android:"2.9.1",release:!1},{namespace:"biz.contact.pickCustomer",name:"选择客户",ios:"2.11",android:"2.11",release:!1},{namespace:"biz.map.searchRoute",name:"查询路线",ios:"2.11",android:"2.11",release:!1}],ui:[{namespace:"ui.input.plain",name:"输入框（单行）",ios:"2.4.0",android:"2.4.0"},{namespace:"ui.progressBar.setColors",name:"设置顶部进度条颜色",ios:"2.4.0",android:"2.4.0"},{namespace:"ui.pullToRefresh.enable",name:"启用下拉刷新功能",ios:"2.4.0",android:"2.4.0",defaultParams:{watch:!0}},{namespace:"ui.pullToRefresh.stop",name:"收起下拉刷新控件",ios:"2.4.0",android:"2.4.0"},{namespace:"ui.pullToRefresh.disable",name:"禁用下拉刷新功能",ios:"2.4.0",android:"2.4.0"},{namespace:"ui.webViewBounce.enable",name:"启用webview下拉弹性效果",ios:"2.4.0",android:"2.4.0"},{namespace:"ui.webViewBounce.disable",name:"禁用webview下拉弹性效果",ios:"2.4.0",android:"2.4.0"},{namespace:"ui.nav.preload",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.nav.go",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.nav.recycle",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.nav.push",name:"",ios:"2.10.0",android:"2.11.0",release:!1},{namespace:"ui.nav.pop",name:"",ios:"2.10.0",android:"2.11.0",release:!1},{namespace:"ui.nav.quit",name:"",ios:"2.10.0",android:"2.11.0",release:!1},{namespace:"ui.nav.close",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.nav.getCurrentId",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.drawer.init",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.drawer.config",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.drawer.enable",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.drawer.disable",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.drawer.open",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.drawer.close",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.tab.init",name:"初始化tab",android:"2.7.6"},{namespace:"ui.tab.start",name:"唤起tab",android:"2.7.6"},{namespace:"ui.tab.config",name:"配置tab",android:"2.7.6"},{namespace:"ui.tab.select",name:"tab选择",android:"2.7.6"},{namespace:"ui.tab.add",name:"增加tab",android:"2.7.6"},{namespace:"ui.tab.remove",name:"移除tab",android:"2.7.6"},{namespace:"ui.appLink.open",name:"应用跳转",ios:"2.7.0",android:"2.7.0",release:!1},{namespace:"ui.appLink.request",name:"发送消息",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"ui.appLink.response",name:"返回消息",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"ui.appLink.fetch",name:"获取请求页面（sourceApp）的数据",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"ui.nav.push",name:"往路径堆栈中push路径",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"ui.nav.pop",name:"路径堆栈中删除view 路径",ios:"2.8.0",android:"2.8.0",release:!1}],runtime:[{namespace:"runtime.info",name:"获取容器信息",ios:"2.4.0",android:"2.4.0"},{namespace:"runtime.permission.requestAuthCode",name:"请求授权码，免登改造用",ios:"2.4.0",android:"2.4.0"},{namespace:"runtime.permission.requestJsApis",name:"权限校验jsapi，隐藏方法，只限sdk内部调用",ios:"2.4.0",android:"2.4.0",release:!1},{namespace:"runtime.message.post",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"runtime.message.fetch",name:"",ios:"2.6.0",android:"2.6.0",release:!1}],internal:[{namespace:"internal.lwp.call",name:"lwp接口(目前只有套件使用)",ios:"2.5.0",android:"2.5.0",offline:!0},{namespace:"internal.microapp.checkInstalled",name:"检测微应用是否安装",ios:"2.5.0",android:"2.5.0"},{namespace:"internal.user.getRole",name:"获取角色",ios:"2.5.0",android:"2.5.0"},{namespace:"internal.request.lwp",name:"lwp通道",ios:"2.5.1",android:"2.5.1",paramsCallback:function(e){var t=e.body;t=JSON.stringify(t),e.body=t}},{namespace:"internal.util.encryData",name:"参数加密生成key",ios:"2.5.2",android:"2.5.2"},{namespace:"internal.log.upload",name:"上报日志到服务端",ios:"2.6.0",android:"2.6.0"},{namespace:"internal.hpm.get",name:"获取hpm配置信息（暂未开发）",ios:"2.7.0",android:"2.7.0"},{namespace:"internal.hpm.update",name:"更新hpm",ios:"2.7.0",android:"2.7.0"},{namespace:"internal.request.getSecurityToken",name:"获取securityToken",ios:"2.7.0",android:"2.7.0"},{namespace:"internal.phoneContact.add",name:"添加号码到手机通信录",ios:"2.7.6",android:"2.7.6"},{namespace:"internal.log.add",name:"日志写入到客户端",ios:"2.7.6",android:"2.7.6",paramsCallback:function(e){e.text="h5_log=1"+e.text}},{namespace:"internal.pageLink.request",name:"发送消息",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.pageLink.response",name:"返回消息",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.pageLink.fetch",name:"获取请求页面（sourceApp）的数据",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.util.getCorpIdByOrgId",name:"orgId换corpId",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.util.getOrgIdByCorpId",name:"corpId换orgId",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.request.httpOverLWP",name:"http转lwp",ios:"2.8.0",android:"2.8.0"},{namespace:"internal.notify.send",name:"消息通知H5到Native",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.schema.open",name:"内部页面跳转",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.contact.chooseMobileContact",name:"手机通讯录选人（单选）",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.util.isSimulator",name:"模拟器",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.util.getWua",name:"人机识别",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.beacon.detectBeacons",name:"beacon",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.host.lwp",name:"离线托管的lwp请求",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.host.query",name:"查询离线托管任务",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.host.cancel",name:"取消离线托管任务",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.schema.openWifiSetting",name:"跳转到wifi设置（Android）",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.createOrg.industryInfo",name:"获取创建团队之后的行业信息",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.createOrg.successJump",name:"创建团队之后跳转",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.beacon.detectStart",name:"detectStart",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.beacon.detectStop",name:"detectStop",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.attend.assistant",name:"上班助手",ios:"2.11.0",android:"2.11.0",release:!1},{namespace:"internal.certify.step",name:"查询活体认证状态",ios:"2.12.0",android:"2.12.0",release:!1},{namespace:"internal.certify.biometric",name:"调用活体拍照",ios:"2.12.0",android:"2.12.0",release:!1},{namespace:"internal.certify.takePhoto",name:"拍照",ios:"2.12.0",android:"2.12.0",release:!1},{namespace:"internal.certify.submit",name:"上班助手",ios:"2.12.0",android:"2.12.0",release:!1}],util:[{namespace:"util.localStorage.getItem",name:"本地存储读",ios:"2.4.2",android:"2.4.2",release:!1},{namespace:"util.localStorage.setItem",name:"本地存储写",ios:"2.4.2",android:"2.4.2",release:!1},{namespace:"util.localStorage.removeItem",name:"本地存储移除操作",ios:"2.4.2",android:"2.4.2",release:!1},{namespace:"util.domainStorage.getItem",name:"本地存储（区分域名）读",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"util.domainStorage.setItem",name:"本地存储（区分域名）写",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"util.domainStorage.removeItem",name:"本地存储（区分域名）删除",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"util.domainStorage.clearItems",name:"本地存储（区分域名）清空",ios:"2.9.0",android:"2.9.0",release:!1}],preRelease:[{namespace:"preRelease.appLink.open",name:"应用跳转",ios:"2.7.0",android:"2.7.0",release:!1},{namespace:"preRelease.appLink.request",name:"发送消息",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"preRelease.appLink.response",name:"返回消息",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"preRelease.appLink.fetch",name:"获取请求页面（sourceApp）的数据",ios:"2.8.0",android:"2.8.0",release:!1}]};e.extend(e,{sdk_version:"0.5.5"}),e.extend(e,{methods:t})}(__dd),function(e,t){"use strict";function n(t,n,r){e.__getMockName&&(t=e.__getMockName(t));var o={};o=e.extend(o,r&&r.defaultParams),e.extend(o,n),r&&r.paramsCallback&&r.paramsCallback(o);var i=function(e){console.log("默认成功回调",t,e)},a=function(e){console.log("默认失败回调",t,e)},s=function(){};o.onSuccess&&(i=o.onSuccess,delete o.onSuccess),o.onFail&&(a=o.onFail,delete o.onFail),o.onCancel&&(s=o.onCancel,delete o.onCancel);var u=function(e){var t=e||{},n=t.errorCode,r=t.result;"0"===n?i&&i.call(null,r):"-1"===n?s&&s.call(null,r):a&&a.call(null,r,n)},l=o.watch;if(e.android){var c=t.split("."),f=c.pop(),d=c.join(".");window.WebViewJavascriptBridgeAndroid&&WebViewJavascriptBridgeAndroid(i,a,d,f,o)}else e.ios&&(l?(window.WebViewJavascriptBridge&&WebViewJavascriptBridge.registerHandler(t,function(e,t){u({errorCode:"0",errorMessage:"成功",result:e}),t&&t({errorCode:"0",errorMessage:"成功"})}),window.WebViewJavascriptBridge&&WebViewJavascriptBridge.callHandler(t,o)):window.WebViewJavascriptBridge&&WebViewJavascriptBridge.callHandler(t,o,u))}var r,o=!1,i=null,a="runtime.permission.requestJsApis",s=null,u=!1,l=!1;window.ES6Promise?(ES6Promise.polyfill(),l=!0):window.Promise||(window.Promise=function(){}),e.extend(e,{ability:"",config:function(t){t&&(i={corpId:t.corpId,appId:t.appId||-1,timeStamp:t.timeStamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:t.jsApiList},e.cfg=i,t.agentId&&(i.agentId=t.agentId))},error:function(e){s=e},ready:function(n){var r=function(t){if(!t)return console.log("bridge初始化失败");if(null!==i&&i.signature){if(e.ios)t.callHandler(a,i,function(e){var r=e||{},o=r.errorCode,i=r.errorMessage||"";r.result,"0"===o?n(t):setTimeout(function(){s&&s({message:"权限校验失败 "+i,errorCode:3})})});else if(e.android){var r=a.split("."),u=r.pop(),l=r.join(".");t(function(){n(t)},function(e){setTimeout(function(){var t=e&&e.errorMessage||"";s&&s({message:"权限校验失败 "+t,errorCode:3})})},l,u,i)}}else n(t);if(!1===o&&(o=!0,e.events.forEach(function(n){e.ios&&t.registerHandler(n,function(e,t){var r=document.createEvent("HTMLEvents");r.data=e,r.detail=e,r.initEvent(n),document.dispatchEvent(r),t&&t({errorCode:"0",errorMessage:"成功"})})}),null===i)){var c={url:encodeURIComponent(window.location.href),js:e.sdk_version,cid:i&&i.corpId||""};e.biz.util.ut({key:"dd_open_js_monitor",value:JSON.stringify(c),onSuccess:function(e){}})}};if(e.ios&&t.WebViewJavascriptBridge){try{WebViewJavascriptBridge.init(function(e,t){})}catch(e){console.log(e.message)}return r(WebViewJavascriptBridge)}if(e.android&&t.WebViewJavascriptBridgeAndroid)return r(WebViewJavascriptBridgeAndroid);if(e.ios)document.addEventListener("WebViewJavascriptBridgeReady",function(){if("undefined"==typeof WebViewJavascriptBridge)return console.log("请在钉钉App打开此页面");try{WebViewJavascriptBridge.init(function(e,t){})}catch(e){console.log(e.message)}u=!0,r(WebViewJavascriptBridge)},!1);else{if(!e.android)return console.log("请在钉钉App打开此页面");var l=function(){try{t.WebViewJavascriptBridgeAndroid=t.nuva.require(),u=!0,r(WebViewJavascriptBridgeAndroid)}catch(e){console.log("window.nuva.require出错",e.message),r(null)}};t.nuva&&(void 0===t.nuva.isReady||t.nuva.isReady)?l():document.addEventListener("runtimeready",function(){l()},!1)}},compareVersion:function(e,t,n){if("string"!=typeof e||"string"!=typeof t)return!1;for(var r,o,i=e.split("."),a=t.split(".");r===o&&a.length>0;)r=i.shift(),o=a.shift();return n?(0|o)>=(0|r):(0|o)>(0|r)}});var c=function(t,n){for(var r=t.split("."),o=e,i=0,a=r.length;a>i;i++)i===a-1&&(o[r[i]]=n),void 0===o[r[i]]&&(o[r[i]]={}),o=o[r[i]]},f=function(t,o,i){return l?new Promise(function(a,s){o=o||{},o._onSuccess=o.onSuccess||function(){},o._onFail=o.onFail||function(){},o._onCancel=o.onCancel||function(){},o.onSuccess=function(){o._onSuccess.apply(this,arguments),a.apply(this,arguments)},o.onFail=function(){o._onFail.apply(this,arguments),s.apply(this,arguments)},o.onCancel=function(){o._onCancel.apply(this,arguments),s.apply(this,arguments)},r=new Promise(function(t,n){e.ready(function(e){t(e)})}),Promise.all([r]).then(function(r){o=o||{},e.cfg&&e.cfg.corpId&&(o.corpId=e.cfg.corpId),n(t,o,i)})}):(o=o||{},e.cfg&&e.cfg.corpId&&(o.corpId=e.cfg.corpId),void n(t,o,i))};for(var d in e.methods)e.methods[d].forEach(function(e){c(e.namespace,function(t){return f(e.namespace,t,e)})});e._invoke=function(e){c(e.namespace,function(t){return f(e.namespace,t,e)})},e.biz.util.pageClick=function(t){var n="open_micro_log_record_client",r=+new Date,o=t.corpId,a=t.agentId;o||(o=i&&i.corpId||""),a||(a=i&&i.agentId||"");var s={visitTime:r,clickType:2,clickButton:t.clickButton||"",url:location.href,corpId:o,agentId:a};return e.biz.util.ut({key:n,value:s}),l?new Promise(function(e){e()}):void 0}}(__dd,window)}).call(t,n(52)(e))},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){var r=n(185),o=n(188),i=n(432),a=n(249).CultureManager,s=n(186)._isNullOrUndefined,u=o._padZeroLeft,l=null,c=parseInt,f=!1,d=!0,p=Math.floor,h=Math.abs,m=function(){return r._getResource(r.SR)()},y={},v=function(){function e(e,t,n){var r,o,i,a,s,u=f;for(s=n,s.slice(1).forEach(function(e){e&&(u=!0)}),u||(s=s.concat(t._getDateTimePattern())),r=1,o=s.length;r<o;r++)if((a=s[r])&&(u=d,i=_(e,a,t)))return i;return l}function t(e,r,o){function i(){return f||y?f:(f=k.test(r),y=d,f)}function a(e,t){if(v)return v[t];switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate()}}var s=o.DateTimeFormat,l=s.Calendar.convert;if(!r||!r.length)return o&&o.name.length?l?t(e,s.fullDateTimePattern,o):e.toLocaleString():e.toString();var c,f,y,v,b=s.eras,_="s"===r,w="",k=/([^d]|^)(d|dd)([^d]|$)/g,E=0,C=g();!_&&l&&(v=l.fromGregorian(e));for(var M=-2,T=-2,S={_value:""},O=0;;O++){var P=C.lastIndex,x=C.exec(r),N=r.slice(P,x?x.index:r.length);if(S._value="",E+=n(N,S),w+=S._value,!x)break;if(E%2!=1){var j=e.getFullYear(),I=e.getDay(),D=e.getHours(),A=e.getMinutes(),F=e.getSeconds(),L=e.getMilliseconds(),R=e.getTimezoneOffset();switch(x[0]){case"dddd":w+=s.dayNames[I];break;case"ddd":w+=s.abbreviatedDayNames[I];break;case"dd":case"DD":f=d,w+=u(a(e,2),2);break;case"d":f=d,w+=a(e,2);break;case"MMMM":w+=s.monthGenitiveNames&&i()?s.monthGenitiveNames[a(e,1)]:s.monthNames[a(e,1)];break;case"MMM":w+=s.abbreviatedMonthGenitiveNames&&i()?s.abbreviatedMonthGenitiveNames[a(e,1)]:s.abbreviatedMonthNames[a(e,1)];break;case"MM":w+=u(a(e,1)+1,2);break;case"M":w+=a(e,1)+1;break;case"yyyy":case"YYYY":case"yyy":w+=M>=0?b._formatEraPart("ee",e):u(v?v[0]:j,4);break;case"yy":w+=M>=0?b._formatEraPart("ee",e):u((v?v[0]:j)%100,2);break;case"y":w+=M>=0?b._formatEraPart("e",e):((v?v[0]:j)%100).toString();break;case"hh":c=D%12,0===c&&(c=12),w+=u(c,2);break;case"h":c=D%12,0===c&&(c=12),w+=c;break;case"HH":w+=u(D,2);break;case"H":w+=D.toString();break;case"mm":w+=u(A,2);break;case"m":w+=A.toString();break;case"ss":w+=u(F,2);break;case"s":w+=F.toString();break;case"tt":w+=D<12?s.amDesignator:s.pmDesignator;break;case"t":w+=(D<12?s.amDesignator:s.pmDesignator).charAt(0);break;case"f":w+=u(L,3).charAt(0);break;case"ff":w+=u(L,3).substr(0,2);break;case"fff":w+=u(L,3);break;case"z":c=R/60,w+=(c<=0?"+":"-")+p(h(c));break;case"zz":c=R/60,w+=(c<=0?"+":"-")+u(p(h(c)),2);break;case"zzz":c=R/60,w+=(c<=0?"+":"-")+u(p(h(c)),2)+":"+u(h(R%60),2);break;case"g":case"gg":case"ggg":if(!b)break;if(M===O-1){M=O;break}w+=b._formatEraPart(x[0],e),M=O;break;case"e":case"ee":if(!b){w+=u(v?v[0]:j,4);break}if(T===O-1){T=O;break}w+=b._formatEraPart(x[0],e),T=O;break;case"/":w+=s.dateSeparator;break;case"[h]":case"[hh]":case"[H]":case"[HH]":case"[mm]":case"[ss]":w+=x[0];break;default:throw new Error(m().Exp_InvalidDateFormat)}}else w+=x[0]}return w.toString()}function n(e,t){for(var n=0,r=f,o=0,i=e.length;o<i;o++){var a=e.charAt(o);switch(a){case'"':r?t._value+="'":n++,r=f;break;case"\\":r&&(t._value+="\\"),r=!r;break;default:t._value+=a,r=f}}return n}function r(e,t){var n=new Date,r=e.DateTimeFormat.eras;if(r&&t<100){var o=r._getEraDate(n)._eraYear;t+=o-o%100,t>e.DateTimeFormat.Calendar.TwoDigitYearMax&&(t-=100)}return t}function g(){return/\/|dddd|ddd|dd|DD|d|MMMM|MMM|MM|M|yyyy|YYYY|yyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|ggg|gg|g|ee|e|\[H\]|\[HH\]|\[h\]|\[hh\]|\[mm\]|\[ss\]/g}function b(e,t){if(e._parseRegExp){if(e._parseRegExp[t])return e._parseRegExp[t]}else e._parseRegExp={};var r=t;r=r.replace("%M","M"),r=r.replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1");for(var o,a="^",s={_value:""},u=[],c=0,f=0,d=g();(o=d.exec(r))!==l;){s._value="";var p=r.slice(c,o.index);if(c=d.lastIndex,f+=n(p,s),a+=s._value,f%2!=1){switch(o[0]){case"dddd":case"ddd":case"MMMM":case"MMM":case"gggg":case"ggg":case"gg":case"g":a+="(\\D+)";break;case"tt":case"t":a+="(\\D*)";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"eee":case"ee":case"e":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":a+="(\\d\\d?)";break;case"yyy":case"yyyy":a+="(\\d{2}|\\d{4})";break;case"fff":a+="(\\d{3})";break;case"ff":a+="(\\d{2})";break;case"f":a+="(\\d)";break;case"zzz":a+="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":a+="([+-]?\\d\\d?)";break;case"/":a+="(\\"+e.dateSeparator+")";break;default:throw new Error(m().Exp_InvalidDateFormat)}i._add(u,o[0])}else a+=o[0]}s._value="",n(r.slice(c),s),a+=s._value,a+="$";var h=a.toString().replace(/\s+/g,"\\s+"),y={_regExp:h,_groups:u,_exp:new RegExp(h)};return e._parseRegExp[t]=y,y}function _(e,t,n){e=e.trim();var i=n.DateTimeFormat,a=b(i,t),s=a._exp.exec(e);if(s===l)return l;for(var u,d=a._groups,p=l,h=l,m=l,y=l,v=l,g=0,_=0,w=0,k=0,E=l,C=f,M=0,T=d.length;M<T;M++){var S=s[M+1];if(S)switch(d[M]){case"dd":case"d":if((y=c(S,10))<1||y>31)return l;break;case"MMMM":if((m=n._getMonthIndex(S))<0||m>11)return l;break;case"MMM":if((m=n._getAbbrMonthIndex(S))<0||m>11)return l;break;case"M":case"MM":case"%M":if((m=c(S,10)-1)<0||m>11)return l;break;case"e":case"ee":if((h=r(n,c(S,10)))<0||h>9999)return l;break;case"y":case"yy":case"yyy":case"yyyy":if((h=c(S,10))<0||h>9999)return l;break;case"h":case"hh":case"H":case"HH":if((g=c(S,10))<0)return l;break;case"m":case"mm":if((_=c(S,10))<0||_>59)return l;break;case"s":case"ss":if((w=c(S,10))<0||w>59)return l;break;case"tt":case"t":var O=S.toUpperCase();if(!(C=O===i.pmDesignator.toUpperCase())&&O!==i.amDesignator.toUpperCase())return l;break;case"f":if((k=100*c(S,10))<0||k>999)return l;break;case"ff":if((k=10*c(S,10))<0||k>999)return l;break;case"fff":if((k=c(S,10))<0||k>999)return l;break;case"dddd":if((v=n._getDayIndex(S))<0||v>6)return l;break;case"ddd":if((v=n._getAbbrDayIndex(S))<0||v>6)return l;break;case"zzz":var P=S.split(/:/);if(2!==P.length)return l;if((u=c(P[0],10))<-12||u>13)return l;var x=c(P[1],10);if(x<0||x>59)return l;E=60*u+(o._startsWith(S,"-")?-x:x);break;case"z":case"zz":if((u=c(S,10))<-12||u>13)return l;E=60*u;break;case"g":case"gg":case"ggg":var N=S;if(!N||!i.eras)return l;if((p=i.eras._parseEraPart(d[M],N))<0)return l}}var j,I=/^(\d|\d\d):/.test(e),D=I?new Date(1899,11,30):new Date,A=i.Calendar.convert;if(A&&(j=A.fromGregorian(D)),A||(j=[D.getFullYear(),D.getMonth(),D.getDate()]),h===l?h=j[0]:h<100&&(i.eras?h=i.eras._getYearFromEra(p||0,h):h+=h>=30?1900:2e3),m===l&&(m=j[1]),y===l&&(y=j[2]),A){if((D=A.toGregorian(h,m,y))===l)return l}else{if(D.setFullYear(h,m,y),D.getDate()!==y)return l;if(v!==l&&D.getDay()!==v)return l}if(C&&g<12&&(g+=12),D.setHours(g,_,w,k),E!==l){var F=D.getMinutes()-(E+D.getTimezoneOffset());D.setHours(D.getHours()+F/60,F%60)}return D}return{_customCultureFormat:function(e,n,r){return r||(r=a._getCultureInfo()),t(e,n,r)},_localeFormat:function(e,n,r){return t(e,n,r||a._getCultureInfo())},_parseLocale:function(t,n,r){var o,i;return n||r||void 0===(i=y[t])?(o=n?[t,n]:[t],i=e(t,r||a._getCultureInfo(),o),n||r||(y[t]=i),i?new Date(i):i):i?new Date(i):i},_parseInvariant:function(t,n){return e(t,a._getCultureInfo("invariant"),[t,n])},_parseExact:_,_fromOADate:function(e){var t=e-25569,n=new Date(864e5*t),r=t>=0?1:-1,o=n.getTimezoneOffset(),i=(864e5*e*1440+r-3181192704e6+864e5*o)/1440,a=new Date(i),s=o>=0?1:-1,u=new Date(i+36e5*s),l=u.getTimezoneOffset();if(o!==l){var c=new Date(i+60*(l-o)*1e3);if(o>l){if(-1===s||l===a.getTimezoneOffset())return c}else if(o<l&&(1===s||l===a.getTimezoneOffset()))return c}return a},_toOADate:function(e){return s(e)?0:("number"==typeof e&&(e=new Date(e)),(1440*e.getTime()+3181192704e6-864e5*e.getTimezoneOffset())/124416e6)},_DT:function(e){var t=l,n=d;if(s(e))t=this._fromOADate(0);else if(e instanceof Date)t=new Date(e);else if("string"==typeof e){var r=this._parseLocale(e);r||isNaN(e)||(r=v._fromOADate(parseFloat(e)))||(n=f),t=r}else"number"==typeof e?t=this._fromOADate(e):n=f;if(n)return t;throw m().Exp_InvalidCast}}}();e.exports=v},,function(e,t,n){(function(r){function o(e){return c(cow.currentUser,e)}function i(e){if(u(e)||l(e)){if(e.team_role&&"creator"===e.team_role)return!0}else if(e.isOwner)return!0;return!1}function a(e){if(u(e)||l(e)){if(e.team_role&&"member"===e.team_role)return!0}else if(!i(e))return!0;return!1}function s(e){return!(!u(e)&&!l(e)||!e.team_role||"admin"!==e.team_role)}function u(e){return e.accountType&&("enterprise_standard"===e.accountType||"enterprise_expired"===e.accountType)}function l(e){return e.accountType&&"enterprise_dingding"===e.accountType}function c(e,t){return e.id&&t.id&&e.id===t.id||e.email&&t.email&&e.email===t.email}function f(e,t){return!!i(e)||!(!s(e)||i(t)||s(t))}function d(e,t){var n=[];if(!e||!/^[\w-@\.\u4E00-\u9FFF]+$/.test(e))return n;if(e=e.toLowerCase(),t)if(e.match(/^([\w-_]+(?:\.[\w-_]+)*)@((?:[a-z0-9]+(?:-[a-zA-Z0-9]+)*\.)+[a-z]{2,6})$/i)){var o=new RegExp("^"+e);r.each(t,function(e){o.test(e.email||"")&&n.push(e)})}else r.each(t,function(t){if(t.name_pinyin&&!(t.id<0)){if(!w[t.id]){if(!t.name_pinyin||t.id<0)return;var o=t.name_pinyin.split("|");w[t.id]={name:t.name,firstLetters:o[0],fullPinyin:o[1],fullPinyinS:o[1].replace(/\'/g,""),emailPrefix:(null!==t.email?t.email.split("@")[0]:void 0)||"",emailFull:t.email||""}}var i=w[t.id],a=i.name.toLowerCase().indexOf(e)+1,s=i.firstLetters.toLowerCase().indexOf(e)+1,u=i.fullPinyin.toLowerCase().indexOf("'"+e)+1,l=i.emailPrefix.toLowerCase().indexOf(e)+1,c=i.emailFull.toLowerCase().indexOf(e)+1,f=i.fullPinyinS.toLowerCase().indexOf(e)+1,d=r.min([a,20*s,20*u,20*l,1e4*c,1e3*f].filter(function(e){return e>0}));void 0!==d&&t.status>-1&&n.push({weight:d,user:t})}}),n=n.sort(function(e,t){return e.weight-t.weight}).map(function(e){return e.user});return n}function p(e){var t="/api/getUserInfo?email="+e;return(0,_.ajaxGet)(t)}function h(e,t){return new Promise(function(n,r){if(0===e.length)return void n();var o={file_id:t,users:[]};e.forEach(function(e){var t="number"==typeof e.id?e.id:e.email;o.users.push(t)}),(0,_.ajaxPost)("/api/invite",o).then(function(e){if(0===e.code&&e.data.success){var t=[];e.data.detail.forEach(function(e){void 0!==e.user&&t.push(e.user)}),n(t)}else r()},function(){r()})})}function m(){return(0,_.ajaxGet)("/api/share/recent_contact")}function y(e){return new Promise(function(t,n){(0,_.ajaxGet)("/smapi/teams/mine/members",e).then(function(e){0===e.code?t(e.data||[]):n(e)},function(e){n(e)})})}function v(e,t){var n={guid:e,user_id:t};return new Promise(function(e,t){(0,_.ajaxPost)("/api/share/delete",n).then(function(n){0===n.code?e(n):t()},function(e){t(e)})})}function g(){return new Promise(function(e,t){(0,_.ajaxGet)("/smapi/teams/mine/permissions").then(function(n){if(0===n.code){var r=cow.currentUser.team_role;e({share:(n.data.share||[]).indexOf(r)>-1,invite:(n.data.invite||[]).indexOf(r)>-1,setAdmin:(n.data.setAdmin||[]).indexOf(r)>-1})}else t(new Error(n.message))},function(e){t(e)})})}function b(e){return new Promise(function(t,n){(0,_.ajaxGet)("/smapi/users/email?email="+e).then(function(e){0===e.code?t(e.data):n(new Error(e.message))},function(e){n(e)})})}Object.defineProperty(t,"__esModule",{value:!0});var _=n(22),w={};t.default={isSelf:o,isSameUser:c,isCreator:i,isMember:a,isAdmin:s,isEnterpriseStandard:u,isEnterpriseDingding:l,hasPermissionRemoveUserFromTeam:f,searchByKeyword:d,getUserInfoByEmail:p,addNewShareUsers:h,getRecentMember:m,getTeamMembers:y,deleteShareUser:v,getMyPermission:g,searchByEmail:b},e.exports=t.default}).call(t,n(1))},function(e,t,n){var r=n(150),o=r.Symbol;e.exports=o},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},,function(e,t,n){var r,o,i;!function(a,s){o=[e,n(421),n(423),n(424)],r=s,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var l=o(t),c=o(n),f=o(r),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(n),r.listenClick(e),r}return s(t,e),p(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===d(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,f.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return u("action",e)}},{key:"defaultTarget",value:function(e){var t=u("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return u("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),t}(c.default);e.exports=h})},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(643),u=o(s),l=function(){function e(t){i(this,e),this.prefix=t.prefix||"sm-sheet",this.userId=t.userId,this.clientId=t.clientId;var n=t.driver||[u.default.INDEXEDDB,u.default.LOCALSTORAGE],r={name:this.prefix,driver:n};this.store=u.default.createInstance(r);try{localStorage.setItem("test-stroage-support","testValue"),localStorage.removeItem("test-stroage-support")}catch(e){throw new Error("离线功能暂时不可用")}}return a(e,[{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.clientId,r=this.prefix+"_"+this.userId+"_"+e+"_"+n;return this.setByKey(r,t)}},{key:"setByKey",value:function(e,t){return this.store.setItem(e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.clientId,n=this.prefix+"_"+this.userId+"_"+e+"_"+t;return this.getByKey(n)}},{key:"getByKey",value:function(e){return this.store.getItem(e).then(function(e){return e}).catch(function(){return null})}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.clientId;return this.removeByKey(this.prefix+"_"+this.userId+"_"+e+"_"+t)}},{key:"removeByKey",value:function(e){return this.store.removeItem(e)}},{key:"getAll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.userId,n=arguments[1],o=n?"_"+n:"",i=this.prefix+"_"+t+o;return this.store.keys().then(function(e){var t=[];return e.forEach(function(e){e.indexOf(i)>-1&&t.push(e)}),t}).then(function(t){var n=t.map(function(t){return e.getByKey(t).then(function(e){return r.assign(e||{},{key:t})})});return Promise.all(n).then(function(e){return e})})}}]),e}();t.default=l,e.exports=t.default}).call(t,n(1))},function(e,t){function n(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(514),d=o(f),p=n(515),h=o(p),m=n(275),y=o(m),v=n(256),g=o(v),b=n(5),_=o(b),w=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={visible:!1},n.componentClick=n.componentClick.bind(n),n.closeMenuPopover=n.closeMenuPopover.bind(n),n.handleVisibleChange=n.handleVisibleChange.bind(n),n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{currentUser:l.PropTypes.object}}}]),u(t,[{key:"handleVisibleChange",value:function(e){this.setState({visible:e})}},{key:"closeMenuPopover",value:function(){this.state.visible&&this.setState({visible:!1})}},{key:"componentClick",value:function(e){if(!(this.props.currentUser.id<0||_.default.isMobile())){var t=this.refs.popover.getPopupDomNode();this.state.visible&&!t.contains(e.target)&&this.closeMenuPopover()}}},{key:"renderContent",value:function(){var e=this.props.currentUser;return c.default.createElement(h.default,{currentUser:e,closeMenuPopover:this.closeMenuPopover})}},{key:"toProfile",value:function(){r("/profile")}},{key:"render",value:function(){var e=this.props.currentUser,t=e.avatar,n=this.state.visible;return _.default.isMobile()?c.default.createElement("div",{className:"config-avatar-wrap",onClick:this.toProfile},c.default.createElement(d.default,{customClass:"config-avatar",avatarSrc:t})):e.id<0?c.default.createElement("div",{className:"config-avatar-wrap"},c.default.createElement(d.default,{customClass:"config-avatar anonymous",avatarSrc:t})):c.default.createElement(y.default,{ref:"popover",overlayClassName:"header-menu-popover",visible:n,onVisibleChange:this.handleVisibleChange,align:{offset:[13,3]},content:this.renderContent()},c.default.createElement("div",{className:"config-avatar-wrap"},c.default.createElement(d.default,{customClass:"config-avatar",avatarSrc:t})))}}]),t}(l.Component);t.default=(0,g.default)(w),e.exports=t.default}).call(t,n(23))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(5),f=r(c),d=n(72),p=n(20),h=r(p),m=n(179),y=r(m),v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={starred:e.currentFile.starred},n.notLoggedStar=n.notLoggedStar.bind(n),n.loggedStar=n.loggedStar.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{currentFile:u.PropTypes.object,currentUser:u.PropTypes.object}}}]),s(t,[{key:"notLoggedStar",value:function(){var e=this.props.currentFile.id,t=this.props.currentFile.guid;f.default.isMobile()?window.location.href="/register?redirect_url="+encodeURIComponent("/desktop?fileid="+e+"&guid="+t):window.location.href="/register?redirect_url="+encodeURIComponent("/favorites?fileid="+e+"&guid="+t)}},{key:"loggedStar",value:function(){var e=this,t=this.props.currentFile.id,n=this.props.currentFile,r=(n.shareMode,n.type,this.props.currentUser.id>0);this.state.starred?(0,d.unstarFile)(t).then(function(){e.setState({starred:!1})},function(e){f.default.alert({title:e.message,type:"error"})}):(0,d.starFile)(t).then(function(){r&&(f.default.isMobile()?(0,y.default)("文档已标星"):f.default.alert({title:"文档已标星"})),e.setState({starred:!0})},function(e){f.default.alert({title:e.message,type:"error"})})}},{key:"isReadonly",value:function(e){return!!e.match(/readonly/)}},{key:"isEditable",value:function(e){return!!e.match(/editable/)}},{key:"render",value:function(){var e=this.props.currentFile,t=e.shareMode,n=e.type,r=e.teamId,o=this.props.currentUser.id>0,i=this.isReadonly,a=this.isEditable;if(!f.default.isMobile()&&i(t)&&0===n&&!o)return l.default.createElement("span",null,l.default.createElement("a",{className:"readonly-operation mark-star",onClick:this.notLoggedStar},"标星收藏"),l.default.createElement("a",{href:"/register",className:"readonly-operation register-or-login"},"注册 / 登录"));if(!f.default.isMobile()&&i(t)&&0===n&&o){var s=(0,h.default)({"readonly-operation":!0,"mark-star":!0,active:this.state.starred});return l.default.createElement("span",null,l.default.createElement("a",{className:s,onClick:this.loggedStar},this.state.starred?"取消标星":"标星收藏"))}if(!f.default.isMobile()&&a(t)&&0===n&&!o)return l.default.createElement("div",{className:"right-btn-group"},l.default.createElement("a",{className:"right-btn mark-star",onClick:this.notLoggedStar},"标星收藏"),l.default.createElement("a",{href:"/register",className:"right-btn register-or-login"},"注册 / 登录"));if(!f.default.isMobile()&&i(t)&&(-1===n||-3===n)&&!o)return l.default.createElement("div",{className:"readonly-btn-group"},l.default.createElement("a",{className:"readonly-operation mark-star",onClick:this.notLoggedStar},"标星收藏"),l.default.createElement("a",{href:"/register",className:"readonly-operation register-or-login"},"注册 / 登录"));if(!f.default.isMobile()&&i(t)&&(-1===n||-3===n)&&o){var u=(0,h.default)({"readonly-loggin-star":!0,"header-star-btn":!0,"s-header-star-btn":!0,active:this.state.starred});return l.default.createElement("a",{className:u,onClick:this.loggedStar},l.default.createElement("span",{className:"team-sprite team-icon-star mark-star-icon"}),l.default.createElement("span",{className:"s-tooltip"},this.state.starred?"取消标星":"标星"))}if(!f.default.isMobile()&&a(t)&&(-1===n||-3===n)&&!o)return l.default.createElement("div",{className:"right-btn-group"},l.default.createElement("a",{className:"right-btn mark-star",onClick:this.notLoggedStar},"标星收藏"),l.default.createElement("a",{href:"/register",className:"right-btn register-or-login"},"注册 / 登录"));if(f.default.isMobile()&&i(t)&&0===n&&!o)return r?l.default.createElement("span",null,l.default.createElement("a",{className:"favorite-btn",onClick:this.notLoggedStar},"收藏")):l.default.createElement("span",null,l.default.createElement("a",{href:"/register",className:"mobile-register-or-login"},"注册 / 登录"));if(f.default.isMobile()&&i(t)&&0===n&&o){var c=(0,h.default)({"readonly-operation":!0,"mark-star":!0,active:this.state.starred});return l.default.createElement("span",null,l.default.createElement("a",{className:c,onClick:this.loggedStar},this.state.starred?"取消标星":"标星收藏"))}if(f.default.isMobile()&&a(t)&&0===n&&!o)return r?l.default.createElement("span",null,l.default.createElement("a",{className:"favorite-btn",onClick:this.notLoggedStar},"收藏")):l.default.createElement("span",null,l.default.createElement("a",{href:"/register",className:"mobile-register-or-login"},"注册 / 登录"));if(f.default.isMobile()&&a(t)&&0===n&&o){var d=(0,h.default)({"mark-star":!0,active:this.state.starred});return l.default.createElement("span",null,l.default.createElement("a",{className:d,onClick:this.loggedStar},this.state.starred?"取消标星":"标星收藏"))}if(f.default.isMobile()&&i(t)&&(-1===n||-3===n)&&!o)return r?l.default.createElement("div",{className:"readonly-btn-group"},l.default.createElement("a",{className:"readonly-operation mobile-readonly-anonymous-star",onClick:this.notLoggedStar},"标星收藏")):l.default.createElement("div",{className:"readonly-btn-group"},l.default.createElement("a",{href:"/register",className:"readonly-operation register-or-login"},"注册 / 登录"));if(f.default.isMobile()&&i(t)&&(-1===n||-3===n)&&o){var p=(0,h.default)({"readonly-operation":!0,"mark-star":!0,active:this.state.starred});return l.default.createElement("span",null,l.default.createElement("a",{className:p,onClick:this.loggedStar},this.state.starred?"取消标星":"标星收藏"))}if(f.default.isMobile()&&a(t)&&(-1===n||-3===n)&&!o)return r?l.default.createElement("span",null,l.default.createElement("a",{className:"mobile-editable-anonymous-star",onClick:this.notLoggedStar},"标星收藏")):l.default.createElement("span",null,l.default.createElement("a",{href:"/register",className:"mobile-register-or-login"},"注册 / 登录"));if(f.default.isMobile()&&a(t)&&(-1===n||-3===n)&&o){var m=(0,h.default)({"mark-star":!0,active:this.state.starred});return l.default.createElement("span",null,l.default.createElement("a",{className:m,onClick:this.loggedStar},this.state.starred?"取消标星":"标星收藏"))}return null}}]),t}(u.Component);t.default=v,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},u=n(193),l=function(e){function t(e){var n,i;return r(this,t),i=n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o(n,i)}return i(t,e),a(t,[{key:"setData",value:function(e){if(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e),"number"==typeof this.data&&1!==this.data)throw new Error('The value of data should be "1", got '+this.data);return this}},{key:"name",value:function(){return"CellOperator"}}]),t}(u);l.packId=4,e.exports=l},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function o(e,t){return function(n){return e(t(n))}}function i(e,t){var n=A(e)||m(e)?r(e.length,String):[],o=n.length,i=!!o;for(var a in e)!t&&!P.call(e,a)||i&&("length"==a||f(a,o))||n.push(a);return n}function a(e,t,n){var r=e[t];P.call(e,t)&&h(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function s(e){if(!p(e))return j(e);var t=[];for(var n in Object(e))P.call(e,n)&&"constructor"!=n&&t.push(n);return t}function u(e,t){return t=I(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=I(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=a,n(e,this,s)}}function l(e,t,n,r){n||(n={});for(var o=-1,i=t.length;++o<i;){var s=t[o],u=r?r(n[s],e[s],s,n,e):void 0;a(n,s,void 0===u?e[s]:u)}return n}function c(e){return u(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&d(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t})}function f(e,t){return!!(t=null==t?E:t)&&("number"==typeof e||S.test(e))&&e>-1&&e%1==0&&e<t}function d(e,t,n){if(!_(n))return!1;var r=typeof t;return!!("number"==r?y(n)&&f(t,n.length):"string"==r&&t in n)&&h(n[t],e)}function p(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||O)}function h(e,t){return e===t||e!==e&&t!==t}function m(e){return v(e)&&P.call(e,"callee")&&(!N.call(e,"callee")||x.call(e)==C)}function y(e){return null!=e&&b(e.length)&&!g(e)}function v(e){return w(e)&&y(e)}function g(e){var t=_(e)?x.call(e):"";return t==M||t==T}function b(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=E}function _(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function w(e){return!!e&&"object"==typeof e}function k(e){return y(e)?i(e):s(e)}var E=9007199254740991,C="[object Arguments]",M="[object Function]",T="[object GeneratorFunction]",S=/^(?:0|[1-9]\d*)$/,O=Object.prototype,P=O.hasOwnProperty,x=O.toString,N=O.propertyIsEnumerable,j=o(Object.keys,Object),I=Math.max,D=!N.call({valueOf:1},"valueOf"),A=Array.isArray,F=c(function(e,t){if(D||p(t)||y(t))return void l(t,k(t),e);for(var n in t)P.call(t,n)&&a(e,n,t[n])});e.exports=F},function(e,t,n){"use strict";function r(e){var t=JSON.stringify({data:e});return t.length+":"+t+"\r\n"}function o(e){return e.slice(0,-2).split("\r\n").map(function(e){var t=e.match(a);if(!t)throw new Error("pipelining format error:"+e);var n=t[2];return JSON.parse(n).data})}function i(e){if(!e)return!1;if("\r\n"!==e.slice(-2))return!1;for(var t=e.slice(0,-2),n=t.split("\r\n"),r=0;r<n.length;r+=1){var o=n[r].match(a);if(!o)return!1;if(Number(o[1])!==o[2].length)return!1}return!0}var a=/^(\d+):(.*)$/;e.exports.pack=r,e.exports.unpack=o,e.exports.isValid=i},,function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=o(c),d=n(13),p=o(d),h=n(271),m=o(h),y=n(746),v=o(y),g=n(20),b=o(g),_=n(256),w=o(_);n(785);var k=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={position:n.calcPosition()},n.getTooltipContainer=n.getTooltipContainer.bind(n),n.componentResize=n.componentResize.bind(n),n.componentClick=n.componentClick.bind(n),n.handleTriggerEvent=n.handleTriggerEvent.bind(n),n.handleTriggerEvents=r.zipObject(e.triggerEvents,e.triggerEvents.map(function(){return n.handleTriggerEvent})),e.isDebounced&&(n.handleTriggerEvents=r.zipObject(e.triggerEvents,e.triggerEvents.map(function(t){return e.debounceConfig&&r.isNumber(e.debounceConfig[t])?r.debounce(n.handleTriggerEvent,e.debounceConfig[t]):r.debounce(n.handleTriggerEvent,e.maxWait)}))),n}return u(t,e),l(t,null,[{key:"propTypes",get:function(){return{text:c.PropTypes.string,colorName:c.PropTypes.string,customClass:c.PropTypes.string,positionNodeElement:c.PropTypes.instanceOf(Element),triggerNodeElement:c.PropTypes.instanceOf(Element),triggerEvents:c.PropTypes.array,autoUpdate:c.PropTypes.bool,isDebounced:c.PropTypes.bool,debounceConfig:c.PropTypes.object,maxWait:c.PropTypes.number,offsetLeft:c.PropTypes.number,offsetTop:c.PropTypes.number,color:c.PropTypes.string,hasBubble:c.PropTypes.bool,viewRect:c.PropTypes.shape({minLeft:c.PropTypes.number,minTop:c.PropTypes.number,maxLeft:c.PropTypes.numner,maxTop:c.PropTypes.number}),visible:c.PropTypes.bool,placement:c.PropTypes.oneOf(["top","right","bottom","left","topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]),autoHide:c.PropTypes.bool,onNeedHide:c.PropTypes.func}}},{key:"defaultProps",get:function(){return{offsetLeft:0,offSetTop:0,color:"#41464b",hasBubble:!0,placement:"left",colorName:"yellow",autoUpdate:!0,isDebounced:!1,maxWait:300,triggerEvents:[]}}}]),l(t,[{key:"componentDidMount",value:function(){this.bindTriggerEvents()}},{key:"componentWillReceiveProps",value:function(e){e&&(e.visible&&!this.props.visible?(this.updatePosition(e),this.bindTriggerEvents(e)):!e.visible&&this.props.visible?this.unbindTriggerEvents(this.props):e.autoUpdate&&!this.props.autoUpdate?this.bindTriggerEvents(e):!e.autoUpdate&&this.props.autoUpdate?this.unbindTriggerEvents(this.props):e.triggerNodeElement&&!this.props.triggerNodeElement?this.bindTriggerEvents(e):!e.triggerNodeElement&&this.props.triggerNodeElement?this.unbindTriggerEvents(this.props):e.triggerEvents.length!==this.props.triggerEvents.length&&(this.unbindTriggerEvents(this.props),this.bindTriggerEvents(e)))}},{key:"componentWillUnmount",value:function(){this.intervalId>-1&&(clearInterval(this.intervalId),this.intervalId=-1),this.unbindTriggerEvents()}},{key:"bindTriggerEvents",value:function(e){var t=this,n=e||this.props,r=n.autoUpdate,o=n.triggerNodeElement,i=n.triggerEvents;r&&o&&i.length&&i.forEach(function(e){o.addEventListener(e,t.handleTriggerEvents[e])})}},{key:"unbindTriggerEvents",value:function(e){var t=this,n=e||this.props,r=n.autoUpdate,o=n.triggerNodeElement,i=n.triggerEvents;r&&o&&i.length&&i.forEach(function(e){o.removeEventListener(e,t.handleTriggerEvents[e])})}},{key:"handleTriggerEvent",value:function(){this.props.visible&&this.updatePosition()}},{key:"calcPosition",value:function(e){var t=e||this.props,n=t.positionNodeElement,r=t.offsetLeft,o=t.offsetTop;if(!n)return{left:0,top:0};var i=n.getBoundingClientRect(),a=i.top+window.pageYOffset-n.clientTop;return{left:i.left+window.pageXOffset-n.clientLeft+(isNaN(r)?0:r),top:a+(isNaN(o)?0:o)}}},{key:"getTooltipContainer",value:function(){return p.default.findDOMNode(this)}},{key:"renderBubble",value:function(){var e=this.props,t=e.hasBubble,n=e.visible;return t&&n?f.default.createElement(v.default,null):f.default.createElement("div",{className:"guide-no-bubble"})}},{key:"componentResize",value:function(){this.updatePosition()}},{key:"componentClick",value:function(){this.props.autoHide&&"function"==typeof this.props.onNeedHide&&this.props.onNeedHide()}},{key:"updatePosition",value:function(e,t){var n=this.state.position,r=this.calcPosition(e);["top","left"].some(function(e){return r[e]!==n[e]})&&this.setState({position:r},function(){"function"==typeof t&&t(r)})}},{key:"render",value:function(){var e;if(!this.props.positionNodeElement)return null;var t=this.state.position,n=this.props,o=n.customClass,a=n.colorName,s=n.viewRect;if(s&&(r.isNumber(s.minLeft)&&t.left<s.minLeft||r.isNumber(s.minTop)&&t.top<s.minTop||r.isNumber(s.maxLeft)&&t.left>s.maxLeft||r.isNumber(s.maxTop)&&t.top>s.maxTop))return null;var u=r.assign({position:"fixed",pointerEvents:"none"},t),l=(0,b.default)((e={"guide-tip-wrap":!0},i(e,""+o,!!o),i(e,""+a,!!a),e));return f.default.createElement("div",{className:l,style:u},f.default.createElement(m.default,{title:this.props.text,arrowPointAtCenter:!0,placement:this.props.placement,visible:this.props.visible,getTooltipContainer:this.getTooltipContainer},this.renderBubble()))}}]),t}(c.Component);t.default=(0,w.default)(k),e.exports=t.default}).call(t,n(1))},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229};r.isTextModifyingKeyEvent=function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=r.F1&&t<=r.F12)return!1;switch(t){case r.ALT:case r.CAPS_LOCK:case r.CONTEXT_MENU:case r.CTRL:case r.DOWN:case r.END:case r.ESC:case r.HOME:case r.INSERT:case r.LEFT:case r.MAC_FF_META:case r.META:case r.NUMLOCK:case r.NUM_CENTER:case r.PAGE_DOWN:case r.PAGE_UP:case r.PAUSE:case r.PRINT_SCREEN:case r.RIGHT:case r.SHIFT:case r.UP:case r.WIN_KEY:case r.WIN_KEY_RIGHT:return!1;default:return!0}},r.isCharacterKey=function(e){if(e>=r.ZERO&&e<=r.NINE)return!0;if(e>=r.NUM_ZERO&&e<=r.NUM_MULTIPLY)return!0;if(e>=r.A&&e<=r.Z)return!0;if(-1!==window.navigation.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case r.SPACE:case r.QUESTION_MARK:case r.NUM_PLUS:case r.NUM_MINUS:case r.NUM_PERIOD:case r.NUM_DIVISION:case r.SEMICOLON:case r.DASH:case r.EQUALS:case r.COMMA:case r.PERIOD:case r.SLASH:case r.APOSTROPHE:case r.SINGLE_QUOTE:case r.OPEN_SQUARE_BRACKET:case r.BACKSLASH:case r.CLOSE_SQUARE_BRACKET:return!0;default:return!1}},t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){}function i(e,t,n){var r=t||"";return e.key||r+"item_"+n}function a(e,t){var n=-1;l.default.Children.forEach(e,function(e){n++,e&&e.type&&e.type.isMenuItemGroup?l.default.Children.forEach(e.props.children,function(e){n++,t(e,n)}):t(e,n)})}function s(e,t,n){e&&!n.find&&l.default.Children.forEach(e,function(e){if(!n.find&&e){var r=e.type;if(!r||!(r.isSubMenu||r.isMenuItem||r.isMenuItemGroup))return;-1!==t.indexOf(e.key)?n.find=!0:e.props.children&&s(e.props.children,t,n)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.noop=o,t.getKeyFromChildrenIndex=i,t.loopMenuItem=a,t.loopMenuItemRecusively=s;var u=n(0),l=r(u)},function(e,t,n){"use strict";function r(e,t){for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}function o(e,t){return e[0]===t[0]&&e[1]===t[1]}function i(e,t,n){var r=e[t]||{};return ue.a({},r,n)}function a(e,t,n){var r=n.points;for(var i in e)if(e.hasOwnProperty(i)&&o(e[i].points,r))return t+"-placement-"+i;return""}function s(){}function u(){return""}function l(){return window.document}Object.defineProperty(t,"__esModule",{value:!0});var c=n(510),f=n.n(c),d=n(139),p=n.n(d),h=n(140),m=n.n(h),y=n(141),v=n.n(y),g=n(142),b=n.n(g),_=n(0),w=n.n(_),k=n(37),E=n.n(k),C=function(e){function t(){return p.a(this,t),v.a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b.a(t,e),m.a(t,[{key:"shouldComponentUpdate",value:function(e){return e.hiddenClassName||e.visible}},{key:"render",value:function(){var e=this.props,t=e.hiddenClassName,n=e.visible,r=f.a(e,["hiddenClassName","visible"]);return t||w.a.Children.count(r.children)>1?(!n&&t&&(r.className+=" "+t),w.a.createElement("div",r)):w.a.Children.only(r.children)}}]),t}(_.Component);C.propTypes={children:E.a.any,className:E.a.string,visible:E.a.bool,hiddenClassName:E.a.string};var M=C,T=n(139),S=n.n(T),O=n(140),P=n.n(O),x=n(141),N=n.n(x),j=n(142),I=n.n(j),D=n(0),A=n.n(D),F=n(37),L=n.n(F),R=function(e){function t(){return S.a(this,t),N.a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return I.a(t,e),P.a(t,[{key:"render",value:function(){var e=this.props,t=e.className;return e.visible||(t+=" "+e.hiddenClassName),A.a.createElement("div",{className:t,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:e.style},A.a.createElement(M,{className:e.prefixCls+"-content",visible:e.visible},e.children))}}]),t}(D.Component);R.propTypes={hiddenClassName:L.a.string,className:L.a.string,prefixCls:L.a.string,onMouseEnter:L.a.func,onMouseLeave:L.a.func,children:L.a.any};var U=R,H=n(67),B=n.n(H),W=n(139),V=n.n(W),z=n(140),Y=n.n(z),G=n(141),$=n.n(G),q=n(142),K=n.n(q),J=n(0),Q=n.n(J),X=n(37),Z=n.n(X),ee=n(13),te=n.n(ee),ne=n(497),re=n.n(ne),oe=n(342),ie=function(e){function t(){var e,n,r,o;V.a(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=$.a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.onAlign=function(e,t){var n=r.props,o=n.getClassNameFromAlign(t);r.currentAlignClassName!==o&&(r.currentAlignClassName=o,e.className=r.getClassName(o)),n.onAlign(e,t)},r.getTarget=function(){return r.props.getRootDomNode()},r.saveAlign=function(e){r.alignInstance=e},o=n,$.a(r,o)}return K.a(t,e),Y.a(t,[{key:"componentDidMount",value:function(){this.rootNode=this.getPopupDomNode()}},{key:"getPopupDomNode",value:function(){return te.a.findDOMNode(this.refs.popup)}},{key:"getMaskTransitionName",value:function(){var e=this.props,t=e.maskTransitionName,n=e.maskAnimation;return!t&&n&&(t=e.prefixCls+"-"+n),t}},{key:"getTransitionName",value:function(){var e=this.props,t=e.transitionName;return!t&&e.animation&&(t=e.prefixCls+"-"+e.animation),t}},{key:"getClassName",value:function(e){return this.props.prefixCls+" "+this.props.className+" "+e}},{key:"getPopupElement",value:function(){var e=this.props,t=e.align,n=e.style,r=e.visible,o=e.prefixCls,i=e.destroyPopupOnHide,a=this.getClassName(this.currentAlignClassName||e.getClassNameFromAlign(t)),s=o+"-hidden";r||(this.currentAlignClassName=null);var u=B.a({},n,this.getZIndexStyle()),l={className:a,prefixCls:o,ref:"popup",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:u};return i?Q.a.createElement(oe.default,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName()},r?Q.a.createElement(re.a,{target:this.getTarget,key:"popup",ref:this.saveAlign,monitorWindowResize:!0,align:t,onAlign:this.onAlign},Q.a.createElement(U,B.a({visible:!0},l),e.children)):null):Q.a.createElement(oe.default,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName(),showProp:"xVisible"},Q.a.createElement(re.a,{target:this.getTarget,key:"popup",ref:this.saveAlign,monitorWindowResize:!0,xVisible:r,childrenProps:{visible:"xVisible"},disabled:!r,align:t,onAlign:this.onAlign},Q.a.createElement(U,B.a({hiddenClassName:s},l),e.children)))}},{key:"getZIndexStyle",value:function(){var e={},t=this.props;return void 0!==t.zIndex&&(e.zIndex=t.zIndex),e}},{key:"getMaskElement",value:function(){var e=this.props,t=void 0;if(e.mask){var n=this.getMaskTransitionName();t=Q.a.createElement(M,{style:this.getZIndexStyle(),key:"mask",className:e.prefixCls+"-mask",hiddenClassName:e.prefixCls+"-mask-hidden",visible:e.visible}),n&&(t=Q.a.createElement(oe.default,{key:"mask",showProp:"visible",transitionAppear:!0,component:"",transitionName:n},t))}return t}},{key:"render",value:function(){return Q.a.createElement("div",null,this.getMaskElement(),this.getPopupElement())}}]),t}(J.Component);ie.propTypes={visible:Z.a.bool,style:Z.a.object,getClassNameFromAlign:Z.a.func,onAlign:Z.a.func,getRootDomNode:Z.a.func,onMouseEnter:Z.a.func,align:Z.a.any,destroyPopupOnHide:Z.a.bool,className:Z.a.string,prefixCls:Z.a.string,onMouseLeave:Z.a.func};var ae=ie,se=n(67),ue=n.n(se),le=n(67),ce=n.n(le),fe=n(0),de=n.n(fe),pe=n(37),he=n.n(pe),me=n(13),ye=(n.n(me),n(145)),ve=n.n(ye),ge=n(258),be=n.n(ge),_e=n(511),we=n.n(_e),ke=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"],Ee=ve.a({displayName:"Trigger",propTypes:{children:he.a.any,action:he.a.oneOfType([he.a.string,he.a.arrayOf(he.a.string)]),showAction:he.a.any,hideAction:he.a.any,getPopupClassNameFromAlign:he.a.any,onPopupVisibleChange:he.a.func,afterPopupVisibleChange:he.a.func,popup:he.a.oneOfType([he.a.node,he.a.func]).isRequired,popupStyle:he.a.object,prefixCls:he.a.string,popupClassName:he.a.string,popupPlacement:he.a.string,builtinPlacements:he.a.object,popupTransitionName:he.a.oneOfType([he.a.string,he.a.object]),popupAnimation:he.a.any,mouseEnterDelay:he.a.number,mouseLeaveDelay:he.a.number,zIndex:he.a.number,focusDelay:he.a.number,blurDelay:he.a.number,getPopupContainer:he.a.func,getDocument:he.a.func,destroyPopupOnHide:he.a.bool,mask:he.a.bool,maskClosable:he.a.bool,onPopupAlign:he.a.func,popupAlign:he.a.object,popupVisible:he.a.bool,maskTransitionName:he.a.oneOfType([he.a.string,he.a.object]),maskAnimation:he.a.string},mixins:[we.a({autoMount:!1,isVisible:function(e){return e.state.popupVisible},getContainer:function(e){var t=e.props,n=document.createElement("div");return n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",(t.getPopupContainer?t.getPopupContainer(me.findDOMNode(e)):t.getDocument().body).appendChild(n),n}})],getDefaultProps:function(){return{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:u,getDocument:l,onPopupVisibleChange:s,afterPopupVisibleChange:s,onPopupAlign:s,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[]}},getInitialState:function(){var e=this.props,t=void 0;return t="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,{popupVisible:t}},componentWillMount:function(){var e=this;ke.forEach(function(t){e["fire"+t]=function(n){e.fireEvents(t,n)}})},componentDidMount:function(){this.componentDidUpdate({},{popupVisible:this.state.popupVisible})},componentWillReceiveProps:function(e){var t=e.popupVisible;void 0!==t&&this.setState({popupVisible:t})},componentDidUpdate:function(e,t){var n=this.props,r=this.state;if(this.renderComponent(null,function(){t.popupVisible!==r.popupVisible&&n.afterPopupVisibleChange(r.popupVisible)}),r.popupVisible){var o=void 0;return!this.clickOutsideHandler&&this.isClickToHide()&&(o=n.getDocument(),this.clickOutsideHandler=be.a(o,"mousedown",this.onDocumentClick)),void(this.touchOutsideHandler||(o=o||n.getDocument(),this.touchOutsideHandler=be.a(o,"touchstart",this.onDocumentClick)))}this.clearOutsideHandler()},componentWillUnmount:function(){this.clearDelayTimer(),this.clearOutsideHandler()},onMouseEnter:function(e){this.fireEvents("onMouseEnter",e),this.delaySetPopupVisible(!0,this.props.mouseEnterDelay)},onMouseLeave:function(e){this.fireEvents("onMouseLeave",e),this.delaySetPopupVisible(!1,this.props.mouseLeaveDelay)},onPopupMouseEnter:function(){this.clearDelayTimer()},onPopupMouseLeave:function(e){e.relatedTarget&&!e.relatedTarget.setTimeout&&this._component&&r(this._component.getPopupDomNode(),e.relatedTarget)||this.delaySetPopupVisible(!1,this.props.mouseLeaveDelay)},onFocus:function(e){this.fireEvents("onFocus",e),this.clearDelayTimer(),this.isFocusToShow()&&(this.focusTime=Date.now(),this.delaySetPopupVisible(!0,this.props.focusDelay))},onMouseDown:function(e){this.fireEvents("onMouseDown",e),this.preClickTime=Date.now()},onTouchStart:function(e){this.fireEvents("onTouchStart",e),this.preTouchTime=Date.now()},onBlur:function(e){this.fireEvents("onBlur",e),this.clearDelayTimer(),this.isBlurToHide()&&this.delaySetPopupVisible(!1,this.props.blurDelay)},onClick:function(e){if(this.fireEvents("onClick",e),this.focusTime){var t=void 0;if(this.preClickTime&&this.preTouchTime?t=Math.min(this.preClickTime,this.preTouchTime):this.preClickTime?t=this.preClickTime:this.preTouchTime&&(t=this.preTouchTime),Math.abs(t-this.focusTime)<20)return;this.focusTime=0}this.preClickTime=0,this.preTouchTime=0,e.preventDefault();var n=!this.state.popupVisible;(this.isClickToHide()&&!n||n&&this.isClickToShow())&&this.setPopupVisible(!this.state.popupVisible)},onDocumentClick:function(e){if(!this.props.mask||this.props.maskClosable){var t=e.target,n=me.findDOMNode(this),o=this.getPopupDomNode();r(n,t)||r(o,t)||this.close()}},getPopupDomNode:function(){return this._component&&this._component.getPopupDomNode?this._component.getPopupDomNode():null},getRootDomNode:function(){return me.findDOMNode(this)},getPopupClassNameFromAlign:function(e){var t=[],n=this.props,r=n.popupPlacement,o=n.builtinPlacements,i=n.prefixCls;return r&&o&&t.push(a(o,i,e)),n.getPopupClassNameFromAlign&&t.push(n.getPopupClassNameFromAlign(e)),t.join(" ")},getPopupAlign:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?i(r,t,n):n},getComponent:function(){var e=this.props,t=this.state,n={};return this.isMouseEnterToShow()&&(n.onMouseEnter=this.onPopupMouseEnter),this.isMouseLeaveToHide()&&(n.onMouseLeave=this.onPopupMouseLeave),de.a.createElement(ae,ce.a({prefixCls:e.prefixCls,destroyPopupOnHide:e.destroyPopupOnHide,visible:t.popupVisible,className:e.popupClassName,action:e.action,align:this.getPopupAlign(),onAlign:e.onPopupAlign,animation:e.popupAnimation,getClassNameFromAlign:this.getPopupClassNameFromAlign},n,{getRootDomNode:this.getRootDomNode,style:e.popupStyle,mask:e.mask,zIndex:e.zIndex,transitionName:e.popupTransitionName,maskAnimation:e.maskAnimation,maskTransitionName:e.maskTransitionName}),"function"==typeof e.popup?e.popup():e.popup)},setPopupVisible:function(e){this.clearDelayTimer(),this.state.popupVisible!==e&&("popupVisible"in this.props||this.setState({popupVisible:e}),this.props.onPopupVisibleChange(e))},delaySetPopupVisible:function(e,t){var n=this,r=1e3*t;this.clearDelayTimer(),r?this.delayTimer=setTimeout(function(){n.setPopupVisible(e),n.clearDelayTimer()},r):this.setPopupVisible(e)},clearDelayTimer:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},clearOutsideHandler:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)},createTwoChains:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire"+e]:t[e]||n[e]},isClickToShow:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")},isClickToHide:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")},isMouseEnterToShow:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")},isMouseLeaveToHide:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")},isFocusToShow:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")},isBlurToHide:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")},forcePopupAlign:function(){this.state.popupVisible&&this._component&&this._component.alignInstance&&this._component.alignInstance.forceAlign()},fireEvents:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)},close:function(){this.setPopupVisible(!1)},render:function(){var e=this.props,t=e.children,n=de.a.Children.only(t),r={};return this.isClickToHide()||this.isClickToShow()?(r.onClick=this.onClick,r.onMouseDown=this.onMouseDown,r.onTouchStart=this.onTouchStart):(r.onClick=this.createTwoChains("onClick"),r.onMouseDown=this.createTwoChains("onMouseDown"),r.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?r.onMouseEnter=this.onMouseEnter:r.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?r.onMouseLeave=this.onMouseLeave:r.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(r.onFocus=this.onFocus,r.onBlur=this.onBlur):(r.onFocus=this.createTwoChains("onFocus"),r.onBlur=this.createTwoChains("onBlur")),de.a.cloneElement(n,r)}});t.default=Ee},function(e,t,n){"use strict";function r(e){var t=[];return f.a.Children.forEach(e,function(e){t.push(e)}),t}function o(e,t){var n=null;return e&&e.forEach(function(e){n||e&&e.key===t&&(n=e)}),n}function i(e,t,n){var r=null;return e&&e.forEach(function(e){if(e&&e.key===t&&e.props[n]){if(r)throw new Error("two child with same key for <rc-animate> children");r=e}}),r}function a(e,t,n){var r=e.length===t.length;return r&&e.forEach(function(e,o){var i=t[o];e&&i&&(e&&!i||!e&&i?r=!1:e.key!==i.key?r=!1:n&&e.props[n]!==i.props[n]&&(r=!1))}),r}function s(e,t){var n=[],r={},i=[];return e.forEach(function(e){e&&o(t,e.key)?i.length&&(r[e.key]=i,i=[]):i.push(e)}),t.forEach(function(e){e&&r.hasOwnProperty(e.key)&&(n=n.concat(r[e.key])),n.push(e)}),n=n.concat(i)}function u(e){var t=e.children;return q.a.isValidElement(t)&&!t.key?q.a.cloneElement(t,{key:Q}):t}function l(){}Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),f=n.n(c),d={isAppearSupported:function(e){return e.transitionName&&e.transitionAppear||e.animation.appear},isEnterSupported:function(e){return e.transitionName&&e.transitionEnter||e.animation.enter},isLeaveSupported:function(e){return e.transitionName&&e.transitionLeave||e.animation.leave},allowAppearCallback:function(e){return e.transitionAppear||e.animation.appear},allowEnterCallback:function(e){return e.transitionEnter||e.animation.enter},allowLeaveCallback:function(e){return e.transitionLeave||e.animation.leave}},p=d,h=n(184),m=n.n(h),y=n(139),v=n.n(y),g=n(140),b=n.n(g),_=n(141),w=n.n(_),k=n(142),E=n.n(k),C=n(0),M=n.n(C),T=n(13),S=n.n(T),O=n(37),P=n.n(O),x=n(507),N=n.n(x),j={enter:"transitionEnter",appear:"transitionAppear",leave:"transitionLeave"},I=function(e){function t(){return v.a(this,t),w.a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E.a(t,e),b.a(t,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentWillEnter",value:function(e){p.isEnterSupported(this.props)?this.transition("enter",e):e()}},{key:"componentWillAppear",value:function(e){p.isAppearSupported(this.props)?this.transition("appear",e):e()}},{key:"componentWillLeave",value:function(e){p.isLeaveSupported(this.props)?this.transition("leave",e):e()}},{key:"transition",value:function(e,t){var n=this,r=S.a.findDOMNode(this),o=this.props,i=o.transitionName,a="object"===(void 0===i?"undefined":m.a(i));this.stop();var s=function(){n.stopper=null,t()};if((x.isCssAnimationSupported||!o.animation[e])&&i&&o[j[e]]){var u=a?i[e]:i+"-"+e,l=u+"-active";a&&i[e+"Active"]&&(l=i[e+"Active"]),this.stopper=N.a(r,{name:u,active:l},s)}else this.stopper=o.animation[e](r,s)}},{key:"stop",value:function(){var e=this.stopper;e&&(this.stopper=null,e.stop())}},{key:"render",value:function(){return this.props.children}}]),t}(M.a.Component);I.propTypes={children:P.a.any};var D=I,A=n(67),F=n.n(A),L=n(300),R=n.n(L),U=n(139),H=n.n(U),B=n(140),W=n.n(B),V=n(141),z=n.n(V),Y=n(142),G=n.n(Y),$=n(0),q=n.n($),K=n(37),J=n.n(K),Q="rc_animate_"+Date.now(),X=function(e){function t(e){H.a(this,t);var n=z.a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Z.call(n),n.currentlyAnimatingKeys={},n.keysToEnter=[],n.keysToLeave=[],n.state={children:r(u(n.props))},n.childrenRefs={},n}return G.a(t,e),W.a(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.showProp,n=this.state.children;t&&(n=n.filter(function(e){return!!e.props[t]})),n.forEach(function(t){t&&e.performAppear(t.key)})}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.nextProps=e;var n=r(u(e)),a=this.props;a.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach(function(e){t.stop(e)});var l=a.showProp,c=this.currentlyAnimatingKeys,f=a.exclusive?r(u(a)):this.state.children,d=[];l?(f.forEach(function(e){var t=e&&o(n,e.key),r=void 0;(r=t&&t.props[l]||!e.props[l]?t:q.a.cloneElement(t||e,R.a({},l,!0)))&&d.push(r)}),n.forEach(function(e){e&&o(f,e.key)||d.push(e)})):d=s(f,n),this.setState({children:d}),n.forEach(function(e){var n=e&&e.key;if(!e||!c[n]){var r=e&&o(f,n);if(l){var a=e.props[l];if(r){!i(f,n,l)&&a&&t.keysToEnter.push(n)}else a&&t.keysToEnter.push(n)}else r||t.keysToEnter.push(n)}}),f.forEach(function(e){var r=e&&e.key;if(!e||!c[r]){var a=e&&o(n,r);if(l){var s=e.props[l];if(a){!i(n,r,l)&&s&&t.keysToLeave.push(r)}else s&&t.keysToLeave.push(r)}else a||t.keysToLeave.push(r)}})}},{key:"componentDidUpdate",value:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)}},{key:"isValidChildByKey",value:function(e,t){var n=this.props.showProp;return n?i(e,t,n):o(e,t)}},{key:"stop",value:function(e){delete this.currentlyAnimatingKeys[e];var t=this.childrenRefs[e];t&&t.stop()}},{key:"render",value:function(){var e=this,t=this.props;this.nextProps=t;var n=this.state.children,r=null;n&&(r=n.map(function(n){if(null===n||void 0===n)return n;if(!n.key)throw new Error("must set key for <rc-animate> children");return q.a.createElement(D,{key:n.key,ref:function(t){return e.childrenRefs[n.key]=t},animation:t.animation,transitionName:t.transitionName,transitionEnter:t.transitionEnter,transitionAppear:t.transitionAppear,transitionLeave:t.transitionLeave},n)}));var o=t.component;if(o){var i=t;return"string"==typeof o&&(i=F.a({className:t.className,style:t.style},t.componentProps)),q.a.createElement(o,i,r)}return r[0]||null}}]),t}(q.a.Component);X.propTypes={component:J.a.any,componentProps:J.a.object,animation:J.a.object,transitionName:J.a.oneOfType([J.a.string,J.a.object]),transitionEnter:J.a.bool,transitionAppear:J.a.bool,exclusive:J.a.bool,transitionLeave:J.a.bool,onEnd:J.a.func,onEnter:J.a.func,onLeave:J.a.func,onAppear:J.a.func,showProp:J.a.string},X.defaultProps={animation:{},component:"span",componentProps:{},transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:l,onEnter:l,onLeave:l,onAppear:l};var Z=function(){var e=this;this.performEnter=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillEnter(e.handleDoneAdding.bind(e,t,"enter")))},this.performAppear=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillAppear(e.handleDoneAdding.bind(e,t,"appear")))},this.handleDoneAdding=function(t,n){var o=e.props;if(delete e.currentlyAnimatingKeys[t],!o.exclusive||o===e.nextProps){var i=r(u(o));e.isValidChildByKey(i,t)?"appear"===n?p.allowAppearCallback(o)&&(o.onAppear(t),o.onEnd(t,!0)):p.allowEnterCallback(o)&&(o.onEnter(t),o.onEnd(t,!0)):e.performLeave(t)}},this.performLeave=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillLeave(e.handleDoneLeaving.bind(e,t)))},this.handleDoneLeaving=function(t){var n=e.props;if(delete e.currentlyAnimatingKeys[t],!n.exclusive||n===e.nextProps){var o=r(u(n));if(e.isValidChildByKey(o,t))e.performEnter(t);else{var i=function(){p.allowLeaveCallback(n)&&(n.onLeave(t),n.onEnd(t,!1))};a(e.state.children,o,n.showProp)?i():e.setState({children:o},i)}}}};t.default=X},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(518),i=r(o);n(530),t.default=i.default,e.exports=t.default},function(e,t,n){(function(r){function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function i(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r)}}function a(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function u(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}function l(){try{return window.localStorage}catch(e){}}t=e.exports=n(564),t.log=a,t.formatArgs=i,t.save=s,t.load=u,t.useColors=o,t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:l(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(u())}).call(t,n(197))},function(e,t,n){var r=n(419),o=n(617),i=n(618),a=n(265),s=n(418),u=n(411),l=Object.prototype,c=l.hasOwnProperty,f=i(function(e,t){if(s(t)||a(t))return void o(t,u(t),e);for(var n in t)c.call(t,n)&&r(e,n,t[n])});e.exports=f},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,n){if(e&&l.isObject(e)&&e instanceof r)return e;var o=new r;return o.parse(e,t,n),o}function i(e){return l.isString(e)&&(e=o(e)),e instanceof r?e.format():r.prototype.format.call(e)}function a(e,t){return o(e,!1,!0).resolve(t)}function s(e,t){return e?o(e,!1,!0).resolveObject(t):t}var u=n(539),l=n(540);t.parse=o,t.resolve=a,t.resolveObject=s,t.format=i,t.Url=r;var c=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],h=["{","}","|","\\","^","`"].concat(p),m=["'"].concat(h),y=["%","/","?",";","#"].concat(m),v=["/","?","#"],g=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=n(541);r.prototype.parse=function(e,t,n){if(!l.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),o=-1!==r&&r<e.indexOf("#")?"?":"#",i=e.split(o),a=/\\/g;i[0]=i[0].replace(a,"/"),e=i.join(o);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var f=d.exec(s);if(f)return this.path=s,this.href=s,this.pathname=f[1],f[2]?(this.search=f[2],this.query=t?E.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=c.exec(s);if(p){p=p[0];var h=p.toLowerCase();this.protocol=h,s=s.substr(p.length)}if(n||p||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var C="//"===s.substr(0,2);!C||p&&w[p]||(s=s.substr(2),this.slashes=!0)}if(!w[p]&&(C||p&&!k[p])){for(var M=-1,T=0;T<v.length;T++){var S=s.indexOf(v[T]);-1!==S&&(-1===M||S<M)&&(M=S)}var O,P;P=-1===M?s.lastIndexOf("@"):s.lastIndexOf("@",M),-1!==P&&(O=s.slice(0,P),s=s.slice(P+1),this.auth=decodeURIComponent(O)),M=-1;for(var T=0;T<y.length;T++){var S=s.indexOf(y[T]);-1!==S&&(-1===M||S<M)&&(M=S)}-1===M&&(M=s.length),this.host=s.slice(0,M),s=s.slice(M),this.parseHost(),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var N=this.hostname.split(/\./),T=0,j=N.length;T<j;T++){var I=N[T];if(I&&!I.match(g)){for(var D="",A=0,F=I.length;A<F;A++)I.charCodeAt(A)>127?D+="x":D+=I[A];if(!D.match(g)){var L=N.slice(0,T),R=N.slice(T+1),U=I.match(b);U&&(L.push(U[1]),R.unshift(U[2])),R.length&&(s="/"+R.join(".")+s),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=u.toASCII(this.hostname));var H=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+H,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!_[h])for(var T=0,j=m.length;T<j;T++){var W=m[T];if(-1!==s.indexOf(W)){var V=encodeURIComponent(W);V===W&&(V=escape(W)),s=s.split(W).join(V)}}var z=s.indexOf("#");-1!==z&&(this.hash=s.substr(z),s=s.slice(0,z));var Y=s.indexOf("?");if(-1!==Y?(this.search=s.substr(Y),this.query=s.substr(Y+1),t&&(this.query=E.parse(this.query)),s=s.slice(0,Y)):t&&(this.search="",this.query={}),s&&(this.pathname=s),k[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var H=this.pathname||"",G=this.search||"";this.path=H+G}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(i=E.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||k[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+o+n+a+r},r.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(l.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,o=Object.keys(this),i=0;i<o.length;i++){var a=o[i];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var c=s[u];"protocol"!==c&&(n[c]=e[c])}return k[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!k[e.protocol]){for(var f=Object.keys(e),d=0;d<f.length;d++){var p=f[d];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||w[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",y=n.search||"";n.path=m+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=g||v||n.host&&e.pathname,_=b,E=n.pathname&&n.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],C=n.protocol&&!k[n.protocol];if(C&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),b=b&&(""===h[0]||""===E[0])),g)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=h;else if(h.length)E||(E=[]),E.pop(),E=E.concat(h),n.search=e.search,n.query=e.query;else if(!l.isNullOrUndefined(e.search)){if(C){n.hostname=n.host=E.shift();var M=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");M&&(n.auth=M.shift(),n.host=n.hostname=M.shift())}return n.search=e.search,n.query=e.query,l.isNull(n.pathname)&&l.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=E.slice(-1)[0],S=(n.host||e.host||E.length>1)&&("."===T||".."===T)||""===T,O=0,P=E.length;P>=0;P--)T=E[P],"."===T?E.splice(P,1):".."===T?(E.splice(P,1),O++):O&&(E.splice(P,1),O--);if(!b&&!_)for(;O--;O)E.unshift("..");!b||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),S&&"/"!==E.join("/").substr(-1)&&E.push("");var x=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(C){n.hostname=n.host=x?"":E.length?E.shift():"";var M=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");M&&(n.auth=M.shift(),n.host=n.hostname=M.shift())}return b=b||n.host&&E.length,b&&!x&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),l.isNull(n.pathname)&&l.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){function r(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var o=n(420);e.exports=r},,function(e,t,n){function r(e){return a(e)?o(e):i(e)}var o=n(593),i=n(600),a=n(265);e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){function n(){return l}function r(e){c.push(e);var t=!0;return function(){if(t){t=!1;var n=c.indexOf(e);c.splice(n,1)}}}function o(e){if(!a.default(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,l=u(l,e)}finally{f=!1}return c.slice().forEach(function(e){return e()}),e}function i(e){u=e,o({type:s.INIT})}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var u=e,l=t,c=[],f=!1;return o({type:s.INIT}),{dispatch:o,subscribe:r,getState:n,replaceReducer:i}}t.__esModule=!0,t.default=o;var i=n(413),a=r(i),s={INIT:"@@redux/INIT"};t.ActionTypes=s},function(e,t,n){"use strict";function r(e){if(!e||"object"!=typeof e)return!1;var t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&o(n)===o(Object)}t.__esModule=!0,t.default=r;var o=function(e){return Function.prototype.toString.call(e)};e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return Object.keys(e).reduce(function(n,r){return n[r]=t(e[r],r),n},{})}t.__esModule=!0,t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}}t.__esModule=!0,t.default=r,e.exports=t.default},function(e,t,n){function r(e){if(!i(e))return!1;var t=o(e);return t==s||t==u||t==a||t==l}var o=n(198),i=n(175),a="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",l="[object Proxy]";e.exports=r},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(36))},function(e,t){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}var r=Object.prototype;e.exports=n},function(e,t,n){function r(e,t,n){var r=e[t];s.call(e,t)&&i(r,n)&&(void 0!==n||t in e)||o(e,t,n)}var o=n(409),i=n(325),a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){var r=n(269),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){var r,o,i;!function(a,s){o=[e,n(422)],r=s,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(0,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(t),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t){r(this,e),this.resolveOptions(t),this.initSelection()}return a(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,o.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,o.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":i(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=s})},function(e,t){function n(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),o=document.createRange();o.selectNodeContents(e),r.removeAllRanges(),r.addRange(o),t=r.toString()}return t}e.exports=n},function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){o.off(e,r),t.apply(n,arguments)}var o=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;for(r;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,a=r.length;i<a;i++)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}},e.exports=n},function(e,t,n){function r(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(e))return o(e,t,n);if(s.nodeList(e))return i(e,t,n);if(s.string(e))return a(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function i(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function a(e,t,n){return u(document.body,e,t,n)}var s=n(425),u=n(426);e.exports=r},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t,n){function r(e,t,n,r,i){var a=o.apply(this,arguments);return e.addEventListener(n,a,i),{destroy:function(){e.removeEventListener(n,a,i)}}}function o(e,t,n,r){return function(n){n.delegateTarget=i(n.target,t),n.delegateTarget&&r.call(e,n)}}var i=n(427);e.exports=r},function(e,t){function n(e,t){for(;e&&e.nodeType!==r;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}var r=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}e.exports=n},function(e,t,n){(function(e){function n(t,n){return e.assign({},t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.updateState=n}).call(t,n(1))},function(e,t,n){(function(t,n,r){!function(t){e.exports=t()}(function(){var e,o,i;return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof _dereq_&&_dereq_;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";t.exports=function(e){function t(e){var t=new n(e),r=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),r}var n=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(e,n,r){"use strict";function o(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new c(16),this._normalQueue=new c(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=l}function i(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function a(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function s(e){this._normalQueue._pushOne(e),this._queueTick()}var u;try{throw new Error}catch(e){u=e}var l=e("./schedule"),c=e("./queue"),f=e("./util");o.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},o.prototype.hasCustomScheduler=function(){return this._customScheduler},o.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},o.prototype.disableTrampolineIfNecessary=function(){f.hasDevTools&&(this._trampolineEnabled=!1)},o.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},o.prototype.fatalError=function(e,n){n?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},o.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},f.hasDevTools?(o.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?i.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},o.prototype.invoke=function(e,t,n){this._trampolineEnabled?a.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},o.prototype.settlePromises=function(e){this._trampolineEnabled?s.call(this,e):this._schedule(function(){e._settlePromises()})}):(o.prototype.invokeLater=i,o.prototype.invoke=a,o.prototype.settlePromises=s),o.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),r=e.shift();t.call(n,r)}else t._settlePromises()}},o.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},o.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},o.prototype._reset=function(){this._isTickUsed=!1},n.exports=o,n.exports.firstLineError=u},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var o=!1,i=function(e,t){this._reject(t)},a=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(i,i,null,this,e)},s=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},u=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(i){o||(o=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var l=n(i),c=new e(t);c._propagateFrom(this,1);var f=this._target();if(c._setBoundTo(l),l instanceof e){var d={promiseRejectionQueued:!1,promise:c,target:f,bindingPromise:l};f._then(t,a,void 0,c,d),l._then(s,u,void 0,c,d),c._setOnCancel(l)}else c._resolveCallback(f);return c},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){"use strict";function r(){try{Promise===i&&(Promise=o)}catch(e){}return i}var o;"undefined"!=typeof Promise&&(o=Promise);var i=e("./promise")();i.noConflict=r,t.exports=i},{"./promise":22}],5:[function(e,t,n){"use strict";var r=Object.create;if(r){var o=r(null),i=r(null);o[" size"]=i[" size"]=0}t.exports=function(t){function n(e,n){var r;if(null!=e&&(r=e[n]),"function"!=typeof r){var o="Object "+s.classString(e)+" has no method '"+s.toString(n)+"'";throw new t.TypeError(o)}return r}function r(e){return n(e,this.pop()).apply(e,this)}function o(e){return e[this]}function i(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}var a,s=e("./util"),u=s.canEvaluate;s.isIdentifier;t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(r,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t,n="number"==typeof e;if(n)t=i;else if(u){var r=a(e);t=null!==r?r:o}else t=o;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){"use strict";t.exports=function(t,n,r,o){var i=e("./util"),a=i.tryCatch,s=i.errorObj,u=t._async;t.prototype.break=t.prototype.cancel=function(){if(!o.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(i.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=a(e).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(t){function n(e,n,s){return function(u){var l=s._boundValue();e:for(var c=0;c<e.length;++c){var f=e[c];if(f===Error||null!=f&&f.prototype instanceof Error){if(u instanceof f)return i(n).call(l,u)}else if("function"==typeof f){var d=i(f).call(l,u);if(d===a)return d;if(d)return i(n).call(l,u)}else if(r.isObject(u)){for(var p=o(f),h=0;h<p.length;++h){var m=p[h];if(f[m]!=u[m])continue e}return i(n).call(l,u)}}return t}}var r=e("./util"),o=e("./es5").keys,i=r.tryCatch,a=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(e){function t(){this._trace=new t.CapturedTrace(r())}function n(){if(o)return new t}function r(){var e=i.length-1;if(e>=0)return i[e]}var o=!1,i=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,i.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=i.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=n,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var n=e.prototype._pushContext,i=e.prototype._popContext,a=e._peekContext,s=e.prototype._peekContext,u=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=i,e._peekContext=a,e.prototype._peekContext=s,e.prototype._promiseCreated=u,o=!1},o=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=r,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],9:[function(e,n,r){"use strict";n.exports=function(n,r){function o(e,t){return{promise:t}}function i(){return!1}function a(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+U.toString(e));r._attachCancellationCallback(e)})}catch(e){return e}}function s(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?U.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function u(){return this._onCancelField}function l(e){this._onCancelField=e}function c(){this._cancellationParent=void 0,this._onCancelField=void 0}function f(e,t){if(0!=(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function d(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function p(){var e=this._boundTo;return void 0!==e&&e instanceof n?e.isFulfilled()?e.value():void 0:e}function h(){this._trace=new j(this._peekContext())}function m(e,t){if(H(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=C(e);U.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),U.notEnumerableProp(e,"__stackCleaned__",!0)}}}function y(e,t,n,r,o){if(void 0===e&&null!==t&&J){if(void 0!==o&&o._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var i="",a="";if(t._trace){for(var s=t._trace.stack.split("\n"),u=k(s),l=u.length-1;l>=0;--l){var c=u[l];if(!W.test(c)){var f=c.match(V);f&&(i="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(u.length>0)for(var d=u[0],l=0;l<s.length;++l)if(s[l]===d){l>0&&(a="\n"+s[l-1]);break}}var p="a promise was created in a "+n+"handler "+i+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(p,!0,t)}}function v(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),g(n)}function g(e,t,r){if(ae.warnings){var o,i=new R(e);if(t)r._attachExtraTrace(i);else if(ae.longStackTraces&&(o=n._peekContext()))o.attachExtraTrace(i);else{var a=C(i);i.stack=a.message+"\n"+a.stack.join("\n")}te("warning",i)||M(i,"",!0)}}function b(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}function _(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function w(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],o=t.length-1,i=t[o],a=-1,s=r.length-1;s>=0;--s)if(r[s]===i){a=s;break}for(var s=a;s>=0;--s){var u=r[s];if(t[o]!==u)break;t.pop(),o--}t=r}}function k(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],o="    (No stack trace)"===r||z.test(r),i=o&&re(r);o&&!i&&(G&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function E(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||z.test(r))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}function C(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?E(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:k(t)}}function M(e,t,n){if("undefined"!=typeof console){var r;if(U.isObject(e)){var o=e.stack;r=t+Y(o,e)}else r=t+String(e);"function"==typeof A?A(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function T(e,t,n,r){var o=!1;try{"function"==typeof t&&(o=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(e){L.throwLater(e)}"unhandledRejection"===e?te(e,n,r)||o||M(n,"Unhandled rejection "):te(e,r)}function S(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():U.toString(e);if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+O(t)+">, no stack trace)"}function O(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function P(){return"function"==typeof ie}function x(e){var t=e.match(oe);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function N(e,t){if(P()){for(var n,r,o=e.stack.split("\n"),i=t.stack.split("\n"),a=-1,s=-1,u=0;u<o.length;++u){var l=x(o[u]);if(l){n=l.fileName,a=l.line;break}}for(var u=0;u<i.length;++u){var l=x(i[u]);if(l){r=l.fileName,s=l.line;break}}a<0||s<0||!n||!r||n!==r||a>=s||(re=function(e){if(B.test(e))return!0;var t=x(e);return!!(t&&t.fileName===n&&a<=t.line&&t.line<=s)})}}function j(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);ie(this,j),t>32&&this.uncycle()}var I,D,A,F=n._getDomain,L=n._async,R=e("./errors").Warning,U=e("./util"),H=U.canAttachTrace,B=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,W=/\((?:timers\.js):\d+:\d+\)/,V=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,z=null,Y=null,G=!1,$=!(0==U.env("BLUEBIRD_DEBUG")),q=!(0==U.env("BLUEBIRD_WARNINGS")||!$&&!U.env("BLUEBIRD_WARNINGS")),K=!(0==U.env("BLUEBIRD_LONG_STACK_TRACES")||!$&&!U.env("BLUEBIRD_LONG_STACK_TRACES")),J=0!=U.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(q||!!U.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),L.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){T("rejectionHandled",I,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),T("unhandledRejection",D,e,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(e,t,n){return g(e,t,n||this)},n.onPossiblyUnhandledRejection=function(e){var t=F();D="function"==typeof e?null===t?e:U.domainBind(t,e):void 0},n.onUnhandledRejectionHandled=function(e){var t=F();I="function"==typeof e?null===t?e:U.domainBind(t,e):void 0};var Q=function(){};n.longStackTraces=function(){if(L.haveItemsQueued()&&!ae.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ae.longStackTraces&&P()){var e=n.prototype._captureStackTrace,t=n.prototype._attachExtraTrace;ae.longStackTraces=!0,Q=function(){if(L.haveItemsQueued()&&!ae.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=e,n.prototype._attachExtraTrace=t,r.deactivateLongStackTraces(),L.enableTrampoline(),ae.longStackTraces=!1},n.prototype._captureStackTrace=h,n.prototype._attachExtraTrace=m,r.activateLongStackTraces(),L.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return ae.longStackTraces&&P()};var X=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return U.global.dispatchEvent(e),function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!U.global.dispatchEvent(n)}}if("function"==typeof Event){var e=new Event("CustomEvent");return U.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,!U.global.dispatchEvent(n)}}var e=document.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),U.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!U.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),Z=function(){return U.isNode?function(){return t.emit.apply(t,arguments)}:U.global?function(e){var t="on"+e.toLowerCase(),n=U.global[t];return!!n&&(n.apply(U.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),ee={promiseCreated:o,promiseFulfilled:o,promiseRejected:o,promiseResolved:o,promiseCancelled:o,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:o},te=function(e){var t=!1;try{t=Z.apply(null,arguments)}catch(e){L.throwLater(e),t=!0}var n=!1;try{n=X(e,ee[e].apply(null,arguments))}catch(e){L.throwLater(e),n=!0}return n||t};n.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?n.longStackTraces():!e.longStackTraces&&n.hasLongStackTraces()&&Q()),"warnings"in e){var t=e.warnings;ae.warnings=!!t,J=ae.warnings,U.isObject(t)&&"wForgottenReturn"in t&&(J=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!ae.cancellation){if(L.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=c,n.prototype._propagateFrom=f,n.prototype._onCancel=u,n.prototype._setOnCancel=l,n.prototype._attachCancellationCallback=s,n.prototype._execute=a,ne=f,ae.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!ae.monitoring?(ae.monitoring=!0,n.prototype._fireEvent=te):!e.monitoring&&ae.monitoring&&(ae.monitoring=!1,n.prototype._fireEvent=i)),n},n.prototype._fireEvent=i,n.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(e){},n.prototype._attachCancellationCallback=function(e){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(e,t){};var ne=d,re=function(){return!1},oe=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;U.inherits(j,Error),r.CapturedTrace=j,j.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,o=this;void 0!==o;++r)t.push(o),o=o._parent;e=this._length=r;for(var r=e-1;r>=0;--r){var i=t[r].stack;void 0===n[i]&&(n[i]=r)}for(var r=0;r<e;++r){var a=t[r].stack,s=n[a];if(void 0!==s&&s!==r){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var u=r>0?t[r-1]:this;s<e-1?(u._parent=t[s+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var l=u._length+1,c=r-2;c>=0;--c)t[c]._length=l,l++;return}}}},j.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=C(e),n=t.message,r=[t.stack],o=this;void 0!==o;)r.push(k(o.stack.split("\n"))),o=o._parent;w(r),_(r),U.notEnumerableProp(e,"stack",b(n,r)),U.notEnumerableProp(e,"__stackCleaned__",!0)}};var ie=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():S(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,z=e,Y=t;var n=Error.captureStackTrace;return re=function(e){return B.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return z=/@/,Y=t,G=!0,function(e){e.stack=(new Error).stack};var o;try{throw new Error}catch(e){o="stack"in e}return"stack"in r||!o||"number"!=typeof Error.stackTraceLimit?(Y=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?S(t):t.toString()},null):(z=e,Y=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(A=function(e){console.warn(e)},U.isNode&&t.stderr.isTTY?A=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:U.isNode||"string"!=typeof(new Error).stack||(A=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var ae={warnings:q,longStackTraces:!1,cancellation:!1,monitoring:!1};return K&&n.longStackTraces(),{longStackTraces:function(){return ae.longStackTraces},warnings:function(){return ae.warnings},cancellation:function(){return ae.cancellation},monitoring:function(){return ae.monitoring},propagateFromFunction:function(){return ne},boundValueFunction:function(){return p},checkForgottenReturns:y,setBounds:N,warn:g,deprecated:v,CapturedTrace:j,fireDomEvent:X,fireGlobalEvent:Z}}},{"./errors":12,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],r=function(){throw t};return this.caught(e,r)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];r instanceof e&&r.suppressUnhandledRejections();var o=function(){return r};return this.caught(n,o)}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t){function n(){return i(this)}function r(e,n){return o(e,n,t,t)}var o=e.reduce,i=e.all;e.prototype.each=function(e){return o(this,e,t,0)._then(n,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return o(this,e,t,t)},e.each=function(e,r){return o(e,r,t,0)._then(n,void 0,void 0,e,void 0)},e.mapSeries=r}},{}],12:[function(e,t,n){"use strict";function r(e,t){function n(r){if(!(this instanceof n))return new n(r);f(this,"message","string"==typeof r?r:t),f(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(n,Error),n}function o(e){if(!(this instanceof o))return new o(e);f(this,"name","OperationalError"),f(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(f(this,"message",e.message),f(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var i,a,s=e("./es5"),u=s.freeze,l=e("./util"),c=l.inherits,f=l.notEnumerableProp,d=r("Warning","warning"),p=r("CancellationError","cancellation error"),h=r("TimeoutError","timeout error"),m=r("AggregateError","aggregate error");try{i=TypeError,a=RangeError}catch(e){i=r("TypeError","type error"),a=r("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<y.length;++v)"function"==typeof Array.prototype[y[v]]&&(m.prototype[y[v]]=Array.prototype[y[v]]);s.defineProperty(m.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),m.prototype.isOperational=!0;var g=0;m.prototype.toString=function(){var e=Array(4*g+1).join(" "),t="\n"+e+"AggregateError of:\n";g++,e=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",o=r.split("\n"),i=0;i<o.length;++i)o[i]=e+o[i];r=o.join("\n"),t+=r+"\n"}return g--,t},c(o,Error);var b=Error.__BluebirdErrorTypes__;b||(b=u({CancellationError:p,TimeoutError:h,OperationalError:o,RejectionError:o,AggregateError:m}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:i,RangeError:a,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:d}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var o={}.hasOwnProperty,i={}.toString,a={}.constructor.prototype,s=function(e){var t=[];for(var n in e)o.call(e,n)&&t.push(n);return t},u=function(e,t){return{value:e[t]}},l=function(e,t,n){return e[t]=n.value,e},c=function(e){return e},f=function(e){try{return Object(e).constructor.prototype}catch(e){return a}},d=function(e){try{return"[object Array]"===i.call(e)}catch(e){return!1}};t.exports={isArray:d,keys:s,names:s,defineProperty:l,getDescriptor:u,freeze:c,getPrototypeOf:f,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,o){return n(e,r,o,t)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(t,n,r){function o(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function i(e){this.finallyHandler=e}function a(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function s(){return l.call(this,this.promise._target()._settledValue())}function u(e){if(!a(this,e))return d.e=e,d}function l(e){var o=this.promise,l=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?l.call(o._boundValue()):l.call(o._boundValue(),e);if(c===r)return c;if(void 0!==c){o._setReturnedNonUndefined();var p=n(c,o);if(p instanceof t){if(null!=this.cancelPromise){if(p._isCancelled()){var h=new f("late cancellation observer");return o._attachExtraTrace(h),d.e=h,d}p.isPending()&&p._attachCancellationCallback(new i(this))}return p._then(s,u,void 0,this,void 0)}}}return o.isRejected()?(a(this),d.e=e,d):(a(this),e)}var c=e("./util"),f=t.CancellationError,d=c.errorObj,p=e("./catch_filter")(r);return o.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){a(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new o(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,l,l)},t.prototype.tap=function(e){return this._passThrough(e,1,l)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,l);var r,o=new Array(n-1),i=0;for(r=0;r<n-1;++r){var a=arguments[r];if(!c.isObject(a))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+c.classString(a)));o[i++]=a}o.length=i;var s=arguments[r];return this._passThrough(p(o,s,this),1,void 0,l)},o}},{"./catch_filter":7,"./util":36}],16:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i,a){function s(e,n,r){for(var i=0;i<n.length;++i){r._pushContext();var a=p(n[i])(e);if(r._popContext(),a===d){r._pushContext();var s=t.reject(d.e);return r._popContext(),s}var u=o(a,r);if(u instanceof t)return u}return null}function u(e,n,o,i){if(a.cancellation()){var s=new t(r),u=this._finallyPromise=new t(r);this._promise=s.lastly(function(){return u}),s._captureStackTrace(),s._setOnCancel(this)}else{(this._promise=new t(r))._captureStackTrace()}this._stack=i,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof o?[o].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}var l=e("./errors"),c=l.TypeError,f=e("./util"),d=f.errorObj,p=f.tryCatch,h=[];f.inherits(u,i),u.prototype._isResolved=function(){return null===this._promise},u.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},u.prototype._promiseCancelled=function(){if(!this._isResolved()){var e,n=void 0!==this._generator.return;if(n)this._promise._pushContext(),e=p(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=p(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},u.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=p(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},u.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=p(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},u.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},u.prototype.promise=function(){return this._promise},u.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},u.prototype._continue=function(e){var n=this._promise;if(e===d)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var i=o(r,this._promise);if(!(i instanceof t)&&null===(i=s(i,this._yieldHandlers,this._promise)))return void this._promiseRejected(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));i=i._target();var a=i._bitField;0==(50397184&a)?(this._yieldedPromise=i,i._proxy(this,null)):0!=(33554432&a)?t._async.invoke(this._promiseFulfilled,this,i._value()):0!=(16777216&a)?t._async.invoke(this._promiseRejected,this,i._reason()):this._promiseCancelled()},t.coroutine=function(e,t){if("function"!=typeof e)throw new c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=u,o=(new Error).stack;return function(){var t=e.apply(this,arguments),i=new r(void 0,void 0,n,o),a=i.promise();return i._generator=t,i._promiseFulfilled(void 0),a}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new c("expecting a function but got "+f.classString(e));h.push(e)},t.spawn=function(e){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new u(e,this),o=r.promise();return r._run(t.spawn),o}}},{"./errors":12,"./util":36}],17:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i,a){var s=e("./util");s.canEvaluate,s.tryCatch,s.errorObj;t.join=function(){var e,t=arguments.length-1;if(t>0&&"function"==typeof arguments[t]){e=arguments[t];var r}var o=[].slice.call(arguments);e&&o.pop();var r=new n(o).promise();return void 0!==e?r.spread(e):r}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i,a){function s(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var o=l();this._callback=null===o?t:c.domainBind(o,t),this._preservedValues=r===i?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],p.invoke(this._asyncInit,this,void 0)}function u(e,n,o,i){if("function"!=typeof n)return r("expecting a function but got "+c.classString(n));var a=0;if(void 0!==o){if("object"!=typeof o||null===o)return t.reject(new TypeError("options argument must be an object but it is "+c.classString(o)));if("number"!=typeof o.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(o.concurrency)));a=o.concurrency}return a="number"==typeof a&&isFinite(a)&&a>=1?a:0,new s(e,n,a,i).promise()}var l=t._getDomain,c=e("./util"),f=c.tryCatch,d=c.errorObj,p=t._async;c.inherits(s,n),s.prototype._asyncInit=function(){this._init$(void 0,-2)},s.prototype._init=function(){},s.prototype._promiseFulfilled=function(e,n){var r=this._values,i=this.length(),s=this._preservedValues,u=this._limit;if(n<0){if(n=-1*n-1,r[n]=e,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=e,this._queue.push(n),!1;null!==s&&(s[n]=e);var l=this._promise,c=this._callback,p=l._boundValue();l._pushContext();var h=f(c).call(p,e,n,i),m=l._popContext();if(a.checkForgottenReturns(h,m,null!==s?"Promise.filter":"Promise.map",l),h===d)return this._reject(h.e),!0;var y=o(h,this._promise);if(y instanceof t){y=y._target();var v=y._bitField;if(0==(50397184&v))return u>=1&&this._inFlight++,r[n]=y,y._proxy(this,-1*(n+1)),!1;if(0==(33554432&v))return 0!=(16777216&v)?(this._reject(y._reason()),!0):(this._cancel(),!0);h=y._value()}r[n]=h}return++this._totalResolved>=i&&(null!==s?this._filter(r,s):this._resolve(r),!0)},s.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),o=0,i=0;i<n;++i)e[i]&&(r[o++]=t[i]);r.length=o,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return u(this,e,t,null)},t.map=function(e,t,n,r){return u(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i){var a=e("./util"),s=a.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+a.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var o=s(e).apply(this,arguments),a=r._popContext();return i.checkForgottenReturns(o,a,"Promise.method",r),r._resolveFromSyncValue(o),r}},t.attempt=t.try=function(e){if("function"!=typeof e)return o("expecting a function but got "+a.classString(e));var r=new t(n);r._captureStackTrace(),r._pushContext();var u;if(arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],c=arguments[2];u=a.isArray(l)?s(e).apply(c,l):s(e).call(c,l)}else u=s(e)();var f=r._popContext();return i.checkForgottenReturns(u,f,"Promise.try",r),r._resolveFromSyncValue(u),r},t.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";function r(e){return e instanceof Error&&c.getPrototypeOf(e)===Error.prototype}function o(e){var t;if(r(e)){t=new l(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var n=c.keys(e),o=0;o<n.length;++o){var i=n[o];f.test(i)||(t[i]=e[i])}return t}return a.markAsOriginatingFromRejection(e),e}function i(e,t){return function(n,r){if(null!==e){if(n){var i=o(s(n));e._attachExtraTrace(i),e._reject(i)}else if(t){var a=[].slice.call(arguments,1);e._fulfill(a)}else e._fulfill(r);e=null}}}var a=e("./util"),s=a.maybeWrapAsError,u=e("./errors"),l=u.OperationalError,c=e("./es5"),f=/^(?:name|message|stack|cause)$/;t.exports=i},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){function n(e,t){var n=this;if(!i.isArray(e))return r.call(n,e,t);var o=s(t).apply(n._boundValue(),[null].concat(e));o===u&&a.throwLater(o.e)}function r(e,t){var n=this,r=n._boundValue(),o=void 0===e?s(t).call(r,null):s(t).call(r,null,e);o===u&&a.throwLater(o.e)}function o(e,t){var n=this;if(!e){var r=new Error(e+"");r.cause=e,e=r}var o=s(t).call(n._boundValue(),e);o===u&&a.throwLater(o.e)}var i=e("./util"),a=t._async,s=i.tryCatch,u=i.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var i=r;void 0!==t&&Object(t).spread&&(i=n),this._then(i,o,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,n,r){"use strict";n.exports=function(){function r(){}function o(e,t){if(null==e||e.constructor!==i)throw new b("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new b("expecting a function but got "+h.classString(t))}function i(e){e!==w&&o(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function a(e){this.promise._resolveCallback(e)}function s(e){this.promise._rejectCallback(e,!1)}function u(e){var t=new i(w);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var l,c=function(){return new b("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},f=function(){return new i.PromiseInspection(this._target())},d=function(e){return i.reject(new b(e))},p={},h=e("./util");l=h.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},h.notEnumerableProp(i,"_getDomain",l);var m=e("./es5"),y=e("./async"),v=new y;m.defineProperty(i,"_async",{value:v});var g=e("./errors"),b=i.TypeError=g.TypeError;i.RangeError=g.RangeError;var _=i.CancellationError=g.CancellationError;i.TimeoutError=g.TimeoutError,i.OperationalError=g.OperationalError,i.RejectionError=g.OperationalError,i.AggregateError=g.AggregateError;var w=function(){},k={},E={},C=e("./thenables")(i,w),M=e("./promise_array")(i,w,C,d,r),T=e("./context")(i),S=T.create,O=e("./debuggability")(i,T),P=(O.CapturedTrace,e("./finally")(i,C,E)),x=e("./catch_filter")(E),N=e("./nodeback"),j=h.errorObj,I=h.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype.catch=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),o=0;for(n=0;n<t-1;++n){var i=arguments[n];if(!h.isObject(i))return d("Catch statement predicate: expecting an object but got "+h.classString(i));r[o++]=i}return r.length=o,e=arguments[n],this.then(void 0,x(r,e,this))}return this.then(void 0,e)},i.prototype.reflect=function(){return this._then(f,f,void 0,this,void 0)},i.prototype.then=function(e,t){if(O.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+h.classString(e);arguments.length>1&&(n+=", "+h.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},i.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},i.prototype.spread=function(e){return"function"!=typeof e?d("expecting a function but got "+h.classString(e)):this.all()._then(e,void 0,void 0,k,void 0)},i.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new M(this).promise()},i.prototype.error=function(e){return this.caught(h.originatesFromRejection,e)},i.getNewLibraryCopy=n.exports,i.is=function(e){return e instanceof i},i.fromNode=i.fromCallback=function(e){var t=new i(w);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=I(e)(N(t,n));return r===j&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},i.all=function(e){return new M(e).promise()},i.cast=function(e){var t=C(e);return t instanceof i||(t=new i(w),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(e){var t=new i(w);return t._captureStackTrace(),t._rejectCallback(e,!0),t},i.setScheduler=function(e){if("function"!=typeof e)throw new b("expecting a function but got "+h.classString(e));return v.setScheduler(e)},i.prototype._then=function(e,t,n,r,o){var a=void 0!==o,s=a?o:new i(w),u=this._target(),c=u._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&c)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var f=l();if(0!=(50397184&c)){var d,p,m=u._settlePromiseCtx;0!=(33554432&c)?(p=u._rejectionHandler0,d=e):0!=(16777216&c)?(p=u._fulfillmentHandler0,d=t,u._unsetRejectionIsUnhandled()):(m=u._settlePromiseLateCancellationObserver,p=new _("late cancellation observer"),u._attachExtraTrace(p),d=t),v.invoke(m,u,{handler:null===f?d:"function"==typeof d&&h.domainBind(f,d),promise:s,receiver:r,value:p})}else u._addCallbacks(e,t,s,r,f);return s},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},i.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},i.prototype._setAsyncGuaranteed=function(){v.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},i.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==p)return void 0===t&&this._isBound()?this._boundValue():t},i.prototype._promiseAt=function(e){return this[4*e-4+2]},i.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},i.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),n=e._rejectionHandler0,r=e._promise0,o=e._receiverAt(0);void 0===o&&(o=p),this._addCallbacks(t,n,r,o,null)},i.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),o=e._promiseAt(t),i=e._receiverAt(t);void 0===i&&(i=p),this._addCallbacks(n,r,o,i,null)},i.prototype._addCallbacks=function(e,t,n,r,o){var i=this._length();if(i>=65531&&(i=0,this._setLength(0)),0===i)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===o?e:h.domainBind(o,e)),"function"==typeof t&&(this._rejectionHandler0=null===o?t:h.domainBind(o,t));else{var a=4*i-4;this[a+2]=n,this[a+3]=r,"function"==typeof e&&(this[a+0]=null===o?e:h.domainBind(o,e)),"function"==typeof t&&(this[a+1]=null===o?t:h.domainBind(o,t))}return this._setLength(i+1),i},i.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},i.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(c(),!1);var n=C(e,this);if(!(n instanceof i))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(c());var o=r._bitField;if(0==(50397184&o)){var a=this._length();a>0&&r._migrateCallback0(this);for(var s=1;s<a;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&o))this._fulfill(r._value());else if(0!=(16777216&o))this._reject(r._reason());else{var u=new _("late cancellation observer");r._attachExtraTrace(u),this._reject(u)}}},i.prototype._rejectCallback=function(e,t,n){var r=h.ensureErrorObject(e),o=r===e;if(!o&&!n&&O.warnings()){var i="a promise was rejected with a non-error: "+h.classString(e);this._warn(i,!0)}this._attachExtraTrace(r,!!t&&o),this._reject(e)},i.prototype._resolveFromExecutor=function(e){if(e!==w){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},i.prototype._settlePromiseFromHandler=function(e,t,n,r){var o=r._bitField;if(0==(65536&o)){r._pushContext();var i;t===k?n&&"number"==typeof n.length?i=I(e).apply(this._boundValue(),n):(i=j,i.e=new b("cannot .spread() a non-array: "+h.classString(n))):i=I(e).call(t,n);var a=r._popContext();o=r._bitField,0==(65536&o)&&(i===E?r._reject(n):i===j?r._rejectCallback(i.e,!1):(O.checkForgottenReturns(i,a,"",r,this),r._resolveCallback(i)))}},i.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(e){this._rejectionHandler0=e},i.prototype._settlePromise=function(e,t,n,o){var a=e instanceof i,s=this._bitField,u=0!=(134217728&s);0!=(65536&s)?(a&&e._invokeInternalOnCancel(),n instanceof P&&n.isFinallyHandler()?(n.cancelPromise=e,I(t).call(n,o)===j&&e._reject(j.e)):t===f?e._fulfill(f.call(n)):n instanceof r?n._promiseCancelled(e):a||e instanceof M?e._cancel():n.cancel()):"function"==typeof t?a?(u&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,o,e)):t.call(n,o,e):n instanceof r?n._isResolved()||(0!=(33554432&s)?n._promiseFulfilled(o,e):n._promiseRejected(o,e)):a&&(u&&e._setAsyncGuaranteed(),0!=(33554432&s)?e._fulfill(o):e._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,o=e.value;"function"==typeof t?n instanceof i?this._settlePromiseFromHandler(t,r,o,n):t.call(r,o,n):n instanceof i&&n._reject(o)},i.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},i.prototype._settlePromise0=function(e,t,n){var r=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,o,t)},i.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},i.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=c();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():v.settlePromises(this))}},i.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return v.fatalError(e,h.isNode);(65535&t)>0?v.settlePromises(this):this._ensurePossibleRejectionHandled()}},i.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),o=this._promiseAt(n),i=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(o,r,i,t)}},i.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),o=this._promiseAt(n),i=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(o,r,i,t)}},i.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},i.defer=i.pending=function(){return O.deprecated("Promise.defer","new Promise"),{promise:new i(w),resolve:a,reject:s}},h.notEnumerableProp(i,"_makeSelfResolutionError",c),e("./method")(i,w,C,d,O),e("./bind")(i,w,C,O),e("./cancel")(i,M,d,O),e("./direct_resolve")(i),e("./synchronous_inspection")(i),e("./join")(i,M,C,w,v,l),i.Promise=i,i.version="3.5.0",e("./map.js")(i,M,d,C,w,O),e("./call_get.js")(i),e("./using.js")(i,d,C,S,w,O),e("./timers.js")(i,w,O),e("./generators.js")(i,d,w,C,r,O),e("./nodeify.js")(i),e("./promisify.js")(i,w),e("./props.js")(i,M,C,d),e("./race.js")(i,w,C,d),e("./reduce.js")(i,M,d,C,w,O),e("./settle.js")(i,M,O),e("./some.js")(i,M,d),e("./filter.js")(i,w),e("./each.js")(i,w),e("./any.js")(i),h.toFastProperties(i),h.toFastProperties(i.prototype),u({a:1}),u({b:2}),u({c:3}),u(1),u(function(){}),u(void 0),u(!1),u(new i(w)),O.setBounds(y.firstLineError,h.lastLineError),i}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i){function a(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}function s(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var u=e("./util");u.isArray;return u.inherits(s,i),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function e(n,i){var s=r(this._values,this._promise);if(s instanceof t){s=s._target();var l=s._bitField;if(this._values=s,0==(50397184&l))return this._promise._setAsyncGuaranteed(),s._then(e,this._reject,void 0,this,i);if(0==(33554432&l))return 0!=(16777216&l)?this._reject(s._reason()):this._cancel();s=s._value()}if(null===(s=u.asArray(s))){var c=o("expecting an array or an iterable object but got "+u.classString(s)).reason();return void this._promise._rejectCallback(c,!1)}if(0===s.length)return void(-5===i?this._resolveEmptyArray():this._resolve(a(i)));this._iterate(s)},s.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var o=this._promise,i=!1,a=null,s=0;s<n;++s){var u=r(e[s],o);u instanceof t?(u=u._target(),a=u._bitField):a=null,i?null!==a&&u.suppressUnhandledRejections():null!==a?0==(50397184&a)?(u._proxy(this,s),this._values[s]=u):i=0!=(33554432&a)?this._promiseFulfilled(u._value(),s):0!=(16777216&a)?this._promiseRejected(u._reason(),s):this._promiseCancelled(s):i=this._promiseFulfilled(u,s)}i||o._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},s.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(e){return e},s}},{"./util":36}],24:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e){return!k.test(e)}function o(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function i(e,t,n){var r=p.getDataPropertyOrDefault(e,t+n,_);return!!r&&o(r)}function a(e,t,n){for(var r=0;r<e.length;r+=2){var o=e[r];if(n.test(o))for(var i=o.replace(n,""),a=0;a<e.length;a+=2)if(e[a]===i)throw new g("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function s(e,t,n,r){for(var s=p.inheritedDataKeys(e),u=[],l=0;l<s.length;++l){var c=s[l],f=e[c],d=r===E||E(c,f,e);"function"!=typeof f||o(f)||i(e,c,t)||!r(c,f,e,d)||u.push(c,f)}return a(u,t,n),u}function u(e,r,o,i,a,s){function u(){var o=r;r===d&&(o=this);var i=new t(n);i._captureStackTrace();var a="string"==typeof c&&this!==l?this[c]:e,u=h(i,s);try{a.apply(o,m(arguments,u))}catch(e){i._rejectCallback(y(e),!0,!0)}return i._isFateSealed()||i._setAsyncGuaranteed(),i}var l=function(){return this}(),c=e;return"string"==typeof c&&(e=i),p.notEnumerableProp(u,"__isPromisified__",!0),u}function l(e,t,n,r,o){for(var i=new RegExp(C(t)+"$"),a=s(e,t,i,n),u=0,l=a.length;u<l;u+=2){var c=a[u],f=a[u+1],h=c+t;if(r===M)e[h]=M(c,d,c,f,t,o);else{var m=r(f,function(){return M(c,d,c,f,t,o)});p.notEnumerableProp(m,"__isPromisified__",!0),e[h]=m}}return p.toFastProperties(e),e}function c(e,t,n){return M(e,t,void 0,e,null,n)}var f,d={},p=e("./util"),h=e("./nodeback"),m=p.withAppended,y=p.maybeWrapAsError,v=p.canEvaluate,g=e("./errors").TypeError,b="Async",_={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],k=new RegExp("^(?:"+w.join("|")+")$"),E=function(e){return p.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},C=function(e){return e.replace(/([$])/,"\\$")},M=v?f:u;t.promisify=function(e,t){if("function"!=typeof e)throw new g("expecting a function but got "+p.classString(e));if(o(e))return e;t=Object(t);var n=void 0===t.context?d:t.context,i=!!t.multiArgs,a=c(e,n,i);return p.copyDescriptors(e,a,r),a},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new g("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var n=!!t.multiArgs,r=t.suffix;"string"!=typeof r&&(r=b);var o=t.filter;"function"!=typeof o&&(o=E);var i=t.promisifier;if("function"!=typeof i&&(i=M),!p.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=p.inheritedDataKeys(e),s=0;s<a.length;++s){var u=e[a[s]];"constructor"!==a[s]&&p.isClass(u)&&(l(u.prototype,r,o,i,n),l(u,r,o,i,n))}return l(e,r,o,i,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){"use strict";t.exports=function(t,n,r,o){function i(e){var t,n=!1;if(void 0!==s&&e instanceof s)t=f(e),n=!0;else{var r=c.keys(e),o=r.length;t=new Array(2*o);for(var i=0;i<o;++i){var a=r[i];t[i]=e[a],t[i+o]=a}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function a(e){var n,a=r(e);return l(a)?(n=a instanceof t?a._then(t.props,void 0,void 0,void 0,void 0):new i(a).promise(),a instanceof t&&n._propagateFrom(a,2),n):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s,u=e("./util"),l=u.isObject,c=e("./es5");"function"==typeof Map&&(s=Map);var f=function(){function e(e,r){this[t]=e,this[t+n]=r,t++}var t=0,n=0;return function(r){n=r.size,t=0;var o=new Array(2*r.size);return r.forEach(e,o),o}}(),d=function(e){for(var t=new s,n=e.length/2|0,r=0;r<n;++r){var o=e[n+r],i=e[r];t.set(o,i)}return t};u.inherits(i,n),i.prototype._init=function(){},i.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var n;if(this._isMap)n=d(this._values);else{n={};for(var r=this.length(),o=0,i=this.length();o<i;++o)n[this._values[o+r]]=this._values[o]}return this._resolve(n),!0}return!1},i.prototype.shouldCopyValues=function(){return!1},i.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return a(this)},t.props=function(e){return a(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function r(e,t,n,r,o){for(var i=0;i<o;++i)n[i+r]=e[i+t],e[i+t]=void 0}function o(e){this._capacity=e,this._length=0,this._front=0}o.prototype._willBeOverCapacity=function(e){return this._capacity<e},o.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},o.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var o=this._front+r-3;this._checkCapacity(r);var i=this._capacity-1;this[o+0&i]=e,this[o+1&i]=t,this[o+2&i]=n,this._length=r},o.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},o.prototype.length=function(){return this._length},o.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},o.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,r(this,0,this,t,this._front+this._length&t-1)},t.exports=o},{}],27:[function(e,t,n){"use strict";t.exports=function(t,n,r,o){function i(e,i){var u=r(e);if(u instanceof t)return s(u);if(null===(e=a.asArray(e)))return o("expecting an array or an iterable object but got "+a.classString(e));var l=new t(n);void 0!==i&&l._propagateFrom(i,3);for(var c=l._fulfill,f=l._reject,d=0,p=e.length;d<p;++d){var h=e[d];(void 0!==h||d in e)&&t.cast(h)._then(c,f,void 0,l,null)}return l}var a=e("./util"),s=function(e){return e.then(function(t){return i(t,e)})};t.race=function(e){return i(e,void 0)},t.prototype.race=function(){return i(this,void 0)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i,a){function s(e,n,r,o){this.constructor$(e);var a=d();this._fn=null===a?n:p.domainBind(a,n),void 0!==r&&(r=t.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,this._eachValues=o===i?Array(this._length):0===o?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function u(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function l(e,t,n,o){return"function"!=typeof t?r("expecting a function but got "+p.classString(t)):new s(e,t,n,o).promise()}function c(e){this.accum=e,this.array._gotAccum(e);var n=o(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(f,void 0,void 0,this,void 0)):f.call(this,n)}function f(e){var n=this.array,r=n._promise,o=h(n._fn);r._pushContext();var i;(i=void 0!==n._eachValues?o.call(r._boundValue(),e,this.index,this.length):o.call(r._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(n._currentCancellable=i);var s=r._popContext();return a.checkForgottenReturns(i,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),i}var d=t._getDomain,p=e("./util"),h=p.tryCatch;p.inherits(s,n),s.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==i&&this._eachValues.push(e)},s.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},s.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},s.prototype._iterate=function(e){this._values=e;var n,r,o=e.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<o;++r){var i={accum:null,value:e[r],index:r,length:o,array:this};n=n._then(c,void 0,void 0,i,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(u,u,void 0,n,this)},t.prototype.reduce=function(e,t){return l(this,e,t,null)},t.reduce=function(e,t,n,r){return l(e,t,n,r)}}},{"./util":36}],29:[function(e,o,i){"use strict";var a,s=e("./util"),u=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},l=s.getNativePromise();if(s.isNode&&"undefined"==typeof MutationObserver){var c=n.setImmediate,f=t.nextTick;a=s.isRecentNode?function(e){c.call(n,e)}:function(e){f.call(t,e)}}else if("function"==typeof l&&"function"==typeof l.resolve){var d=l.resolve();a=function(e){d.then(e)}}else a="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==r?function(e){r(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:u:function(){var e=document.createElement("div"),t={attributes:!0},n=!1,r=document.createElement("div");new MutationObserver(function(){e.classList.toggle("foo"),n=!1}).observe(r,t);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(e,t),o()}}();o.exports=a},{"./util":36}],30:[function(e,t,n){"use strict";t.exports=function(t,n,r){function o(e){this.constructor$(e)}var i=t.PromiseInspection;e("./util").inherits(o,n),o.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(e,t){var n=new i;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},o.prototype._promiseRejected=function(e,t){var n=new i;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new o(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){"use strict";t.exports=function(t,n,r){function o(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function i(e,t){if((0|t)!==t||t<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new o(e),i=n.promise();return n.setHowMany(t),n.init(),i}var a=e("./util"),s=e("./errors").RangeError,u=e("./errors").AggregateError,l=a.isArray,c={};a.inherits(o,n),o.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=l(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},o.prototype.init=function(){this._initialized=!0,this._init()},o.prototype.setUnwrap=function(){this._unwrap=!0},o.prototype.howMany=function(){return this._howMany},o.prototype.setHowMany=function(e){this._howMany=e},o.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},o.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},o.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},o.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new u,t=this.length();t<this._values.length;++t)this._values[t]!==c&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},o.prototype._fulfilled=function(){return this._totalResolved},o.prototype._rejected=function(){return this._values.length-this.length()},o.prototype._addRejected=function(e){this._values.push(e)},o.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},o.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},o.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new s(t)},o.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return i(e,t)},t.prototype.some=function(e){return i(this,e)},t._SomePromiseArray=o}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},o=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},i=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return i.call(this._target())},e.prototype.isFulfilled=function(){return o.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(t,n){function r(e,r){if(c(e)){if(e instanceof t)return e;var o=i(e);if(o===l){r&&r._pushContext();var u=t.reject(o.e);return r&&r._popContext(),u}if("function"==typeof o){if(a(e)){var u=new t(n);return e._then(u._fulfill,u._reject,void 0,u,null),u}return s(e,o,r)}}return e}function o(e){return e.then}function i(e){try{return o(e)}catch(e){return l.e=e,l}}function a(e){try{return f.call(e,"_promise0")}catch(e){return!1}}function s(e,r,o){function i(e){s&&(s._resolveCallback(e),s=null)}function a(e){s&&(s._rejectCallback(e,f,!0),s=null)}var s=new t(n),c=s;o&&o._pushContext(),s._captureStackTrace(),o&&o._popContext();var f=!0,d=u.tryCatch(r).call(e,i,a);return f=!1,s&&d===l&&(s._rejectCallback(d.e,!0,!0),s=null),c}var u=e("./util"),l=u.errorObj,c=u.isObject,f={}.hasOwnProperty;return r}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(t,n,r){function o(e){this.handle=e}function i(e){return clearTimeout(this.handle),e}function a(e){throw clearTimeout(this.handle),e}var s=e("./util"),u=t.TimeoutError;o.prototype._resultCancelled=function(){clearTimeout(this.handle)};var l=function(e){return c(+this).thenReturn(e)},c=t.delay=function(e,i){var a,s;return void 0!==i?(a=t.resolve(i)._then(l,null,null,e,void 0),r.cancellation()&&i instanceof t&&a._setOnCancel(i)):(a=new t(n),s=setTimeout(function(){a._fulfill()},+e),r.cancellation()&&a._setOnCancel(new o(s)),a._captureStackTrace()),a._setAsyncGuaranteed(),a};t.prototype.delay=function(e){return c(e,this)};var f=function(e,t,n){var r;r="string"!=typeof t?t instanceof Error?t:new u("operation timed out"):new u(t),s.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()};t.prototype.timeout=function(e,t){e=+e;var n,s,u=new o(setTimeout(function(){n.isPending()&&f(n,t,s)},e));return r.cancellation()?(s=this.then(),n=s._then(i,a,void 0,u,void 0),n._setOnCancel(u)):n=this._then(i,a,void 0,u,void 0),n}}},{"./util":36}],35:[function(e,t,n){"use strict";t.exports=function(t,n,r,o,i,a){function s(e){setTimeout(function(){throw e},0)}function u(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function l(e,n){function o(){if(a>=l)return c._fulfill();var i=u(e[a++]);if(i instanceof t&&i._isDisposable()){try{i=r(i._getDisposer().tryDispose(n),e.promise)}catch(e){return s(e)}if(i instanceof t)return i._then(o,s,null,null,null)}o()}var a=0,l=e.length,c=new t(i);return o(),c}function c(e,t,n){this._data=e,this._promise=t,this._context=n}function f(e,t,n){this.constructor$(e,t,n)}function d(e){return c.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function p(e){this.length=e,this.promise=null,this[e-1]=null}var h=e("./util"),m=e("./errors").TypeError,y=e("./util").inherits,v=h.errorObj,g=h.tryCatch,b={};c.prototype.data=function(){return this._data},c.prototype.promise=function(){return this._promise},c.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():b},c.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==b?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},c.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},y(f,c),f.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},p.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var o=arguments[e-1];if("function"!=typeof o)return n("expecting a function but got "+h.classString(o));var i,s=!0;2===e&&Array.isArray(arguments[0])?(i=arguments[0],e=i.length,s=!1):(i=arguments,e--);for(var u=new p(e),f=0;f<e;++f){var m=i[f];if(c.isDisposer(m)){var y=m;m=m.promise(),m._setDisposable(y)}else{var b=r(m);b instanceof t&&(m=b._then(d,null,null,{resources:u,index:f},void 0))}u[f]=m}for(var _=new Array(u.length),f=0;f<_.length;++f)_[f]=t.resolve(u[f]).reflect();var w=t.all(_).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return v.e=n.error(),v;if(!n.isFulfilled())return void w.cancel();e[t]=n.value()}k._pushContext(),o=g(o);var r=s?o.apply(void 0,e):o(e),i=k._popContext();return a.checkForgottenReturns(r,i,"Promise.using",k),r}),k=w.lastly(function(){var e=new t.PromiseInspection(w);return l(u,e)});return u.promise=k,k._setOnCancel(u),k},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new f(e,this,o());throw new m}}},{"./errors":12,"./util":36}],36:[function(e,r,o){"use strict";function i(){try{var e=N;return N=null,e.apply(this,arguments)}catch(e){return x.e=e,x}}function a(e){return N=e,i}function s(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function u(e){return"function"==typeof e||"object"==typeof e&&null!==e}function l(e){return s(e)?new Error(g(e)):e}function c(e,t){var n,r=e.length,o=new Array(r+1);for(n=0;n<r;++n)o[n]=e[n];return o[n]=t,o}function f(e,t,n){if(!O.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function d(e,t,n){if(s(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return O.defineProperty(e,t,r),e}function p(e){throw e}function h(e){try{if("function"==typeof e){var t=O.names(e.prototype),n=O.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),o=A.test(e+"")&&O.names(e).length>0;if(n||r||o)return!0}return!1}catch(e){return!1}}function m(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e}function y(e){return F.test(e)}function v(e,t,n){for(var r=new Array(e),o=0;o<e;++o)r[o]=t+o+n;return r}function g(e){try{return e+""}catch(e){return"[no string representation]"}}function b(e){return null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function _(e){try{d(e,"isOperational",!0)}catch(e){}}function w(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function k(e){return b(e)&&O.propertyIsWritable(e,"stack")}function E(e){return{}.toString.call(e)}function C(e,t,n){for(var r=O.names(e),o=0;o<r.length;++o){var i=r[o];if(n(i))try{O.defineProperty(t,i,O.getDescriptor(e,i))}catch(e){}}}function M(e){return B?t.env[e]:void 0}function T(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}}function S(e,t){return e.bind(t)}var O=e("./es5"),P="undefined"==typeof navigator,x={e:{}},N,j="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null,I=function(e,t){function n(){this.constructor=e,this.constructor$=t;for(var n in t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var r={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},D=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(O.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],o=Object.create(null);null!=e&&!t(e);){var i;try{i=n(e)}catch(e){return r}for(var a=0;a<i.length;++a){var s=i[a];if(!o[s]){o[s]=!0;var u=Object.getOwnPropertyDescriptor(e,s);null!=u&&null==u.get&&null==u.set&&r.push(s)}}e=O.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var o=[];e:for(var i in n)if(r.call(n,i))o.push(i);else{for(var a=0;a<e.length;++a)if(r.call(e[a],i))continue e;o.push(i)}return o}}(),A=/this\s*\.\s*\S+\s*=/,F=/^[a-z$_][a-z$_0-9]*$/i,L=function(){return"stack"in new Error?function(e){return k(e)?e:new Error(g(e))}:function(e){if(k(e))return e;try{throw new Error(g(e))}catch(e){return e}}}(),R=function(e){return O.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var U="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};R=function(e){return O.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?U(e):null}}var H=void 0!==t&&"[object process]"===E(t).toLowerCase(),B=void 0!==t&&void 0!==t.env,W={isClass:h,isIdentifier:y,inheritedDataKeys:D,getDataPropertyOrDefault:f,thrower:p,isArray:O.isArray,asArray:R,notEnumerableProp:d,isPrimitive:s,isObject:u,isError:b,canEvaluate:P,errorObj:x,tryCatch:a,inherits:I,withAppended:c,maybeWrapAsError:l,toFastProperties:m,filledRange:v,toString:g,canAttachTrace:k,ensureErrorObject:L,originatesFromRejection:w,markAsOriginatingFromRejection:_,classString:E,copyDescriptors:C,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:H,hasEnvVariables:B,env:M,global:j,getNativePromise:T,domainBind:S};W.isRecentNode=W.isNode&&function(){var e=t.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),W.isNode&&W.toFastProperties(t);try{throw new Error}catch(e){W.lastLineError=e}r.exports=W},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(t,n(197),n(36),n(430).setImmediate)},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(538),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},,function(e,t){var n=null,r=void 0,o=function(){function e(){}return e._insert=function(e,t,n){e.splice(t,0,n)},e._add=function(e,t){e.push(t)},e._contains=function(e,t){return e.indexOf(t)>-1},e._remove=function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},e._removeByIndex=function(e,t){return e=e.slice(0,t).concat(e.slice(t+1))},e._indexOf=function(e,t,n){return e.indexOf(t,n)},e._clear=function(e,t,r){if(!(t<0))for(var o=0,i=0;o<r&&i<e.length;i++)e[t+i]=n,o++},e._nextNonEmptyIndex=function(e,t){t<0&&(t=-1);for(var o=t+1,i=o;i<e.length;i++)if(e[i]!==r&&e[i]!==n)return i;return-1},e._getLength=function(e){return e&&e.length},e}();e.exports=o},function(e,t,n){(function(r){function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e){switch(e.type){case"RECONNECT_READY":E.cooperators.length=0,s(e.clients);break;case"USER_ENTER":s([e.userInfo]);break;case"USER_LEAVE":u([e.userInfo])}}function s(e){e.forEach(function(e){if(e.id!==C.id){var t=r.find(E.cooperators,{id:e.id});t?t.count++:(e.color=d(e.id),e.count=1,E.cooperators.push(e),m.default.notify("avatar:add",e))}}),l()}function u(e){e.forEach(function(e){e.id!==C.id&&r.remove(E.cooperators,function(t){return t.id===e.id&&--t.count<=0})}),l()}function l(){m.default.notify("cooperation:updateAvatar",E.cooperators)}function c(e){return E.status="loading",E.currentFileGuid=e,E.cooperators=[],l(),new Promise(function(t,n){b.default.getFileCollaborators(e).then(function(e){for(E.status="loaded",f(e);E.messagePool.length;)a(E.messagePool.pop());t(e)},function(e){f([]),n(e)})})}function f(e){E.shareUserMaps={},(e||[]).forEach(function(e,t){e.index=t,E.shareUserMaps[e.id]=e}),E.shareUsers=r.sortBy(e,["index"],["asc"])}function d(e){return+e===C.id?M:E.shareUserMaps[e]?T[E.shareUserMaps[e].index%40]:cow.guideUsers&&cow.guideUsers.indexOf(e)>-1?T[cow.guideUsers.indexOf(e)%40]:"#41464b"}function p(e){return E.shareUserMaps[e]}Object.defineProperty(t,"__esModule",{value:!0});var h=n(9),m=i(h),y=n(33),v=i(y),g=n(72),b=i(g),_=n(21),w=o(_),k=w.isRNClient(),E={},C=cow.currentUser,M="#5292F7",T=["#A69ACA","#EC6E79","#F39801","#00A496","#FFD900","#674599","#83D4E7","#AF7C4F","#B8D200","#9D5B8B","#F15B1C","#41464B","#CD9F00","#47885E","#D7003B","#436EC9","#F897C7","#9C4109","#6E7A56","#83D4E7","#83609C","#F8DCDB","#E7C39C","#87B151","#9E0038","#B09FC9","#7DCFC8","#BEE7F0","#CD9F00","#CBAAC2","#F5C5C9","#CD8C28","#1A5A52","#9EB4E1","#406619","#CAB738","#F6C751","#8D699D","#613A14","#189DEC"];E.shareUserMaps={},E.shareUsers=[],E.cooperators=[],E.status="",E.currentFileGuid="",E.messagePool=[],v.default.bind("Invite",function(e){if("create"===e.db_event){var t=E.shareUsers.length?E.shareUsers.slice(-1)[0].index:-1;r.isArray(e.data)?e.data.forEach(function(e,n){e.index=t+n+1,E.shareUsers.push(e),E.shareUserMaps[e.id]=e}):(e.data.index=t+1,E.shareUserMaps[e.data.id]=e.data,E.shareUsers.push(e.data))}else if("delete"===e.db_event){var n=r.remove(E.shareUsers,function(t){return r.isArray(e.data)?e.data.some(function(e){return e.id===t.id}):e.data.id===t.id});n.forEach(function(e){E.shareUserMaps[e.id]&&delete E.shareUserMaps[e.id]})}}),m.default.attach("socket:message",function(e){(cow.currentFile.guid===E.currentFileGuid||k)&&(["USER_ENTER","USER_LEAVE","SELECT","UNSELECT"].indexOf(e.data.type)>=0&&+e.data.userInfo.id===C.id||"COLLABROOM"===e.type&&("loaded"===E.status||k?a(e.data):"loading"===E.status&&E.messagePool.push(e.data)))}),t.default={reset:c,getColor:d,getShareUser:p},e.exports=t.default}).call(t,n(1))},function(e,t,n){"use strict";var r=n(333),o=n(334),i=n(566);r(i,o),e.exports=i},,function(e,t,n){function r(e){return"symbol"==typeof e||i(e)&&o(e)==a}var o=n(198),i=n(199),a="[object Symbol]";e.exports=r},function(e,t,n){"use strict";function r(e){var t=e.dispatch,n=e.getState;return function(e){return function(r){return"function"==typeof r?r(t,n):e(r)}}}e.exports=r},function(e,t,n){(function(t){function n(e,t){var n={};for(var r in e)t.indexOf(r)<0&&(n[r]=e[r]);return n}e.exports=function(){return function(e){return function(r){var o=r.promise,i=r.types,a=n(r,["promise","types"]);if(!o)return e(r);var s=i[0],u=i[1],l=i[2];return e({type:"@@REQUEST/START"}),e(t.assign({},a,{type:s})),o.then(function(n){return e({type:"@@REQUEST/SUCCESS"}),e(t.assign({},a,{type:u,result:n})),n},function(n){return e({type:"@@REQUEST/FAILED",payload:{err:n}}),e(t.assign({},a,{type:l,error:n})),n})}}}}).call(t,n(1))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(20),f=r(c),d=n(5),p=r(d),h=n(54),m=n(695),y=r(m),v=n(753),g=r(v),b=n(22),_=n(270),w=r(_),k=n(146),E=r(k),C=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderItem=n.renderItem.bind(n),n.renderAction=n.renderAction.bind(n),n.handleUserListClick=n.handleUserListClick.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{file:u.PropTypes.object,data:u.PropTypes.array,getPopupContainer:u.PropTypes.func,setPermission:u.PropTypes.func,getSharedUsers:u.PropTypes.func,getListData:u.PropTypes.func,onButtonClick:u.PropTypes.func,renderActionComponent:u.PropTypes.func,overflow:u.PropTypes.array,cleanModals:u.PropTypes.func,hasMore:u.PropTypes.boolean}}},{key:"defaultProps",get:function(){return{data:[],overflow:[0,40]}}}]),s(t,[{key:"handleUserListClick",value:function(e,t){var n=this;if("transfer"===t)return this.props.onButtonClick("transfer");var r="升级到高级版或企业版，获得无限制协作";e.id?this.props.setPermission(this.props.file.guid,e.id,t).then(function(o){if(o.error){return-1!==o.error.message.indexOf(r)?(0,E.default)({title:"到达上限",description:o.error.message,buttons:[{buttonLabel:"了解详情",customClass:"btn btn-ok",closeAfterClick:!0,type:"link-button",href:"/payment"},{buttonLabel:"取消",customClass:"btn",closeAfterClick:!0,type:"button"}]}):void p.default.alert({title:o.error.message,type:"error"})}"add"===t?p.default.alert({title:"添加成功"}):"remove"===t?p.default.alert({title:"移除成功"}):"remove"===t&&e.id===cow.currentUser.id&&n.props.cleanModals()}):(0,b.ajaxPost)("/api/invite",{file_id:this.props.file.id,users:e.email}).then(function(e){var t=e.data,o=t.success,i=t.detail;if(o)n.props.getSharedUsers(n.props.file.guid),n.forceUpdate();else if(i.length&&i[0].error){var a=i[0].error.message;-1!==a.indexOf(r)?(0,E.default)({title:"到达上限",description:i[0].error.message,buttons:[{buttonLabel:"了解详情",customClass:"btn btn-ok",closeAfterClick:!0,type:"link-button",href:"/payment"},{buttonLabel:"取消",customClass:"btn",closeAfterClick:!0,type:"button"}]}):p.default.alert({title:i[0].error.message,type:"error"})}else p.default.alert({title:"未知错误, 请稍后重试",type:"error"})})}},{key:"renderAction",value:function(e){return this.props.renderActionComponent?this.props.renderActionComponent(e):l.default.createElement(g.default,{userId:e.id,email:e.email,file:this.props.file,permission:e.permission,getPopupContainer:this.props.getPopupContainer,handleActionClick:this.handleUserListClick})}},{key:"renderItem",value:function(e){var t=cow.currentUser.id===e.id?e.name+" (我)":e.name,n=(0,f.default)("user-list-item",{outsider:e.isOutsider,disabled:"disabled"===e.teamRole});return l.default.createElement("div",{className:n,key:e.id},l.default.createElement(h.ImageIcon,{customClass:"avatar",defaultImg:"https://assets-cdn.shimo.im/assets/images/loading-b67e5a67dc.gif",realImg:e.avatar}),l.default.createElement("span",{className:"name"},l.default.createElement(w.default,{width:110},t)),l.default.createElement("span",{className:"email ellipsis"},e.email),this.renderAction(e))}},{key:"render",value:function(){return l.default.createElement(y.default,{className:"user-list",initData:this.props.data,data:this.props.data,hasMore:this.props.hasMore,renderItem:this.renderItem,getListData:this.props.getListData,getPopupContainer:this.props.getPopupContainer})}}]),t}(u.Component);t.default=C,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(54),d=n(252),p=n(603),h=r(p),m=n(613),y=r(m),v=n(614),g=r(v),b=n(270),_=(r(b),function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleAddPanelBtnClick=n.handleAddPanelBtnClick.bind(n),n.handleTransferButtonClick=n.handleTransferButtonClick.bind(n),n.handleContentSwitch=n.handleContentSwitch.bind(n),n.renderBody=n.renderBody.bind(n),n.onClose=n.onClose.bind(n),n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{file:l.PropTypes.object,storage:l.PropTypes.object,maxShareCount:l.PropTypes.number,getSharedUsers:l.PropTypes.func,setPermission:l.PropTypes.func,cleanModals:l.PropTypes.func,pushModal:l.PropTypes.func,popModal:l.PropTypes.func}}},{key:"defaultProps",get:function(){return{disableAddUser:!1}}}]),u(t,[{key:"handleAddPanelBtnClick",value:function(){this.props.popModal(),this.props.pushModal(y.default,{file:this.props.file})}},{key:"handleTransferButtonClick",value:function(){this.props.popModal(),this.props.pushModal(g.default,{file:this.props.file})}},{key:"handleContentSwitch",value:function(e){"add"===e&&this.handleAddPanelBtnClick(),"transfer"===e&&this.handleTransferButtonClick()}},{key:"onClose",value:function(){this.props.cleanModals()}},{key:"renderHeader",value:function(){return c.default.createElement("div",null,c.default.createElement("span",{className:"dialog-title"},"协作"),c.default.createElement("span",{className:"hicon icon-close dialog-close-btn",onClick:this.onClose}))}},{key:"renderBody",value:function(){return c.default.createElement(h.default,s({},this.props,{showButton:!0,onButtonClick:this.handleContentSwitch}))}},{key:"render",value:function(){return c.default.createElement(f.Dialog,{open:!0,hasMask:!1,ref:"target",customClass:"teamworker-sharelist-inner",headTpl:this.renderHeader,bodyTpl:this.renderBody,actions:[],onClose:this.onClose})}}]),t}(l.Component));t.default=(0,d.register)("SharedUsersDialog",_),e.exports=t.default},function(e,t,n){var r,o;r=[n(30),n(77)],void 0!==(o=function(e,t){var n,r,o,i;return o={},r={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/},n={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},i=function(e,t){var n;for(n in t)e[n]=t[n];return e},o.simulate=function(e,t){var o,a,s,u,l;l=i(n,arguments[2]||{}),u=void 0,o=null;for(s in r)if(r[s].test(t)){o=s;break}if(!o)throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported");return document.createEvent?(u=document.createEvent(o),"HTMLEvents"===o?u.initEvent(t,l.bubbles,l.cancelable):u.initMouseEvent(t,l.bubbles,l.cancelable,document.defaultView,l.button,l.pointerX,l.pointerY,l.pointerX,l.pointerY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.button,e),e.dispatchEvent(u)):(l.clientX=l.pointerX,l.clientY=l.pointerY,a=document.createEventObject(),u=i(a,l),e.fireEvent("on"+t,u)),e},function(e,t){var n,r;r=e,document.createEvent?(n=document.createEvent("MouseEvents"),n.initEvent(t,!0,!1),r.dispatchEvent(n)):document.createEventObject&&(n=document.createEventObject(),r.fireEvent("on"+t,n))},o.detectIE=function(){var e,t,n,r;return r=window.navigator.userAgent,(t=r.indexOf("MSIE "))>0?parseInt(r.substring(t+5,r.indexOf(".",t)),10):r.indexOf("Trident/")>0?(n=r.indexOf("rv:"),parseInt(r.substring(n+3,r.indexOf(".",n)),10)):(e=r.indexOf("Edge/"))>0&&parseInt(r.substring(e+5,r.indexOf(".",e)),10)},o}.apply(t,r))&&(e.exports=o)},function(e,t){e.exports="<html>\n  <head>\n    <link rel='stylesheet' type='text/css' href='<%= css %>'>\n    <style>\n     #buddle-comment-btn {\n       display: none !important;\n     }\n     table, tr, td {\n       border: 1px solid black;\n     }\n     table {\n       border-collapse: collapse;\n       margin-bottom: 20px;\n     }\n     td {\n       min-width: 50px;\n       padding: 0 4px 0 4px;\n       height: 22px;\n     }\n     .comment-buddle {\n       display: none;\n     }\n     #mention-pop {\n       display: none;\n     }\n    </style>\n  </head>\n  <body>\n    <%= body %>\n  </body>\n</html>\n"},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],n=null,r=function(){for(var r=0;r<t.length;r++){var o=t[r];if(o.condition===e)return"function"==typeof o.result?o.result():o.result}return"function"==typeof n?n():n||null},o=function(e){return n=e,{done:r}};return{when:function e(n,i){return t.push({condition:n,result:i}),{when:e,others:o,done:r}},others:o,done:r}},e.exports=t.default},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!!t.reduce(function(e,t){return e?e[t]:null},window)};t.default=n,e.exports=t.default},function(e,t){function n(e){var t="";return s.some(function(n){return n.tag===e&&(t=n.items[0].tag,!0)}),t}function r(e,t){var n=[];if(s.some(function(t){return t.tag===e&&(n=t.items,!0)})){var r=null;if(n.some(function(e){return e.tag===t&&(r=e,!0)}))return r}return null}function o(){return{groupTag:s[0].tag,item:s[0].items[0]}}function i(e){var t=-1;return s.some(function(n,r){return n.tag===e&&(t=r,!0)})?t:-1}function a(e,t){return s.some(function(n){return n.tag===t&&!!n.items.some(function(t){return t.tag===e})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstTagInGroup=n,t.getItemData=r,t.getDefaultData=o,t.getGroupIndex=i,t.isIncludeGroup=a;var s=[{label:"协作功能",tag:"cooperation",items:[{tag:"assignTask",label:"待办事项 指派任务",img:"https://assets-cdn.shimo.im/assets/images/help/team_assign_task-5136ede733.gif",desc:"在文档内添加 <b>任务列表</b>，创建待办事项。输入 <b>“@” + 协作者的名字</b> 提及协作者、分配任务，对方会收到消息通知"},{tag:"invite",label:"邀请好友协作",img:"https://assets-cdn.shimo.im/assets/images/help/cooperation_invite-a462dd5645.gif",desc:"在文档内页，点击页面右上角 <b>“协作”</b> ，添加成员的邮箱，开始协作编辑。可以给协作者设置不同的<b>权限</b> “只能评论”、“只能阅读”"},{tag:"share",label:"公开链接分享",img:"https://assets-cdn.shimo.im/assets/images/help/cooperation_share-c9de567e7a.gif",desc:"在文档内页，点击页面右上角 <b>“分享”</b> 开启公开链接，复制链接给朋友，朋友即可访问文档。可以设置分享权限 <b>“只读／可写”</b>，可以随时关闭公开链接"},{tag:"comment",label:"划词评论",img:"https://assets-cdn.shimo.im/assets/images/help/cooperation_comment-caad713501.gif",desc:"选中文档里的文字／图片，或者点击某行文字右侧的 <b>“评论”</b> 按钮，添加划词评论"},{tag:"history",label:"编辑历史与还原",img:"https://assets-cdn.shimo.im/assets/images/help/cooperation_history-a3980efd56.gif",desc:"在文档内页，点击页面右上角的 <b>“查看” - “历史”</b>，你的所有编辑记录都在这里，还可随时还原历史编辑"},{tag:"at",label:"提醒 @人 @文档",img:"https://assets-cdn.shimo.im/assets/images/help/cooperation_at-cedcc4f72c.gif",desc:"在文档里输入 <b>“@” + 协作者的名字</b> 提及协作者、分配任务，对方会收到消息提醒。输入 <b>“@” + 文件名</b> 提及你的文档、表格、文件夹，创建文档索引"}]},{label:"文档功能",tag:"doc",items:[{tag:"import",label:"导入文档",img:"https://assets-cdn.shimo.im/assets/images/help/doc_import-a57f5c2d70.gif",desc:"在桌面，点击页面左上角的 <b>“新建” - “导入”</b>，导入文档，支持导入 <b>Word／Excel</b> 文件"},{tag:"export",label:"导出文档",img:"https://assets-cdn.shimo.im/assets/images/help/doc_export-db846391ec.gif",desc:"在文档内页，点击页面右上角 <b>“操作” - “导出”</b>，可以导出文档为 <b>pdf</b> 格式、<b>Word</b> 文件、<b>jpg</b> 图片"},{tag:"hyperlink",label:"插入超链接",img:"https://assets-cdn.shimo.im/assets/images/help/doc_hyperlink-88b929d698.gif",desc:"选中需要插入链接的文字，点击工具栏 <b>“插入” - “超链接”</b>，输入链接地址，按回车键确定"},{tag:"uploadFile",label:"插入图片、附件",img:"https://assets-cdn.shimo.im/assets/images/help/doc_upload_file-6e6f1da0b4.gif",desc:"将光标定位在文档中需要插入文件的位置，点击工具栏 <b>“插入” - “图片”／“附件”</b>，选择文件上传"},{tag:"format",label:"格式编辑",img:"https://assets-cdn.shimo.im/assets/images/help/doc_format-196afd42ae.gif",desc:"选中需要调整格式的文字或段落，点击工具栏中相应的工具，编辑格式"},{tag:"wordCount",label:"字数统计",img:"https://assets-cdn.shimo.im/assets/images/help/doc_word_count-378b691e8f.gif",desc:"选中想要统计字数的文字，页面下方会显示对应字数"}]}];t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=n(176).v4,s=function(){function e(t){var n=this;r(this,e),this.key="shimo-offline-data",this.userId=t.userId,t.localStorage||"undefined"==typeof localStorage||(t.localStorage=localStorage),this.clientId=t.clientId,this.store=t.localStorage;try{this.store.setItem("test","test")}catch(e){throw new Error("离线功能暂时不可用")}var o=this._getAll(),i=a();Object.keys(o).forEach(function(e){if(o[e]){var t=Object.keys(o[e]);t.forEach(function(r){t[0]&&/^[a-zA-Z0-9]{16}$/.test(t[0])&&(n.set(r,o[e][r],i),o=n._getAll(),delete o[e][r],n.store.setItem(n.key,JSON.stringify(o)),o=n._getAll())})}})}return o(e,[{key:"_getAll",value:function(){return JSON.parse(this.store.getItem(this.key))||{}}},{key:"getAll",value:function(){return this._getAll()[this.userId]||{}}},{key:"get",value:function(e,t){var n=t||this.clientId;return i.get(this._getAll(),this.userId+"."+n+"."+e)}},{key:"remove",value:function(e,t){var n=t||this.clientId,r=this._getAll();i.get(r,this.userId+"."+n+"."+e)&&(delete r[this.userId][n][e],0===Object.keys(r[this.userId][n]).length&&delete r[this.userId][n]),this.store.setItem(this.key,JSON.stringify(r))}},{key:"set",value:function(e,t,n){var r=n||this.clientId,o=this._getAll(),a=this.userId;i.set(o,a+"."+r+"."+e,i.assign({guid:e},t)),this.store.setItem(this.key,JSON.stringify(o))}}]),e}();e.exports=s},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(271),d=r(f),p=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"getPopupDomNode",value:function(){return this.refs.tooltip.getPopupDomNode()}},{key:"renderOverlay",value:function(){var e=this.props,t=e.title,n=e.prefixCls,r=e.content,o=e.innerClass;return c.default.createElement("div",{className:o},t&&c.default.createElement("div",{className:(o||n)+"-title"},t),c.default.createElement("div",{className:(o||n)+"-inner-content"},r))}},{key:"render",value:function(){return c.default.createElement(d.default,s({ref:"tooltip"},this.props,{overlay:this.renderOverlay()}))}}],[{key:"defaultProps",get:function(){return{prefixCls:"sm-popover",placement:"bottomRight",trigger:"click",mouseEnterDelay:.1,mouseLeaveDelay:.1,overlayStyle:{},innerClass:""}}}]),t}(l.Component);t.default=p,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),d=n(449),p=r(d),h=n(512),m=n(20),y=r(m);n(513);var v=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={visible:!1},n.onVisibleChange=n.onVisibleChange.bind(n),n.onPopupAlign=n.onPopupAlign.bind(n),n}return s(t,e),l(t,null,[{key:"defaultProps",get:function(){return{prefixCls:"sm-tooltip",placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,onVisibleChange:function(){}}}},{key:"propTypes",get:function(){return{title:c.PropTypes.string,overlay:c.PropTypes.oneOfType([c.PropTypes.node,c.PropTypes.func]),onVisibleChange:c.PropTypes.func,visible:c.PropTypes.bool,prefixCls:c.PropTypes.string,openClassName:c.PropTypes.string,arrowPointAtCenter:c.PropTypes.bool,builtinPlacements:c.PropTypes.object,trigger:c.PropTypes.oneOf(["hover","click","focus","none"]),placement:c.PropTypes.oneOf(["top","right","bottom","left","topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"])}}}]),l(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.state,r=this.props;return n.visible||t.visible!==n.visible||r.visible!==e.visible}},{key:"onVisibleChange",value:function(e){this.setState({visible:e}),this.props.onVisibleChange(e)}},{key:"getPopupDomNode",value:function(){return this.refs.tooltip.getPopupDomNode()}},{key:"getPlacements",value:function(){var e=this.props,t=e.builtinPlacements,n=e.arrowPointAtCenter;return t||(0,h.getPlacements)({arrowPointAtCenter:n,verticalArrowShift:8,horizontalArrowShif:16,arrowWidth:5})}},{key:"onPopupAlign",value:function(e,t){var n=this.getPlacements(),r=Object.keys(n).filter(function(e){return n[e].points[0]===t.points[0]&&n[e].points[1]===t.points[1]})[0];if(r){var o=e.getBoundingClientRect(),i={top:"50%",left:"50%"};r.indexOf("top")>=0||r.indexOf("Bottom")>=0?i.top=o.height-t.offset[1]+"px":(r.indexOf("Top")>=0||r.indexOf("bottom")>=0)&&(i.top=-t.offset[1]+"px"),r.indexOf("left")>=0||r.indexOf("Right")>=0?i.left=o.width-t.offset[0]+"px":(r.indexOf("right")>=0||r.indexOf("Left")>=0)&&(i.left=-t.offset[0]+"px"),e.style.transformOrigin=i.left+" "+i.top}}},{key:"render",value:function(){var e,t=this.state,n=this.props,r=n.prefixCls,i=n.title,a=n.overlay,s=n.children,l=t.visible;n.hasOwnProperty("visible")?l=n.visible:i||a||(l=!1);var c=null;"string"==typeof i?c=function(){return f.default.createElement("span",{className:r+"-text"},i)}:a&&(c=a);var d=s?s.props:{},h=(0,y.default)((e={},o(e,d.className,!!d.className),o(e,n.openClassName||r+"-open",!0),e));return f.default.createElement(p.default,u({overlay:c,visible:l,onPopupAlign:this.onPopupAlign,ref:"tooltip"},n,{builtinPlacements:this.getPlacements(),onVisibleChange:this.onVisibleChange}),l?f.default.cloneElement(s,{className:h}):s)}}]),t}(c.Component);t.default=v,e.exports=t.default},function(e,t,n){"use strict";e.exports=n(450)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),s=r(a),u=n(301),l=n(341),c=r(l),f=s.default.createClass({displayName:"Tooltip",propTypes:{trigger:a.PropTypes.any,children:a.PropTypes.any,defaultVisible:a.PropTypes.bool,visible:a.PropTypes.bool,placement:a.PropTypes.string,transitionName:a.PropTypes.string,animation:a.PropTypes.any,onVisibleChange:a.PropTypes.func,afterVisibleChange:a.PropTypes.func,overlay:a.PropTypes.oneOfType([s.default.PropTypes.node,s.default.PropTypes.func]).isRequired,overlayStyle:a.PropTypes.object,overlayClassName:a.PropTypes.string,prefixCls:a.PropTypes.string,mouseEnterDelay:a.PropTypes.number,mouseLeaveDelay:a.PropTypes.number,getTooltipContainer:a.PropTypes.func,destroyTooltipOnHide:a.PropTypes.bool,align:a.PropTypes.object,arrowContent:a.PropTypes.any},getDefaultProps:function(){return{prefixCls:"rc-tooltip",mouseEnterDelay:0,destroyTooltipOnHide:!1,mouseLeaveDelay:.1,align:{},placement:"right",trigger:["hover"],arrowContent:null}},getPopupElement:function(){var e=this.props,t=e.arrowContent,n=e.overlay,r=e.prefixCls;return[s.default.createElement("div",{className:r+"-arrow",key:"arrow"},t),s.default.createElement("div",{className:r+"-inner",key:"content"},"function"==typeof n?n():n)]},getPopupDomNode:function(){return this.refs.trigger.getPopupDomNode()},render:function(){var e=this.props,t=e.overlayClassName,n=e.trigger,r=e.mouseEnterDelay,a=e.mouseLeaveDelay,l=e.overlayStyle,f=e.prefixCls,d=e.children,p=e.onVisibleChange,h=e.transitionName,m=e.animation,y=e.placement,v=e.align,g=e.destroyTooltipOnHide,b=e.defaultVisible,_=e.getTooltipContainer,w=o(e,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","transitionName","animation","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer"]),k=i({},w);return"visible"in this.props&&(k.popupVisible=this.props.visible),s.default.createElement(c.default,i({popupClassName:t,ref:"trigger",prefixCls:f,popup:this.getPopupElement,action:n,builtinPlacements:u.placements,popupPlacement:y,popupAlign:v,getPopupContainer:_,onPopupVisibleChange:p,popupTransitionName:h,popupAnimation:m,defaultPopupVisible:b,destroyPopupOnHide:g,mouseLeaveDelay:a,popupStyle:l,mouseEnterDelay:r},k),d)}});t.default=f,e.exports=t.default},function(e,t,n){e.exports={default:n(452),__esModule:!0}},function(e,t,n){n(453),e.exports=n(78).Object.assign},function(e,t,n){var r=n(84);r(r.S+r.F,"Object",{assign:n(455)})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(138),o=n(208),i=n(155),a=n(308),s=n(306),u=Object.assign;e.exports=!u||n(137)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=a(e),u=arguments.length,l=1,c=o.f,f=i.f;u>l;)for(var d,p=s(arguments[l++]),h=c?r(p).concat(c(p)):r(p),m=h.length,y=0;m>y;)f.call(p,d=h[y++])&&(n[d]=p[d]);return n}:u},function(e,t,n){var r=n(82),o=n(457),i=n(458);e.exports=function(e){return function(t,n,a){var s,u=r(t),l=o(u.length),c=i(a,l);if(e&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(204),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(204),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},function(e,t,n){"use strict";var r=n(29),o=n(3),i=n(460);e.exports=function(){function e(e,t,n,r,a,s){s!==i&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e){return e}function o(e,t,n){function o(e,t){var n=g.hasOwnProperty(t)?g[t]:null;k.hasOwnProperty(t)&&s("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&s("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function l(e,n){if(n){s("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),s(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=e.prototype,i=r.__reactAutoBindPairs;n.hasOwnProperty(u)&&b.mixins(e,n.mixins);for(var a in n)if(n.hasOwnProperty(a)&&a!==u){var l=n[a],c=r.hasOwnProperty(a);if(o(c,a),b.hasOwnProperty(a))b[a](e,l);else{var f=g.hasOwnProperty(a),h="function"==typeof l,m=h&&!f&&!c&&!1!==n.autobind;if(m)i.push(a,l),r[a]=l;else if(c){var y=g[a];s(f&&("DEFINE_MANY_MERGED"===y||"DEFINE_MANY"===y),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",y,a),"DEFINE_MANY_MERGED"===y?r[a]=d(r[a],l):"DEFINE_MANY"===y&&(r[a]=p(r[a],l))}else r[a]=l}}}else;}function c(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var o=n in b;s(!o,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var i=n in e;s(!i,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),e[n]=r}}}function f(e,t){s(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in t)t.hasOwnProperty(n)&&(s(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function d(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var o={};return f(o,n),f(o,r),o}}function p(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function h(e,t){var n=t.bind(e);return n}function m(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],o=t[n+1];e[r]=h(e,o)}}function y(e){var t=r(function(e,r,o){this.__reactAutoBindPairs.length&&m(this),this.props=e,this.context=r,this.refs=a,this.updater=o||n,this.state=null;var i=this.getInitialState?this.getInitialState():null;s("object"==typeof i&&!Array.isArray(i),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=i});t.prototype=new E,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],v.forEach(l.bind(null,t)),l(t,_),l(t,e),l(t,w),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),s(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var o in g)t.prototype[o]||(t.prototype[o]=null);return t}var v=[],g={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},b={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)l(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=i({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=i({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=d(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=i({},e.propTypes,t)},statics:function(e,t){c(e,t)},autobind:function(){}},_={componentDidMount:function(){this.__isMounted=!0}},w={componentWillUnmount:function(){this.__isMounted=!1}},k={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},E=function(){};return i(E.prototype,e.prototype,k),y}var i=n(149),a=n(73),s=n(3),u="mixins";e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){function r(t){var r=new a.default(t);n.call(e,r)}return e.addEventListener?(e.addEventListener(t,r,!1),{remove:function(){e.removeEventListener(t,r,!1)}}):e.attachEvent?(e.attachEvent("on"+t,r),{remove:function(){e.detachEvent("on"+t,r)}}):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n(463),a=r(i);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return null===e||void 0===e}function i(){return d}function a(){return p}function s(e){var t=e.type,n="function"==typeof e.stopPropagation||"boolean"==typeof e.cancelBubble;l.default.call(this),this.nativeEvent=e;var r=a;"defaultPrevented"in e?r=e.defaultPrevented?i:a:"getPreventDefault"in e?r=e.getPreventDefault()?i:a:"returnValue"in e&&(r=e.returnValue===p?i:a),this.isDefaultPrevented=r;var o=[],s=void 0,u=void 0,c=h.concat();for(m.forEach(function(e){t.match(e.reg)&&(c=c.concat(e.props),e.fix&&o.push(e.fix))}),s=c.length;s;)u=c[--s],this[u]=e[u];for(!this.target&&n&&(this.target=e.srcElement||document),this.target&&3===this.target.nodeType&&(this.target=this.target.parentNode),s=o.length;s;)(0,o[--s])(this,e);this.timeStamp=e.timeStamp||Date.now()}Object.defineProperty(t,"__esModule",{value:!0});var u=n(464),l=r(u),c=n(149),f=r(c),d=!0,p=!1,h=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"],m=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(e,t){o(e.which)&&(e.which=o(t.charCode)?t.keyCode:t.charCode),void 0===e.metaKey&&(e.metaKey=e.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(e,t){var n=void 0,r=void 0,o=void 0,i=t.wheelDelta,a=t.axis,s=t.wheelDeltaY,u=t.wheelDeltaX,l=t.detail;i&&(o=i/120),l&&(o=0-(l%3==0?l/3:l)),void 0!==a&&(a===e.HORIZONTAL_AXIS?(r=0,n=0-o):a===e.VERTICAL_AXIS&&(n=0,r=o)),void 0!==s&&(r=s/120),void 0!==u&&(n=-1*u/120),n||r||(r=o),void 0!==n&&(e.deltaX=n),void 0!==r&&(e.deltaY=r),void 0!==o&&(e.delta=o)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(e,t){var n=void 0,r=void 0,i=void 0,a=e.target,s=t.button;return a&&o(e.pageX)&&!o(t.clientX)&&(n=a.ownerDocument||document,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===a?e.toElement:e.fromElement),e}}],y=l.default.prototype;(0,f.default)(s.prototype,y,{constructor:s,preventDefault:function(){var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=p,y.preventDefault.call(this)},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=d,y.stopPropagation.call(this)}}),t.default=s,e.exports=t.default},function(e,t,n){"use strict";function r(){return!1}function o(){return!0}function i(){this.timeStamp=Date.now(),this.target=void 0,this.currentTarget=void 0}Object.defineProperty(t,"__esModule",{value:!0}),i.prototype={isEventObject:1,constructor:i,isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r,preventDefault:function(){this.isDefaultPrevented=o},stopPropagation:function(){this.isPropagationStopped=o},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},t.default=i,e.exports=t.default},function(e,t,n){n(466);var r=n(78).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(84);r(r.S+r.F*!n(80),"Object",{defineProperty:n(79).f})},function(e,t,n){e.exports={default:n(468),__esModule:!0}},function(e,t,n){n(469),n(475),e.exports=n(213).f("iterator")},function(e,t,n){"use strict";var r=n(470)(!0);n(310)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(204),o=n(203);e.exports=function(e){return function(t,n){var i,a,s=String(o(t)),u=r(n),l=s.length;return u<0||u>=l?e?"":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):a-56320+(i-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(211),o=n(153),i=n(212),a={};n(85)(a,n(86)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var r=n(79),o=n(135),i=n(138);e.exports=n(80)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){e.exports=n(68).document&&document.documentElement},function(e,t,n){var r=n(81),o=n(308),i=n(205)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){n(476);for(var r=n(68),o=n(85),i=n(210),a=n(86)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var l=s[u],c=r[l],f=c&&c.prototype;f&&!f[a]&&o(f,a,l),i[l]=i.Array}},function(e,t,n){"use strict";var r=n(477),o=n(478),i=n(210),a=n(82);e.exports=n(310)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(480),__esModule:!0}},function(e,t,n){n(481),n(487),n(488),n(489),e.exports=n(78).Symbol},function(e,t,n){"use strict";var r=n(68),o=n(81),i=n(80),a=n(84),s=n(311),u=n(482).KEY,l=n(137),c=n(206),f=n(212),d=n(154),p=n(86),h=n(213),m=n(214),y=n(483),v=n(484),g=n(485),b=n(135),_=n(82),w=n(202),k=n(153),E=n(211),C=n(486),M=n(313),T=n(79),S=n(138),O=M.f,P=T.f,x=C.f,N=r.Symbol,j=r.JSON,I=j&&j.stringify,D="prototype",A=p("_hidden"),F=p("toPrimitive"),L={}.propertyIsEnumerable,R=c("symbol-registry"),U=c("symbols"),H=c("op-symbols"),B=Object[D],W="function"==typeof N,V=r.QObject,z=!V||!V[D]||!V[D].findChild,Y=i&&l(function(){return 7!=E(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=O(B,t);r&&delete B[t],P(e,t,n),r&&e!==B&&P(B,t,r)}:P,G=function(e){var t=U[e]=E(N[D]);return t._k=e,t},$=W&&"symbol"==typeof N.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof N},q=function(e,t,n){return e===B&&q(H,t,n),b(e),t=w(t,!0),b(n),o(U,t)?(n.enumerable?(o(e,A)&&e[A][t]&&(e[A][t]=!1),n=E(n,{enumerable:k(0,!1)})):(o(e,A)||P(e,A,k(1,{})),e[A][t]=!0),Y(e,t,n)):P(e,t,n)},K=function(e,t){b(e);for(var n,r=v(t=_(t)),o=0,i=r.length;i>o;)q(e,n=r[o++],t[n]);return e},J=function(e,t){return void 0===t?E(e):K(E(e),t)},Q=function(e){var t=L.call(this,e=w(e,!0));return!(this===B&&o(U,e)&&!o(H,e))&&(!(t||!o(this,e)||!o(U,e)||o(this,A)&&this[A][e])||t)},X=function(e,t){if(e=_(e),t=w(t,!0),e!==B||!o(U,t)||o(H,t)){var n=O(e,t);return!n||!o(U,t)||o(e,A)&&e[A][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=x(_(e)),r=[],i=0;n.length>i;)o(U,t=n[i++])||t==A||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===B,r=x(n?H:_(e)),i=[],a=0;r.length>a;)!o(U,t=r[a++])||n&&!o(B,t)||i.push(U[t]);return i};W||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===B&&t.call(H,n),o(this,A)&&o(this[A],e)&&(this[A][e]=!1),Y(this,e,k(1,n))};return i&&z&&Y(B,e,{configurable:!0,set:t}),G(e)},s(N[D],"toString",function(){return this._k}),M.f=X,T.f=q,n(312).f=C.f=Z,n(155).f=Q,n(208).f=ee,i&&!n(209)&&s(B,"propertyIsEnumerable",Q,!0),h.f=function(e){return G(p(e))}),a(a.G+a.W+a.F*!W,{Symbol:N});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var te=S(p.store),ne=0;te.length>ne;)m(te[ne++]);a(a.S+a.F*!W,"Symbol",{for:function(e){return o(R,e+="")?R[e]:R[e]=N(e)},keyFor:function(e){if($(e))return y(R,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),a(a.S+a.F*!W,"Object",{create:J,defineProperty:q,defineProperties:K,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:ee}),j&&a(a.S+a.F*(!W||l(function(){var e=N();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!$(e)){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);return t=r[1],"function"==typeof t&&(n=t),!n&&g(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!$(t))return t}),r[1]=t,I.apply(j,r)}}}),N[D][F]||n(85)(N[D],F,N[D].valueOf),f(N,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){var r=n(154)("meta"),o=n(136),i=n(81),a=n(79).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(137)(function(){return u(Object.preventExtensions({}))}),c=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[r].i},d=function(e,t){if(!i(e,r)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[r].w},p=function(e){return l&&h.NEED&&u(e)&&!i(e,r)&&c(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:p}},function(e,t,n){var r=n(138),o=n(82);e.exports=function(e,t){for(var n,i=o(e),a=r(i),s=a.length,u=0;s>u;)if(i[n=a[u++]]===t)return n}},function(e,t,n){var r=n(138),o=n(208),i=n(155);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,s=n(e),u=i.f,l=0;s.length>l;)u.call(e,a=s[l++])&&t.push(a);return t}},function(e,t,n){var r=n(307);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(82),o=n(312).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?s(e):o(r(e))}},function(e,t){},function(e,t,n){n(214)("asyncIterator")},function(e,t,n){n(214)("observable")},function(e,t,n){e.exports={default:n(491),__esModule:!0}},function(e,t,n){n(492),e.exports=n(78).Object.setPrototypeOf},function(e,t,n){var r=n(84);r(r.S,"Object",{setPrototypeOf:n(493).set})},function(e,t,n){var r=n(136),o=n(135),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(302)(Function.call,n(313).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},function(e,t,n){e.exports={default:n(495),__esModule:!0}},function(e,t,n){n(496);var r=n(78).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(84);r(r.S,"Object",{create:n(211)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(498),i=r(o);t.default=i.default,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}function u(e,t){function n(){o&&(clearTimeout(o),o=null)}function r(){n(),o=setTimeout(e,t)}var o=void 0;return r.clear=n,r}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),c=r(l),f=n(37),d=r(f),p=n(13),h=r(p),m=n(499),y=r(m),v=n(258),g=r(v),b=n(506),_=r(b),w=function(e){function t(){var n,r,o;i(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=a(this,e.call.apply(e,[this].concat(u))),r.forceAlign=function(){var e=r.props;if(!e.disabled){var t=h.default.findDOMNode(r);e.onAlign(t,(0,y.default)(t,e.target(),e.align))}},o=n,a(r,o)}return s(t,e),t.prototype.componentDidMount=function(){var e=this.props;this.forceAlign(),!e.disabled&&e.monitorWindowResize&&this.startMonitorWindowResize()},t.prototype.componentDidUpdate=function(e){var t=!1,n=this.props;if(!n.disabled)if(e.disabled||e.align!==n.align)t=!0;else{var r=e.target(),o=n.target();(0,_.default)(r)&&(0,_.default)(o)?t=!1:r!==o&&(t=!0)}t&&this.forceAlign(),n.monitorWindowResize&&!n.disabled?this.startMonitorWindowResize():this.stopMonitorWindowResize()},t.prototype.componentWillUnmount=function(){this.stopMonitorWindowResize()},t.prototype.startMonitorWindowResize=function(){this.resizeHandler||(this.bufferMonitor=u(this.forceAlign,this.props.monitorBufferTime),this.resizeHandler=(0,g.default)(window,"resize",this.bufferMonitor))},t.prototype.stopMonitorWindowResize=function(){this.resizeHandler&&(this.bufferMonitor.clear(),this.resizeHandler.remove(),this.resizeHandler=null)},t.prototype.render=function(){var e=this.props,t=e.childrenProps,n=e.children,r=c.default.Children.only(n);if(t){var o={};for(var i in t)t.hasOwnProperty(i)&&(o[i]=this.props[t[i]]);return c.default.cloneElement(r,o)}return r},t}(l.Component);w.propTypes={childrenProps:d.default.object,align:d.default.object.isRequired,target:d.default.func,onAlign:d.default.func,monitorBufferTime:d.default.number,monitorWindowResize:d.default.bool,disabled:d.default.bool,children:d.default.any},w.defaultProps={target:function(){return window},onAlign:function(){},monitorBufferTime:50,monitorWindowResize:!1,disabled:!1},t.default=w,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return e.left<n.left||e.left+t.width>n.right}function i(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function a(e,t,n){return e.left>n.right||e.left+t.width<n.left}function s(e,t,n){return e.top>n.bottom||e.top+t.height<n.top}function u(e,t,n){var r=[];return h.default.each(e,function(e){r.push(e.replace(t,function(e){return n[e]}))}),r}function l(e,t){return e[t]=-e[t],e}function c(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function f(e,t){e[0]=c(e[0],t.width),e[1]=c(e[1],t.height)}function d(e,t,n){var r=n.points,c=n.offset||[0,0],d=n.targetOffset||[0,0],p=n.overflow,m=n.target||t,y=n.source||e;c=[].concat(c),d=[].concat(d),p=p||{};var v={},b=0,w=(0,g.default)(y),E=(0,k.default)(y),M=(0,k.default)(m);f(c,E),f(d,M);var T=(0,C.default)(E,M,r,c,d),S=h.default.merge(E,T);if(w&&(p.adjustX||p.adjustY)){if(p.adjustX&&o(T,E,w)){var O=u(r,/[lr]/gi,{l:"r",r:"l"}),P=l(c,0),x=l(d,0);a((0,C.default)(E,M,O,P,x),E,w)||(b=1,r=O,c=P,d=x)}if(p.adjustY&&i(T,E,w)){var N=u(r,/[tb]/gi,{t:"b",b:"t"}),j=l(c,1),I=l(d,1);s((0,C.default)(E,M,N,j,I),E,w)||(b=1,r=N,c=j,d=I)}b&&(T=(0,C.default)(E,M,r,c,d),h.default.mix(S,T)),v.adjustX=p.adjustX&&o(T,E,w),v.adjustY=p.adjustY&&i(T,E,w),(v.adjustX||v.adjustY)&&(S=(0,_.default)(T,E,w,v))}return S.width!==E.width&&h.default.css(y,"width",h.default.width(y)+S.width-E.width),S.height!==E.height&&h.default.css(y,"height",h.default.height(y)+S.height-E.height),h.default.offset(y,{left:S.left,top:S.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform}),{points:r,offset:c,targetOffset:d,overflow:v}}Object.defineProperty(t,"__esModule",{value:!0});var p=n(143),h=r(p),m=n(314),y=r(m),v=n(501),g=r(v),b=n(502),_=r(b),w=n(503),k=r(w),E=n(504),C=r(E);d.__getOffsetParent=y.default,d.__getVisibleRectForElement=g.default,t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(){if(void 0!==f)return f;f="";var e=document.createElement("p").style;for(var t in d)t+"Transform"in e&&(f=t);return f}function o(){return r()?r()+"TransitionProperty":"transitionProperty"}function i(){return r()?r()+"Transform":"transform"}function a(e,t){var n=o();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function s(e,t){var n=i();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}function u(e){return e.style.transitionProperty||e.style[o()]}function l(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(i());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}function c(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(i());if(r&&"none"!==r){var o=void 0,a=r.match(p);if(a)a=a[1],o=a.split(",").map(function(e){return parseFloat(e,10)}),o[4]=t.x,o[5]=t.y,s(e,"matrix("+o.join(",")+")");else{o=r.match(h)[1].split(",").map(function(e){return parseFloat(e,10)}),o[12]=t.x,o[13]=t.y,s(e,"matrix3d("+o.join(",")+")")}}else s(e,"translateX("+t.x+"px) translateY("+t.y+"px) translateZ(0)")}Object.defineProperty(t,"__esModule",{value:!0}),t.getTransformName=i,t.setTransitionProperty=a,t.getTransitionProperty=u,t.getTransformXY=l,t.setTransformXY=c;var f=void 0,d={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"},p=/matrix\((.*)\)/,h=/matrix3d\((.*)\)/},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t={left:0,right:1/0,top:0,bottom:1/0},n=(0,u.default)(e),r=void 0,o=void 0,i=void 0,s=e.ownerDocument,l=s.defaultView||s.parentWindow,c=s.body,f=s.documentElement;n;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===n.clientWidth||n===c||n===f||"visible"===a.default.css(n,"overflow")){if(n===c||n===f)break}else{var d=a.default.offset(n);d.left+=n.clientLeft,d.top+=n.clientTop,t.top=Math.max(t.top,d.top),t.right=Math.min(t.right,d.left+n.clientWidth),t.bottom=Math.min(t.bottom,d.top+n.clientHeight),t.left=Math.max(t.left,d.left)}n=(0,u.default)(n)}return r=a.default.getWindowScrollLeft(l),o=a.default.getWindowScrollTop(l),t.left=Math.max(t.left,r),t.top=Math.max(t.top,o),i={width:a.default.viewportWidth(l),height:a.default.viewportHeight(l)},t.right=Math.min(t.right,r+i.width),t.bottom=Math.min(t.bottom,o+i.height),t.top>=0&&t.left>=0&&t.bottom>t.top&&t.right>t.left?t:null}Object.defineProperty(t,"__esModule",{value:!0});var i=n(143),a=r(i),s=n(314),u=r(s);t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r){var o=a.default.clone(e),i={width:t.width,height:t.height};return r.adjustX&&o.left<n.left&&(o.left=n.left),r.resizeWidth&&o.left>=n.left&&o.left+i.width>n.right&&(i.width-=o.left+i.width-n.right),r.adjustX&&o.left+i.width>n.right&&(o.left=Math.max(n.right-i.width,n.left)),r.adjustY&&o.top<n.top&&(o.top=n.top),r.resizeHeight&&o.top>=n.top&&o.top+i.height>n.bottom&&(i.height-=o.top+i.height-n.bottom),r.adjustY&&o.top+i.height>n.bottom&&(o.top=Math.max(n.bottom-i.height,n.top)),a.default.mix(o,i)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(143),a=r(i);t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=void 0,n=void 0,r=void 0;if(a.default.isWindow(e)||9===e.nodeType){var o=a.default.getWindow(e);t={left:a.default.getWindowScrollLeft(o),top:a.default.getWindowScrollTop(o)},n=a.default.viewportWidth(o),r=a.default.viewportHeight(o)}else t=a.default.offset(e),n=a.default.outerWidth(e),r=a.default.outerHeight(e);return t.width=n,t.height=r,t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(143),a=r(i);t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r,o){var i=void 0,s=void 0,u=void 0,l=void 0;return i={left:e.left,top:e.top},u=(0,a.default)(t,n[1]),l=(0,a.default)(e,n[0]),s=[l.left-u.left,l.top-u.top],{left:i.left-s[0]+r[0]-o[0],top:i.top-s[1]+r[1]-o[1]}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(505),a=r(i);t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=t.charAt(0),r=t.charAt(1),o=e.width,i=e.height,a=void 0,s=void 0;return a=e.left,s=e.top,"c"===n?s+=i/2:"b"===n&&(s+=i),"c"===r?a+=o/2:"r"===r&&(a+=o),{left:a,top:s}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return null!=e&&e==e.window}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=window.getComputedStyle(e,null),r="",o=0;o<h.length&&!(r=n.getPropertyValue(h[o]+t));o++);return r}function i(e){if(d){var t=parseFloat(o(e,"transition-delay"))||0,n=parseFloat(o(e,"transition-duration"))||0,r=parseFloat(o(e,"animation-delay"))||0,i=parseFloat(o(e,"animation-duration"))||0,a=Math.max(n+t,i+r);e.rcEndAnimTimeout=setTimeout(function(){e.rcEndAnimTimeout=null,e.rcEndListener&&e.rcEndListener()},1e3*a+200)}}function a(e){e.rcEndAnimTimeout&&(clearTimeout(e.rcEndAnimTimeout),e.rcEndAnimTimeout=null)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(508),l=r(u),c=n(509),f=r(c),d=0!==l.default.endEvents.length,p=["Webkit","Moz","O","ms"],h=["-webkit-","-moz-","-o-","ms-",""],m=function(e,t,n){var r="object"===(void 0===t?"undefined":s(t)),o=r?t.name:t,u=r?t.active:t+"-active",c=n,d=void 0,p=void 0,h=(0,f.default)(e);return n&&"[object Object]"===Object.prototype.toString.call(n)&&(c=n.end,d=n.start,p=n.active),e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),a(e),h.remove(o),h.remove(u),l.default.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,c&&c())},l.default.addEndEventListener(e,e.rcEndListener),d&&d(),h.add(o),e.rcAnimTimeout=setTimeout(function(){e.rcAnimTimeout=null,h.add(u),p&&setTimeout(p,0),i(e)},30),{stop:function(){e.rcEndListener&&e.rcEndListener()}}};m.style=function(e,t,n){e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),a(e),l.default.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,n&&n())},l.default.addEndEventListener(e,e.rcEndListener),e.rcAnimTimeout=setTimeout(function(){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);e.rcAnimTimeout=null,i(e)},0)},m.setTransition=function(e,t,n){var r=t,o=n;void 0===n&&(o=r,r=""),r=r||"",p.forEach(function(t){e.style[t+"Transition"+r]=o})},m.isCssAnimationSupported=d,t.default=m,e.exports=t.default},function(e,t,n){"use strict";function r(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete a.animationend.animation,"TransitionEvent"in window||delete a.transitionend.transition;for(var n in a)if(a.hasOwnProperty(n)){var r=a[n];for(var o in r)if(o in t){s.push(r[o]);break}}}function o(e,t,n){e.addEventListener(t,n,!1)}function i(e,t,n){e.removeEventListener(t,n,!1)}Object.defineProperty(t,"__esModule",{value:!0});var a={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},s=[];"undefined"!=typeof window&&"undefined"!=typeof document&&r();var u={addEndEventListener:function(e,t){if(0===s.length)return void window.setTimeout(t,0);s.forEach(function(n){o(e,n,t)})},endEvents:s,removeEndEventListener:function(e,t){0!==s.length&&s.forEach(function(n){i(e,n,t)})}};t.default=u,e.exports=t.default},function(e,t,n){function r(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}try{var o=n(315)}catch(e){var o=n(315)}var i=/\s+/,a=Object.prototype.toString;e.exports=function(e){return new r(e)},r.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~o(t,e)||t.push(e),this.el.className=t.join(" "),this},r.prototype.remove=function(e){if("[object RegExp]"==a.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=o(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},r.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},r.prototype.toggle=function(e,t){return this.list?(void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},r.prototype.array=function(){var e=this.el.getAttribute("class")||"",t=e.replace(/^\s+|\s+$/g,""),n=t.split(i);return""===n[0]&&n.shift(),n},r.prototype.has=r.prototype.contains=function(e){return this.list?this.list.contains(e):!!~o(this.array(),e)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=document.createElement("div");return document.body.appendChild(e),e}function i(e){function t(e,t,n){if(!c||e._component||c(e)){e._container||(e._container=p(e));var r=void 0;r=e.getComponent?e.getComponent(t):f(e,t),l.default.unstable_renderSubtreeIntoContainer(e,r,e._container,function(){e._component=this,n&&n.call(this)})}}function n(e){if(e._container){var t=e._container;l.default.unmountComponentAtNode(t),t.parentNode.removeChild(t),e._container=null}}var r=e.autoMount,i=void 0===r||r,a=e.autoDestroy,u=void 0===a||a,c=e.isVisible,f=e.getComponent,d=e.getContainer,p=void 0===d?o:d,h=void 0;return i&&(h=(0,s.default)({},h,{componentDidMount:function(){t(this)},componentDidUpdate:function(){t(this)}})),i&&u||(h=(0,s.default)({},h,{renderComponent:function(e,n){t(this,e,n)}})),h=u?(0,s.default)({},h,{componentWillUnmount:function(){n(this)}}):(0,s.default)({},h,{removeContainer:function(){n(this)}})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(67),s=r(a);t.default=i;var u=n(13),l=r(u);e.exports=t.default},function(e,t,n){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.arrowPointAtCenter)return o.placements;var t=e.arrowWidth,n=void 0===t?5:t,r=e.horizontalArrowShift,s=void 0===r?16:r,u=e.verticalArrowShift,l=void 0===u?12:u;return{left:{points:["cr","cl"],overflow:i,offset:[-4,0],targetOffset:a},right:{points:["cl","cr"],overflow:i,offset:[4,0],targetOffset:a},top:{points:["bc","tc"],overflow:i,offset:[0,-4],targetOffset:a},bottom:{points:["tc","bc"],overflow:i,offset:[0,4],targetOffset:a},topLeft:{points:["bl","tc"],overflow:i,offset:[-(s+n),-4],targetOffset:a},leftTop:{points:["tr","cl"],overflow:i,offset:[-4,-(l+n)],targetOffset:a},topRight:{points:["br","tc"],overflow:i,offset:[s+n,-4],targetOffset:a},rightTop:{points:["tl","cr"],overflow:i,offset:[4,-(l+n)],targetOffset:a},bottomRight:{points:["tr","bc"],overflow:i,offset:[s+n,4],targetOffset:a},rightBottom:{points:["bl","cr"],overflow:i,offset:[4,l+n],targetOffset:a},bottomLeft:{points:["tl","bc"],overflow:i,offset:[-(s+n),4],targetOffset:a},leftBottom:{points:["br","cl"],overflow:i,offset:[-4,l+n],targetOffset:a}}}Object.defineProperty(t,"__esModule",{value:!0}),t.getPlacements=r;var o=n(301),i={adjustX:1,adjustY:1},a=[0,0]},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(54),f=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{avatarSrc:u.PropTypes.string,customClass:u.PropTypes.string}}}]),s(t,[{key:"render",value:function(){var e=this.props.avatarSrc;return l.default.createElement("div",{className:"avatar "+this.props.customClass},l.default.createElement(c.ImageIcon,{customClass:"",defaultImg:"https://assets-cdn.shimo.im/assets/images/loading-b67e5a67dc.gif",realImg:e}))}}]),t}(u.Component);t.default=f,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(13),l=n(0),c=r(l),f=n(20),d=r(f),p=n(516),h=r(p),m=n(517),y=r(m),v=n(5),g=r(v),b=n(343),_=r(b),w=n(531),k=r(w);n(532);var E=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMenuItemClick=n.onMenuItemClick.bind(n),n.onDownloadAppClose=n.onDownloadAppClose.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{currentUser:l.PropTypes.object,closeMenuPopover:l.PropTypes.func}}}]),s(t,[{key:"onMenuItemClick",value:function(e){var t=this,n=this.props.closeMenuPopover,r=e.currentTarget.getAttribute("data-action");if("download"===r&&(this.modalContainer=document.getElementById("downloadapp-modal-container"),this.modalContainer||(this.modalContainer=document.createElement("div"),this.modalContainer.id="downloadapp-modal-container",document.body.appendChild(this.modalContainer)),this.downloadAppModal=(0,u.render)(c.default.createElement(y.default,{onClose:this.onDownloadAppClose}),this.modalContainer)),"invite"===r){var o=this.props.currentUser,i="invite-friends-modal-container";this.infModalContainer=document.getElementById(i),this.infModalContainer||(this.infModalContainer=document.createElement("div"),this.infModalContainer.id=i,document.body.appendChild(this.infModalContainer)),(0,u.render)(c.default.createElement(_.default,{onClose:function(){return(0,u.unmountComponentAtNode)(t.infModalContainer)},currentUser:o}),this.infModalContainer)}"function"==typeof n&&n()}},{key:"renderDividingLine",value:function(){return c.default.createElement("div",{className:"header-menu-dividing"})}},{key:"renderPlainMenuItem",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=(0,d.default)({"header-menu-item":!0,"one-line":!0,"enable-click":t}),i=t?this.onMenuItemClick:null;return t&&n?c.default.createElement("a",{className:o,href:n,rel:"external",target:r?"_blank":"",onClick:i},c.default.createElement("span",null,e)):c.default.createElement("div",{className:o,onClick:i},c.default.createElement("span",null,e))}},{key:"renderInviteFriends",value:function(){var e=this.props.currentUser.accountType;return-1===["personal_free","personal_premium"].indexOf(void 0===e?"personal_free":e)?null:c.default.createElement("div",{className:"invite-friends-wrap"},c.default.createElement("div",{className:"header-menu-item enable-click","data-action":"invite",onClick:this.onMenuItemClick},c.default.createElement("span",null,"邀请好友免费获得高级版")),c.default.createElement(k.default,null))}},{key:"onDownloadAppClose",value:function(){(0,u.unmountComponentAtNode)(this.modalContainer)}},{key:"renderDownloadApp",value:function(){return c.default.createElement("div",{className:"header-menu-item enable-click","data-action":"download",onClick:this.onMenuItemClick},c.default.createElement("span",null,"下载石墨文档 App"),c.default.createElement("i",{className:"desktop-sprite download-app-icon"}))}},{key:"renderAccountType",value:function(){return c.default.createElement("div",{className:"header-menu-item"},c.default.createElement(h.default,{currentUser:this.props.currentUser,onItemClick:this.onMenuItemClick}))}},{key:"renderManageSetting",value:function(){var e=this.props.currentUser,t=e.accountType,n=e.teamRole;return["enterprise_standard","enterprise_dingding","enterprise_expired"].indexOf(t)>-1?this.renderPlainMenuItem("member"===n?"我的企业":"企业管理",!0,"/enterprise",!g.default.isDingtalkPc()):null}},{key:"render",value:function(){var e=this.props.currentUser,t=e.name;return c.default.createElement("div",{className:"header-menu-items"},this.renderPlainMenuItem(t,!1)," ",this.renderDividingLine(),this.renderAccountType()," ",this.renderDividingLine()," ",this.renderPlainMenuItem("帐号设置",!0,"/profile",!1),this.renderManageSetting()," ",this.renderDividingLine(),this.renderInviteFriends(),this.renderDownloadApp()," ",this.renderPlainMenuItem("使用帮助",!0,"https://shimo.im/help",!g.default.isDingtalkPc()),this.renderDividingLine(),this.renderPlainMenuItem("退出登录",!0,"/logout",!1))}}]),t}(l.Component);t.default=E,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(22),f=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={orders:null},n.showEnterPrisePayment=n.showEnterPrisePayment.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{currentUser:u.PropTypes.object,onItemClick:u.PropTypes.func}}}]),s(t,[{key:"componentDidMount",value:function(){var e=this;this.props.currentUser.accountType.match(/^personal_/)||(0,c.ajaxGet)("/orders?type=team").then(function(t){var n=t.data;e.changeOrders(n)})}},{key:"changeOrders",value:function(e){this.setState({orders:e})}},{key:"showEnterPrisePayment",value:function(e,t){var n=this;return function(r){r.preventDefault(),n.context.showEnterprisePayment(e,t),n.props.onItemClick(r)}}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.onItemClick,r=t.team,o=t.email,i=t.accountType,a=this.state.orders,s=a&&a[0]&&"offline"===a[0].channel&&!a[0].isPaid,u="",c=null;["enterprise_standard","enterprise_dingding","enterprise_expired"].indexOf(i)>-1?(u=t.isOfficial?"企业版":s?l.default.createElement("a",{href:"#",onClick:this.showEnterPrisePayment("normal",{page:"transfers-inventory",order:a&&a[0]})},"购买企业版"):l.default.createElement("a",{href:"#",onClick:this.showEnterPrisePayment()},"购买企业版"),c=l.default.createElement("span",{className:"enterprise-name"},r.name)):"personal_premium"===i?(u="高级版",c=l.default.createElement("span",null,l.default.createElement("a",{href:"/payment?renew",target:"_blank",className:"account-upgrade-btn header-menu-link"},"续费"),l.default.createElement("span",{className:"maybe"},"或"),l.default.createElement("a",{href:"/company/register",target:"_blank",className:"header-menu-link"},"升级到企业版"))):"personal_free"===i&&(u="基础版",c=l.default.createElement("a",{href:"/payment",target:"_blank",onClick:n,className:"account-upgrade-btn header-menu-link"},"升级"));var f=null;return f=o?l.default.createElement("span",{className:"account-email"},o):l.default.createElement("a",{className:"account-email-setting header-menu-link",href:"/profile#setting-email",onClick:n,target:"_blank"},"设置您的登录邮箱"),l.default.createElement("div",{className:"account-info"},l.default.createElement("div",{className:"account-type-wrapper"},l.default.createElement("span",{className:"account-type-text"},u),c),f)}}]),t}(u.Component);t.default=f,f.contextTypes={showEnterprisePayment:l.default.PropTypes.func},e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(51),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.bodyTpl=n.bodyTpl.bind(n),n.onModalClose=n.onModalClose.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{onClose:u.PropTypes.func}}}]),s(t,[{key:"bodyTpl",value:function(){return l.default.createElement("div",{className:"download-app-content-wrap"},l.default.createElement("span",{className:"download-app-title"},"扫码下载 石墨文档 App"),l.default.createElement("div",{className:"download-app-url-qrcode"}),l.default.createElement("div",{className:"download-app-actions"},l.default.createElement("a",{href:"https://itunes.apple.com/cn/app/shi-mo-wen-dang-zui-mei-xie/id1013727678?l=en&mt=8",style:{display:"block"},className:"sm-btn sm-btn-primary download-app-btn",target:"_blank"},l.default.createElement("i",{className:"band-icon-sprite ios-band-icon band-icon"}),l.default.createElement("span",{className:"download-btn-text"},"App Store 下载")),l.default.createElement("a",{href:"https://shimo.im/resources/android_app",style:{display:"block"},className:"sm-btn sm-btn-primary download-app-btn",target:"_blank"},l.default.createElement("i",{className:"band-icon-sprite android-band-icon band-icon"}),l.default.createElement("span",{className:"download-btn-text"},"Android 版下载"))))}},{key:"onModalClose",value:function(){var e=this.props.onClose;"function"==typeof e&&e()}},{key:"render",value:function(){return l.default.createElement(f.default,{customClass:"download-app-modal",ref:"flatDialog",hasCloseButton:!0,open:!0,enableCloseClickMask:!0,bodyTpl:this.bodyTpl,onClose:this.onModalClose})}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o),a=n(54),s=n(519),u=r(s),l=n(526),c=r(l),f=function(e){var t=e.onClose,n=void 0===t?function(){}:t,r=e.currentUser;return i.default.createElement(a.Dialog,{open:!0,enableCloseClickMask:!0,title:"免费获得石墨文档高级版！",headTpl:function(e){return i.default.createElement(u.default,{title:e,onClose:n})},bodyTpl:function(){return i.default.createElement(c.default,{currentUser:r})},actions:[],onClose:n})};f.propTypes={onClose:o.PropTypes.func,currentUser:o.PropTypes.object},t.default=f,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o),a=n(520),s=r(a),u=n(523),l=r(u),c=function(e){var t=e.title,n=e.onClose,r=void 0===n?function(){}:n;return i.default.createElement("div",null,t,i.default.createElement(s.default,{template:i.default.createElement(l.default,null)},i.default.createElement("span",{className:"question-tip"},"?")),i.default.createElement("span",{className:"hicon icon-close dialog-close right",onClick:function(){return r()}}))};c.propTypes={title:o.PropTypes.string,onClose:o.PropTypes.func},t.default=c,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(521),i=r(o);t.default=i.default,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o);n(522);var a=o.PropTypes.node,s=function(e){var t=e.template,n=e.children;return i.default.createElement("div",{className:"bubble--"},i.default.createElement("div",{className:"bubble--container"},i.default.createElement("div",{className:"bubble--content"},t),i.default.createElement("div",{className:"bubble--tip"})),n)};s.propTypes={template:a,children:a},t.default=s,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(524),i=r(o);t.default=i.default,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o);n(525);var a=function(){return i.default.createElement("div",{className:"bonus-tip-wrapper"},i.default.createElement("div",{className:"bonus-tip-head"},"石墨文档 ",i.default.createElement("b",null,"高级版"),i.default.createElement("span",{className:"price-desc right"},i.default.createElement("span",{className:"price-number"},"¥ 9")," / 人 / 月")),i.default.createElement("hr",null),i.default.createElement("div",{className:"bonus-tip-body"},i.default.createElement("div",null,"可多人协作的文档与表格",i.default.createElement("span",{className:"right"},"✓")),i.default.createElement("div",null,"单文件协作人数上限",i.default.createElement("span",{className:"right"},"无限")),i.default.createElement("div",null,"单图片附件体积上限",i.default.createElement("span",{className:"right"},"无限")),i.default.createElement("div",null,"优先使用新功能",i.default.createElement("span",{className:"right"},"✓")),i.default.createElement("div",null,"优先售后与技术支持",i.default.createElement("span",{className:"right"},"✓"))))};t.default=a,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(527),d=r(f),p=n(528),h=r(p),m=n(529),y=r(m),v=n(22),g=n(33),b=r(g),_=n(5),w=r(_),k=15,E=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={imgUrl:"",ticket:"",isWechat:!0,invite:{count:0,bonus:0,isBound:!1,isObtained:!1}},n.changeToHigh=n.changeToHigh.bind(n),n.getInviteUser=n.getInviteUser.bind(n),n.resolveInviteStatus=n.resolveInviteStatus.bind(n),n.bindNotification=n.bindNotification.bind(n),n.rewardWechat=n.rewardWechat.bind(n),n.rewardByInvitor=n.rewardByInvitor.bind(n),n.noRewardWechat=n.noRewardWechat.bind(n),n.reloadSession=n.reloadSession.bind(n),n}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.getImgUrl(),this.getInviteUser(),this.bindNotification()}},{key:"componentWillUnmount",value:function(){var e=this.listener;b.default.unbind("INVITE_ACTS",e)}},{key:"getInviteUser",value:function(){var e=this;(0,v.ajaxGet)("/smapi/invite/invite_info").then(function(t){if(0===t.code){var n=e.resolveInviteStatus(t.data);e.setState({invite:s({},e.state.invite,n)})}}).catch(function(e){console.log(e)})}},{key:"resolveInviteStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.have_rewarded,n=void 0===t?0:t,r=e.not_yet_rewarded,o=void 0===r?0:r,i=e.rewarded_by_self_count,a=void 0===i?0:i,s=e.self_bind,u=void 0!==s&&s,l=e.rewarded_by_self_bind,c=void 0!==l&&l,f=e.is_reward_just;return void 0!==f&&f&&this.reloadSession(),{count:n+o-a,bonus:o*k,isBound:u,isObtained:c}}},{key:"getImgUrl",value:function(){var e=this;(0,y.default)("/wechat/binding_qrcode").then(function(t){if(0!==t.code||!t.data.url)return null;e.setState({imgUrl:t.data.url,ticket:t.data.ticket})}).catch(function(e){console.log(e,"error")})}},{key:"changeToHigh",value:function(){var e=this;if(0===this.state.invite.bonus)return null;(0,v.ajaxPost)("/smapi/invite/invitee_convert",{}).then(function(t){0===t.code?(e.setState({invite:s({},e.state.invite,e.resolveInviteStatus(t.data))}),w.default.alert({title:"兑换成功！",delay:1500})):w.default.alert({title:t.message,delay:1500,type:"error"})}).catch(function(e){console.log(e)})}},{key:"bindNotification",value:function(){var e=this;e.listener=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name;switch(n){case"wechat_rewarded":e.rewardWechat();break;case"invitor_bind":e.rewardByInvitor();break;case"wechat_no_reward":e.noRewardWechat();break;default:console.error("unexpected notification name ["+n+"] from push #INVITE_ACTS")}e.reloadSession()},b.default.bind("INVITE_ACTS",this.listener)}},{key:"rewardWechat",value:function(){var e=this.state.invite;this.setState({invite:s({},e,{isBound:!0,isObtained:!0})})}},{key:"rewardByInvitor",value:function(){var e=this.state.invite;this.setState({invite:s({},e,{count:e.count+1,bonus:e.bonus+k})})}},{key:"noRewardWechat",value:function(){var e=this.state.invite;this.setState({invite:s({},e,{isBound:!0})})}},{key:"reloadSession",value:function(){w.default.get("/relogin",function(){})}},{key:"render",value:function(){var e=this.state.invite,t=e.count,n=void 0===t?0:t,r=e.bonus,o=void 0===r?0:r,i=e.isBound,a=void 0!==i&&i,s=e.isObtained,u=void 0!==s&&s,l=this.props.currentUser,f=void 0===l?{}:l,p=location.origin+"?inviterid="+f.id+"&invitername="+f.name+"&share=1&force=1",m=location.origin+"/?inviterid="+f.id+"&invitername="+encodeURIComponent(f.name),y="试试可多人实时协作的云端文档和表格吧，还能免费获得 15 天高级版帐号，点击链接开始使用 "+m;return c.default.createElement("div",null,c.default.createElement("div",{className:"invite-friends-body-wrapper"},c.default.createElement("div",{className:"invite-friends-section-wrapper"},c.default.createElement("div",{className:"invite-friends-section-title"},"方式一：邀请好友注册并绑定微信"),c.default.createElement("div",{className:"invite-friends-desc"},c.default.createElement("div",{className:"invite-friends-text"},c.default.createElement("div",{className:"paragraph"},"每当您成功邀请一位好友注册石墨文档并绑定他的微信时， 你可以免费获得 15 天高级版。"),c.default.createElement("div",{className:"paragraph"},c.default.createElement(h.default,{text:y},c.default.createElement("a",null,"点击这里复制专属邀请链接"))," 或 扫码分享石墨文档给朋友。")),c.default.createElement(d.default,{className:"qrcode",size:80,url:p})),c.default.createElement("div",{className:"invite-friends-summary-wrapper"},c.default.createElement("div",{className:"invite-friends-text invite-friends-text-success"},"已成功邀请并绑定微信的好友",c.default.createElement("span",{className:"right"},n,"人")),c.default.createElement("div",{className:"invite-friends-text"},"可兑换高级版使用期",c.default.createElement("span",{className:"right"},o,"天"),c.default.createElement("span",{className:"invite-friends-claim "+(0!==o?"highlight":"disabled"),onClick:this.changeToHigh},"立即兑换高级版")))),c.default.createElement("hr",null),c.default.createElement("div",{className:"invite-friends-section-wrapper invite-friends-section-wrapper-bindself"},c.default.createElement("div",{className:"invie-frinends-section-left",style:{paddingTop:16}},c.default.createElement("div",{className:"invite-friends-section-title"},"方式二：绑定你的微信号"),c.default.createElement("div",null,c.default.createElement("span",{className:a?"line-through":""},"用微信扫码，绑定帐号，立即获得 15 天高级版。"),u?c.default.createElement("span",{className:"bind-success"},"已获得 ✓"):null)),a?null:c.default.createElement(d.default,{className:"qrcode",size:80,url:this.state.imgUrl,isWechat:this.state.isWechat,ticket:this.state.ticket}))),c.default.createElement("div",{className:"invite-friends-modal-footer"},"每人每月不到一杯咖啡的价格，即可获得更多企业管理功能。",c.default.createElement("b",null,c.default.createElement("a",{href:"/pricing",target:"_blank"},"了解更多 >"))))}}]),t}(l.Component);E.propTypes={count:l.PropTypes.number,bonus:l.PropTypes.number,currentUser:l.PropTypes.object},t.default=E,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),a=r(i),s=i.PropTypes.number,u=i.PropTypes.string,l=i.PropTypes.bool,c={backgroundPosition:"center",backgroundRepeat:"no-repeat"},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"/qrcode?size="+(e>300?e:300)+"&margin=0&url="+t},d=function(e){var t=e.className,n=e.size,r=void 0===n?100:n,i=e.url,s=e.isWechat,u=e.ticket;return a.default.createElement("div",{className:t,style:o({width:r,height:r,backgroundSize:s&&u?"117%":"cover",backgroundImage:s&&u?"url(https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket="+u+")":"url("+f(r,i)+")"},c)})};d.propTypes={className:u,size:s,url:u.isRequired,isWechat:l,ticket:u},t.default=d,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(5),f=r(c),d=n(327),p=r(d),h=u.PropTypes.string,m=u.PropTypes.func,y=u.PropTypes.node,v=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.initClipboard()}},{key:"componentWillUnmount",value:function(){this.clipboard&&this.clipboard.destroy()}},{key:"initClipboard",value:function(){var e=this.props,t=e.onCopy,n=void 0===t?function(){}:t,r=e.onError,o=void 0===r?function(){}:r;this.clipboard=new p.default(this.elm),this.clipboard.on("success",function(){n(),f.default.alert({title:"复制成功！",delay:1500})}),this.clipboard.on("error",function(){o(),f.default.alert({title:"复制失败！",delay:1500,type:"error"})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.text,r=t.children;return l.default.createElement("span",{"data-clipboard-action":"copy","data-clipboard-text":n,ref:function(t){e.elm=t}},r)}}]),t}(u.Component);v.propTypes={text:h,onCopy:m,onError:m,children:y},t.default=v,e.exports=t.default},function(e,t,n){function r(e){return(0,o.ajaxGet)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(22);e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(22),d=n(33),p=r(d),h=n(5),m=r(h),y=15,v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={count:0,bonus:0,isBound:!1,isObtained:!0},n.getInviteUser=n.getInviteUser.bind(n),n.bindNotification=n.bindNotification.bind(n),n.rewardWechat=n.rewardWechat.bind(n),n.rewardByInvitor=n.rewardByInvitor.bind(n),n.noRewardWechat=n.noRewardWechat.bind(n),n.reloadSession=n.reloadSession.bind(n),n}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.getInviteUser(),this.bindNotification()}},{key:"componentWillUnmount",value:function(){var e=this.listener;p.default.unbind("INVITE_ACTS",e)}},{key:"getInviteUser",value:function(){var e=this;(0,f.ajaxGet)("/smapi/invite/invite_info").then(function(t){if(0===t.code){var n=e.resolveInviteStatus(t.data);e.setState(s({},e.state,n))}}).catch(function(e){console.log(e)})}},{key:"resolveInviteStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.have_rewarded,n=void 0===t?0:t,r=e.not_yet_rewarded,o=void 0===r?0:r,i=e.rewarded_by_self_count,a=void 0===i?0:i,s=e.self_bind,u=void 0!==s&&s,l=e.rewarded_by_self_bind,c=void 0!==l&&l,f=e.is_reward_just;return void 0!==f&&f&&m.default.get("/relogin",function(){}),{count:n+o-a,bonus:o*y,isBound:u,isObtained:c}}},{key:"bindNotification",value:function(){var e=this;e.listener=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name;switch(n){case"wechat_rewarded":e.rewardWechat();break;case"invitor_bind":e.rewardByInvitor();break;case"wechat_no_reward":e.noRewardWechat();break;default:console.error("unexpected notification name ["+n+"] from push #INVITE_ACTS")}e.reloadSession()},p.default.bind("INVITE_ACTS",e.listener)}},{key:"rewardWechat",value:function(){this.setState(s({},this.state,{isBound:!0,isObtained:!0}))}},{key:"rewardByInvitor",value:function(){this.setState(s({},this.state,{count:this.state.count+1,bonus:this.state.bonus+y}))}},{key:"noRewardWechat",value:function(){var e=this.state.invite;this.setState({invite:s({},e,{isBound:!0})})}},{key:"reloadSession",value:function(){m.default.get("/relogin",function(){})}},{key:"render",value:function(){var e=this.state,t=e.isObtained,n=e.bonus;return!t||n?c.default.createElement("span",{className:"bubble"},"可领取"):null}}]),t}(c.default.Component);t.default=v,e.exports=t.default},function(e,t){},function(e,t,n){(function(e){function n(e){return o.indexOf(e)>-1}Object.defineProperty(t,"__esModule",{value:!0}),t.isDateFormat=n;var r=(t.SHEET_VIEW_CLASSNAME="sm-sheet-view",t.HISTORY_VIEW_CLASSNAME="history-h-view",t.STYLE_ATTRS=["bold","italic","strike","underline","rowspan","colspan","color","background","font-size","format","vertical","align","wrap","border-top","border-right","border-bottom","border-left"],t.DEFAULT_STYLE={"font-weight":"normal","font-style":"normal","font-size":"9pt",font:"9pt arial",color:15,background:0,align:"general",vertical:"center",wrap:"text-wrap",bold:!1,italic:!1,strike:!1,underline:!1},t.DEFAULT_ALIGN_MAP={string:"left",image:"center",number:"right"},t.DEFAULT_FONT='9pt -apple-system, BlinkMacSystemFont, PingFang SC, Helvetica, Tahoma, Arial, "Hiragino Sans GB", "Microsoft YaHei", SimSun, Heiti, sans-serif',t.TEMP_NEW_FORMAT_MAP={normal:"","0,0":"#,##0","0,0.00":"#,##0.00","(0,0)":"#,##;(#,##0)","(0,0.00)":"#,##0.00;(#,##0.00)","¥0,0":"¥#,##0","¥0,0.00":"¥#,##0.00","$0,0":"$#,##0","$0,0.00":"$#,##0.00"}),o=t.DATE_FORMATS=["YYYY-MM-DD","YYYY/MM/DD","YYYY/MM/DD HH:mm:ss","HH:mm:ss"];t.INVERT_TEMP_NEW_FORMAT_MAP=e.invert(r),t.LOCK_IMG_BASE64="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAYCAYAAAD3Va0xAAABiklEQVQ4T82UvU7DQAyA7cuQpUWqKjbYuiMGHgA2EGVB9AE6pHcDC2MlGECIkYHhLhnyAEVMFbDBA7D0AbrBhqpK0KVDbHRVU7VpiKKq/GS8s798tuMgpDxhGK4Oh8NjRKwyc8WGIGKXmduu697U6/X3ZBomD4IgOIyiKASAlbSXAMCH4zh1z/Pupu9nQBZCRLfMjIjYRsTrUqn0YhP6/f4WEZ0AwD4ishDiaBo2AY3L6VoTRGxKKa/SjHzfbxLRpTVzXbcSlzkBaa3PAeDUmkgpD74pa3SstW5bMwC4UEqdjXoYJxhjOsy8IYTYaTQaz1kg3/e3iegJETtSys0ZkNb6EwAK5XK5WKvVBlmgVqtV6PV6Nn6glComQWwPlFJzk0yDaq1n4qd79E9AsWJWT/Lc4dJBeZuctItFJkY/CgqCYJeIAmshhPA8z3tcyMgY88rMa+PfyJuUcv1vQba0KIoerIXjOHsLlzbe9MwvPvfUjDH3zExKqWrWzv3O+POsxlxpeZKyYpa2a1/5M/jRz8jbBgAAAABJRU5ErkJggg==",t.LOCK_CELL_BG_BASE64="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAG0lEQVQYV2NkQAB9EJMRmwBYhoGB4SJMBYoAADBPAmOASl6WAAAAAElFTkSuQmCC",t.FILTER_FUNC_MAP={"new-filter":"newFilter2Cs","clear-filter":"clearFilter2Cs","delete-filter":"deleteFilter2Cs"}}).call(t,n(1))},function(e,t,n){(function(t){function r(e){return"string"==typeof e&&"="===e[0]}function o(e){return"string"!=typeof e&&(e=e.toString()),e.indexOf("$")>-1}function i(e){e=e.toUpperCase();var t=null;try{t=l.parsePosition(e)}catch(e){}return t}function a(e){window.cow.currentSheetId=e}function s(e){var t=window.cow.currentFile.guid+":sheet";e?c.set(t,e):c.remove(t)}function u(e){window.cow.currentSheetId=e,s(e);var n,r,o;if(n=location.pathname,"/"===n.substr(0,1)&&(n=n.slice(1)),r=n.split("/"),e)2===r.length?r.push(e):3===r.length&&(r[2]=e),o="/"+r.join("/"),t.replace(o,null,!1,!1);else{var i=r[0];3===r.length&&"m"!==i&&"rn"!==i&&(r.splice(2,1),o="/"+r.join("/"),t.replace(o,null,!1,!1))}}var l=n(53),c=n(89);e.exports={isFormula:r,isAbsoluteReference:o,parsePosition:i,setCurrentSheetId:u,setCurSheetIdOnly:a}}).call(t,n(23))},function(e,t,n){function r(e){return null===e||void 0===e}function o(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}function i(e,t,n){var i,c;if(r(e)||r(t))return!1;if(e.prototype!==t.prototype)return!1;if(u(e))return!!u(t)&&(e=a.call(e),t=a.call(t),l(e,t,n));if(o(e)){if(!o(t))return!1;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}try{var f=s(e),d=s(t)}catch(e){return!1}if(f.length!=d.length)return!1;for(f.sort(),d.sort(),i=f.length-1;i>=0;i--)if(f[i]!=d[i])return!1;for(i=f.length-1;i>=0;i--)if(c=f[i],!l(e[c],t[c],n))return!1;return typeof e==typeof t}var a=Array.prototype.slice,s=n(536),u=n(537),l=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:i(e,t,n))}},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}t=e.exports="function"==typeof Object.keys?Object.keys:n,t.shim=n},function(e,t){function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function r(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();t=e.exports=o?n:r,t.supported=n,t.unsupported=r},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return m[h]=r,p(h),h++}function o(e){delete m[e]}function i(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(y)setTimeout(a,0,e);else{var t=m[e];if(t){y=!0;try{i(t)}finally{o(e),y=!1}}}}function s(){p=function(e){t.nextTick(function(){a(e)})}}function u(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function l(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),p=function(n){e.postMessage(t+n,"*")}}function c(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},p=function(t){e.port2.postMessage(t)}}function f(){var e=v.documentElement;p=function(t){var n=v.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function d(){p=function(e){setTimeout(a,0,e)}}if(!e.setImmediate){var p,h=1,m={},y=!1,v=e.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(e);g=g&&g.setTimeout?g:e,"[object process]"==={}.toString.call(e.process)?s():u()?l():e.MessageChannel?c():v&&"onreadystatechange"in v.createElement("script")?f():d(),g.setImmediate=r,g.clearImmediate=o}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(36),n(197))},function(e,t,n){(function(e,r){var o;!function(i){function a(e){throw new RangeError(j[e])}function s(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function u(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(N,"."),r+s(e.split("."),t).join(".")}function l(e){for(var t,n,r=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--)):r.push(t);return r}function c(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=A(e>>>10&1023|55296),e=56320|1023&e),t+=A(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:w}function d(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,n){var r=0;for(e=n?D(e/M):e>>1,e+=D(e/t);e>I*E>>1;r+=w)e=D(e/I);return D(r+(I+1)*e/(e+C))}function h(e){var t,n,r,o,i,s,u,l,d,h,m=[],y=e.length,v=0,g=S,b=T;for(n=e.lastIndexOf(O),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&a("not-basic"),m.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<y;){for(i=v,s=1,u=w;o>=y&&a("invalid-input"),l=f(e.charCodeAt(o++)),(l>=w||l>D((_-v)/s))&&a("overflow"),v+=l*s,d=u<=b?k:u>=b+E?E:u-b,!(l<d);u+=w)h=w-d,s>D(_/h)&&a("overflow"),s*=h;t=m.length+1,b=p(v-i,t,0==i),D(v/t)>_-g&&a("overflow"),g+=D(v/t),v%=t,m.splice(v++,0,g)}return c(m)}function m(e){var t,n,r,o,i,s,u,c,f,h,m,y,v,g,b,C=[];for(e=l(e),y=e.length,t=S,n=0,i=T,s=0;s<y;++s)(m=e[s])<128&&C.push(A(m));for(r=o=C.length,o&&C.push(O);r<y;){for(u=_,s=0;s<y;++s)(m=e[s])>=t&&m<u&&(u=m);for(v=r+1,u-t>D((_-n)/v)&&a("overflow"),n+=(u-t)*v,t=u,s=0;s<y;++s)if(m=e[s],m<t&&++n>_&&a("overflow"),m==t){for(c=n,f=w;h=f<=i?k:f>=i+E?E:f-i,!(c<h);f+=w)b=c-h,g=w-h,C.push(A(d(h+b%g,0))),c=D(b/g);C.push(A(d(c,0))),i=p(n,v,r==o),n=0,++r}++n,++t}return C.join("")}function y(e){return u(e,function(e){return P.test(e)?h(e.slice(4).toLowerCase()):e})}function v(e){return u(e,function(e){return x.test(e)?"xn--"+m(e):e})}var g=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof r&&r);g.global!==g&&g.window!==g&&g.self;var b,_=2147483647,w=36,k=1,E=26,C=38,M=700,T=72,S=128,O="-",P=/^xn--/,x=/[^\x20-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-k,D=Math.floor,A=String.fromCharCode;b={version:"1.4.1",ucs2:{decode:l,encode:c},decode:h,encode:m,toASCII:v,toUnicode:y},void 0!==(o=function(){return b}.call(t,n,t,e))&&(e.exports=o)}()}).call(t,n(52)(e),n(36))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(542),t.encode=t.stringify=n(543)},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var f,d,p,h,m=e[c].replace(s,"%20"),y=m.indexOf(n);y>=0?(f=m.substr(0,y),d=m.substr(y+1)):(f=m,d=""),p=decodeURIComponent(f),h=decodeURIComponent(d),r(a,p)?o(a[p])?a[p].push(h):a[p]=[a[p],h]:a[p]=h}return a};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(a(e),function(a){var s=encodeURIComponent(o(a))+n;return i(e[a])?r(e[a],function(e){return s+encodeURIComponent(o(e))}).join(t):s+encodeURIComponent(o(e[a]))}).join(t):s?encodeURIComponent(o(s))+n+encodeURIComponent(o(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},,function(e,t,n){"use strict";t.__esModule=!0;var r=n(0);t.default=r.PropTypes.shape({subscribe:r.PropTypes.func.isRequired,dispatch:r.PropTypes.func.isRequired,getState:r.PropTypes.func.isRequired})},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.repeat=function(e,t){return new Array(t+1).join(e)},o=t.pad=function(e,t){return r("0",t-e.toString().length)+e};t.formatTime=function(e){return o(e.getHours(),2)+":"+o(e.getMinutes(),2)+":"+o(e.getSeconds(),2)+"."+o(e.getMilliseconds(),3)},t.timer="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date},,,,,function(e,t,n){(function(r){var o,i;o=[n(34)],void 0!==(i=function(e){return new(function(){function t(){this.isReady=!1,this.guideDocTitle="欢迎使用石墨文档",this.$tipContainter=r("body"),this.sheetSplashName="spread_sheet_splash",this.needToGuide()&&(window.cow.guideStatus?this.guideStatus=window.cow.guideStatus:this.getGuideInfo()),this.accountTypeStatus=""}return t.prototype.needToGuide=function(){return(["payment","home","folder"].indexOf(window.cow.pageType)>=0||this.isGuideDoc())&&!cow.isMobile&&!cow.readonly&&cow.currentUser.id>0},t.prototype.checkIsReady=function(){var e,t;return t=this,e=r.Deferred(),t.isReady?e.resolve(t.guideStatus):t.getGuideInfo().then(function(){return t.isReady=!0,e.resolve(t.guideStatus)}).fail(function(){return e.reject()}),e.promise()},t.prototype.getGuideInfo=function(){var t,n;return n=this,t=r.Deferred(),e.get("/api/user_guide_info",{guide_type:"web"},function(e){return 0===e.code?(window.cow.guideStatus=e.data.status,n.guideStatus=window.cow.guideStatus,window.cow.guideStatus.tips=[],n.isReady=!0,t.resolve()):t.reject()},function(){return t.reject()}),t.promise()},t.prototype.getMembershipInfo=function(){var t,n;return n=this,t=r.Deferred(),e.get("/api/get_membership_info",{},function(e){return 0===e.code?(n.shouldNotifyRenewal=e.data.shouldNotifyRenewal,n.shouldNotifyExpiration=e.data.shouldNotifyExpiration,n.shouldNotifyExceedMemberCount=e.data.shouldNotifyExceedMemberCount,cow.currentUser.accountTypeExpiredAt=e.data.accountTypeExpiredAt,t.resolve()):t.reject()},function(){return t.reject()}),t.promise()},t.prototype.removeMembershipTip=function(){return e.post("/flash_messages/read",{message_name:"membership_"+this.accountTypeStatus})},t.prototype.removeTipAjax=function(t){var n,o;return o=this,n=r.Deferred(),e.post("/api/update_user_guide_info",{guide_type:"web",type:t}).then(function(){return window.cow.guideStatus[t]=o.guideStatus[t]=!0,n.resolve()}).fail(function(){return n.reject()}),n.promise()},t.prototype.isGuideDoc=function(){return"doc"===window.cow.pageType&&window.cow.currentFile.name===this.guideDocTitle},t}())}.apply(t,o))&&(e.exports=i)}).call(t,n(2))},function(e,t){function n(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,o=r.toString;e.exports=n},function(e,t,n){var r=n(595),o=n(199),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t,n){(function(e){var r=n(150),o=n(596),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s?r.Buffer:void 0,l=u?u.isBuffer:void 0,c=l||o;e.exports=c}).call(t,n(52)(e))},function(e,t,n){var r=n(597),o=n(598),i=n(599),a=i&&i.isTypedArray,s=a?o(a):r;e.exports=s},function(e,t){function n(e,t,n){if(e==t)return e?[[m,e]]:[];(n<0||e.length<n)&&(n=null);var o=a(e,t),i=e.substring(0,o);e=e.substring(o),t=t.substring(o),o=s(e,t);var u=e.substring(e.length-o);e=e.substring(0,e.length-o),t=t.substring(0,t.length-o);var c=r(e,t);return i&&c.unshift([m,i]),u&&c.push([m,u]),l(c),null!=n&&(c=f(c,n)),c}function r(e,t){var r;if(!e)return[[h,t]];if(!t)return[[p,e]];var i=e.length>t.length?e:t,a=e.length>t.length?t:e,s=i.indexOf(a);if(-1!=s)return r=[[h,i.substring(0,s)],[m,a],[h,i.substring(s+a.length)]],e.length>t.length&&(r[0][0]=r[2][0]=p),r;if(1==a.length)return[[p,e],[h,t]];var l=u(e,t);if(l){var c=l[0],f=l[1],d=l[2],y=l[3],v=l[4],g=n(c,d),b=n(f,y);return g.concat([[m,v]],b)}return o(e,t)}function o(e,t){for(var n=e.length,r=t.length,o=Math.ceil((n+r)/2),a=o,s=2*o,u=new Array(s),l=new Array(s),c=0;c<s;c++)u[c]=-1,l[c]=-1;u[a+1]=0,l[a+1]=0;for(var f=n-r,d=f%2!=0,m=0,y=0,v=0,g=0,b=0;b<o;b++){for(var _=-b+m;_<=b-y;_+=2){var w,k=a+_;w=_==-b||_!=b&&u[k-1]<u[k+1]?u[k+1]:u[k-1]+1;for(var E=w-_;w<n&&E<r&&e.charAt(w)==t.charAt(E);)w++,E++;if(u[k]=w,w>n)y+=2;else if(E>r)m+=2;else if(d){var C=a+f-_;if(C>=0&&C<s&&-1!=l[C]){var M=n-l[C];if(w>=M)return i(e,t,w,E)}}}for(var T=-b+v;T<=b-g;T+=2){var M,C=a+T;M=T==-b||T!=b&&l[C-1]<l[C+1]?l[C+1]:l[C-1]+1;for(var S=M-T;M<n&&S<r&&e.charAt(n-M-1)==t.charAt(r-S-1);)M++,S++;if(l[C]=M,M>n)g+=2;else if(S>r)v+=2;else if(!d){var k=a+f-T;if(k>=0&&k<s&&-1!=u[k]){var w=u[k],E=a+w-k;if(M=n-M,w>=M)return i(e,t,w,E)}}}}return[[p,e],[h,t]]}function i(e,t,r,o){var i=e.substring(0,r),a=t.substring(0,o),s=e.substring(r),u=t.substring(o),l=n(i,a),c=n(s,u);return l.concat(c)}function a(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),o=r,i=0;n<o;)e.substring(i,o)==t.substring(i,o)?(n=o,i=n):r=o,o=Math.floor((r-n)/2+n);return o}function s(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),o=r,i=0;n<o;)e.substring(e.length-o,e.length-i)==t.substring(t.length-o,t.length-i)?(n=o,i=n):r=o,o=Math.floor((r-n)/2+n);return o}function u(e,t){function n(e,t,n){for(var r,o,i,u,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,f="";-1!=(c=t.indexOf(l,c+1));){var d=a(e.substring(n),t.substring(c)),p=s(e.substring(0,n),t.substring(0,c));f.length<p+d&&(f=t.substring(c-p,c)+t.substring(c,c+d),r=e.substring(0,n-p),o=e.substring(n+d),i=t.substring(0,c-p),u=t.substring(c+d))}return 2*f.length>=e.length?[r,o,i,u,f]:null}var r=e.length>t.length?e:t,o=e.length>t.length?t:e;if(r.length<4||2*o.length<r.length)return null;var i,u=n(r,o,Math.ceil(r.length/4)),l=n(r,o,Math.ceil(r.length/2));if(!u&&!l)return null;i=l?u&&u[4].length>l[4].length?u:l:u;var c,f,d,p;return e.length>t.length?(c=i[0],f=i[1],d=i[2],p=i[3]):(d=i[0],p=i[1],c=i[2],f=i[3]),[c,f,d,p,i[4]]}function l(e){e.push([m,""]);for(var t,n=0,r=0,o=0,i="",u="";n<e.length;)switch(e[n][0]){case h:o++,u+=e[n][1],n++;break;case p:r++,i+=e[n][1],n++;break;case m:r+o>1?(0!==r&&0!==o&&(t=a(u,i),0!==t&&(n-r-o>0&&e[n-r-o-1][0]==m?e[n-r-o-1][1]+=u.substring(0,t):(e.splice(0,0,[m,u.substring(0,t)]),n++),u=u.substring(t),i=i.substring(t)),0!==(t=s(u,i))&&(e[n][1]=u.substring(u.length-t)+e[n][1],u=u.substring(0,u.length-t),i=i.substring(0,i.length-t))),0===r?e.splice(n-o,r+o,[h,u]):0===o?e.splice(n-r,r+o,[p,i]):e.splice(n-r-o,r+o,[p,i],[h,u]),n=n-r-o+(r?1:0)+(o?1:0)+1):0!==n&&e[n-1][0]==m?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,o=0,r=0,i="",u=""}""===e[e.length-1][1]&&e.pop();var c=!1;for(n=1;n<e.length-1;)e[n-1][0]==m&&e[n+1][0]==m&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),c=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),c=!0)),n++;c&&l(e)}function c(e,t){if(0===t)return[m,e];for(var n=0,r=0;r<e.length;r++){var o=e[r];if(o[0]===p||o[0]===m){var i=n+o[1].length;if(t===i)return[r+1,e];if(t<i){e=e.slice();var a=t-n,s=[o[0],o[1].slice(0,a)],u=[o[0],o[1].slice(a)];return e.splice(r,1,s,u),[r+1,e]}n=i}}throw new Error("cursor_pos is out of bounds!")}function f(e,t){var n=c(e,t),r=n[1],o=n[0],i=r[o],a=r[o+1];if(null==i)return e;if(i[0]!==m)return e;if(null!=a&&i[1]+a[1]===a[1]+i[1])return r.splice(o,2,a,i),d(r,o,2);if(null!=a&&0===a[1].indexOf(i[1])){r.splice(o,2,[a[0],i[1]],[0,i[1]]);var s=a[1].slice(i[1].length);return s.length>0&&r.splice(o+2,0,[a[0],s]),d(r,o,3)}return e}function d(e,t,n){for(var r=t+n-1;r>=0&&r>=t-1;r--)if(r+1<e.length){var o=e[r],i=e[r+1];o[0]===i[1]&&e.splice(r,2,[o[0],o[1]+i[1]])}return e}var p=-1,h=1,m=0,y=n;y.INSERT=h,y.DELETE=p,y.EQUAL=m,e.exports=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},l=n(193),c=n(192),f=n(131),d=n(559),p=function(e){function t(e){var n,i;return r(this,t),i=n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o(n,i)}return i(t,e),s(t,[{key:"freeze",value:function(){f.freeze(this.data),f.freeze(this.data.rows),f.freeze(this.data.cols)}},{key:"name",value:function(){return"TableOperator"}},{key:"getEmbedObject",value:function(){if("object"!=typeof this.data)throw new Error("data is not an embed object");return{table:this.data}}},{key:"skipDiff",value:function(){return!0}},{key:"_genericSet",value:function(e){var n=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_genericSet",this).call(this,e),r=n.changed,o=n.op;if("object"==typeof o.data){if(o.data.rows||(o.data.rows=new c),o.data.cols||(o.data.cols=new c),o.data.cells||(o.data.cells={}),"function"!=typeof o.data.cells.name&&(o.data.cells=new d({action:o.action,cells:o.data.cells})),"function"!=typeof o.data.rows.pack)throw new Error("rows should be a Delta");if("function"!=typeof o.data.cols.pack)throw new Error("cols should be a Delta");"retain"===o.action&&o.data.rows.isEmpty()&&o.data.cols.isEmpty()&&!Object.keys(o.data.cells).length&&(o.data=1)}if("insert"===o.action){if(!o.data.rows.isDocument())throw new Error("rows should be a document");if(!o.data.cols.isDocument())throw new Error("cols should be a document")}return{changed:r,op:o}}},{key:"pack",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pack",this).call(this);if("object"==typeof e[1]){var n=e[1],r=n.cells,o=n.rows,i=n.cols;if(e[1]=[r.pack()],o.isEmpty()&&i.isEmpty())return e;i.isEmpty()?e[1].push(o.pack()):(e[1].push(o.isEmpty()?0:o.pack()),e[1].push(i.pack()))}return e}},{key:"compose",value:function(e){var n=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"compose",this).call(this,e);if("number"==typeof this.data||"number"==typeof e.data)return n;var r={rows:n.data.rows.compose(e.data.rows),cols:n.data.cols.compose(e.data.cols)},o=new d({cells:n.data.cells,action:n.action});return o.composeWithMutations(e.data),e.data.cells.forEach(function(t){var n=o.get(t),r=e.data.cells.get(t);o.set(t,n.compose(r))}),r.cells=o,n.set({data:r})}},{key:"invert",value:function(e){var n=this,r=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"invert",this).call(this,e);if("number"==typeof this.data||"number"==typeof e.data)return r;var o={rows:this.data.rows.invert(e.data.rows),cols:this.data.cols.invert(e.data.cols)},i=new d({cells:e.data.cells,action:r.action});i.composeWithMutations(o,function(e,t){return n.data.cells.get(t).invert(e)});var a=e.data.rows.isEmpty(),s=e.data.cols.isEmpty();return a&&s||this.data.cells.forEach(function(t){var r=f.parsePosition(t),o=r.row,a=r.col;null!==e.data.rows.composePosition(o)&&null!==e.data.cols.composePosition(a)||i.set(t,n.data.cells.get(t))}),o.cells=i,r.set({data:o})}},{key:"transform",value:function(e,n){var r=this,o=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"transform",this).call(this,e,n);if("number"==typeof this.data||"number"==typeof e.data)return o;var i={rows:o.data.rows.transform(this.data.rows,!n),cols:o.data.cols.transform(this.data.cols,!n)},a={rows:this.data.rows.transform(e.data.rows,n),cols:this.data.cols.transform(e.data.cols,n)},s=new d({cells:e.data.cells,action:o.action});s.composeWithMutations(i);var l=e.data.rows.isEmpty(),c=e.data.cols.isEmpty();return this.data.cells.forEach(function(e){var t=f.parsePosition(e),o=t.row,i=t.col;if(l||(o=a.rows.composePosition(o)),c||(i=a.cols.composePosition(i)),null!==o&&null!==i){var u=f.stringifyPosition(o,i);s.set(u,r.data.cells.get(e).transform(s.get(u),n))}}),a.cells=s,o.set({data:a})}}],[{key:"unpack",value:function(e){if(Array.isArray(e[1])){var n=a(e[1],3),r=n[0],o=n[1],i=n[2];e[1]={rows:o?c.unpack(o):null,cols:i?c.unpack(i):null,cells:r}}return u(t.__proto__||Object.getPrototypeOf(t),"unpack",this).call(this,e)}}]),t}(l);p.packId=3,e.exports=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(332),a=n(192),s=n(1),u=n(131),l=function(){function e(t){var n=t.cells,o=t.action;if(r(this,e),this.cells={},"function"==typeof n.name){this.proto=n.proto;for(var i in n.cells)n.cells.hasOwnProperty(i)&&(this.cells[i]=n.cells[i])}else this.proto=n;this.action=o}return o(e,[{key:"name",value:function(){return"CellManager"}},{key:"keys",value:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}},{key:"get",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1],n=void 0;return n=void 0===this.cells[e]?this.proto[e]:this.cells[e],n?(t&&Array.isArray(n)&&(n=this.cells[e]=i.operatorUnpacker(n)),n.action&&n.action!==this.action&&(n=this.cells[e]=n.set({action:this.action}))):n=new i({action:this.action,data:"insert"===this.action?new a:1}),n}},{key:"forEach",value:function(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1];for(var n in this.cells)!this.cells.hasOwnProperty(n)||t&&null===this.cells[n]||e(n);for(var r in this.proto)this.proto.hasOwnProperty(r)&&!this.cells.hasOwnProperty(r)&&null!==this.proto[r]&&e(r)}},{key:"set",value:function(e,t){this.cells[e]=t||null}},{key:"composeWithMutations",value:function(e,t){var n=this,r=e.rows,o=e.cols,i=r.isEmpty(),a=o.isEmpty();if(!i||!a||t){var s={},l={row:{},col:{}};this.forEach(function(e){var c=u.parsePosition(e),f=c.row,d=c.col;if(i||(void 0===l.row[f]&&(l.row[f]=r.composePosition(f)),f=l.row[f]),a||(void 0===l.col[d]&&(l.col[d]=o.composePosition(d)),d=l.col[d]),s[e]||(s[e]=null),null!==f&&null!==d){var p=u.stringifyPosition(f,d),h=n.get(e);s[p]=t?t(h,p):h}},!1),this.cells=s}}},{key:"pack",value:function(){var e=this,t={};return this.forEach(function(n){var r=e.get(n,!1);Array.isArray(r)?t[n]=r:(r.attributes||r.data.isEmpty&&!r.data.isEmpty())&&(t[n]=r.pack())}),s.isEmpty(t)?0:t}}]),e}();e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},u=n(193),l=function(e){function t(e){var n,i;return r(this,t),i=n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o(n,i)}return i(t,e),a(t,[{key:"name",value:function(){return"TextOperator"}},{key:"getEmbedObject",value:function(){if("object"!=typeof this.data)throw new Error("data is not an embed object");return this.data}},{key:"setData",value:function(e){switch(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,e),this.action){case"insert":if("string"!=typeof this.data&&"object"!=typeof this.data)throw new Error('data should be a string or an object for "insert" action, got '+this.data);break;case"retain":if("number"!=typeof this.data)throw new Error('data should be a number for "'+this.action+'" action, got '+this.data)}return this}}]),t}(u);l.packId=2,e.exports=l},function(e,t,n){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var o=new Uint8Array(16);n=function(){return r.getRandomValues(o),o}}if(!n){var i=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}e.exports=n}).call(t,n(36))},function(e,t,n){(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function o(t){if(m[t])return m[t];var n=null,r=void 0,o=null;if((0,l.isBigNumber)(t))r=t;else{var i={},a=p.getPreferredDisplayFormatter(t.toString(),i);if(r=o=i.value,"General"===a.formatCached)e.isNumber(r)||(r=t);else{var s=a.formatters[0];n=s.formatCached,s._numberFormat._formatType===h&&(r=s.format(r)),u.INVERT_TEMP_NEW_FORMAT_MAP[n]&&(n=u.INVERT_TEMP_NEW_FORMAT_MAP[n])}e.isNil(r)&&(r="")}return m[t]={format:n,value:r,parsedVal:o},m[t]}function i(t){return e.isNil(t)?0:("number"==typeof t&&(t=new Date(t)),(1440*t.getTime()+3181192704e6-864e5*t.getTimezoneOffset())/124416e6)}function a(e){return e=i(e)<1?d(e,"HH:mm:ss"):0===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&0===e.getMilliseconds()?d(e,"yyyy/MM/dd"):d(e,"yyyy/MM/dd HH:mm:ss")}Object.defineProperty(t,"__esModule",{value:!0}),t.parseFormat=o,t.toOADate=i,t.getDateText=a;var s=n(636),u=n(533),l=n(254),c=n(321),f=r(c),d=f.default._localeFormat,p=new s.GeneralFormatter,h=2,m={}}).call(t,n(1))},,function(e,t,n){function r(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function o(e){function n(){if(n.enabled){var e=n,r=+new Date,o=r-(l||r);e.diff=o,e.prev=l,e.curr=r,l=r;for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;s++;var o=t.formatters[r];if("function"==typeof o){var a=i[s];n=o.call(e,a),i.splice(s,1),s--}return n}),t.formatArgs.call(e,i);(n.log||t.log||console.log.bind(console)).apply(e,i)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=r(e),"function"==typeof t.init&&t.init(n),n}function i(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function a(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o.debug=o.default=o,t.coerce=u,t.disable=a,t.enable=i,t.enabled=s,t.humanize=n(565),t.names=[],t.skips=[],t.formatters={};var l},function(e,t){function n(e){if(e=String(e),!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(e){return e>=l?Math.round(e/l)+"d":e>=u?Math.round(e/u)+"h":e>=s?Math.round(e/s)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return i(e,l,"day")||i(e,u,"hour")||i(e,s,"minute")||i(e,a,"second")||e+" ms"}function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,s=60*a,u=60*s,l=24*u,c=365.25*l;e.exports=function(e,t){t=t||{};var i=typeof e;if("string"===i&&e.length>0)return n(e);if("number"===i&&!1===isNaN(e))return t.long?o(e):r(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";function r(e){var t=u(e);t.method=t.method.toUpperCase();var n=void 0;if(t.data){var r=a.parse(t.url,!0);"GET"===t.method?(r.query=r.query||{},s(r.query,t.data),r.search=null,t.url=a.format(r)):(n=new FormData,i(t.data).forEach(function(e){n.append(e,t.data[e])}))}var o=[],p=0,h=void 0,m=!1,y=!1,v=void 0,g=!1,b=void 0,_=Date.now(),w="",k=function(e){if(d("get data:",e),e=w+e,!c.isValid(e))return void(w=e);w="";var t=c.unpack(e);t.length>0&&(t.forEach(function(e){return o.push(e)}),h&&(h.resolve({data:t[0]}),h=null,p+=1))},E=function(e){d("request ended"),m=!0,b={done:!0,status:(e||{}).status},h&&o.length===p&&h.resolve(b)},C=f(s({},t,{onData:k,onEnd:E}));return{abort:function(){return d("pipelining aborted"),g=!0,C.abort()},read:function(){var e=Date.now();return new l(function(e,t){if(g)return void t(new Error("Aborted"));if(v)return void t(v);if(m){if(y)return void t(new Error("Already resolved"));if(o.length===p)return e(b),void(y=!0)}if(o.length>p)return e({data:o[p]}),void(p+=1);h={resolve:e,reject:t}}).timeout(t.timeout-(e-_),new Error("Timeout"))}}}function o(e){return function(t,n){return r(s({},{url:t,method:e,timeout:6e4},n||{}))}}var i=n(567),a=n(408),s=n(333),u=n(571),l=n(429),c=n(334),f=n(572),d=n(344)("pipelining");e.exports=e.exports.get=o("get"),e.exports.request=r,["post","patch","put"].forEach(function(t){e.exports[t]=o(t)}),"undefined"!=typeof window&&(window.pipelining=t)},function(e,t,n){function r(e){return function(t){return null==t?void 0:t[e]}}function o(e){return null!=e&&a(g(e))}function i(e,t){return e="number"==typeof e||p.test(e)?+e:-1,t=null==t?v:t,e>-1&&e%1==0&&e<t}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=v}function s(e){for(var t=l(e),n=t.length,r=n&&e.length,o=!!r&&a(r)&&(d(e)||f(e)),s=-1,u=[];++s<n;){var c=t[s];(o&&i(c,r)||m.call(e,c))&&u.push(c)}return u}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){if(null==e)return[];u(e)||(e=Object(e));var t=e.length;t=t&&a(t)&&(d(e)||f(e))&&t||0;for(var n=e.constructor,r=-1,o="function"==typeof n&&n.prototype===e,s=Array(t),l=t>0;++r<t;)s[r]=r+"";for(var c in e)l&&i(c,t)||"constructor"==c&&(o||!m.call(e,c))||s.push(c);return s}var c=n(568),f=n(569),d=n(570),p=/^\d+$/,h=Object.prototype,m=h.hasOwnProperty,y=c(Object,"keys"),v=9007199254740991,g=r("length"),b=y?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&o(e)?s(e):u(e)?y(e):[]}:s;e.exports=b},function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t){var n=null==e?void 0:e[t];return a(n)?n:void 0}function o(e){return i(e)&&d.call(e)==s}function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return null!=e&&(o(e)?p.test(c.call(e)):n(e)&&u.test(e))}var s="[object Function]",u=/^\[object .+?Constructor\]$/,l=Object.prototype,c=Function.prototype.toString,f=l.hasOwnProperty,d=l.toString,p=RegExp("^"+c.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t){function n(e){return o(e)&&h.call(e,"callee")&&(!y.call(e,"callee")||m.call(e)==c)}function r(e){return null!=e&&a(e.length)&&!i(e)}function o(e){return u(e)&&r(e)}function i(e){var t=s(e)?m.call(e):"";return t==f||t==d}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=l}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){return!!e&&"object"==typeof e}var l=9007199254740991,c="[object Arguments]",f="[object Function]",d="[object GeneratorFunction]",p=Object.prototype,h=p.hasOwnProperty,m=p.toString,y=p.propertyIsEnumerable;e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=v}function i(e){return a(e)&&h.call(e)==l}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null!=e&&(i(e)?m.test(d.call(e)):n(e)&&c.test(e))}var u="[object Array]",l="[object Function]",c=/^\[object .+?Constructor\]$/,f=Object.prototype,d=Function.prototype.toString,p=f.hasOwnProperty,h=f.toString,m=RegExp("^"+d.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y=r(Array,"isArray"),v=9007199254740991,g=y||function(e){return n(e)&&o(e.length)&&h.call(e)==u};e.exports=g},function(e,t,n){(function(e,n){function r(e,t){return e.set(t[0],t[1]),e}function o(e,t){return e.add(t),e}function i(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););return e}function a(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function s(e,t,n,r){var o=-1,i=e?e.length:0;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function u(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function l(e,t){return null==e?void 0:e[t]}function c(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function f(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function d(e,t){return function(n){return e(t(n))}}function p(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function h(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function m(){this.__data__=Lt?Lt(null):{}}function y(e){return this.has(e)&&delete this.__data__[e]}function v(e){var t=this.__data__;if(Lt){var n=t[e];return n===Pe?void 0:n}return bt.call(t,e)?t[e]:void 0}function g(e){var t=this.__data__;return Lt?void 0!==t[e]:bt.call(t,e)}function b(e,t){return this.__data__[e]=Lt&&void 0===t?Pe:t,this}function _(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function w(){this.__data__=[]}function k(e){var t=this.__data__,n=H(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ot.call(t,n,1),!0)}function E(e){var t=this.__data__,n=H(t,e);return n<0?void 0:t[n][1]}function C(e){return H(this.__data__,e)>-1}function M(e,t){var n=this.__data__,r=H(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function S(){this.__data__={hash:new h,map:new(It||_),string:new h}}function O(e){return ae(this,e).delete(e)}function P(e){return ae(this,e).get(e)}function x(e){return ae(this,e).has(e)}function N(e,t){return ae(this,e).set(e,t),this}function j(e){this.__data__=new _(e)}function I(){this.__data__=new _}function D(e){return this.__data__.delete(e)}function A(e){return this.__data__.get(e)}function F(e){return this.__data__.has(e)}function L(e,t){var n=this.__data__;if(n instanceof _){var r=n.__data__;if(!It||r.length<Oe-1)return r.push([e,t]),this;n=this.__data__=new T(r)}return n.set(e,t),this}function R(e,t){var n=$t(e)||ge(e)?u(e.length,String):[],r=n.length,o=!!r;for(var i in e)!t&&!bt.call(e,i)||o&&("length"==i||fe(i,r))||n.push(i);return n}function U(e,t,n){var r=e[t];bt.call(e,t)&&ve(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function H(e,t){for(var n=e.length;n--;)if(ve(e[n][0],t))return n;return-1}function B(e,t){return e&&re(t,Me(t),e)}function W(e,t,n,r,o,a,s){var u;if(r&&(u=a?r(e,o,a,s):r(e)),void 0!==u)return u;if(!Ee(e))return e;var l=$t(e);if(l){if(u=ue(e),!t)return ne(e,u)}else{var f=Gt(e),d=f==De||f==Ae;if(qt(e))return q(e,t);if(f==Re||f==Ne||d&&!a){if(c(e))return a?e:{};if(u=le(d?{}:e),!t)return oe(e,B(u,e))}else{if(!at[f])return a?e:{};u=ce(e,f,W,t)}}s||(s=new j);var p=s.get(e);if(p)return p;if(s.set(e,u),!l)var h=n?ie(e):Me(e);return i(h||e,function(o,i){h&&(i=o,o=e[i]),U(u,i,W(o,t,n,r,i,e,s))}),u}function V(e){return Ee(e)?Tt(e):{}}function z(e,t,n){var r=t(e);return $t(e)?r:a(r,n(e))}function Y(e){return _t.call(e)}function G(e){return!(!Ee(e)||pe(e))&&(we(e)||c(e)?wt:ot).test(me(e))}function $(e){if(!he(e))return Nt(e);var t=[];for(var n in Object(e))bt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function q(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function K(e){var t=new e.constructor(e.byteLength);return new Ct(t).set(new Ct(e)),t}function J(e,t){var n=t?K(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Q(e,t,n){return s(t?n(f(e),!0):f(e),r,new e.constructor)}function X(e){var t=new e.constructor(e.source,rt.exec(e));return t.lastIndex=e.lastIndex,t}function Z(e,t,n){return s(t?n(p(e),!0):p(e),o,new e.constructor)}function ee(e){return zt?Object(zt.call(e)):{}}function te(e,t){var n=t?K(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ne(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function re(e,t,n,r){n||(n={});for(var o=-1,i=t.length;++o<i;){var a=t[o],s=r?r(n[a],e[a],a,n,e):void 0;U(n,a,void 0===s?e[a]:s)}return n}function oe(e,t){return re(e,Yt(e),t)}function ie(e){return z(e,Me,Yt)}function ae(e,t){var n=e.__data__;return de(t)?n["string"==typeof t?"string":"hash"]:n.map}function se(e,t){var n=l(e,t);return G(n)?n:void 0}function ue(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&bt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function le(e){return"function"!=typeof e.constructor||he(e)?{}:V(Mt(e))}function ce(e,t,n,r){var o=e.constructor;switch(t){case Ye:return K(e);case je:case Ie:return new o(+e);case Ge:return J(e,r);case $e:case qe:case Ke:case Je:case Qe:case Xe:case Ze:case et:case tt:return te(e,r);case Fe:return Q(e,r,n);case Le:case We:return new o(e);case He:return X(e);case Be:return Z(e,r,n);case Ve:return ee(e)}}function fe(e,t){return!!(t=null==t?xe:t)&&("number"==typeof e||it.test(e))&&e>-1&&e%1==0&&e<t}function de(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function pe(e){return!!vt&&vt in e}function he(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||mt)}function me(e){if(null!=e){try{return gt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ye(e){return W(e,!1,!0)}function ve(e,t){return e===t||e!==e&&t!==t}function ge(e){return _e(e)&&bt.call(e,"callee")&&(!St.call(e,"callee")||_t.call(e)==Ne)}function be(e){return null!=e&&ke(e.length)&&!we(e)}function _e(e){return Ce(e)&&be(e)}function we(e){var t=Ee(e)?_t.call(e):"";return t==De||t==Ae}function ke(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=xe}function Ee(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ce(e){return!!e&&"object"==typeof e}function Me(e){return be(e)?R(e):$(e)}function Te(){return[]}function Se(){return!1}var Oe=200,Pe="__lodash_hash_undefined__",xe=9007199254740991,Ne="[object Arguments]",je="[object Boolean]",Ie="[object Date]",De="[object Function]",Ae="[object GeneratorFunction]",Fe="[object Map]",Le="[object Number]",Re="[object Object]",Ue="[object Promise]",He="[object RegExp]",Be="[object Set]",We="[object String]",Ve="[object Symbol]",ze="[object WeakMap]",Ye="[object ArrayBuffer]",Ge="[object DataView]",$e="[object Float32Array]",qe="[object Float64Array]",Ke="[object Int8Array]",Je="[object Int16Array]",Qe="[object Int32Array]",Xe="[object Uint8Array]",Ze="[object Uint8ClampedArray]",et="[object Uint16Array]",tt="[object Uint32Array]",nt=/[\\^$.*+?()[\]{}|]/g,rt=/\w*$/,ot=/^\[object .+?Constructor\]$/,it=/^(?:0|[1-9]\d*)$/,at={};at[Ne]=at["[object Array]"]=at[Ye]=at[Ge]=at[je]=at[Ie]=at[$e]=at[qe]=at[Ke]=at[Je]=at[Qe]=at[Fe]=at[Le]=at[Re]=at[He]=at[Be]=at[We]=at[Ve]=at[Xe]=at[Ze]=at[et]=at[tt]=!0,at["[object Error]"]=at[De]=at[ze]=!1;var st="object"==typeof e&&e&&e.Object===Object&&e,ut="object"==typeof self&&self&&self.Object===Object&&self,lt=st||ut||Function("return this")(),ct="object"==typeof t&&t&&!t.nodeType&&t,ft=ct&&"object"==typeof n&&n&&!n.nodeType&&n,dt=ft&&ft.exports===ct,pt=Array.prototype,ht=Function.prototype,mt=Object.prototype,yt=lt["__core-js_shared__"],vt=function(){var e=/[^.]+$/.exec(yt&&yt.keys&&yt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),gt=ht.toString,bt=mt.hasOwnProperty,_t=mt.toString,wt=RegExp("^"+gt.call(bt).replace(nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kt=dt?lt.Buffer:void 0,Et=lt.Symbol,Ct=lt.Uint8Array,Mt=d(Object.getPrototypeOf,Object),Tt=Object.create,St=mt.propertyIsEnumerable,Ot=pt.splice,Pt=Object.getOwnPropertySymbols,xt=kt?kt.isBuffer:void 0,Nt=d(Object.keys,Object),jt=se(lt,"DataView"),It=se(lt,"Map"),Dt=se(lt,"Promise"),At=se(lt,"Set"),Ft=se(lt,"WeakMap"),Lt=se(Object,"create"),Rt=me(jt),Ut=me(It),Ht=me(Dt),Bt=me(At),Wt=me(Ft),Vt=Et?Et.prototype:void 0,zt=Vt?Vt.valueOf:void 0;h.prototype.clear=m,h.prototype.delete=y,h.prototype.get=v,h.prototype.has=g,h.prototype.set=b,_.prototype.clear=w,_.prototype.delete=k,_.prototype.get=E,_.prototype.has=C,_.prototype.set=M,T.prototype.clear=S,T.prototype.delete=O,T.prototype.get=P,T.prototype.has=x,T.prototype.set=N,j.prototype.clear=I,j.prototype.delete=D,j.prototype.get=A,j.prototype.has=F,j.prototype.set=L;var Yt=Pt?d(Pt,Object):Te,Gt=Y;(jt&&Gt(new jt(new ArrayBuffer(1)))!=Ge||It&&Gt(new It)!=Fe||Dt&&Gt(Dt.resolve())!=Ue||At&&Gt(new At)!=Be||Ft&&Gt(new Ft)!=ze)&&(Gt=function(e){var t=_t.call(e),n=t==Re?e.constructor:void 0,r=n?me(n):void 0;if(r)switch(r){case Rt:return Ge;case Ut:return Fe;case Ht:return Ue;case Bt:return Be;case Wt:return ze}return t});var $t=Array.isArray,qt=xt||Se;n.exports=ye}).call(t,n(36),n(52)(e))},function(e,t,n){"use strict";function r(e){var t=new XMLHttpRequest,n=void 0,r=0;return t.withCredentials=e.withCredentials,t.open(e.method,e.url),t.onreadystatechange=function(){if(3===t.readyState){var o=t.responseText,i=o.slice(r);r=o.length,e.onData(i)}if(4===t.readyState){n=t.status||0;var a=t.responseText,s=a.slice(r);s.length>0&&e.onData(s),e.onEnd({status:n})}},t.send(e.data),t}e.exports=r},function(e,t,n){(function(t){e.exports=function(e,n,r,o,i){if("Script error."!==e&&i){var a={msg:e,url:window.location.href,error_name:i.name,error_message:i.message,error_stack:i.stack,error_file:n},s=JSON.stringify(a);window._lastJSErrorString!==s&&t.post("/api/log/jserror",a,function(){}),window._lastJSErrorString=s}}}).call(t,n(2))},function(e,t,n){(function(t){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if("retain"===e.action&&1===e.data)return null;var n=e.getAttributes();if(n&&n.formula)return n.formula;if(n&&n.format){var r=e.data.ops[0];if(r&&"remove"!==r.action){var o=(0,v.strToNum)(r.data);return t.isNil(o)?"":o}return""}var i=e.data.ops||[],a=[];return i.forEach(function(e){"remove"===e.action||t.isNil(e.data)||a.push(e.data)}),a.length>1?a.join(""):(0,v.strToNum)(a[0])}function i(e,n,r){function o(e){return t.isNil(e)?0:e.toString().length}var i=l(n.attrs),a=s(e,n),d=a.value,p=a.format,y=o(e.value),v=e.attrs||{};if((0,h.isFormula)(d))return c(d,y,i,r);var g=[];g.push(new f.TextOperator({action:"insert",data:d})),y>0&&g.push((0,m.genRemoveOps)(y));var b={action:"retain",data:new f.Delta(g)},_=u(d,p,v,i);return _.userID=r,Object.keys(_).length>0&&(b.attributes=_),new f.CellOperator(b)}function a(e,t){var n=l(t.attrs),r=s(e,t),o=r.value,i=r.format;return(0,h.isFormula)(o)?[null,{formula:o,align:"right"}]:[o,u(o,i,e.attrs||{},n)]}function s(e,n){var r=n.attrs,o=t.isNil(n.value)?"":n.value,i=void 0;if(o instanceof Date)o=(0,y.getDateText)(o);else{var a=(0,y.parseFormat)(o);i=a.format,o=a.value}return r.format&&(i=r.format),t.isNumber(o)&&(o=o.toString()),{value:o,format:i}}function u(e,n,r,o){var i={};if(r.format&&!n){(!(0,v.isNumeric)(e)||(0,v.isNumeric)(e)&&g.indexOf(r.format)>-1)&&(i.format=null)}return e&&p.default.isUrl(e)?i.link=e:n&&n!==r.format&&(i.format=n),"string"==typeof e&&e.indexOf("\n")>-1&&"text-wrap"!==r.wrap&&(i.wrap="text-wrap"),r.formula&&(i.formula=o.formula||null),r.link&&(i.link=o.link||null),i=t.assign(o,i)}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return delete e.manualAlign,delete e.autoFormatter,e}function c(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments[3],i=[];return n&&(i=new f.Delta([(0,m.genRemoveOps)(n)])),new f.CellOperator({action:"retain",data:i,attributes:t.assign(r,{formula:e,align:"right",userID:o})})}var f=n(53),d=n(634),p=r(d),h=n(534),m=n(253),y=n(562),v=n(254);e.exports={cells2Value:o,value2Cs:i,formula2Cs:c,text2Cell:a};var g=["YYYY/MM/DD","YYYY/MM/DD HH:mm:ss","HH:mm:ss"]}).call(t,n(1))},function(e,t,n){(function(t){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r,o){var i,a=[];return i=o.nextIndex+1||r+1,n>0&&(a.push(new d.TableOperator({action:"retain",data:1,attributes:{nextIndex:i}})),n-1>0&&a.push(new d.TableOperator({action:"retain",data:n-1}))),a.push(new d.TableOperator({action:"insert",attributes:{id:e,name:t,order:i-1},data:{rows:new d.Delta([new d.Operator({action:"insert",data:200})]),cols:new d.Delta([new d.Operator({action:"insert",data:18})]),cells:{}}})),new d.Delta(a)}function i(e,t){var n=[];return e>0&&n.push(new d.TableOperator({action:"retain",data:e})),n.push(new d.Operator({action:"remove",data:1})),0===e&&n.push(new d.TableOperator({action:"retain",data:1,attributes:{nextIndex:t.nextIndex}})),new d.Delta(n)}function a(e,t,n){var r=[];e>0&&r.push(new d.Operator({action:"retain",data:e})),r.push(new d.Operator({action:"retain",attributes:t,data:1}));var o=new d.Delta(r),i=s(n);return o.compose(i)}function s(e){for(var t=[],n=-1,r=0,o=e.length;r<o;r++){var i=e[r],a=f(i,2),s=a[0],u=a[1],l={};if(Object.keys(s).length>0){for(var c in s){var p=s[c],m=p.formula,y=p.userID;l[c]=(0,h.changeCellAttrs)({formula:m,userID:y})}var v=r-n-1;v>0&&t.push(new d.TableOperator({action:"retain",data:v})),t.push(new d.TableOperator({action:"retain",attributes:{id:u.id},data:{cells:l}})),n=r}}return t.length>0?new d.Delta(t):new d.Delta}function u(e,n,r){var o=void 0,i=1,a="",s=0,u=[],c=l(),f=p.default.unpack(n).ops[0],h=f.getAttributes(),m=h.order||0;return o=h&&h.name?h.name:"工作表1",h.copyIndex&&(a=" ("+h.copyIndex+")",i=h.copyIndex+1),s=r?r.order||0:m+1,delete h.lock,t.forIn(h,function(e,t){t.match(/lock-/)&&delete h[t]}),h.name="副本 "+o+a,h.id=c,h.order=+((m+s)/2).toFixed(4),f=f.set({attributes:h,action:"insert"}),e>0&&u.push(new d.TableOperator({action:"retain",data:e})),u.push(new d.TableOperator({action:"retain",attributes:{copyIndex:i},data:1})),u.push(f),[new d.Delta(u),c,f]}function l(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function c(e){for(var t=e?e.ops.map(function(e){return e.getAttributes().id}):[],n=l();t.indexOf(n)>-1;)n=l();return n}var f=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=n(53),p=r(d),h=n(253);e.exports={newSheet:o,deleteSheet:i,updateSheetName:a,copySheet:u,genUniqueId:c}}).call(t,n(1))},function(e,t,n){function r(e){return e?new Promise(function(t,n){var r=setTimeout(function(){n(new Error("Request timeout"))},500);(0,i.ajaxGet)(o.NEW_SEQ.replace("{%guid%}",e)).then(t).catch(function(e){r&&(clearTimeout(r),r=null,n(e))})}).then(function(e){return void 0!==e.code?e.data:e}).catch(function(){return!1}):Promise.resolve()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(69),i=n(22);e.exports=t.default},,,function(e,t,n){var r,o;r=[n(670)],void 0!==(o=function(e){return e.configure({minimum:.6,easing:"linear",positionUsing:"",speed:250,trickle:!0,trickleRate:.01,trickleSpeed:150,showSpinner:!1,barSelector:'[role="bar"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div></div></div>'}),e}.apply(t,r))&&(e.exports=o)},,function(e,t){function n(e,t,n){void 0!==window.ga&&window.ga("send","event",e,t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default={track:n},e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(5),f=r(c),d=n(9),p=r(d),h=n(21),m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=window.cow.currentFile.updated_at||new Date,a=f.default.DateTime.format(r)+"更新",s=n.fileTypeName=(0,h.getFileTypeName)(window.cow.currentFile.type);return"刚刚更新"===a&&(a=((0,h.isDoc)(window.cow.pageType),s+"将实时更新")),n.state={offline:!1,displayText:a,lastUpdateTime:r,timerId:-1},n.clickNum=0,n}return a(t,e),s(t,[{key:"componentWillMount",value:function(){this._triggerCleanData=this._triggerCleanData.bind(this)}},{key:"componentDidMount",value:function(){var e=this;p.default.attachOne("saveStatus:start",function(){return e._startSave()}),p.default.attachOne("saveStatus:success",function(){return e._saveSuccess()}),p.default.attachOne("saveStatus:error",function(){return e._saveError()}),p.default.attachOne("saveStatus:getUpdate",function(){return e._getUpdateFromServer()}),p.default.attachOne("saveStatus:offline",function(){return e._saveOffline()}),p.default.attachOne("saveStatus:offlineSuccess",function(){return e._saveOfflineSuccess()}),p.default.attachOne("saveStatus:uninit",function(){return e._saveUninit()}),p.default.attach("doc:goback",function(){return e._destroyTimerTick()}),p.default.attach("spreadsheet:exit",function(){return e._destroyTimerTick()}),this._tellClient(),this._createTimerTick()}},{key:"_startSave",value:function(){this._destroyTimerTick();var e="正在保存...";this.state.offline&&(e="正在离线保存..."),this.setState({displayText:e},this._tellClient)}},{key:"_saveSuccess",value:function(){this.setState({offline:!1,displayText:"所有更改都已保存在云端",lastUpdateTime:(new Date).toString()},this._tellClient),this._createTimerTick()}},{key:"_saveError",value:function(){this.setState({displayText:"保存失败"},this._tellClient)}},{key:"_saveOffline",value:function(){this.setState({offline:!0,displayText:"已离线保存"},this._tellClient)}},{key:"_saveOfflineSuccess",value:function(){this.setState({displayText:"离线保存成功"},this._tellClient)}},{key:"_saveUninit",value:function(){this.setState({displayText:"初始化中"},this._tellClient)}},{key:"_getUpdateFromServer",value:function(){this.setState({displayText:this.fileTypeName+"将实时更新",lastUpdateTime:(new Date).toString()},this._tellClient),this._destroyTimerTick(),this._createTimerTick()}},{key:"_createTimerTick",value:function(){var e=this,t=setInterval(function(){if(e.state.lastUpdateTime){var t=f.default.DateTime.format(e.state.lastUpdateTime)+"更新";"刚刚更新"===t&&(t=this.fileTypeName+"将实时更新"),e.setState({displayText:t},e._tellClient)}},18e5);e.setState({timerId:t})}},{key:"_destroyTimerTick",value:function(){clearInterval(this.state.timerId)}},{key:"_tellClient",value:function(){if((0,h.isClient)()){var e=this.state.displayText;p.default.notify("updateSaveStatus",{message:e})}}},{key:"_triggerCleanData",value:function(){var e=(new Date).getTime();0===this.clickNum&&(this.start=e),0!==this.clickNum&&e-this.start>1500&&(this.start=e,this.clickNum=0),this.clickNum+=1,5===this.clickNum&&(this.clickNum=0,p.default.notify("statusBar:triggerCleanData"))}},{key:"render",value:function(){var e;return"保存失败"===this.state.displayText&&(e={color:"#ee7b70"}),l.default.createElement("span",{className:this.props.customClassName,style:e,id:"save-status",onClick:this._triggerCleanData},this.state.displayText)}}]),t}(u.Component);t.default=m,m.propTypes={customClassName:l.default.PropTypes.string},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=t&&t.type;return'Reducer "'+e+'" returned undefined handling '+(n&&'"'+n.toString()+'"'||"an action")+". To ignore an action, you must explicitly return the previous state."}function i(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:s.ActionTypes.INIT}))throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.')})}function a(e){var t,n=d.default(e,function(e){return"function"==typeof e});try{i(n)}catch(e){t=e}var r=c.default(n,function(){});return function(e,i){if(void 0===e&&(e=r),t)throw t;var a=!1,s=c.default(n,function(t,n){var r=e[n],s=t(r,i);if(void 0===s){var u=o(n,i);throw new Error(u)}return a=a||s!==r,s});return a?s:e}}t.__esModule=!0,t.default=a;var s=n(412),u=n(413),l=(r(u),n(414)),c=r(l),f=n(584),d=r(f);e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return Object.keys(e).reduce(function(n,r){return t(e[r])&&(n[r]=e[r]),n},{})}t.__esModule=!0,t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return function(){return t(e.apply(void 0,arguments))}}function i(e,t){if("function"==typeof e)return o(e,t);if("object"!=typeof e||null===e||void 0===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');return s.default(e,function(e){return o(e,t)})}t.__esModule=!0,t.default=i;var a=n(414),s=r(a);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r){var o=e(n,r),a=o.dispatch,u=[],l={getState:o.getState,dispatch:function(e){return a(e)}};return u=t.map(function(e){return e(l)}),a=s.default.apply(void 0,u)(o.dispatch),i({},o,{dispatch:a})}}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o;var a=n(415),s=r(a);e.exports=t.default},function(e,t,n){function r(e){return!(!a(e)||i(e))&&(o(e)?h:l).test(s(e))}var o=n(416),i=n(590),a=n(175),s=n(553),u=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Function.prototype,f=Object.prototype,d=c.toString,p=f.hasOwnProperty,h=RegExp("^"+d.call(p).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){var t=a.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var o=s.call(e);return r&&(t?e[u]=n:delete e[u]),o}var o=n(324),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,u=o?o.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return o.call(e)}var r=Object.prototype,o=r.toString;e.exports=n},function(e,t,n){function r(e){return!!i&&i in e}var o=n(591),i=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t,n){var r=n(150),o=r["__core-js_shared__"];e.exports=o},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function r(e,t){var n=a(e),r=!n&&i(e),c=!n&&!r&&s(e),d=!n&&!r&&!c&&l(e),p=n||r||c||d,h=p?o(e.length,String):[],m=h.length;for(var y in e)!t&&!f.call(e,y)||p&&("length"==y||c&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||u(y,m))||h.push(y);return h}var o=n(594),i=n(554),a=n(261),s=n(555),u=n(329),l=n(556),c=Object.prototype,f=c.hasOwnProperty;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){function r(e){return i(e)&&o(e)==a}var o=n(198),i=n(199),a="[object Arguments]";e.exports=r},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){function r(e){return a(e)&&i(e.length)&&!!s[o(e)]}var o=n(198),i=n(336),a=n(199),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=r},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){(function(e){var r=n(417),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o,s=a&&r.process,u=function(){try{return s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=u}).call(t,n(52)(e))},function(e,t,n){function r(e){if(!o(e))return i(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}var o=n(418),i=n(601),a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){var r=n(602),o=r(Object.keys,Object);e.exports=o},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(1),f=n(54),d=n(439),p=r(d),h=n(5),m=r(h),y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getGroupedUsers=n.getGroupedUsers.bind(n),n.showAddUsersPanel=n.showAddUsersPanel.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{file:u.PropTypes.object,storage:u.PropTypes.object,maxShareCount:u.PropTypes.number,getSharedUsers:u.PropTypes.func,getFile:u.PropTypes.func,setPermission:u.PropTypes.func,onButtonClick:u.PropTypes.func,cleanModals:u.PropTypes.func,pushModal:u.PropTypes.func,popModal:u.PropTypes.func,overflow:u.PropTypes.array}}},{key:"defaultProps",get:function(){return{onButtonClick:function(){},file:cow.currentFile}}}]),s(t,[{key:"componentDidMount",value:function(){this.props.getSharedUsers(this.props.file.guid)}},{key:"getSharedUsers",value:function(){var e=this.props,t=e.storage,n=e.file,r=t.filePermissions[n.guid],o=t.permissions[n.guid];return(0,c.map)(r,function(e){var n=t.users[e],r=o[e]||"editable";return(0,c.assign)({},n,{permission:r})})}},{key:"getGroupedUsers",value:function(){var e=this.getSharedUsers(),t=[],n=[],r=[],o=this.props.file?this.props.file.teamId:0;return(0,c.forEach)(e,function(e){"owner"===e.role?t.push(e):e.team_id&&e.team_id===o?n.push(e):r.push(e)}),[].concat(t).concat(r).concat(n)}},{key:"showAddUsersPanel",value:function(){var e=this.props.file,t=window.cow.currentUser;e.permissions&&e.permissions.collaboratorManageable?this.props.onButtonClick("add"):t.teamId&&t.teamId===e.teamId?m.default.alert({title:"你是只读权限或只能评论的权限，不能添加协作者",type:"error"}):m.default.alert({title:"你是外部协作者，没有权限添加协作者，请联系文件所有者",type:"error"})}},{key:"render",value:function(){var e=l.default.createElement(f.TabItem,{key:"3",title:"协作者 ("+this.getSharedUsers().length+")"},l.default.createElement(p.default,{data:this.getGroupedUsers(),file:this.props.file,setPermission:this.props.setPermission,onButtonClick:this.props.onButtonClick,overflow:this.props.overflow,getPopupContainer:function(){return document.querySelector(".teamwork-shared-users")}}));return l.default.createElement("div",{className:"teamwork-shared-users"},l.default.createElement(f.Tab,{customClass:"sm-tab",disableSetWidth:!0},e),l.default.createElement("button",{className:"btn btn-ok",onClick:this.showAddUsersPanel},"添加协作者"))}}]),t}(u.Component);t.default=y,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Divider=t.ItemGroup=t.MenuItemGroup=t.MenuItem=t.Item=t.SubMenu=void 0;var o=n(755),i=r(o),a=n(761),s=r(a),u=n(765),l=r(u),c=n(766),f=r(c),d=n(767),p=r(d);t.SubMenu=s.default,t.Item=l.default,t.MenuItem=l.default,t.MenuItemGroup=f.default,t.ItemGroup=f.default,t.Divider=p.default,t.default=i.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return!e.length||e.every(function(e){return!!e.props.disabled})}function i(e,t){var n=t,r=e.children,o=e.eventKey;if(n){var i=void 0;if((0,M.loopMenuItem)(r,function(e,t){e&&!e.props.disabled&&n===(0,M.getKeyFromChildrenIndex)(e,o,t)&&(i=!0)}),i)return n}return n=null,e.defaultActiveFirst?((0,M.loopMenuItem)(r,function(e,t){n||!e||e.props.disabled||(n=(0,M.getKeyFromChildrenIndex)(e,o,t))}),n):n}function a(e,t,n){n&&(void 0!==t?(this.instanceArray[e]=this.instanceArray[e]||[],this.instanceArray[e][t]=n):this.instanceArray[e]=n)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(300),u=r(s),l=n(67),c=r(l),f=n(0),d=r(f),p=n(37),h=r(p),m=n(13),y=r(m),v=n(339),g=r(v),b=n(756),_=r(b),w=n(20),k=r(w),E=n(757),C=r(E),M=n(340),T=n(760),S=r(T),O={propTypes:{focusable:h.default.bool,multiple:h.default.bool,style:h.default.object,defaultActiveFirst:h.default.bool,visible:h.default.bool,activeKey:h.default.string,selectedKeys:h.default.arrayOf(h.default.string),defaultSelectedKeys:h.default.arrayOf(h.default.string),defaultOpenKeys:h.default.arrayOf(h.default.string),openKeys:h.default.arrayOf(h.default.string),children:h.default.any},getDefaultProps:function(){return{prefixCls:"rc-menu",className:"",mode:"vertical",level:1,inlineIndent:24,visible:!0,focusable:!0,style:{}}},getInitialState:function(){var e=this.props;return{activeKey:i(e,e.activeKey)}},componentWillReceiveProps:function(e){var t=void 0;if("activeKey"in e)t={activeKey:i(e,e.activeKey)};else{var n=this.state.activeKey,r=i(e,n);r!==n&&(t={activeKey:r})}t&&this.setState(t)},shouldComponentUpdate:function(e){return this.props.visible||e.visible},componentWillMount:function(){this.instanceArray=[]},onKeyDown:function(e){var t=this,n=e.keyCode,r=void 0;if(this.getFlatInstanceArray().forEach(function(t){t&&t.props.active&&(r=t.onKeyDown(e))}),r)return 1;var o=null;return n!==g.default.UP&&n!==g.default.DOWN||(o=this.step(n===g.default.UP?-1:1)),o?(e.preventDefault(),this.setState({activeKey:o.props.eventKey},function(){(0,C.default)(y.default.findDOMNode(o),y.default.findDOMNode(t),{onlyScrollIfNeeded:!0})}),1):void 0===o?(e.preventDefault(),this.setState({activeKey:null}),1):void 0},getOpenChangesOnItemHover:function(e){var t=this.props.mode,n=e.key,r=e.hover,o=e.trigger,i=this.state.activeKey;if(o&&!r&&!this.props.closeSubMenuOnMouseLeave&&e.item.isSubMenu&&"inline"!==t||this.setState({activeKey:r?n:null}),r&&"inline"!==t){var a=this.getFlatInstanceArray().filter(function(e){return e&&e.props.eventKey===i})[0];if(a&&a.isSubMenu&&a.props.eventKey!==n)return{item:a,originalEvent:e,key:a.props.eventKey,open:!1}}return[]},getFlatInstanceArray:function(){var e=this.instanceArray;return e.some(function(e){return Array.isArray(e)})&&(e=[],this.instanceArray.forEach(function(t){Array.isArray(t)?e.push.apply(e,t):e.push(t)}),this.instanceArray=e),e},renderCommonMenuItem:function(e,t,n,r){var o=this.state,i=this.props,s=(0,M.getKeyFromChildrenIndex)(e,i.eventKey,t),u=e.props,l=s===o.activeKey,f=(0,c.default)({mode:i.mode,level:i.level,inlineIndent:i.inlineIndent,renderMenuItem:this.renderMenuItem,rootPrefixCls:i.prefixCls,index:t,parentMenu:this,ref:u.disabled?void 0:(0,_.default)(e.ref,a.bind(this,t,n)),eventKey:s,closeSubMenuOnMouseLeave:i.closeSubMenuOnMouseLeave,onItemHover:this.onItemHover,active:!u.disabled&&l,multiple:i.multiple,onClick:this.onClick,openTransitionName:this.getOpenTransitionName(),openAnimation:i.openAnimation,onOpenChange:this.onOpenChange,onDeselect:this.onDeselect,onDestroy:this.onDestroy,onSelect:this.onSelect},r);return"inline"===i.mode&&(f.closeSubMenuOnMouseLeave=f.openSubMenuOnMouseEnter=!1),d.default.cloneElement(e,f)},renderRoot:function(e){var t;this.instanceArray=[];var n=(t={},(0,u.default)(t,e.prefixCls,1),(0,u.default)(t,e.prefixCls+"-"+e.mode,1),(0,u.default)(t,e.className,!!e.className),t),r={className:(0,k.default)(n),role:"menu","aria-activedescendant":""};return e.id&&(r.id=e.id),e.focusable&&(r.tabIndex="0",r.onKeyDown=this.onKeyDown),d.default.createElement(S.default,(0,c.default)({style:e.style,tag:"ul",hiddenClassName:e.prefixCls+"-hidden",visible:e.visible},r),d.default.Children.map(e.children,this.renderMenuItem))},step:function(e){var t=this.getFlatInstanceArray(),n=this.state.activeKey,r=t.length;if(!r)return null;e<0&&(t=t.concat().reverse());var i=-1;if(t.every(function(e,t){return!e||e.props.eventKey!==n||(i=t,!1)}),this.props.defaultActiveFirst||-1===i||!o(t.slice(i,r-1)))for(var a=(i+1)%r,s=a;;){var u=t[s];if(u&&!u.props.disabled)return u;if((s=(s+1+r)%r)===a)return null}}};t.default=O,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(768),d=r(f),p=n(771),h=r(p),m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleDocumentScroll=n.handleDocumentScroll.bind(n),n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{trigger:l.PropTypes.array,overlay:l.PropTypes.element,style:l.PropTypes.object,onVisibleChange:l.PropTypes.func,visible:l.PropTypes.bool,align:l.PropTypes.object,mask:l.PropTypes.bool,getPopupContainer:l.PropTypes.func}}},{key:"defaultProps",get:function(){return{prefixCls:"sm-dropdown",trigger:["click"],mask:!1}}}]),u(t,[{key:"componentDidMount",value:function(){this.mousewheelHandler=this.handleDocumentScroll(),document.addEventListener("mousewheel",this.mousewheelHandler,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousewheel",this.mousewheelHandler,!1)}},{key:"handleDocumentScroll",value:function(){var e=this;return(0,h.default)(function(t){"sm-dropdown-mask"===t.target.className&&e.refs.dropdown.refs.trigger.setPopupVisible(!1)},200)}},{key:"render",value:function(){return c.default.createElement(d.default,s({ref:"dropdown",overlayClassName:this.props.className},this.props))}}]),t}(l.Component);t.default=m,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(606),f=r(c),d=n(20),p=r(d),h=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={active:!1},n.handleVisibleChange=n.handleVisibleChange.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{type:u.PropTypes.string,onClick:u.PropTypes.func,trigger:u.PropTypes.string,overlay:u.PropTypes.element,visible:u.PropTypes.bool,disabled:u.PropTypes.bool,onVisibleChange:u.PropTypes.func,style:u.PropTypes.object,prefixCls:u.PropTypes.string,getPopupContainer:u.PropTypes.func}}},{key:"defaultProps",get:function(){return{prefixCls:"sm-dropdown-button",type:"default",mask:!1,disabled:!1,align:{points:["tr","br"],overlay:{adjustX:1,adjustY:1},offset:[0,5],targetOffset:[0,0]}}}}]),s(t,[{key:"handleVisibleChange",value:function(e){this.setState({active:e})}},{key:"render",value:function(){var e=(0,p.default)(this.props.prefixCls,this.props.className,{active:this.state.active});return l.default.createElement(f.default,{align:this.props.align,className:this.props.className,mask:this.props.mask,onVisibleChange:this.handleVisibleChange,overlay:this.props.overlay,trigger:this.props.trigger,getPopupContainer:this.props.getPopupContainer},l.default.createElement("div",{className:e,disabled:this.props.disabled,onClick:this.props.onClick},this.props.children))}}]),t}(u.Component);t.default=h,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o),a=n(20),s=r(a),u={size:o.PropTypes.number,width:o.PropTypes.number,children:o.PropTypes.string,className:o.PropTypes.string},l={size:0,width:0,children:"",className:""},c=function(e,t){return e.replace(/[^\x00-\xff]/gi,"aa").length<=t?e:e.substr(0,Math.ceil(t/2))+"..."},f=function(e){var t={},n=e.children,r=(0,s.default)("sm-label",e.className,{"text-overflow":e.width>0});return e.width>0&&(t.maxWidth=e.width),e.size>0&&(n=c(n,e.size)),i.default.createElement("span",{className:r,style:t},n)};f.propTypes=u,f.defaultProps=l,t.default=f,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(5),f=n(1),d=n(323),p=r(d),h=n(54),m=n(610),y=(r(m),n(776)),v=r(y),g=n(439),b=r(g),_=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={search:"",result:[]},n.getSearchResults=n.getSearchResults.bind(n),n.getUserInfoByEmail=n.getUserInfoByEmail.bind(n),n.getRecentContacts=n.getRecentContacts.bind(n),n.getTeamMembers=n.getTeamMembers.bind(n),n.onSearchChange=n.onSearchChange.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{file:u.PropTypes.object,storage:u.PropTypes.object,maxShareCount:u.PropTypes.number,getTeamMembers:u.PropTypes.func,getRecentContacts:u.PropTypes.func,setPermission:u.PropTypes.func,getSharedUsers:u.PropTypes.func,showButton:u.PropTypes.bool,onButtonClick:u.PropTypes.func,cleanModals:u.PropTypes.func,pushModal:u.PropTypes.func,popModal:u.PropTypes.func,overflow:u.PropTypes.array}}},{key:"defaultProps",get:function(){return{showButton:!1,onButtonClick:function(){},file:cow.currentFile,maxShareCount:5}}}]),s(t,[{key:"componentDidMount",value:function(){this.props.getRecentContacts(),cow.currentUser.teamId&&this.props.getTeamMembers()}},{key:"componentWillReceiveProps",value:function(e){var t=this;setTimeout(function(){t.getSearchResults()},30)}},{key:"getRecentContacts",value:function(){var e=this.props,t=e.storage,n=e.file,r=t.permissions[n.guid];return(0,f.map)(t.recentContacts,function(e){var n=t.users[e],o=r[e];return(0,f.assign)({},n,{permission:o})})}},{key:"getTeamMembers",value:function(){var e=this.props,t=e.storage,n=e.file,r=t.permissions[n.guid];return(0,f.map)(t.teamMembers,function(e){var n=t.users[e],o=r[e];return(0,f.assign)({},n,{permission:o})})}},{key:"getSharedUsers",value:function(){var e=this.props,t=e.storage,n=e.file,r=t.filePermissions[n.guid],o=t.permissions[n.guid];return(0,f.map)(r,function(e){var n=t.users[e],r=o[e];return(0,f.assign)({},n,{permission:r})})}},{key:"getSearchResults",value:function(){var e=this,t=this.state.search,n=[].concat(this.getSharedUsers(),this.getRecentContacts(),this.getTeamMembers()),r=(0,f.sortedUniqBy)((0,f.sortBy)(n,"id"),"id"),o=p.default.searchByKeyword(t,r);if(this.setState({result:o}),0===o.length&&c.regs.email.test(t)){var i={name:"",email:t,avatar:"https://assets-cdn.shimo.im/assets/images/loading-b67e5a67dc.gif"};o.push(i),this.setState({result:o},function(){e.getUserInfoByEmail(t)})}}},{key:"getUserInfoByEmail",value:function(e){var t=this;p.default.searchByEmail(e).then(function(e){var n=t.state.result;1===n.length&&n[0].email===e.email&&(n[0].id=e.id,n[0].name=e.name,n[0].avatar=e.avatar),t.setState({result:n})},function(){var e=t.state.result;1===e.length&&(e[0].name="邮箱邀请",e[0].avatar="https://assets-cdn.shimo.im/assets/images/invited-f41924e412.png",t.setState({result:e}))})}},{key:"onSearchChange",value:function(e){var t=this;this.setState({search:e.target.value},function(){t.getSearchResults()})}},{key:"renderMemberList",value:function(){var e=0,t=this.getRecentContacts(),n=[].concat(l.default.createElement(h.TabItem,{key:"1",title:"最近"},l.default.createElement(b.default,{file:this.props.file,data:t,setPermission:this.props.setPermission,onButtonClick:this.props.onButtonClick,overflow:this.props.overflow,getPopupContainer:function(){return document.querySelector(".teamwork-add-users")}})));return cow.currentUser.teamId&&(n.push(l.default.createElement(h.TabItem,{key:"2",title:"企业成员"},l.default.createElement(b.default,{hasMore:!0,file:this.props.file,data:this.getTeamMembers(),getListData:this.props.getTeamMembers,setPermission:this.props.setPermission,onButtonClick:this.props.onButtonClick,overflow:this.props.overflow,getPopupContainer:function(){return document.querySelector(".teamwork-add-users")}}))),0===t.length&&(e=1)),l.default.createElement(h.Tab,{customClass:"sm-tab",selectedIndex:e,disableSetWidth:!0},n)}},{key:"renderSearchResult",value:function(){return l.default.createElement(b.default,{file:this.props.file,data:this.state.result,getSharedUsers:this.props.getSharedUsers,setPermission:this.props.setPermission,onButtonClick:this.props.onButtonClick,overflow:this.props.overflow,getPopupContainer:function(){return document.querySelector(".teamwork-add-users")}})}},{key:"render",value:function(){var e=this.state.search.length>0;return l.default.createElement("div",{className:"teamwork-add-users"},l.default.createElement("div",{className:"flex"},l.default.createElement("div",{className:"sm-form-control search-box"},l.default.createElement("span",{className:"team-sprite team-icon-search"}),l.default.createElement("input",{type:"text",placeholder:"输入邮箱、搜索姓名，添加协作者",autoFocus:"autofocus",value:this.state.search,onChange:this.onSearchChange}))),!e&&this.renderMemberList(),e&&this.renderSearchResult(),l.default.createElement(v.default,{fileGuid:this.props.file.guid}),this.props.showButton&&l.default.createElement("div",{style:{textAlign:"right"}},l.default.createElement("button",{className:"btn btn-ok",onClick:this.props.onButtonClick},"确定")))}}]),t}(u.Component);t.default=_,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(611),i=r(o),a=n(775),s=r(a);i.default.InfiniteScroll=s.default,t.default=i.default,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(20),d=r(f),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleScroll=n.handleScroll.bind(n),n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{className:l.PropTypes.string,overflow:l.PropTypes.array,spinning:l.PropTypes.bool,onScroll:l.PropTypes.func}}},{key:"defaultProps",get:function(){return{className:"",overflow:[0,0],spinning:!1,onScroll:function(){}}}}]),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;setTimeout(function(){return t.forceUpdate()},0)}},{key:"outterStyle",value:function(){return{marginLeft:-this.props.overflow[0],marginRight:-this.props.overflow[1],height:"100%",overflowY:"auto"}}},{key:"innerStyle",value:function(){var e=this.refs.outter,t=this.refs.inner,n=e?e.offsetWidth:0,r=e?t.offsetWidth:0;return{paddingLeft:this.props.overflow[0],paddingRight:this.props.overflow[1]-(n-r)}}},{key:"handleScroll",value:function(e){this.props.onScroll(e)}},{key:"renderChildren",value:function(){return c.default.createElement("div",{className:"scroll-view-outter",style:this.outterStyle(),onScroll:this.handleScroll,ref:"outter"},c.default.createElement("div",{className:"scroll-view-inner",style:this.innerStyle(),ref:"inner"},this.props.children))}},{key:"render",value:function(){var e=this.props.className.split(/\s/),t=d.default.apply(void 0,["scroll-view"].concat(o(e),[{spinner:this.props.spinning}]));return c.default.createElement("div",{className:t},!this.props.spinning&&this.renderChildren())}}]),t}(l.Component);t.default=p,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(1),f=n(54),d=n(439),p=r(d),h=n(146),m=r(h),y=n(5),v=r(y),g=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleUserListClick=n.handleUserListClick.bind(n),n.renderActionComponent=n.renderActionComponent.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{file:u.PropTypes.object,storage:u.PropTypes.object,maxShareCount:u.PropTypes.number,getSharedUsers:u.PropTypes.func,getFile:u.PropTypes.func,patchFile:u.PropTypes.func,setPermission:u.PropTypes.func,showButton:u.PropTypes.bool,onButtonClick:u.PropTypes.func,cleanModals:u.PropTypes.func,pushModal:u.PropTypes.func,popModal:u.PropTypes.func,overflow:u.PropTypes.array}}},{key:"defaultProps",get:function(){return{showButton:!1,onButtonClick:function(){},file:cow.currentFile}}}]),s(t,[{key:"handleUserListClick",value:function(e){var t=this,n=document.querySelector(".modal-root");n&&(n.style.display="none"),(0,m.default)({title:"移交所有者",description:"确定要将所有者角色转交给 "+e.name+"?",confirmFun:function(){n&&(n.style.display="block"),t.props.onButtonClick(),t.props.patchFile(t.props.file.guid,{userId:e.id}).then(function(){v.default.alert({title:"移交所有权成功"})})}})}},{key:"getSharedUsers",value:function(){var e=this.props,t=e.storage,n=e.file,r=t.filePermissions[n.guid],o=t.permissions[n.guid],i=[];return(0,c.map)(r,function(e){var n=t.users[e];if(n.status>=0){var r=o[e]||"editable";i.push((0,c.assign)({},n,{permission:r}))}}),i}},{key:"getGroupedUsers",value:function(e){var t=[],n=[],r=this.props.file;return(0,c.forEach)(e,function(e){e.team_id&&e.team_id===r.teamId?t.push(e):n.push(e)}),{teamMembers:t,otherMembers:n}}},{key:"renderActionComponent",value:function(e){var t=this;return this.props.file.userId===e.id?l.default.createElement("div",{className:"sm-dropdown-button no-overlay"},"所有者"):l.default.createElement("div",{className:"sm-dropdown-button no-overlay",onClick:function(){return t.handleUserListClick(e)}},"选择")}},{key:"render",value:function(){var e=this.getSharedUsers(),t="协作者 ("+e.length+")",n=this.props.file.teamId?this.getGroupedUsers(e).teamMembers:e;return l.default.createElement("div",{className:"teamwork-transfer-ownship"},l.default.createElement(f.Tab,{customClass:"sm-tab",disableSetWidth:!0},l.default.createElement(f.TabItem,{title:t},l.default.createElement(p.default,{data:n,file:this.props.file,overflow:this.props.overflow,renderActionComponent:this.renderActionComponent,getPopupContainer:function(){return document.querySelector(".teamwork-transfer-ownship")}}))),this.props.showButton&&l.default.createElement("button",{className:"btn btn-ok",onClick:this.props.onButtonClick},"返回"))}}]),t}(u.Component);t.default=g,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(252),d=n(54),p=n(440),h=r(p),m=n(609),y=r(m),v=n(614),g=r(v),b=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleTransferButtonClick=n.handleTransferButtonClick.bind(n),n.handleContentSwitch=n.handleContentSwitch.bind(n),n.renderBody=n.renderBody.bind(n),n.onClose=n.onClose.bind(n),n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{storage:l.PropTypes.object,file:l.PropTypes.object,getRecentContacts:l.PropTypes.func,getTeamMembers:l.PropTypes.func,setPermission:l.PropTypes.func,getSharedUsers:l.PropTypes.func,popModal:l.PropTypes.func,pushModal:l.PropTypes.func}}}]),u(t,[{key:"handleTransferButtonClick",value:function(){this.props.popModal(),this.props.pushModal(g.default,{file:this.props.file})}},{key:"handleContentSwitch",value:function(e){"transfer"===e&&this.handleTransferButtonClick()}},{key:"onClose",value:function(){this.props.popModal(),this.props.pushModal(h.default,{file:this.props.file})}},{key:"renderBody",value:function(){return c.default.createElement(y.default,s({},this.props,{onButtonClick:this.handleContentSwitch}))}},{key:"render",value:function(){var e=[];return e.push({customClass:"btn btn-ok",onTap:this.onClose,label:"确定"}),c.default.createElement(d.Dialog,{open:!0,hasMask:!1,customClass:"teamworker-sharelist-inner button-right",bodyTpl:this.renderBody,actions:e,onClose:this.onClose})}}]),t}(l.Component);t.default=(0,f.register)("AddUserDialog",b),e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(54),d=n(252),p=n(612),h=r(p),m=n(440),y=r(m),v=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleButtonClick=n.handleButtonClick.bind(n),n.renderBody=n.renderBody.bind(n),n.onClose=n.onClose.bind(n),n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{file:l.PropTypes.object,storage:l.PropTypes.object,getSharedUsers:l.PropTypes.func,setPermission:l.PropTypes.func,cleanModals:l.PropTypes.func,pushModal:l.PropTypes.func,popModal:l.PropTypes.func}}}]),u(t,[{key:"handleButtonClick",value:function(){this.props.popModal(),this.props.pushModal(y.default,{file:this.props.file})}},{key:"onClose",value:function(){this.props.cleanModals()}},{key:"renderHeader",value:function(e){return c.default.createElement("div",null,c.default.createElement("span",{className:"dialog-title"},e),c.default.createElement("span",{className:"hicon icon-close dialog-close-btn",onClick:this.onClose}))}},{key:"renderBody",value:function(){return c.default.createElement(h.default,s({},this.props,{onButtonClick:this.handleButtonClick}))}},{key:"render",value:function(){var e=[];return e.push({customClass:"btn btn-ok",onTap:this.handleButtonClick,label:"返回"}),c.default.createElement(f.Dialog,{open:!0,hasMask:!1,ref:"target",title:"转让所有权",customClass:"teamworker-sharelist-inner",headTpl:this.renderHeader,bodyTpl:this.renderBody,actions:e,onClose:this.onClose})}}]),t}(l.Component);t.default=(0,d.register)("TransferOwnshipDialog",v),e.exports=t.default},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(794);var f=n(0),d=i(f),p=n(13),h=i(p),m=n(607),y=i(m),v=n(604),g=i(v),b=n(795),_=i(b),w=n(442),k=i(w),E=n(146),C=i(E),M=n(72),T=i(M),S=n(5),O=i(S),P=n(323),x=i(P),N=n(9),j=i(N),I=n(33),D=i(I),A=n(730),F=n(21),L=n(646),R=i(L),U=n(22),H=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=["comments"];return cow.currentFile.starred&&r.push("star"),n.state={selectedKeys:r},n.commentOpened=!0,n.fileInfo={},n}return u(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this;j.default.attach("doc:history:hide",function(){e._deSelect("history")},{scope:this}),j.default.attach("history:hide",function(){e._deSelect("history")},{scope:this}),j.default.attach("doc:directory:hide",function(){e._deSelect("directory")},{scope:this}),j.default.attach("doc:authors:show",function(){e._select("authors"),e._toggleAuthors(!0)},{scope:this}),j.default.attach("doc:goback",this._closeSidebar,{scope:this}),D.default.bind("StarredFile",function(t){if(t.data.fileId===cow.currentFile.id){"create"===t.action?e._select("star"):e._deSelect("star")}}),j.default.attach("history:toggle",function(){var t=-3===window.cow.currentFile.type;e._isHistoryActive(t)?(e._toggleHistory(!1,t),e._deSelect("history")):(e._toggleHistory(!0,t),e._select("history"),e._isLockSidebarActive()&&e._deSelect("locksheet"))}),j.default.attach("directory:toggle",function(){e._isDirectoryActive()?(e._toggleDirectory(!1),e._deSelect("directory")):(e._toggleDirectory(!0),e._select("directory"))}),j.default.attach("lock:sidebar:hide",function(){e._deSelect("locksheet")},{scope:this})}},{key:"componentWillUnmount",value:function(){var e=this;j.default.detach("doc:history:hide",this),j.default.detach("history:hide",this),j.default.detach("doc:directory:hide",this),j.default.detach("doc:authors:show",this),j.default.detach("history:toggle",this),j.default.detach("directory:toggle",this),j.default.detach("lock:sidebar:hide",this),setTimeout(function(){j.default.detach("doc:goback",e)},0)}},{key:"_showFileMover",value:function(e){(0,A.showFileMover)({sourceFile:e,onSuccess:function(){}})}},{key:"_select",value:function(e){-1===this.state.selectedKeys.indexOf(e)&&(this.state.selectedKeys.push(e),this.setState({selectedKeys:this.state.selectedKeys}))}},{key:"_deSelect",value:function(e){-1!==this.state.selectedKeys.indexOf(e)&&this.setState({selectedKeys:r.without(this.state.selectedKeys,e)})}},{key:"_showExportDoc",value:function(){var e=document.createElement("div"),t=function(){return document.body.removeChild(e)};h.default.render(d.default.createElement(_.default,{close:t}),e),document.body.appendChild(e)}},{key:"_showExportSpreadsheet",value:function(){O.default.isSafari()?O.default.alert({title:"暂时不支持 Safari ，请换用最新版 Chrome "}):n.e(3).then(function(e){var t=n(1021),r=n(410),o=r.getCurDoc();t.exportToFile(o,window.cow.currentFile.name+".xlsx")}.bind(null,n)).catch(n.oe)}},{key:"_showExportSheet",value:function(){var e=window.cow,t=e.currentFile,i=e.currentSheetGuid;j.default.notify("btn:getExportJSON",function(e,a){n.e(4).then(function(s){function u(e,t,n){return new Promise(function(r){var o=new Image;o.crossOrigin="Anonymous",o.onload=function(){var e=document.createElement("CANVAS"),o=e.getContext("2d");e.height=this.height,e.width=this.width,o.drawImage(this,0,0);var i=e.toDataURL();r({dataURL:i,index:t,sheetName:n})},o.onerror=function(){r({})},o.src=e,(o.complete||void 0===o.complete)&&(o.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",o.src=e)})}var c=n(1022),f=n(1023),d=new f.IO,p="sheet/"+i+"/"+t.name+".xlsx",h="sheet/"+i+"/"+encodeURIComponent(t.name)+".xlsx";e=c.exportToFile(e);var m=[];r.mapKeys(e.sheets,function(e,t){if("object"===(void 0===e?"undefined":l(e))&&!r.isEmpty(e.floatingObjects)){e.floatingObjects.forEach(function(e,n){/^picture/.test(e.name)&&m.push(u(e.src,n,t))})}}),Promise.all(m).then(function(t){var n=!1;t.forEach(function(t){r.isEmpty(t)?n=!0:e.sheets[t.sheetName].floatingObjects[t.index].src=t.dataURL}),d.save(e,function(e){O.default.alert({title:"导出操作成功，请耐心等待",type:""}),o.ajax({url:"/api/upload/oss_forms",type:"POST",data:{head:a,guid:i},success:function(t){var r=t.data,i=new FormData;i.append("OSSAccessKeyId",r.OSSAccessKeyId),i.append("policy",btoa(JSON.stringify(r.policy))),i.append("Signature",r.signature),i.append("key",p),i.append("Content-Type","multipart/form-data"),i.append("file",e),o.ajax({url:"https://shimo-exports.oss-cn-shanghai.aliyuncs.com",type:"POST",data:i,contentType:!1,processData:!1,success:function(){var e="https://shimo-exports.oss-cn-shanghai.aliyuncs.com/"+h,t={title:"导出提示",description:"检测到部分图片可能无法导出，确定导出吗",buttons:[{type:"link-button",buttonLabel:"确定",href:e,target:"_self",customClass:"btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"",closeAfterClick:!0}]};n?(0,C.default)(t):window.location=e},error:function(){O.default.hide();var e={buttonLabel:"确认",customClass:"btn-ok",closeAfterClick:!0},t={title:"出错啦",buttons:[e]};t.description="导出遇到问题，请检查网络后重试",(0,C.default)(t)}})}})},function(e){O.default.alert({title:"导出出错，请重试",type:e})})})}.bind(null,n)).catch(n.oe)})}},{key:"_print",value:function(){var e=void 0,t=function(e){(e.contentDocument||e.contentWindow.document).documentElement.innerHTML=""},n=document.getElementById("printer"),i=function(e){return setTimeout(function(){return o(".operation-btn").removeClass("active"),o(".operation-dropdown").removeClass("active"),e.contentWindow.print(),t(n)},1e3)},a=o("#editorcontainer").clone(),s=a.find("#doc-title-input");s.removeAttr("placeholder"),s.removeAttr("class"),s.attr("value",a.find("#doc-title-input").val()),a.find(".table-div").each(function(e){e=o(e);var t=e.find(".shadow-table").html();e.html(t)}),a.find("span.mention").each(function(e){try{var t=r.filter(e.parentElement.classList,function(e){if(e.startsWith("lineguid-"))return e}),n=o("."+t[0]+" span.mention").css("font-family").match(/^'(.+)-(.+)'$/)[2];e.innerHTML="@"+n}catch(t){e.innerHtml="@"}}),o("link").each(function(t,n){n.href.match(/\/main-(.+)\.css$/)&&(e=n.href)});var u=r.template(k.default)({body:a.html(),css:e});n.contentWindow.document.write(u),n.contentWindow.document.close(),i(n)}},{key:"_deleteFile",value:function(){var e=this,t=cow.currentFile,n={title:"确认操作",buttons:[]},r={buttonLabel:"确认删除",customClass:"btn-error",closeAfterClick:!0,onClick:function(){T.default.updateFile(t,{is_delete:1}).then(function(){e._goback()}).fail(function(e){x.default.isEnterpriseStandard(cow.currentUser)||x.default.isEnterpriseDingding(cow.currentUser)?O.default.alert({title:e.responseText||"删除失败",type:"error"}):O.default.alert({title:"删除失败",type:"error"})})}},o={buttonLabel:"退出共享",customClass:"btn-ok",closeAfterClick:!0,onClick:function(){T.default.quiteShare(t).then(function(){e._goback(),O.default.alert({title:"已从此"+t.name+"的共享中退出"})}).fail(function(){O.default.alert({title:"操作失败",type:"error"})})}},i={buttonLabel:"取消",customClass:"",closeAfterClick:!0},a={buttonLabel:"确认",customClass:"btn-ok",closeAfterClick:!0},s=cow.currentFile.typeName,u=t.permissions.manageable,l=t.permissions.quitable;u&&l?(n.buttons=[r,o,i],n.description="你可以删除"+s+"<br />也可以退出共享，但不删除"+s):u?(n.buttons=[r,i],n.description="确认删除"+s+"吗？<br />删除后，所有协作者都无法访问此"+s):l?(n.buttons=[o,i],n.description="你不是"+s+"的创建者<br />继续此操作会退出"+s+"共享<br />但不会删除"+s):(n.title="没有权限",n.buttons=[a],n.description="你没有权限删除或退出此"+s),(0,C.default)(n)}},{key:"_isHistoryActive",value:function(e){return e?o("#sheet-view .s-sidebar").hasClass("show"):!o("#doc-history").hasClass("hide")}},{key:"_isLockSidebarActive",value:function(){return o("#sheet-view .lock-sidebar").hasClass("show")}},{key:"_isDirectoryActive",value:function(){return!o("#doc-directory").hasClass("hide")}},{key:"_toggleComments",value:function(e){var t=this;e?(o("#pad-view").addClass("comment-show").removeClass("history-show"),this._toggleHistory(!1),this._toggleDirectory(!1)):(o("#pad-view").removeClass("comment-show"),setTimeout(function(){return t._deSelect("comments")},0))}},{key:"_toggleHistory",value:function(e,t){if(t)return j.default.notify("spreadsheet:history:"+(e?"show":"hide"));e?(this._toggleDirectory(!1),this._toggleComments(!1),o("#pad-view").addClass("history-show"),o("#doc-history").removeClass("hide"),j.default.notify("doc:history:show")):(o("#pad-view").removeClass("history-show"),o("#doc-history").addClass("hide"),setTimeout(function(){return j.default.notify("doc:history:hide")},0),this.commentOpened&&(this._select("comments"),o("#pad-view").addClass("comment-show").removeClass("history-show")))}},{key:"_toggleDirectory",value:function(e){e?(this._toggleHistory(!1),this._toggleComments(!1),o("#innerdocbody").focus(),window.cow.directory.firstOpen=!0,o("#pad-view").addClass("history-show directory-show"),o("#doc-directory").removeClass("hide"),window.cow.directory.isOpened=!0):(o("#pad-view").removeClass("directory-show"),o("#doc-directory").addClass("hide"),window.cow.directory.isOpened=!1,setTimeout(function(){return j.default.notify("doc:directory:hide")},0),this.commentOpened&&(this._select("comments"),o("#pad-view").addClass("comment-show").removeClass("history-show")))}},{key:"_toggleAuthors",value:function(e){e?o("#pad-view").addClass("edit-mode"):o("#pad-view").removeClass("edit-mode")}},{key:"openInfoDialog",value:function(){var e=this;window.cow.currentFile.guid!==this.fileInfo.guid?(0,U.ajaxGet)("/smapi/files/"+window.cow.currentFile.guid+"?creator=1").then(function(t){var n=t.data;e.fileInfo=n||{},e.showInfoModal()}):this.showInfoModal()}},{key:"showInfoModal",value:function(){var e=this.fileInfo,t=e.createdAt,n=e.views,r=e.creator,o=window.cow.currentFile.typeName,i=r.name,a=r.email,s=i+" ("+a+")",u="";if("文档"===o){var l=document.getElementById("innerdocbody").innerText;u="<div>"+o+"总字数： "+this.filterTextCount(l)+" (不计标点)</div>"}var c={title:o+"信息",description:'\n        <div class="operations-info-dialog-creator">'+o+'创建者：\n          <span title="'+s+'">'+s+"</span>\n        </div>\n        <div>"+o+"创建时间： "+(0,R.default)(t).format("YYYY.MM.DD HH:mm")+" (GMT+08:00)</div>"+u+"<div>阅读次数： "+n+"次</div>\n      ",buttons:[{type:"button",buttonLabel:"确定",customClass:"btn-ok",closeAfterClick:!0}]};(0,C.default)(c)}},{key:"filterTextCount",value:function(e){var t=0,n=/^[A-Za-z0-9]+$/gi,o=/[A-Za-z0-9]+/gi,i=/↵|\s/,a=/[^a-zA-Z0-9\s\u4e00-\u9fa5]/g;return e=e.replace(/\b[a-zA-Z]+'[a-zA-Z]+\b/g,"0").replace(/\b\d+\.\d+\b/g,"0").replace(a," "),r.compact(e.split(i)).forEach(function(e){var r=e.trim(),i=r.match(n);if(Array.isArray(i))t+=i.length;else{var a=r.match(o);if(Array.isArray(a)){var s=r.split(o).join("");t+=s.length,t+=a.length}else t+=r.length}}),t}},{key:"_closeSidebar",value:function(){this._toggleDirectory(!1),this._toggleHistory(!1)}},{key:"_toggleStar",value:function(){cow.currentFile.starred?(0,M.unstarFile)(cow.currentFile.id):(0,M.starFile)(cow.currentFile.id)}},{key:"_handleMenu",value:function(e){var t=e.key,n=e.selectedKeys,r=this.props.file;if("locksheet"!==t||(0,F.isEnterprise)(cow.currentUser)){if("history"===t||"locksheet"===t){var o="";o="history"===t?"locksheet":"history";var i=n.indexOf(o);i>=0&&n.splice(i,1)}this.setState({selectedKeys:n});var a=-1!==n.indexOf(t);if("star"===t)return void this._toggleStar();if("delete"===t)return void this._deleteFile();if("move"===t)return void this._showFileMover(r);if(0===cow.currentFile.type)switch(t){case"export":this._showExportDoc();break;case"print":this._print();break;case"history":this._toggleHistory(a);break;case"directory":this._toggleDirectory(a);break;case"comments":this.commentOpened=a,this._toggleComments(a);break;case"authors":this._toggleAuthors(a);break;case"info":this.openInfoDialog()}else if(-1===cow.currentFile.type||-3===cow.currentFile.type){var s=-3===cow.currentFile.type;switch(t){case"history":j.default.notify("spreadsheet:history:show");break;case"locksheet":j.default.notify("spreadsheet:lock:toggle");break;case"export":s?this._showExportSheet():this._showExportSpreadsheet();break;case"info":this.openInfoDialog()}}}}},{key:"_enterMenuItem",value:function(){(0,F.isEnterprise)(cow.currentUser)||o(".operations-tip").css("display","block")}},{key:"_leaveMenuItem",value:function(){o(".operations-tip").css("display","none")}},{key:"render",value:function(){var e=d.default.createElement("div",null);0===cow.currentFile.type?e=d.default.createElement(g.default,{multiple:!0,className:"operations",selectedKeys:this.state.selectedKeys,onSelect:this._handleMenu.bind(this),onDeselect:this._handleMenu.bind(this)},cow.currentUser.id>0&&d.default.createElement(v.Item,{key:"star"},"给文档标星"),cow.currentUser.id>0&&d.default.createElement(v.Divider,null),d.default.createElement(v.Item,{key:"directory"},"查看目录"),d.default.createElement(v.Item,{key:"history"},"查看历史"),d.default.createElement(v.Item,{key:"comments"},"查看评论"),d.default.createElement(v.Item,{key:"authors"},"查看编写者"),cow.authorized&&d.default.createElement(v.Item,{key:"info",className:"operations-noselect"},"文档信息"),d.default.createElement(v.Divider,null),cow.authorized&&d.default.createElement(v.Item,{key:"move",className:"operations-noselect"},"移动"),d.default.createElement(v.Item,{key:"export",className:"operations-noselect"},"导出"),d.default.createElement(v.Item,{key:"print",className:"operations-noselect"},"打印"),cow.currentFile.permissions.manageable&&d.default.createElement(v.Divider,null),cow.currentFile.permissions.manageable&&d.default.createElement(v.Item,{key:"delete",className:"operations-noselect operations-red"},"删除文档")):-1===cow.currentFile.type||-3===cow.currentFile.type?e=d.default.createElement(g.default,{multiple:!0,className:"operations",selectedKeys:this.state.selectedKeys,onSelect:this._handleMenu.bind(this),onDeselect:this._handleMenu.bind(this)},cow.currentUser.id>0&&d.default.createElement(v.Item,{key:"star"},"给表格标星"),d.default.createElement(v.Item,{key:"history"},"查看历史"),d.default.createElement(v.Item,{key:"locksheet",className:(0,F.isEnterprise)(cow.currentUser)?"":"locksheet_disabled",onMouseEnter:this._enterMenuItem.bind(this),onMouseLeave:this._leaveMenuItem.bind(this)},"查看锁定工作表"),cow.authorized&&d.default.createElement(v.Item,{key:"info",className:"operations-noselect"},"表格信息"),cow.authorized&&d.default.createElement(v.Item,{key:"move",className:"operations-noselect"},"移动"),d.default.createElement(v.Item,{key:"export",className:"operations-noselect"},"导出"),cow.currentFile.permissions.manageable&&d.default.createElement(v.Divider,null),cow.currentFile.permissions.manageable&&d.default.createElement(v.Item,{key:"delete",className:"operations-noselect operations-red"},"删除表格"),d.default.createElement("div",{className:"s-tooltip operations-tip",style:{top:cow.currentUser.id>0?"80px":"45px"}},"企业版功能")):-2===cow.currentFile.type&&(e=d.default.createElement(g.default,{multiple:!0,className:"operations",selectedKeys:this.state.selectedKeys,onSelect:this._handleMenu.bind(this),onDeselect:this._handleMenu.bind(this)},d.default.createElement(v.Item,{key:"star"},"给文档标星"),d.default.createElement(v.Divider,null),d.default.createElement(v.Item,{key:"delete",className:"operations-noselect operations-red"},"删除文档")));var t={points:["tr","br"],overlay:{adjustX:1,adjustY:1},offset:[10,10],targetOffset:[0,0]};return d.default.createElement(y.default,{className:"operations",type:"primary",overlay:e,align:t})}}]),t}(f.Component);t.default=H,H.propTypes={file:f.PropTypes.object},e.exports=t.default}).call(t,n(1),n(2))},function(e,t,n){e.exports=n(742)},function(e,t,n){function r(e,t,n,r){var a=!n;n||(n={});for(var s=-1,u=t.length;++s<u;){var l=t[s],c=r?r(n[l],e[l],l,n,e):void 0;void 0===c&&(c=e[l]),a?i(n,l,c):o(n,l,c)}return n}var o=n(419),i=n(409);e.exports=r},function(e,t,n){function r(e){return o(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var u=n[r];u&&e(t,u,r,a)}return t})}var o=n(619),i=n(626);e.exports=r},function(e,t,n){function r(e,t){return a(i(e,t,o),e+"")}var o=n(338),i=n(620),a=n(622);e.exports=r},function(e,t,n){function r(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=i(r.length-t,0),u=Array(s);++a<s;)u[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(u),o(e,this,l)}}var o=n(621),i=Math.max;e.exports=r},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){var r=n(623),o=n(625),i=o(r);e.exports=i},function(e,t,n){var r=n(624),o=n(420),i=n(338),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=a},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t){function n(e){var t=0,n=0;return function(){var a=i(),s=o-(a-n);if(n=a,s>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r=800,o=16,i=Date.now;e.exports=n},function(e,t,n){function r(e,t,n){if(!s(n))return!1;var r=typeof t;return!!("number"==r?i(n)&&a(t,n.length):"string"==r&&t in n)&&o(n[t],e)}var o=n(325),i=n(265),a=n(329),s=n(175);e.exports=r},function(e,t,n){(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function o(){p();var e=window.cow.currentUser.id,t=void 0;try{t=new S.default({userId:e})}catch(e){return void console.log("Not support LocalStorage")}i(t,new P.default({userId:e}),e)}function i(t,n,r,o){var i=o&&o.guid,s=function(e){return e.reduce(function(e,t){return e.then(function(){return t()})},Promise.resolve())};return Promise.all([t.getAll(r,i),n.getAll(r,i)]).then(function(e){var t=h(e,2);return a(t[0],t[1])}).then(function(r){return e.map(r,function(e){return function(){var r=e.key,a=r.split("_"),s=h(a,3),u=s[2];return!i&&window.cow.currentFile&&window.cow.currentFile.guid===u?Promise.resolve():l(t,n,e,o)}})}).then(function(e){return s(e)})}function a(t,n){return t=e.keyBy(t,function(e){return e.key.replace("sm-sheet_","")}),n=e.keyBy(n,function(e){return e.key.replace("sm-ops_","")}),e.partialRight(e.assignWith,function(t,n){return e.assign(t,n)})(t,n)}function s(e,t,n,r){if(!n||n&&y.default.unpack(n.changeset).isEmpty())return Promise.resolve();r&&r===e&&E.default.alert({title:"正在同步离线数据，请稍等...",type:"error",delay:1e4}),window.cow.usingNewSeq&&(n.uuid=n.guid);var o=N.SYNC_OFFLINE.replace("{%guid%}",e);n.clientId=t;var i=n;return(0,x.ajaxPost)(o,i).then(function(e){return e}).catch(function(){throw Error("sync network error")})}function u(e,t,n){return new Promise(function(r,o){var i=[],a=(0,g.default)(N.PULL_URL.replace("{fileId}",e),{data:{clientId:t,rev:n},timeout:1e4});return function e(){return a.read().then(function(t){if(t.done)return r(i);var n=t.data;if(n.errorMessage)return o(new Error(t.data.errorMessage));for(var s=0,u=n.length;s<u;s++){var l=n[s];if("new"===l.type&&i.push(l),"accept"===l.type)return i.push(l),a.abort(),r(i)}return e()})}()})}function l(e,t,n,r){var o=r&&r.guid,i=n.key,a=n.committingCS,l=n.unCalcOps,f=i.split("_");f.shift();var d=h(f,3),p=d[1],v=d[2],g=f.join("_"),_="sm-sheet_"+g,k="sm-ops_"+g,C=n.userCS;if(l&&l.length>0&&!o)return Promise.resolve();var T=c(l,r),S=T?T.calcCS:null,O=o&&o===p;return s(p,v,a,o).then(function(e){return!a||a&&(0,m.unpack)(a.changeset).isEmpty()?[]:"fail"===e.message||"repeat"===e.message?"BadOrRepeatChangeset":u(p,v,a.rev).catch(function(e){if("TimeoutError"===e.name)return"TimeoutError";throw O&&(0,M.default)({title:"离线数据同步失败",description:"当前表格离线数据同步失败，请刷新重试",abortClass:"hide"}),new Error(e)})}).then(function(r){function i(t){return e.removeByKey(t).then(function(){return O&&E.default.alert({title:"同步成功"})})}function a(){return new Promise(function(e,t){var n=setTimeout(function(){return e()},1e4),r=function t(){n&&clearTimeout(n),w.default.detach("saveStatus:getUpdate",t),e()};w.default.attach("saveStatus:getUpdate",r)})}function u(){delete n.committingCS,e.setByKey(_,n)}if("string"==typeof r)return n.userCS&&(n.userCS.uuid=(0,b.v4)()),void u();var l=!1,c=void 0;if(S&&!S.isEmpty()?(l=!0,C?(c=(0,m.unpack)(C.changeset),C.changeset=c.compose(S)):C={changeset:S,rev:T.rev}):C&&(c=C.changeset=(0,m.unpack)(C.changeset),l=!c.isEmpty()),l){if(r.length>0){var f=r.length-1;C.rev=r[f].rev,r.splice(f,1)}var d=C.changeset;return r=r.map(function(e){return y.default.unpack(e.changeset)}),r.forEach(function(e){d=e.transform(d,!0)}),C.changeset=y.default.pack(d),u(),t.clear(k),s(p,v,C,o).then(function(){return a().then(function(){return i(_)})})}return t.clear(k),i(_)})}function c(e,t){function n(e){return e[0]?r.wrapCurSheetCs.apply(r,e):new m.Delta}if(!e||0===e.length||!t)return null;var r=t.csStoreInst;return{calcCS:f(e.map(function(e){return f(e.map(function(e){var t=e.fnName,r=e.params;return"multiSheetUtils"===e.moduleName?A.default[t].apply(null,r):n(I.default[t].apply(null,r))}))})),rev:e[e.length-1][0].rev}}function f(t){return t.reduce(function(t,n){return e.isArray(n)&&(n=n[0]),t.compose(n)},new m.Delta)}function d(e){var t=window.cow.currentUser.id,n=new S.default({userId:t}),r=new P.default({userId:t});n.getAll(t,e).then(function(e){return e.forEach(function(e){var t=e.key;return n.removeByKey(t)})}),r.getAll(t,e).then(function(e){return e.forEach(function(e){var t=e.key;return r.clear(t)})})}function p(){F||(F=!0,w.default.attach("statusBar:triggerCleanData",function(){if("sheet"!==window.cow.pageType)return!1;(0,M.default)({title:"确认删除离线数据？",description:"删除离线数据无法恢复，请确认已手动复制表格内容到本地，以免数据丢失",confirmFun:function(){d(window.cow.currentFile.guid),E.default.alert({title:"删除成功",delay:1e3})}})}))}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.syncOfflineData=o,t.syncBulkCS=i,t.syncCS=s,t.pullNewChanges=u,t.syncOneSheet=l,t.calcOps=c;var m=n(53),y=r(m),v=n(434),g=r(v),b=n(176),_=n(9),w=r(_),k=n(5),E=r(k),C=n(146),M=r(C),T=n(328),S=r(T),O=n(632),P=r(O),x=n(22),N=n(69),j=n(631),I=r(j),D=n(575),A=r(D),F=!1}).call(t,n(1))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){n.e(0).then(function(o){(function(o){var i=n(904).SpreadsheetContainer;n(828)(o.extend({SpreadsheetContainer:i,guid:e,sheetId:t},r))}).call(this,n(1))}.bind(null,n)).catch(n.oe)},e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){n.e(1).then(function(o){(function(o){var i=n(905);n(829)(o.extend({SpreadsheetContainer:i,guid:e,sheetId:t},r))}).call(this,n(1))}.bind(null,n)).catch(n.oe)},e.exports=t.default},function(e,t,n){(function(n,r){function o(e){for(var t in a)if(r.startsWith(e,t)){var n={};return a[t].match(e,n),n.guid}return""}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=n.Route,a={"/folder/":new i("/folder/:guid"),"/m/folder/":new i("/m/folder/:guid"),"/doc/":new i("/doc/:guid"),"/m/doc/":new i("/m/doc/:guid"),"/team/":new i("/team/:guid/files"),"/spreadsheet/":new i("/spreadsheet/:guid/:sheetId?"),"/m/spreadsheet/":new i("/m/spreadsheet/:guid/:sheetId?"),"/rn/spreadsheet/":new i("/rn/spreadsheet/:guid/:sheetId?"),"/sheet/":new i("/sheet/:guid/:sheetId?"),"/m/sheet/":new i("/m/sheet/:guid/:sheetId?"),"/rn/sheet/":new i("/rn/sheet/:guid/:sheetId?")};e.exports=t.default}).call(t,n(23),n(1))},function(e,t,n){(function(t){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,n,r){var o={},i=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,f=void 0,d=void 0,p=!1;return n.forEach(function(e){i=e[0],a=e[1],l=e[2],f=e[3],c=t.isNil(l.value)?"":l.value.toString(),s=t.isNil(f.value)?"":f.value.toString(),c===s&&t.isEmpty(f.attrs)||(u=(0,K.stringifyPosition)(i,a),o[u]=(0,J.value2Cs)(l,f,r))}),0===Object.keys(o).length?(p=!0,d=z()):d=U(o),[d,{sheetId:e},p]}function a(e,t,n,r){var o,i,a,s,u=z();return t?(t=JSON.parse(t),o=t.pos,s=o[2],i=o[0],a=i+s,r<0&&i>=n&&i<n+Math.abs(r)?N(e,{filter:null}):(n<=i?i+=r:n>i&&n<=a&&(s+=r),t.pos=[i,o[1],s,o[3]],N(e,{filter:JSON.stringify(t)}))):[u,{sheetId:e}]}function s(e,t,n,r){var o,i,a,s,u=z();return t?(t=JSON.parse(t),o=t.pos,s=o[3],i=o[1],a=i+s,n<=i?i+=r:n>i&&n<=a&&(s+=r),t.pos=[o[0],i,o[2],s],N(e,{filter:JSON.stringify(t)})):[u,{sheetId:e}]}function u(e,t,n){var r=t.oldRowLen,o=t.rowDiff,i=n.oldColLen,a=n.colDiff,s=o>0?B(r,o):null,u=a>0?B(i,a):null,l={};return s&&(l.rows=new K.Delta(s)),u&&(l.cols=new K.Delta(u)),[new K.TableOperator({action:"retain",data:l}),{sheetId:e}]}function l(e,t,n){return[L(B(t,n)),{sheetId:e}]}function c(e,t,n){return[R(B(t,n)),{sheetId:e}]}function f(e,t){return[L(H(t)),{sheetId:e}]}function d(e,t){return[R(H(t)),{sheetId:e}]}function p(e,t,n){return m(e,t,n,"row")}function h(e,t,n){return m(e,t,n,"col")}function m(e,n,r,o){var i={},a="object"===(void 0===r?"undefined":q(r)),s="row"===o?"height":"width",u="row"===o?L:R;return a?t.forEach(n,function(e){(i[e]={})[s]=r[e]}):i[s]=r,[u(W(n,i,o,a?"multi":null)),{sheetId:e}]}function y(e,n,r){var o={};t.forEach(r,function(e,t){var r=$(e,2),i=r[0],a=r[1],s=n[t][1]||0;(a=a||0)!==s&&(o[i]={autoFit:a})});var i=null;return t.isEmpty(o)||(i=L(V(o,"row"))),[i,{sheetId:e}]}function v(e,t,n){var r=t.row,o=t.col,i=t.rowCount,a=t.colCount,s=n.oldRowLen,l=n.oldColLen,c=r+i-s,f=o+a-l;return c<=0&&f<=0?[z(),{sheetId:e}]:u(e,{oldRowLen:s,rowDiff:c},{oldColLen:l,colDiff:f})}function g(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"row",o="row"===r?L:R,i=z();return t.isEmpty(n)||(i=o(V(n,r))),[i,{sheetId:e}]}function b(e,n){var r={};return t.forEach(n,function(e){var t=$(e,4),n=t[0],o=t[1],i=t[2],a=t[3],s=(0,K.stringifyPosition)(n,o);r[s]=w(i,a)}),[t.isEmpty(r)?z():U(r),{sheetId:e}]}function _(e,n){var r={};return t.forEach(n,function(e){var t=$(e,4),n=t[0],o=t[1],i=t[3],a=(0,K.stringifyPosition)(n,o);r[a]=(0,Q.changeCellAttrs)(i.attrs)}),[t.isEmpty(r)?z():U(r),{sheetId:e}]}function w(e,t){var n=k(e,t);return(0,Q.changeCellAttrs)(n)}function k(e,n){var r=e.attrs||{},o=(0,Q.clearAttrs)(r);return t.assign(o,n.attrs)}function E(e){return new K.CellOperator({action:"retain",data:1,attributes:e})}function C(e,t,n,r,i,a){var s=r.url,u=r.text,l=r.tooltip,c={link:s,linkTooltip:l},f=(0,J.value2Cs)(i,{value:u,attrs:c},a);return[U(o({},(0,K.stringifyPosition)(t,n),f)),{sheetId:e}]}function M(e,n,r,o,i,a){function s(e,t,n){for(var r=$(e,4),a=r[0],s=r[1],u=r[2],l=r[3],c=a;c<=u;c++)for(var f=s;f<=l;f++){var d=Math.min(Math.max(c,0),o),p=Math.min(Math.max(f,0),i),h=(0,K.stringifyPosition)(d,p),m=n[h];m?m.push(t):n[h]=[t]}}var u={},l={},c=$(r,3),f=c[0],d=c[1],p=c[2],h="none"===f?null:JSON.stringify([d,+p]);return t.forEach(n,function(e){var n=Z.default.transformBorder(e,f);t.forIn(n,function(e,t){s(e,t,u)})}),t.forIn(u,function(e,n){var r={userID:a};t.forEach(e,function(e){r["border-"+e]=h}),l[n]=(0,Q.changeCellAttrs)(r)}),[t.isEmpty(l)?z():U(l),{sheetId:e}]}function T(e,n,r){var o=["formula","format"],i={};return t.forEach(n,function(e){var n=$(e,3),a=n[0],s=n[1],u=n[2],l=(0,K.stringifyPosition)(a,s),c=u.attrs||{};if(t.forEach(o,function(e){delete c[e]}),Object.keys(c).length){var f=(0,Q.clearAttrs)(c);f.userID=r,i[l]=(0,Q.changeCellAttrs)(f)}}),[t.isEmpty(i)?z():U(i),{sheetId:e}]}function S(e,n){var r={};return t.forIn(n,function(e,t){r[t]=e&&JSON.stringify(e)}),N(e,r)}function O(e,n,r){var o={};return t.forEach(n,function(e){var t=e.row,n=e.col,i=e.rowCount,a=e.colCount,s=(0,K.stringifyPosition)(t,n);o[s]=(0,Q.changeCellAttrs)({rowspan:i,colspan:a,userID:r})}),[t.isEmpty(o)?z():U(o),{sheetId:e}]}function P(e,n,r,o){function a(e){return!e&&0!==e}var s=r.row,u=r.col,l=r.rowCount,c=r.colCount,f=[],d={},p=n[0][2].attrs,h=void 0;return t.forIn(p,function(e,t){-1===["rowspan","colspan","formula"].indexOf(t)&&(d[t]=e)}),n.forEach(function(e){var n=$(e,3),r=n[0],o=n[1],i=n[2],p=i.value,m=i.attrs;if(r===s&&o===u)f.push([r,o,i,{value:p,attrs:(0,ee.assign)(m,{rowspan:l,colspan:c})}]),h=p;else{var y=t.assign((0,Q.clearAttrs)(m||{}),d);f.push([r,o,i,{value:"",attrs:y}]),a(h)&&!a(p)&&(h=p,f[0][3].value=p)}}),i(e,f,o)}function x(e,t,n){return _(e,[[t.row,t.col,{},{attrs:{rowspan:null,colspan:null,userID:n}}]])}function N(e,t){return[new K.TableOperator({action:"retain",data:1,attributes:t}),{sheetId:e}]}function j(e,t,n,r){var o=t.row,i=t.col,a=t.rowCount,s=t.colCount,u=o<0?1:o+1,l=a>1?a-1:n-u,c=[u,i,l,s];1===a&&1===s?c=[1,0,n-1,r]:-1===i&&(c=[u,0,l,r]);var f={pos:c,rules:{}};return N(e,{filter:JSON.stringify(f)})}function I(e,t){var n=void 0;return t&&t.filter?(n=JSON.parse(t.filter),n.rules={},N(e,{filter:JSON.stringify(n)})):[null,{sheetId:e}]}function D(e,t,n,r,o){t=JSON.parse(t);var i=t.rules[n];return i||(i={}),i[r]=o,t.rules[n]=i,N(e,{filter:JSON.stringify(t)})}function A(e){return N(e,{filter:null})}function F(e,t,n,r,o,a){var s=-1===r,u=-1===n,l=void 0;s?l=g(e,o,"row"):u&&(l=g(e,o,"col"));var c=i(e,t,a),f=$(c,1),d=f[0],p=d;return l&&(p=d.compose(l[0])),[p,{sheetId:e}]}function L(e){return new K.TableOperator({action:"retain",data:{rows:new K.Delta(e)}})}function R(e){return new K.TableOperator({action:"retain",data:{cols:new K.Delta(e)}})}function U(e){return new K.TableOperator({action:"retain",data:{cells:e}})}function H(e){var n=[],r=0,o=void 0;return e=e.map(function(e){return e+1}),t.forEach(e,function(e){o=e-r,o>1&&n.push(new K.Operator({action:"retain",data:o-1})),n.push(new K.Operator({action:"remove",data:1})),r=e}),n}function B(e,t){var n=[];return e>0&&n.push(new K.Operator({action:"retain",data:e})),n.push(new K.Operator({action:"insert",data:t})),n}function W(e,n,r,o){var i=[],a=0,s=void 0,u=void 0;return e=e.sort(function(e,t){return e-t}).map(function(e){return+e+1}),t.forEach(e,function(e){u="multi"===o?n[e-1]:n,s=e-a,s>1&&i.push(new K.Operator({action:"retain",data:s-1})),i.push(new K.Operator({action:"retain",data:1,attributes:u})),a=e}),i}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"row";return W(Object.keys(e),e,t,"multi")}function z(){return new K.TableOperator({action:"retain",data:{}})}function Y(e,t,n,r,o,u,f,d,m,y,v,g,_){var w="row"===t,k=w?p:h,E=k(e,n,r),C=$(E,1),M=C[0],T=new K.TableOperator({action:"retain",data:1,attributes:o}),P=S(e,u),x=$(P,1),N=x[0],j=w?l:c,I=j(e,f,d),D=$(I,1),A=D[0],F=O(e,m,_),L=$(F,1),R=L[0],U=b(e,y),H=$(U,1),B=H[0];M=M.compose(B);var W=void 0,V=i(e,v,_),z=$(V,1),Y=z[0];return W=w?a(e,g,f,d)[0]:s(e,g,f,d)[0],[A.compose(M).compose(R).compose(Y).compose(W).compose(N).compose(T),{sheetId:e}]}function G(e,t,n,r,o,a,s,u,l){var c="row"===t,p=new K.TableOperator({action:"retain",data:1,attributes:n}),h=O(e,r,l),m=$(h,1),y=m[0],v=c?f:d,g=v(e,o),b=$(g,1),_=b[0],w=_.compose(y),k=S(e,a),E=$(k,1),C=E[0],M=O(e,s,l),T=$(M,1),P=T[0],x=i(e,u,l),N=$(x,1),j=N[0];return[w.compose(P).compose(j).compose(C).compose(p),{sheetId:e}]}var $=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K=n(53),J=n(574),Q=n(253),X=n(642),Z=r(X),ee=n(1);e.exports={editCell2Changeset:i,addRowOrCol2Changeset:u,addRow2Changeset:l,addCol2Changeset:c,removeRow2Changeset:f,removeCol2Changeset:d,rowResize2Changeset:p,colResize2Changeset:h,insertRowOrCol2Cs:Y,deleteRowOrCol2Cs:G,autoFit2Changeset:y,autoCreateRowOrCol2Cs:v,rowOrColAttrsToCs:g,link2Cs:C,border2Cs:M,clearFormat2Cs:T,alterMultiMergeCells:O,mergeCells2Cs:P,unmergeCells2Cs:x,overrideCellsAttrs2Cs:b,conditionalFormats2Cs:S,cellAttrs2Changeset:_,genCsByCellAttrs:E,genFilterCsAfterInsertRow:a,genFilterCsAfterInsertCol:s,tableAttrs2Cs:N,newFilter2Cs:j,clearFilter2Cs:I,deleteFilter2Cs:A,updateRangeFilters2Cs:D,dragDropBlock2Cs:F}}).call(t,n(1))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(328),s=r(a),u=function(){function e(t){var n=t.guid,r=t.clientId,i=t.userId;o(this,e),this.cacheStoreInst=new s.default({prefix:"sm-ops",clientId:r,userId:i}),this.userId=i,this.guid=n,this.delayOps=[],this.opsQueue=[]}return i(e,[{key:"add",value:function(e,t){var n=this;this.delayTimeout&&clearTimeout(this.delayTimeout),this.delayOps.push(e),t?this.delayTimeout=setTimeout(function(){return n._addToCache()}):this._addToCache()}},{key:"_addToCache",value:function(){this.opsQueue.push(this.delayOps),this.delayOps=[],this.cacheStoreInst.set(this.guid,{unCalcOps:this.opsQueue})}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.guid;return this.cacheStoreInst.getAll(this.userId,e)}},{key:"getAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.userId,t=arguments[1];return this.cacheStoreInst.getAll(e,t)}},{key:"remove",value:function(){this.opsQueue.shift(),this.cacheStoreInst.set(this.guid,{unCalcOps:this.opsQueue})}},{key:"clear",value:function(e){return this.cacheStoreInst.removeByKey(e)}},{key:"destroy",value:function(){this.cacheStoreInst=null}}]),e}();t.default=u,e.exports=t.default},,function(e,t,n){(function(t,r){function o(e){return/<[a-z][\s\S]*>/i.test(e)}function i(e){return!t.isNil(e)&&t.startsWith(e.toString(),"http")}function a(e){var t,n;return t=c.trim(e),i(t)?'<a href="'+(0!==t.indexOf("http")?"http://"+t:t)+'" target="_blank">'+t+"</a>":p.test(t)?a(s(t)):d.test(t)?(n=t.match(d)[1],e.replace(d,n)):e}function s(e){return e.match(p)[1]}function u(e){return e&&3!==e.nodeType?e.tagName.toLowerCase():""}function l(e){var t,n="string";return o(e)?(t=document.createElement("div"),t.innerHTML=e,r(t).find("img").length>0&&(n="image")):(f(e)||e.toString().search(/^\$?\d+(,\d{3})*(\.\d*)?$/)>=0)&&(n="number"),n}var c=n(635),f=n(254).isNumeric,d=/<a [^>]+>([^<]+)<\/a>/,p=/^<a [^>]+>([^<]+)<\/a>$/;e.exports={getTagName:u,getHtmlTextType:l,isHtml:o,isUrl:i,urlify:a}}).call(t,n(1),n(2))},function(e,t){function n(e){for(var t,n=0,r=0,o=e.length;r<o;r++)t=e.charCodeAt(r),t>=0&&t<=255?n++:n+=2;return n}function r(e,t){var n,r={};for(var o in e)n=t(e[o],o),r[n]=e[o];return r}function o(e){return e.replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;/gi,"&").replace(/&quot;/gi,'"').replace(/&apos;/gi,"'")}function i(e){return e.replace(/^(\s|&nbsp;)+/g,"")}function a(e){return e.replace(/(\s|&nbsp;)+$/g,"")}function s(e){return e=i(e),e=a(e)}e.exports={strLen:n,mapKeys:r,unescapeHTML:o,trimLeft:i,trimRight:a,trim:s}},function(e,t,n){function r(e,t,n){return e.substr(t,n)}function o(e){return x._isNullOrUndefined(e)?"":"boolean"==typeof e?e?"TRUE":"FALSE":"string"==typeof e?e:e.toString()}function i(e,t){if("\\"===e[t])throw new Error(L().Exp_InvalidBackslash);if(t-1>0&&t-1<e.length&&"\\"===e[t-1]){if(t-2<0)return!0;if(t-2>0&&t-2<e.length)return"\\"!==e[t-2]}return!1}function a(e){if(!e)throw new Error(L().Exp_TokenIsNull);return"["+e+"]"}function s(e){if(e===M||e===C||""===e)return e;for(var t="",n=0,r=0;r<e.length;r++){var o=e[r];"["===o?n++:"]"===o?--n<0&&(n=0):0===n&&(t+=o)}return t.toString()}function u(e){return e=l(e,"[",""),l(e,"]","")}function l(e,t,n){return!e||e===V._Empty||f(t,n,!0)?e:(t=t.replace(G,"\\$1"),e.replace(new RegExp(t,"g"),n))}function c(e){for(var t=e.length,n=!1,r="",o=0;o<t;o++){var i=e.charAt(o);"\\"===i?(n=!n)||(r+=i):(n=!1,r+=i)}return r}function f(e,t,n){return n?B(e)===B(t):e===t}function d(e,t){1===arguments.length&&(t=!0);for(var n=!1,r="",o=0;o<e.length;o++){var a=e[o];if('"'===a)n=!n;else if(!n&&!((t||"?"!==a&&"/"!==a)&&"_"!==a&&"*"!==a||i(e,o))){"_"===a&&o++;continue}r+=a}return r}function p(e,t){if(!e||e===V._Empty)return!1;for(var n=d(e),r="",o=!1,i=0,a=n.length;i<a;i++){var s=n[i];'"'===s&&(o=!o),"E"===s||o||(r+=B(s))}for(var u=0;u<t.length;u++)if(r===t[u]||r.indexOf(t[u])>=0)return!0;return!1}function h(e,t,n){this._partLocaleID=e,this._partDBNumberFormat=t,this.cultureName=n}function m(e){this._originalToken=e}function y(e){var t,n=u(e);return n&&n!==V._Empty?(["<",">","="].indexOf(n[0])>-1?(t=K,t.Name="ConditionalFormatPart"):O._startsWith(n,"DBNum",!0)?(t=X,t.Name="DBNumberFormatPart"):f(n[0],"$",!1)?(t=Z,t.Name="LocaleIDFormatPart"):g(n)?(t=Q,t.Name="ABSTimeFormatPart"):n.length>=3&&(t=J,t.Name="ColorFormatPart"),t):t}function v(e){var t,n=!1;return e=e?e.toString():V._Empty,p(e,["general"])?t=ae:te._evaluateFormat(e)?t=te:p(e,["E+","E-","#",".",",","%","0","/"])?(n=!0,t=ie):(n=!0,t=oe),{_isDigitalOrText:n,_type:t}}function g(e){var t=B(e),n=t[0];if("h"!==n&&"m"!==n&&"s"!==n)return!1;for(var r=1;r<t.length;r++)if(n!==t[r])return!1;return!0}function b(e,t,n){var r;r=e?e.cultureInfo():R(n);var o=r.NumberFormat.dbNumber;return o?o[t]:C}function _(e,t,n,r,o){var i=e;if(!I(r)&&t instanceof Date){var a=b(n,r.type,o);i=r._replaceNumberString(i,a,!0),1===r.type&&(i=i.replace(new RegExp(A,"g"),F)),i=i.replace("@"+ne._yearFourDigit,P._localeFormat(t,ne._yearFourDigit)),i=i.replace("@"+ne._yearTwoDigit,P._localeFormat(t,ne._yearTwoDigit)),i=r._replaceNumberString(i,a,!1)}return i}function w(e,t,n,r,o){if(!I(r)){var i=b(n,r.type,o);if(!I(i)){var a,s=r._replaceNumberString(e,i,t),u=R(o);return"ja-JP"===u.name()&&s.length>1&&("一千"===(a=s.substr(0,2))||"一百"===a||"一十"===a)&&(s=s.substr(1)),s}}return e}var k=n(637),E=n(641),C=null,M=void 0,T=Math.abs,S={},O=k._StringHelper,P=k._DateTimeHelper,x=k._Types,N=x._isType,j=k._NumberHelper,I=x._isNullOrUndefined,D=k.CultureManager,A="一十",F="十",L=function(){return k._getResource(S.SR)()},R=function(e){return D._getCultureInfo(e)},U=function(e){return R(e).DateTimeFormat},H=function(e){return R(e).NumberFormat},B=function(e){return e&&e.toLowerCase()},W=function(){throw new Error(L().Exp_FormatIllegal)},V={_Empty:"",_format:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===arguments.length)return C;for(var n=e[0],r=1;r<arguments.length;r++){var o=new RegExp("\\{"+(r-1)+"\\}","gm");n=n.replace(o,arguments[r])}return n},_isNullOrEmpty:function(e){return!e||e===V._Empty}},z={_isDigit:function(e){var t=e.charCodeAt(0);return t>=48&&t<=57},_isWhiteSpace:function(e){var t=e.charCodeAt(0);return t>=9&&t<=13||32===t||133===t||160===t}},Y={_positive:0,_negative:1,_zero:2,_text:3},G=new RegExp("([.+?*$^\\[\\](){}|/])","g"),$=[["M/d","MMM/d","MMMM/d","d/M","d/MMM","d/MMMM","M-d","MMM-d","MMMM-d","d-M","d-MMM","d-MMMM"],["M/y","MMM/y","M/yyyy","MMM/yyyy","M-y","MMM-y","M-yyyy","MMM-yyyy"],["M/d/y","MMM/d/y","MMMM/d/y","M/d/yyyy","MMM/d/yyyy","MMMM/d/yyyy","d/M/y","d/MMM/y","d/MMMM/y","d/M/yyyy","d/MMM/yyyy","d/MMMM/yyyy","yyyy/M/d","M-d-y","MMM-d-y","MMMM-d-y","M-d-yyyy","MMM-d-yyyy","MMMM-d-yyyy","d-M-y","d-MMM-y","d-MMMM-y","d-M-yyyy","d-MMM-yyyy","d-MMMM-yyyy","yyyy-M-d"],["H:m","h:m tt"],["H:m:s","h:m:s tt","H:m:s","h:mm:ss tt"],["H:m:s.FFF","h:m:s.FFF tt"],["M/d H:m","MMM/d H:m","MMMM/d H:m","d/M H:m","d/MMM H:m","d/MMMM H:m","M/y H:m","MMM/y H:m","M/yyyy H:m","MMM/yyyy H:m","M/d/y H:m","MMM/d/y H:m","MMMM/d/y H:m","M/d/yyyy H:m","MMM/d/yyyy H:m","MMMM/d/yyyy H:m","M-d H:m","MMM-d H:m","MMMM-d H:m","d-M H:m","d-MMM H:m","d-MMMM H:m","M-y H:m","MMM-y H:m","M-yyyy H:m","MMM-yyyy H:m","M-d-y H:m","MMM-d-y H:m","MMMM-d-y H:m","M-d-yyyy H:m","MMM-d-yyyy H:m","MMMM-d-yyyy H:m","M/d h:m tt","MMM/d h:m tt","MMMM/d h:m tt","d/M h:m tt","d/MMM h:m tt","d/MMMM h:m tt","M/y h:m tt","MMM/y h:m tt","M/yyyy h:m tt","MMM/yyyy h:m tt","M/d/y h:m tt","MMM/d/y h:m tt","MMMM/d/y h:m tt","M/d/yyyy h:m tt","MMM/d/yyyy h:m tt","MMMM/d/yyyy h:m tt","M-d h:m tt","MMM-d h:m tt","MMMM-d h:m tt","d-M h:m tt","d-MMM h:m tt","d-MMMM h:m tt","M-y h:m tt","MMM-y h:m tt","M-yyyy h:m tt","MMM-yyyy h:m tt","M-d-y h:m tt","MMM-d-y h:m tt","MMMM-d-y h:m tt","M-d-yyyy h:m tt","MMM-d-yyyy h:m tt","MMMM-d-yyyy h:m tt"],["M/d H:m:s","MMM/d H:m:s","MMMM/d H:m:s","d/M H:m:s","d/MMM H:m:s","d/MMMM H:m:s","M/y H:m:s","MMM/y H:m:s","M/yyyy H:m:s","MMM/yyyy H:m:s","M/d/y H:m:s","MMM/d/y H:m:s","MMMM/d/y H:m:s","M/d/yyyy H:m:s","MMM/d/yyyy H:m:s","MMMM/d/yyyy H:m:s","d/M/y H:m:s","d/MMM/y H:m:s","d/MMMM/y H:m:s","d/M/yyyy H:m:s","d/MMM/yyyy H:m:s","d/MMMM/yyyy H:m:s","yyyy/M/d H:m:s","M-d H:m:s","MMM-d H:m:s","MMMM-d H:m:s","d-M H:m:s","d-MMM H:m:s","d-MMMM H:m:s","M-y H:m:s","MMM-y H:m:s","M-yyyy H:m:s","MMM-yyyy H:m:s","M-d-y H:m:s","MMM-d-y H:m:s","MMMM-d-y H:m:s","M-d-yyyy H:m:s","MMM-d-yyyy H:m:s","MMMM-d-yyyy H:m:s","d-M-y H:m:s","d-MMM-y H:m:s","d-MMMM-y H:m:s","d-M-yyyy H:m:s","d-MMM-yyyy H:m:s","d-MMMM-yyyy H:m:s","yyyy-M-d H:m:s","M/d h:m:s tt","MMM/d h:m:s tt","MMMM/d h:m:s tt","d/M h:m:s tt","d/MMM h:m:s tt","d/MMMM h:m:s tt","M/y h:m:s tt","MMM/y h:m:s tt","M/yyyy h:m:s tt","MMM/yyyy h:m:s tt","M/d/y h:m:s tt","MMM/d/y h:m:s tt","MMMM/d/y h:m:s tt","M/d/yyyy h:m:s tt","MMM/d/yyyy h:m:s tt","MMMM/d/yyyy h:m:s tt","d/M/y h:m:s tt","d/MMM/y h:m:s tt","d/MMMM/y h:m:s tt","d/M/yyyy h:m:s tt","d/MMM/yyyy h:m:s tt","d/MMMM/yyyy h:m:s tt","yyyy/M/d h:m:s tt","M/d/yyyy h:mm:ss tt","M-d h:m:s tt","MMM-d h:m:s tt","MMMM-d h:m:s tt","d-M h:m:s tt","d-MMM h:m:s tt","d-MMMM h:m:s tt","M-y h:m:s tt","MMM-y h:m:s tt","M-yyyy h:m:s tt","MMM-yyyy h:m:s tt","M-d-y h:m:s tt","MMM-d-y h:m:s tt","MMMM-d-y h:m:s tt","M-d-yyyy h:m:s tt","MMM-d-yyyy h:m:s tt","MMMM-d-yyyy h:m:s tt","d-M-y h:m:s tt","d-MMM-y h:m:s tt","d-MMMM-y h:m:s tt","d-M-yyyy h:m:s tt","d-MMM-yyyy h:m:s tt","d-MMMM-yyyy h:m:s tt","yyyy-M-d h:m:s tt"],["M/d H:m:s.FFF","MMM/d H:m:s.FFF","MMMM/d H:m:s.FFF","d/M H:m:s.FFF","d/MMM H:m:s.FFF","d/MMMM H:m:s.FFF","M/y H:m:s.FFF","MMM/y H:m:s.FFF","M/yyyy H:m:s.FFF","MMM/yyyy H:m:s.FFF","d/M/y H:m","d/MMM/y H:m","d/MMMM/y H:m","d/M/yyyy H:m","d/mmm/yyyy H:m","d/MMMM/yyyy H:m","yyyy/M/d H:m","M/d/y H:m:s.FFF","MMM/d/y H:m:s.FFF","MMMM/d/y H:m:s.FFF","M/d/yyyy H:m:s","MMM/d/yyyy H:m:s.FFF","MMMM/d/yyyy H:m:s.FFF","d/M/y H:m:s.FFF","d/MMM/y H:m:s.FFF","d/MMMM/y H:m:s.FFF","d/M/yyyy H:m:s.FFF","d/MMM/yyyy H:m:s.FFF","d/MMMM/yyyy H:m:s.FFF","yyyy/M/d H:m:s.FFF","M-d H:m:s.FFF","MMM-d H:m:s.FFF","MMMM-d H:m:s.FFF","d-M H:m:s.FFF","d-MMM H:m:s.FFF","d-MMMM H:m:s.FFF","M-y H:m:s.FFF","MMM-y H:m:s.FFF","M-yyyy H:m:s.FFF","MMM-Yyyy H:m:s.FFF","d-M-y H:m","d-MMM-y H:m","d-MMMM-y H:m","d-M-yyyy H:m","d-MMM-yyyy H:m","d-MMMM-yyyy H:m","yyyy-M-d H:m","M-d-y H:m:s.FFF","MMM-d-y H:m:s.FFF","MMMM-d-y H:m:s.FFF","M-d-yyyy H:m:s","MMM-d-yyyy H:m:s.FFF","MMMM-d-yyyy H:m:s.FFF","D-M-y H:m:s.FFF","d-MMM-y H:m:s.FFF","d-MMMM-y H:m:s.FFF","D-M-yyyy H:m:s.FFF","d-MMM-yyyy H:m:s.FFF","d-MMMM-yyyy H:m:s.FFF","yyyy-M-d H:m:s.FFF","M/d h:m:s.FFF tt","MMM/d h:m:s.FFF tt","MMMM/d h:m:s.FFF tt","d/M h:m:s.FFF tt","d/MMM h:m:s.FFF tt","d/MMMM h:m:s.FFF tt","M/y h:m:s.FFF tt","MMM/y h:m:s.FFF tt","M/yyyy h:m:s.FFF tt","MMM/yyyy h:m:s.FFF tt","d/M/y h:m tt","d/MMM/y h:m tt","d/MMMM/y h:m tt","d/M/yyyy h:m tt","d/mmm/yyyy h:m tt","d/MMMM/yyyy h:m tt","yyyy/M/d h:m tt","M/d/y h:m:s.FFF tt","MMM/d/y h:m:s.FFF tt","MMMM/d/y h:m:s.FFF tt","M/d/yyyy h:m:s tt","MMM/d/yyyy h:m:s.FFF tt","MMMM/d/yyyy h:m:s.FFF tt","d/M/y h:m:s.FFF tt","d/MMM/y h:m:s.FFF tt","d/MMMM/y h:m:s.FFF tt","d/M/yyyy h:m:s.FFF tt","d/MMM/yyyy h:m:s.FFF tt","d/MMMM/yyyy h:m:s.FFF tt","yyyy/M/d h:m:s.FFF tt","M-d h:m:s.FFF tt","MMM-d h:m:s.FFF tt","MMMM-d h:m:s.FFF tt","d-M h:m:s.FFF tt","d-MMM h:m:s.FFF tt","d-MMMM h:m:s.FFF tt","M-y h:m:s.FFF tt","MMM-y h:m:s.FFF tt","M-yyyy h:m:s.FFF tt","MMM-Yyyy h:m:s.FFF tt","d-M-y h:m tt","d-MMM-y h:m tt","d-MMMM-y h:m tt","d-M-yyyy h:m tt","d-MMM-yyyy h:m tt","d-MMMM-yyyy h:m tt","yyyy-M-d h:m tt","M-d-y h:m:s.FFF tt","MMM-d-y h:m:s.FFF tt","MMMM-d-y h:m:s.FFF tt","M-d-yyyy H:m:s tt","MMM-d-yyyy H:m:s.FFF tt","MMMM-d-yyyy h:m:s.FFF tt","d-M-y h:m:s.FFF tt","d-MMM-y h:m:s.FFF tt","d-MMMM-y h:m:s.FFF tt","d-M-yyyy h:m:s.FFF tt","d-MMM-yyyy h:m:s.FFF tt","d-MMMM-yyyy h:m:s.FFF tt","yyyy-M-d h:m:s.FFF tt"]],q=function(){return{pattern:$,formatter:["d-mmm","mmm-yy",U().shortDatePattern,"h:mm","HH:mm:ss","h:mm:ss.0",U().shortDatePattern+" h:mm",U().shortDatePattern+" HH:mm:ss",U().shortDatePattern+" h:mm:ss.0"]}},K=function(){function e(e,n){m.call(this,n);for(var r,o,i,a=this,s=["<=","<>",">=",">","<","="],u=0,l=s.length;u<l;u++)if(r=s[u],O._startsWith(e,r,!0)){o=O._remove(e,0,r.length);var c=parseFloat(o);isNaN(c)||(i=c);break}if(i===C&&i===M)throw new Error(L().Exp_TokenIllegal);a.value=i,a._compareOperator=r,a.isMeetCondition=t(a)}function t(e){var t="var self = this;",n=e._compareOperator;return n="<>"===n?"!=":n,n="="===n?"===":n,t+="return value "+n+" self.value;",new Function(["value"],t)}return e.Name="ConditionalFormatPart",e.prototype={toString:function(){return a(this._compareOperator+this.value.toString())}},e}(),J=function(){function e(e,t){m.call(this,t),this.foreColor=e}return e.Name="ColorFormatPart",e.prototype.toString=function(){return a(this.foreColor)},e}(),Q=function(e,t){m.call(this,t);var n,r=this,o=B(e)[0];if("h"===o)n=3600;else if("m"===o)n=60;else{if("s"!==o)throw new Error(L().Exp_TokenIllegal);n=1}r._getTimeSpan=function(e){return Math.floor(e/1e3/n)}};Q.Name="ABSTimeFormatPart";var X=function(){function e(e,t){m.call(this,t);var n=this;if(n.token=e,n.type=parseInt(O._remove(e,0,"dbnum".length),10),n.type<0||n.type>3)throw new Error(L().Exp_TokenIllegal)}function t(e,t,r){var o=e.split(".");if(o){if(1===o.length)return n(o[0],t.numbers,r?t.letters:C);if(2===o.length){return n(o[0],t.numbers,r?t.letters:C)+"."+n(o[1],t.numbers)}}throw new Error(L().Exp_ValueIllegal)}function n(e,t,o){var i=e,a=0,s=C,u=0;if(2===arguments.length){var l="";for(a=0;a<i.length;a++)s=r(i,a,1),u=parseInt(s,10),l+=t[u];return l}if(3===arguments.length){if(!o)return n(e,t);var c=0,f="",d=i.length,p=!1,h=[];for(a=0;a<d;a++){var m=o.length-1-a;m>-1?h.push(o[m].toString()):h.push(V._Empty)}for(var y=[],v=h.length-1;v>=0;v--)y[h.length-v-1]=h[v];h=y;var g=!1;for(v=0;v<d;v++){s=r(i,v,1),u=parseInt(s,10);var b=V._Empty,_=V._Empty;d-v-16>0?(b=t[u],_="",g=!0):v!==d-1&&v!==d-5&&v!==d-9&&v!==d-13?"0"===s?(b="",_="",c+=1):"0"!==s&&0!==c?(b=t[0]+t[u],_=h[v],c=0):(b=t[u],_=h[v],c=0):"0"!==s&&0!==c?(b=t[0]+t[u],_=h[v],c=0):"0"!==s&&0===c||g?(b=t[u],_=h[v],c=0,g=!1):"0"===s&&c>=3?(b="",_="",c+=1):d>=11?(b="",c+=1):(b="",_=h[v],c+=1);b+_===V._Empty||(p=!1),v!==d-13||p||(_=h[v],p=!0),v!==d-9||p||(_=h[v],p=!0),v===d-1&&(_=h[v],p=!0),f=f+b+_}var w=parseInt(e,10);return isNaN(w)||0!==w?f:t[0]}}return e.Name="DBNumberFormatPart",e.prototype={_replaceNumberString:function(e,n,o){if(!e||e===V._Empty)return e;for(var i=e,a=e,s=-1,u=-1,l=!1,c=C,d=C,p=C,h=e.length-1;h>=0;h--){var m=a[h];!isNaN(m)||f(m,".",!1)&&!l?(f(m,".",!1)&&(l=!0),-1===s&&(s=h),u=h):u>-1&&s>-1&&(c=r(a,u,s-u+1),d=parseFloat(c),isNaN(d)||(p=t(c,n,o),i=O._remove(i,u,s-u+1),i=O._insert(i,u,p)),s=-1,u=-1,l=!1)}return u>-1&&s>-1&&(c=r(a,u,s-u+1),d=parseFloat(c),isNaN(d)||(p=t(c,n,o),i=O._remove(i,u,s-u+1),i=O._insert(i,u,p)),s=-1,u=-1,l=!1),i},toString:function(){if(this.type>-1)return a("DBNum"+this.type);throw new Error}},e}(),Z=function(){function e(e,t){m.call(this,t);var n=this;n._content=e;var o=n._content,i=f(o[0],"$",!1),a=o.indexOf("-");if(!(i&&a>-1))throw new Error(L().Exp_TokenIllegal);n._currencySymbol=r(o,1,a-1),o=O._remove(o,0,a+1),o.length>0&&(n._locateID=parseInt(o,16))}return e.Name="LocaleIDFormatPart",e.prototype={cultureInfo:function(){var e=this;return e._cultureInfo||(e._cultureInfo=R(e._locateID),e._currencySymbol&&e._currencySymbol!==V._Empty&&(e._cultureInfo.NumberFormat.isReadOnly||(e._cultureInfo.NumberFormat.currencySymbol=e._currencySymbol))),e._cultureInfo},currencySymbol:function(){return this._currencySymbol?O._replace(this._currencySymbol,"\\.","'.'"):V._Empty},allowScience:function(){if(this._cultureInfo)return!(0===this._cultureInfo.name().indexOf("ja")||0===this._cultureInfo.name().indexOf("zh"))},toString:function(){return this._content?a(this._content):V._Empty}},e}(),ee=function(){function e(e,t){this.formatCached=e,this.cultureName=t,this.typeName=""}return e.prototype={format:function(e,t){return C},parse:function(e){return C},formatString:function(){return this.formatCached},toJSON:function(){var e={};for(var t in this)this.hasOwnProperty(t)&&(e[t]=this[t]);return e},fromJSON:function(e){if(e)for(var t in e)e[t]!==M&&(this[t]=e[t])}},e}(),te=function(){function e(e,t,n,r,o){h.call(this,t,n,r);var i=this;i._formatString=i._fixFormat(d(e)),i._absTimeParts=o,i._formatType=2,i._init()}function t(e){return O._indexOf(e,ne._hoursSingleDigit[0],!0)>-1||O._indexOf(e,ne._secondSingleDigit[0],!0)>-1}function n(e){return O._indexOf(e,ne._yearTwoDigit[0],!0)>-1||O._indexOf(e,ne._daySingleDigit[0],!0)>-1}return e.prototype={_init:function(){var t=this,n={_value:t._formatString};if(e._evaluateFormat(n._value)){var r=t._processAMPM(n);if(t.hasJD=t._replace(n._value,ne._monthJD,'"'+ne._placeholderMonthJD+'"',!0,!1,n,!1),t._replace(n._value,ne._monthUnabbreviated,"MMMM",!0,!1,n,!1),t._replace(n._value,ne._monthAbbreviation,"MMM",!0,!1,n,!1),t._replace(n._value,ne._monthTwoDigit,"MM",!0,!1,n,!1),t._replace(n._value,ne._monthSingleDigit,"M",!0,!1,n,!1),t._replace(n._value,ne._dayWeekDayAbbreviation,"ddd",!0,!0,n,!0),t._replace(n._value,ne._dayWeekDayUnabbreviated,"dddd",!0,!0,n,!0),r||(t._replace(n._value,ne._hoursSingleDigit,"H",!0,!0,n,!1),t._replace(n._value,ne._hoursTwoDigit,"HH",!0,!0,n,!1)),t._partDBNumberFormat&&t._partLocaleID&&(t._hasYearDelay=t._hasYearDelay||t._replace(n._value,ne._yearFourDigit,'"@'+ne._yearFourDigit+'"',!0,!1,n,!0),t._hasYearDelay=t._hasYearDelay||t._replace(n._value,ne._yearTwoDigit,'"@'+ne._yearTwoDigit+'"',!0,!1,n,!0)),t._absTimeParts)for(var o=0;o<t._absTimeParts.length;o++){var i=t._absTimeParts[o];t._replace(n._value,i._originalToken,"@"+i._originalToken,!0,!0,n,!0)}t._validDateTimeFormatString=n._value}else W()},formatString:function(){return this._formatString},format:function(e){var t=this,n=V._Empty,i=C;try{if(i=P._DT(e),i?e=i:n=e.toString(),i){if(n=P._customCultureFormat(i,t._validDateTimeFormatString,t._partLocaleID&&t._partLocaleID.cultureInfo()||R(t.cultureName)),t.hasJD){var a=R(t.cultureName).DateTimeFormat.monthNames[i.getMonth()];n=O._replace(n,ne._placeholderMonthJD,r(a,0,1))}if(t._absTimeParts)for(var s=24*(P._toOADate(i)-P._toOADate(ne._defaultAbsoluteTime))*60*60*1e3,u=0;u<t._absTimeParts.length;u++){var l=t._absTimeParts[u],c=l._getTimeSpan(s);if(c){var f=l._originalToken.replace("[","\\[").replace("]","\\]");n=O._replace(n,"@"+f,c)}}}}catch(t){n=o(e)}return _(n,e,t._partLocaleID,t._partDBNumberFormat,t.cultureName)},parse:function(e){if(!e||e===V._Empty)return C;var t=this,n=e,r=B(n);if("true"===r)return!0;if("false"===r)return!1;if(t._validDateTimeFormatString){var o=P._parseExact(n,t._validDateTimeFormatString,R(t.cultureName));if(o)return o}try{var i=P._DT(n);return i&&!isNaN(i)?i:(i=new Date(n),isNaN(i.valueOf())?n:i)}catch(e){return n}},_fixFormat:function(e){for(var t=e,n="",r=!1,o=0;o<t.length;o++){var i=t[o];if('"'===i)r=!r;else if(!r)if("Y"===i||"D"===i||"S"===i||"E"===i||"G"===i)i=B(i);else if("M"===i){var a=t[o-1];f("A",a,!0)||f("P",a,!0)||(i=B(i))}n+=i}return n},_processAMPM:function(e){for(var t=[ne._aMPMTwoDigit,U(this.cultureName).amDesignator+"/"+U(this.cultureName).pmDesignator,ne._aMPMSingleDigit],n=["tt","tt","t"],r=0;r<3;r++)if(O._contains(e._value,t[r],1))return e._value=O._replace(e._value,t[r],n[r],!0),!0;return!1},_replace:function(e,r,o,i,a,s,u){if(i||a){var l=[],c=!0;!n(e)&&t(e)&&(c=!1);for(var d=!1,p=0;p<e.length;p++){var h=e[p];if(t(h)?c=!1:n(h)&&(c=!0),i&&f(h,r[0],u)&&c||a&&f(h,r[0],u)&&!c){for(var m=!0,y=0;y<r.length;y++)if(y+p>=e.length||!f(r[y],e[y+p],u)){m=!1;break}var v=p+r.length-1;if(m&&v+1<e.length){var g=e[v],b=-1;for(b=v+1;b<e.length&&f(g,e[b],u);b++);b>v+1&&(p=b,m=!1)}m&&!d&&l.splice(0,0,p)}'"'===h&&(d=!d)}if(s._value=e,l.length>0){for(p=0;p<l.length;p++){var _=l[p];s._value=O._remove(s._value,_,r.length),s._value=O._insert(s._value,_,o)}return!0}return!1}return!1}},e._evaluateFormat=function(e){return p(e,re)},e}(),ne={_yearTwoDigit:"yy",_yearSingleDigit:"y",_yearFourDigit:"yyyy",_monthSingleDigit:"m",_monthTwoDigit:"mm",_monthAbbreviation:"mmm",_monthUnabbreviated:"mmmm",_monthJD:"mmmmm",_daySingleDigit:"d",_dayTwoDigit:"dd",_dayWeekDayAbbreviation:"aaa",_dayWeekDayUnabbreviated:"aaaa",_hoursSingleDigit:"h",_hoursTwoDigit:"hh",_minuteSingleDigit:"m",_minuteTwoDigit:"mm",_secondSingleDigit:"s",_secondTwoDigit:"ss",_eraYear:"e",_aMPMTwoDigit:"AM/PM",_aMPMSingleDigit:"A/P",_placeholderMonthJD:"@mmmmm",_defaultAbsoluteTime:new Date(1899,11,30,0,0,0,0)},re=[ne._yearSingleDigit,ne._yearTwoDigit,ne._yearFourDigit,ne._monthSingleDigit,ne._monthTwoDigit,ne._monthAbbreviation,ne._monthUnabbreviated,ne._monthJD,ne._daySingleDigit,ne._dayTwoDigit,ne._dayWeekDayAbbreviation,ne._dayWeekDayUnabbreviated,ne._hoursSingleDigit,ne._hoursTwoDigit,ne._minuteSingleDigit,ne._minuteTwoDigit,ne._secondSingleDigit,ne._secondTwoDigit,"ggg","gg","g","ee","e"],oe=function(){function e(e,t,n,r){var o=this;h.call(o,t,n,r);var i=d(e,!1);t&&(i=l(i,o._partLocaleID._originalToken,o._partLocaleID.currencySymbol())),i=s(i),i=c(i),o._formatString=i,o._formatType=3}return e.prototype={format:function(e){try{var t;t=e instanceof Date?P._toOADate(e).toString():o(e);var n=O._replace(this._formatString,'"',"");return n!==C&&n!==M&&(t=O._replace(n,"@",t)),t}catch(e){return""}},parse:function(e){return e||""},formatString:function(){return this._formatString}},e}(),ie=function(){function e(e,t,n,o){function i(e,t){var n=[],r='"';if(e===C||""===e)return n;var o,i,a=!1,s=[],u=!1;for(o=0;o<e.length;o++)i=e[o],i!==r||a||(u=!u),a||u||i!==t?s.push(i):(n.push(s.join("")),s=[]),a="\\"===i&&!a;return n.push(s.join("")),n}h.call(this,t,n,o);var a=this;a._isGeneralNumber=!1,a._formatType=1,a._fullFormatString=s(e);var u=d(e);if(t&&(u=l(u,a._partLocaleID._originalToken,a._partLocaleID.currencySymbol())),u=s(u),u.indexOf("/")>-1){var c=i(u,"/");if(c&&2===c.length){a._fractionDenominatorFormat=c[1];var f=c[0];if(f){var p=f.lastIndexOf(" ");p>-1?(a._fractionIntegerFormat=r(f,0,p),a._fractionNumeratorFormat=r(f,p+1,f.length-p-1)):a._fractionNumeratorFormat=f}}}a._numberFormatString=u}function t(e,t){if(0===e)return T(t);if(0===t)return T(e);for(var n=Math.max(e,t),r=Math.min(e,t),o=n%r;0!==o;)n=r,r=o,o=n%r;return T(r)}function n(e,t,n,r,o){var i=0,a=0,s=0,u=0,l=Math.ceil;e>0?(u=e-l(e)+1,1===u?(u=0,i=e):i=l(e)-1):e<0&&(i=l(e),u=l(e)-e);var c=Math.pow(10,t-1),f=Math.pow(10,t)-1;c<2&&(c=2),f<2&&(f=2);for(var d=!1,p=0,h=c;h<=f;h++){var m=h*u,y=Math.round(m),v=y/h,g=T(v-u);if((!d||g<T(p-u))&&(d=!0,p=v,a=y,s=h,g<1e-5))break}return n.value=i,r.value=a,o.value=s,d}return e.prototype={formatString:function(){return this._fullFormatString},format:function(e){if(N(e,"boolean"))return e.toString().toUpperCase();var r=this,o=x._toDouble(e);if(isNaN(o)||!isFinite(o)||isNaN(e))return"string"==typeof e?e:C;var i,a,s,u,l,c=R(r.cultureName),f=C;if(r._fractionNumeratorFormat&&r._fractionDenominatorFormat){var d={value:0},p={value:0},h={value:0};if(n(o,r._fractionDenominatorFormat.length,d,p,h)){var m=t(p.value,h.value);if(m>1&&(p.value/=m,h.value/=m),r._fractionIntegerFormat){f="",1===h.value&&(d.value+=p.value,p.value=0,h.value=0),0!==d.value&&(f+=j._customCultureFormat(d.value,r._encodeNumberFormat(r._fractionIntegerFormat),c),f+=" "),0===d.value&&o<0&&(f+=c.NumberFormat.negativeSign),0===o&&(f+="0"),a=r._fractionDenominatorFormat,s=parseFloat(a),isNaN(s)||s>0&&(p.value*=s/h.value,a="",h.value=s,u=Math.ceil(p.value),l=u-p.value,p.value=l<=.5&&l>=0?parseFloat(u.toString()):parseFloat((u-1).toString()));var y=r._fractionNumeratorFormat,v=parseFloat(y);if(!isNaN(v)&&0===v){var g=y.length,b=p.value.toString(),_=b.length;g>_?y=y.substr(0,g-(g-_)):g<_&&(b=b.substr(0,_-(_-g)),p.value=parseInt(b,10))}return 0!==p.value&&(f+=j._customCultureFormat(p.value,r._encodeNumberFormat(y),c).replace(/^0*/,""),f+="/",f+=j._customCultureFormat(h.value,r._encodeNumberFormat(a),c).replace(/^0*/,"")),""===f?"0":f}f="";var k=d.value*h.value+p.value;return a=r._fractionDenominatorFormat,s=parseFloat(a),s>0?(k*=s/h.value,h.value=s,u=Math.ceil(k),l=u-k,k=l<=.5&&l>=0?parseFloat(u.toString()):parseFloat((u-1).toString()),f+=k+"/"+h.value):(f+=j._customCultureFormat(k,r._encodeNumberFormat(r._fractionNumeratorFormat),c).replace(/^0*/,""),f+="/",f+=j._customCultureFormat(h.value,r._encodeNumberFormat(r._fractionDenominatorFormat),c).replace(/^0*/,"")),0===k?"0":f}return o.toString()}return i=j._customCultureFormat(o,r._encodeNumberFormat(r._numberFormatString),c),i=w(i,r._isGeneralNumber,r._partLocaleID,r._partDBNumberFormat,r.cultureName)},parse:function(e){var t=this;if(!e||e===V._Empty)return C;var n=B(e);if("true"===n)return!0;if("false"===n)return!1;e=t._trimSpecialSymbol(e),e=t._trimCurrencySymbol(e);var r=t._trimPercentSign(e),o=r._isPer,i=r._str;if(t._isValidaNumberString(i)){i=O._replaceAllNoReg(i,H(t.cultureName).numberGroupSeparator,"");var a=j._parseFloat(i,t.cultureName);if(!isNaN(a)&&isFinite(a))return o&&(a/=100),a}return C},_isValidaNumberString:function(e){for(var t="",n=0,r=0,o=0,i=!0,a=H(this.cultureName),s=e.length-1;s>-1;s--){if(e[s]===a.numberDecimalSeparator)n++,o>0&&(i=!1),t="";else if("e"===B(e[s]))r++,t="";else if(e[s]===a.numberGroupSeparator)i=3===t.length,o++,t="";else if("-"===e[s]||"+"===e[s]){if(s>0&&"e"!==B(e[s-1]))return!1}else{if(!z._isDigit(e[s]))return!1;t+=e[s]}if(n>1||r>1||!i||1===r&&s===e.length-1)return!1}return!0},_encodeNumberFormat:function(e){if(e){for(var t=e.split(""),n="",r=0;r<t.length-1;)"\\"===t[r]?(n+=t[r+1],r+=2):(n+=t[r],r++);r===t.length-1&&"\\"!==t[r]&&(n+=t[r]),e=l(n,"?","0")}return e},_trimSpecialSymbol:function(e){for(var t=e,n=[],r=0;r<t.length;r++)z._isDigit(t[r])&&n.push(r);for(var o=H(this.cultureName),i=[o.currencyDecimalSeparator,o.currencyGroupSeparator,o.currencySymbol,o.nanSymbol,o.negativeInfinitySymbol,o.negativeSign,o.numberDecimalSeparator,o.numberGroupSeparator,o.percentDecimalSeparator,o.percentGroupSeparator,o.percentSymbol,o.perMilleSymbol,o.positiveInfinitySymbol,o.positiveSign],a=t.length-1;a>-1;a--){var s=t[a];if(!z._isWhiteSpace(s)||i.indexOf(s.toString())>-1){if("-"===s||"+"===s){var u=a>0?t[a-1].toString():C,l=["e","E","(",H(this.cultureName).currencySymbol];if(l.indexOf(u)<0)break}}else(a<n[0]||n[n.length-1]<a)&&(t=O._remove(t,a,1))}return t},_trimCurrencySymbol:function(e){var t=H(this.cultureName).currencySymbol,n=O._startsWith(e,t)?O._remove(e,0,t.length):e;return n.indexOf(t)<0?n:e},_trimPercentSign:function(e){var t=H(this.cultureName).percentSymbol,n=!0,r=e;return O._startsWith(e,t)?r=O._remove(e,0,t.length):O._endsWith(e,t)?r=O._remove(e,e.length-t.length,t.length):n=!1,O._contains(r,t)&&(n=!1),{_str:r,_isPer:n}}},e}(),ae=function(){function e(e,t,n,r){h.call(this,t,n,r),arguments.length>0?((e.indexOf("0")>=0||e.indexOf("#")>=0||e.indexOf(".")>=0||e.indexOf("@")>=0)&&W(),this._fullFormatString=e):this._fullFormatString="General",this._formatType=0}return e.prototype={_getDigitalFormat:function(){var e=this;if(!e._digitalFormat){var t=e._fullFormatString;t=l(t,"General","##################0.################"),e._digitalFormat=new ie(t,e._partLocaleID,e._partDBNumberFormat,e.cultureName),e._digitalFormat._isGeneralNumber=!0}return e._digitalFormat},_getExponentialDigitalFormat:function(){var e=this;return e._exponentialDigitalFormat||(e._exponentialDigitalFormat=new ie("0.#####E+00",e._partLocaleID,e._partDBNumberFormat,e.cultureName),e._exponentialDigitalFormat._isGeneralNumber=!0),e._exponentialDigitalFormat},formatString:function(){return O._replace(this._fullFormatString,"@NumberFormat","General")},format:function(e){var t=this;if(/^0+\d*$/.test(e))return e;if(E.isBigNumber(e)&&!t._exponentialDigitalFormat)return e;if(x._isNumber(e,t.cultureName)){var n=!t._partLocaleID||t._partLocaleID.allowScience(),r=x._toDouble(e);if(r!==M&&r!==C)return T(r)>999999999999999&&n||T(r)<1e-11&&0!==r?t._getExponentialDigitalFormat().format(e):t._getDigitalFormat().format(e)}else{if(N(e,"string")){var o=O._replace(t.formatString(),'"',"");return o=c(o),o?O._replace(o,"General",e):e}if(N(e,"boolean"))return e.toString().toUpperCase()}return""},parse:function(e){if(V._isNullOrEmpty(e))return C;if("number"==typeof e)return e;var t=!1,n=O._indexOf(e,"-");if(n>0&&(f(e.charAt(n-1),"E",!0)||(t=!0)),O._contains(e,"/")||t||O._contains(e,":")||O._contains(e,"-")){var r=P._parseLocale(e);if(r)return r}var o,i="-"===e.charAt(0),a=i?O._remove(e,0,1):e,s="("===a.charAt(0)&&")"===e.charAt(e.length-1);return o=this._getDigitalFormat().parse(a),o!==C&&o!==M?(s||i)&&N(o,"number")?-1*T(o):o:e}},e}(),se=function(){function e(e,t){var n=this;0===arguments.length?(n.formatCached="General",n._numberFormat=new ae):n._init(e,t)}function t(e){if(!e||e===V._Empty)throw new Error(L().Exp_TokenIllegal)}function n(e){t(e);var n=u(e);return t(n),n}var r=["colorFormatPart","conditionalFormatPart","dbNumberFormatPart","localeIDFormatPart"];return e.prototype={_init:function(e,t){e!==C&&e!==M||W();var r=this;r.formatCached=e;for(var o="",i="",a=!1,s=[],u=0;u<e.length;u++){var l=e[u];if("["===l)a&&W(),i&&(o||(o=""),o+=i,i=""),i=l.toString(),a=!0;else if("]"===l){if(a||W(),i){i+=l;var c=i.toString(),f=y(i.toString());f?"ABSTimeFormatPart"===f.Name?(s.push(new f(n(c),c)),o+=i):r.addPart(f,c):W(),i=""}else W();a=!1}else i+=l}i&&(a?W():o+=i),r.localeIDFormatPart&&(t=r.localeIDFormatPart.cultureInfo().name());var d=v(o),p=d._type,h=d._isDigitalOrText?e:o;p?r._numberFormat=new p(h,r.localeIDFormatPart,r.dbNumberFormatPart,t,s.length>0?s:C):W()},formatString:function(){for(var e=this,t="",n=0,o=r.length;n<o;n++){var i=r[n];e[i]&&(t+=e[i].toString())}return t+=e._numberFormat.formatString()},addPart:function(e,t){for(var o=this,i=n(t),a=0,s=r.length;a<s;a++){var u=r[a];if(f(u,e.Name,!0)){if(o[u])throw new Error(L().Exp_DuplicatedDescriptor);o[u]=new e(i,t)}}},format:function(e){return this._numberFormat.format(e)},parse:function(e){return this._numberFormat.parse(e)}},e}(),ue=function(e){function t(e,t){var n=this;n._isSingleFormatterInfo=!0,n.PropertyChanged=[],V._isNullOrEmpty(e)&&(e="General"),n.formatCached=e,n.cultureName=t,n.init()}function n(e){var n=t[e];return n||(n=new t(e),t[e]=n),n}return x._inherit(t,e),t.prototype={toJSON:function(){var e=this,t={formatCached:e.formatCached};return e.cultureName&&(t.customerCultureName=e.cultureName),"general"===B(e.formatCached)&&delete t.formatCached,t},hasFormatedColor:function(){var e=this;for(var t in Y)if(Y.hasOwnProperty(t)){var n=e.getFormatter(Y[t]);if(n&&n.colorFormatPart)return!0}return!1},formatString:function(e){var t=this;if(0===arguments.length){for(var n=V._Empty,r=0,o=t.formatters.length;r<o;r++){n+=t.formatters[r].formatString(),r!==o-1&&(n+=";")}return n}if(!e)throw new Error(L().Exp_ValueIsNull);return t.formatters=C,t.formatCached=e,t.init(),t._raisePropertyChanged("formatString"),t},getFormatter:function(e){var t=this;return t.formatters&&t.formatters[e]},getPreferredEditingFormatter:function(e){var t=U(this.cultureName);return n(N(e,"DateTime")?P._toOADate(e)<1?"HH:mm:ss":0===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&0===e.getMilliseconds()?t.shortDatePattern:t.shortDatePattern+" HH:mm:ss":N(e,"TimeSpan")?t.longTimePattern:"General")},getPreferredDisplayFormatter:function(e,r){var o=this;r||(r={value:C}),r.value=C;var i=/^0+\d*$/,a=E.isBigNumber(e);if(V._isNullOrEmpty(e)||i.test(e)||a)return a&&(r.value=e),new t;var s=e,u=r.value=o.parse(s);if(N(u,"DateTime")||N(u,"TimeSpan"))for(var l=q(),c=l.pattern,f=l.formatter,d=0;d<c.length;d++)for(var p=c[d],h=0;h<p.length;h++){var m=p[h],y=P._parseLocale(e,m);if(y&&y-u==0)return new t(f[d])}else if(x._isNumber(u,o.cultureName)){var v=H(o.cultureName),g=v.currencySymbol,b=v.numberDecimalSeparator,_=v.percentSymbol,w=v.numberGroupSeparator,k="E",M=O._contains,T=M(s,b),S=T?".00":"";if(s[0]===g)return n(V._format("{0}#,##0{1};[Red]({0}#,##0{1})",g,S));if(M(s,k,1))return n("0.00E+00");if(s[0].toString()===_||s[s.length-1].toString()===_)return n(V._format("0{0}%",S));if(M(s,w))return n(V._format("#,##0{0}",S))}return n("General")},format:function(e,t){if(N(e,"boolean"))return e.toString().toUpperCase();var n=this._getFormatInfo(e);if(n){var r=n.colorFormatPart;t&&r&&(t.value=r.foreColor);var o=0,i=x._isNumber(e,self.cultureName);i&&(o=x._toDouble(e));var a=V._Empty;if(i&&n===this.getFormatter(Y._negative))a=n.format(T(o)),n&&n.conditionalFormatPart&&n.conditionalFormatPart.value>0&&o<0&&(a="-"+a);else try{a=n.format(e)}catch(t){N(e,"string")&&(a=e.toString())}return a}return i&&o<0?"-".toString():N(e,"string")?e.toString():e===M||e===C?V._Empty:e.toString()},parse:function(e){var t=this;return t.formatters&&t.formatters.length>0?t.formatters[0].parse(e):C},init:function(){var e=this,t=e.formatCached;V._isNullOrEmpty(t)&&W(),e.formatters=[];var n=t.split(";");e._isSingleFormatterInfo=1===n.length,(!n||n.length<1||n.length>4)&&W();for(var r=0;r<n.length;r++){var o=new se(n[r],e.cultureName);o&&e.formatters.push(o)}e.getFormatter(Y._positive)||W()},_getFormatInfo:function(e){var t=this,n=t.getFormatter(Y._positive),r=t.getFormatter(Y._text);if("string"==typeof e&&isNaN(e))return r||n;if(x._isNumber(e,t.cultureName)||N(e,"boolean")){var o,i=t.getFormatter(Y._negative),a=t.getFormatter(Y._zero),s=x._toDouble(e),u=n&&n.conditionalFormatPart,l=u&&n.conditionalFormatPart.isMeetCondition(s),c=i&&i.conditionalFormatPart,f=c&&i.conditionalFormatPart.isMeetCondition(s);return t._isSingleFormatterInfo||(u?l:s>0)||0===s&&!t.getFormatter(Y._zero)?o=n:(c?f:s<0)?o=i:a?o=a:i&&(o=i),o}return C},_raisePropertyChanged:function(e){var t=this;if(t.PropertyChanged)for(var n=0;n<t.PropertyChanged.length;n++){var r=t.PropertyChanged[n];"function"==typeof r&&r(t,e)}}},t}(ee);S.GeneralFormatter=ue,S.FormatterBase=ee,e.exports=S},function(e,t,n){function r(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}var o=n(185);n(638),r(o,n(249)),r(o,n(639)),o._Types=n(186),o._ArrayHelper=n(432),o._DateTimeHelper=n(321),o._NumberHelper=n(250),o._RegexHelper=n(187),o._StringHelper=n(188),o.SR={},o.SR.en=n(640),e.exports=o},function(e,t,n){var r=n(185),o=n(250)._toHexString,i=Math.min,a=Math.max,s=Math.abs,u=parseInt,l=function(){function e(){}return e._toString=function(e){var t=e.a,n=e.r,r=e.g,i=e.b;return 3===arguments.length&&(t=255,n=arguments[0],r=arguments[1],i=arguments[2]),4===arguments.length&&(t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3]),255===t?"#"+o(n,!0,2)+o(r,!0,2)+o(i,!0,2):"rgba("+n+","+r+","+i+","+t+")"},e._compare=function(e,t){return e.a===t.a&&e.r===t.r&&e.g===t.g&&e.b===t.b},e._getBrightness=function(t){var n=e._fromString(t);return(299*n.r+587*n.g+114*n.b)/1e3},e._hueToRGB=function(e,t,n){return n<0&&(n+=240),n>240&&(n-=240),n<40?e+((t-e)*n+20)/40:n<120?t:n<160?e+((t-e)*(160-n)+20)/40:e},e._fromHLS=function(t,n,r){function o(t,n,r){return parseInt((255*e._hueToRGB(t,n,r)+120)/240,10)}var i,a,s;if(0===r)i=a=s=u(255*n/240,10);else{var l,c;c=n<=120?(n*(240+r)+120)/240:n+r-(n*r+120)/240,l=2*n-c,i=o(l,c,t+80),a=o(l,c,t),s=o(l,c,t-80)}return{a:255,r:i,g:a,b:s}},e._isTwoColorSimilar=function(e,t){var n=255-s(e.r-t.r),r=255-s(e.g-t.g),o=255-s(e.b-t.b),i=s(e.a-t.a);return n/=255,r/=255,o/=255,!!((n+r+o)/3>=.9&&i<=.05)},e._invertColor=function(t){var n=255^t.r,r=255^t.g,o=255^t.b;return e._toString(t.a,n,r,o)},e._fromString=function(t){function n(t){var n=e._ctx;if(!n){var r=document.createElement("canvas");r&&r.getContext&&(n=e._ctx=r.getContext("2d"))}return n?(n.fillStyle=t,t=n.fillStyle):t}function r(e){var t=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i,r=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i,o=/^rgb\(([\s\d]*),([\s\d]*),([\s\d]*)\)$/i,i=/^rgba\(([\s\d]*),([\s\d]*),([\s\d]*),([\s\d]*)\)$/i,a=function(e){return u(e,16)},s=function(e){return u(e+e,16)},l=function(e){return e.indexOf("%")>0?2.55*parseFloat(e):0|e},c=n(e),f=RegExp;if(t.test(c))return[f.$1,f.$2,f.$3].map(a);if(i.test(c)){var d=[f.$1,f.$2,f.$3].map(l);return d.splice(0,0,255*parseFloat(f.$4)),d}return o.test(c)?[f.$1,f.$2,f.$3].map(l):r.test(c)?[f.$1,f.$2,f.$3].map(s):null}if(t instanceof e)return t;var o=0,i=0,a=0,s=0;if(t&&""!==t){var l=r(t);l&&(3===l.length?(o=255,i=l[0],a=l[1],s=l[2]):4===l.length&&(o=l[0],i=l[1],a=l[2],s=l[3]))}return{a:o,r:i,g:a,b:s}},e._applyTint=function(t,n){if(0===n)return t;var r=new c(t),o=u(n>0?(240-r._luminosity)*n:r._luminosity*n,10);return e._fromHLS(r._hue,r._luminosity+o,r._saturation)},e._getLighterColor=function(t,n){var r=e._fromString(t),o=new c(r),i=o._getLighterColor(n);return e._toString(i)},e}(),c=function(){function e(e){var t=this,n=e.r,r=e.g,o=e.b,s=a(a(n,r),o),l=i(i(n,r),o),c=s+l;t._luminosity=u((240*c+255)/510,10);var f=s-l;if(0===f)t._saturation=0,t._hue=160;else{t._luminosity<=120?t._saturation=u((240*f+c/2)/c,10):t._saturation=u((240*f+(510-c)/2)/(510-c),10);var d=(40*(s-n)+f/2)/f,p=(40*(s-r)+f/2)/f,h=(40*(s-o)+f/2)/f;t._hue=n===s?u(h-p,10):r===s?u(80+d-h,10):u(160+p-d,10),t._hue<0&&(t._hue+=240),t._hue>240&&(t._hue-=240)}}return e.prototype={constructor:e,_getLighterColor:function(e){var t=this,n=t._luminosity,r=t._newLuma(t._luminosity,500,!0);return l._fromHLS(t._hue,n+(r-n)*e,t._saturation)},_newLuma:function(e,t,n){return 0===t?e:n?t>0?(e*(1e3-t)+241*t)/1e3:e*(t+1e3)/1e3:(e+=240*t/1e3,e<0&&(e=0),e>240&&(e=240),e)}},e}();r._ColorHelper=l,e.exports=r},function(e,t){function n(e){return e}function r(e,t,n,r,o,i,a,s,l,d,p){var h,m,y,v,g,b,_,w,k,E,C,M,T,S,O,P,x=n[c],N=n[f],j=t[c],I=t[f],D=r[c],A=r[f],F=1===N,L=1===I;if(j===x&&I===N){var R=0,U=0,H=0,B=0;for(_=x*N,h=0;h<x;h++)for(m=0;m<N;m++){if(v=i(n[h][m]),g=i(t[h][m]),e&&(u(v)||u(g)))return l;g=d(g),R+=v,U+=v*v,H+=g,B+=v*g}for(b=o?(_*B-R*H)/(_*U-R*R):B/U,w=o?(H*U-R*B)/(_*U-R*R):0,k=[],h=0;h<D;h++)for(k[h]=[],m=0;m<A;m++){if(v=i(r[h][m]),e&&u(v))return l;k[h][m]=p(b*v+w)}return a?new a(k):k}if(F&&j===x||1===j&&I===N){for(v=[],g=[],O=N+1,P=N+2,h=0;h<x;h++){if(C=F?t[h][0]:t[0][h],w=i(C),e&&u(w))return l;g[h]=F?d(w):w}for(h=0;h<x;h++)for(v[h]=[],m=0;m<N;m++){if(w=i(n[h][m]),e&&u(w))return l;v[h][m]=w}var W=[];for(b=0;b<O;b++)for(W[b]=[],_=0;_<P;_++)W[b][_]=0;for(y=0;y<x;y++)for(W[0][O]+=g[y],h=0;h<N;h++)for(C=h+1,W[0][C]+=v[y][h],W[C][0]=W[0][C],W[C][O]+=v[y][h]*g[y],m=h;m<N;m++)T=m+1,W[T][C]+=v[y][h]*v[y][m],W[C][T]=W[T][C];W[0][0]=x;var V=o?0:1;for(E=V;E<O;E++){if(e){if(0===W[h][h]){for(S=!1,m=h+1;!S&&m<O;m++)if(0!==W[m][h]){for(y=0;y<P;y++)T=W[h][y],W[h][y]=W[m][y],W[m][y]=T;S=!0}if(!S)return s}}else{for(h=E;h<O&&0===W[h][E];)h++;if(h>=O)return s;for(M=V;M<P;M++)C=W[E][M],W[E][M]=W[h][M],W[h][M]=C}for(C=1/W[E][E],M=V;M<P;M++)W[E][M]*=C;for(h=V;h<O;h++)if(h!==E)for(C=-W[h][E],M=0;M<P;M++)W[h][M]+=C*W[E][M];!o&&(W[0][O]=0)}for(k=[],!L&&(k[0]=[]),h=0;h<D;h++){for(L&&(k[h]=[]),C=W[0][O],m=0;m<N;m++){if(C=L?r[h][m]:r[m][h],w=i(C),e&&u(w))return l;C+=W[m+1][O]*w}L?k[h][0]=p(C):k[0][h]=p(C)}return a?new a(k):k}return s}function o(e,t,n,r,o,i,a,s,u,l,d){function p(e){e=e.toString();var t=e.split(".");return parseInt(t[t.length-1])}function h(e,t){if(parseInt(t)<0)return e;e=e.toString();var n=e.split(".");return n[n.length-1]=t,n.join(".")}var m,y,v,g,b,_,w,k,E=n[c],C=n[f],M=t[c],T=t[f],S=r[c],O=r[f];if(M===E&&T===C){var P=0,x=0,N=0,j=0;for(_=E*C,m=0;m<E;m++)for(y=0;y<C;y++)v=i(n[m][y]),g=t[m][y],g=p(g),P+=v,x+=v*v,N+=g,j+=v*g;for(b=o?(_*j-P*N)/(_*x-P*P):j/x,w=o?(N*x-P*j)/(_*x-P*P):0,k=[],m=0;m<S;m++)for(k[m]=[],y=0;y<O;y++)v=i(r[m][y]),k[m][y]=h(t[m][y],b*v+w);return a?new a(k):k}return s}function i(e,t,o,i,a,s,u,l){return r(!0,e,t,o,i,a,s,l,u,n,n)}function a(e,t,r,i,a,s,u,l){return o(!0,e,t,r,i,a,s,l,u,n,n)}function s(e,t,o,i,a,s,u){var l,d;for(l=0;l<e[c];l++)for(d=0;d<e[f];d++)if(e[l][d]<=0)return s;return r(!1,e,t,o,i,n,a,u,null,Math.log,Math.exp)}var u=isNaN,l={},c="rowCount",f="colCount";l._trend=i,l._growth=s,l._trendSerial=a,e.exports=l},function(e,t){e.exports={Exp_InvalidDateFormat:"Invalid date format pattern",Exp_InvalidExponentFormat:"invalid exponent format",Exp_InvalidSemicolons:"invalid format: too many semicolons",Exp_InvalidNumberGroupSize:"NumberGroupSize must be between 1 and 9.",Exp_BadFormatSpecifier:"Bad Format Specifier",Exp_InvalidNumberFormat:"Invalid number format pattern",Exp_InvalidCast:"InvalidCastException",Exp_Separator:"numberDecimalSeparator, listSeparator and arrayListSeparator should be different in cluture info."}},function(e,t,n){function r(e){return!!e&&u._startsWith(e.toString(),"http")}function o(e){var t=e&&e.toString();return!/^0+\d*$/.test(t)&&t-parseFloat(t)+1>=0}function i(e){return!!(o(e)&&e.toString().length>15)}function a(e){var t=e.attrs||{};for(var n in t)if(n.match(/lock-/))return!0}function s(e){return!(!e.attrs||!e.attrs.lock)}var u=n(188);e.exports={isUrl:r,isBigNumber:i,isNumeric:o,hasCellLocks:a,hasSheetLock:s}},function(e,t){function n(e,t){var n=e.row,r=e.col,o=e.rowCount,i=e.colCount;return(f[t]||l)(n,r,n+o-1,r+i-1)}function r(e,t,n,r){return{left:[e,t,n,t]}}function o(e,t,n,r){return{bottom:[n,t,n,r]}}function i(e,t,n,r){return{right:[e,r,n,r]}}function a(e,t,n,r){return{top:[e,t,e,r]}}function s(e,t,n,r){var o={};return n-e>=1&&(o.bottom=[e,t,n-1,r]),r-t>=1&&(o.right=[e,t,n,r-1]),o}function u(e,t,n,r){return{top:[e,t,e,r],right:[e,r,n,r],bottom:[n,t,n,r],left:[e,t,n,t]}}function l(e,t,n,r){var o=[e,t,n,r];return{top:o,right:o,bottom:o,left:o}}function c(e,t,n,r){return{top:[e,t,n+1,r],right:[e,t-1,n,r],bottom:[e-1,t,n,r],left:[e,t,n,r+1]}}e.exports={transformBorder:n};var f={all:l,none:c,outter:u,inner:s,top:a,right:i,bottom:o,left:r}},function(e,t,n){(function(t){var n,n;!function(t){e.exports=t()}(function(){return function e(t,r,o){function i(s,u){if(!r[s]){if(!t[s]){var l="function"==typeof n&&n;if(!u&&l)return n(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return i(n||e)},f,f.exports,e,t,r,o)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,n,r){(function(e){"use strict";function t(){c=!0;for(var e,t,n=f.length;n;){for(t=f,f=[],e=-1;++e<n;)t[e]();n=f.length}c=!1}function r(e){1!==f.push(e)||c||o()}var o,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var a=0,s=new i(t),u=e.document.createTextNode("");s.observe(u,{characterData:!0}),o=function(){u.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)o="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var n=e.document.createElement("script");n.onreadystatechange=function(){t(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(t,0)};else{var l=new e.MessageChannel;l.port1.onmessage=t,o=function(){l.port2.postMessage(0)}}var c,f=[];n.exports=r}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";function r(){}function o(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,e!==r&&u(this,e)}function i(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function a(e,t,n){h(function(){var r;try{r=t(n)}catch(t){return m.reject(e,t)}r===e?m.reject(e,new TypeError("Cannot resolve promise with itself")):m.resolve(e,r)})}function s(e){var t=e&&e.then;if(e&&"object"==typeof e&&"function"==typeof t)return function(){t.apply(e,arguments)}}function u(e,t){function n(t){i||(i=!0,m.reject(e,t))}function r(t){i||(i=!0,m.resolve(e,t))}function o(){t(r,n)}var i=!1,a=l(o);"error"===a.status&&n(a.value)}function l(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function c(e){return e instanceof this?e:m.resolve(new this(r),e)}function f(e){var t=new this(r);return m.reject(t,e)}function d(e){function t(e,t){function r(e){a[t]=e,++s!==o||i||(i=!0,m.resolve(l,a))}n.resolve(e).then(r,function(e){i||(i=!0,m.reject(l,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,i=!1;if(!o)return this.resolve([]);for(var a=new Array(o),s=0,u=-1,l=new this(r);++u<o;)t(e[u],u);return l}function p(e){function t(e){n.resolve(e).then(function(e){i||(i=!0,m.resolve(s,e))},function(e){i||(i=!0,m.reject(s,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,i=!1;if(!o)return this.resolve([]);for(var a=-1,s=new this(r);++a<o;)t(e[a]);return s}var h=e(1),m={},y=["REJECTED"],v=["FULFILLED"],g=["PENDING"];t.exports=n=o,o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){if("function"!=typeof e&&this.state===v||"function"!=typeof t&&this.state===y)return this;var n=new this.constructor(r);if(this.state!==g){a(n,this.state===v?e:t,this.outcome)}else this.queue.push(new i(n,e,t));return n},i.prototype.callFulfilled=function(e){m.resolve(this.promise,e)},i.prototype.otherCallFulfilled=function(e){a(this.promise,this.onFulfilled,e)},i.prototype.callRejected=function(e){m.reject(this.promise,e)},i.prototype.otherCallRejected=function(e){a(this.promise,this.onRejected,e)},m.resolve=function(e,t){var n=l(s,t);if("error"===n.status)return m.reject(e,n.value);var r=n.value;if(r)u(e,r);else{e.state=v,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},m.reject=function(e,t){e.state=y,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},n.resolve=c,n.reject=f,n.all=d,n.race=p},{1:1}],3:[function(e,n,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){}}function i(){try{if(!ae)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function a(){return"function"==typeof openDatabase}function s(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(e){return!1}}function u(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new n,o=0;o<e.length;o+=1)r.append(e[o]);return r.getBlob(t.type)}}function l(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function f(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function d(e){return new le(function(t){var n=e.transaction(ce,"readwrite"),r=u([""]);n.objectStore(ce).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}function p(e){return"boolean"==typeof se?le.resolve(se):d(e).then(function(e){return se=e})}function h(e){var t=ue[e.name],n={};n.promise=new le(function(e){n.resolve=e}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function m(e){var t=ue[e.name],n=t.deferredOperations.pop();n&&n.resolve()}function y(e,t){return new le(function(n,r){if(e.db){if(!t)return n(e.db);h(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=ae.open.apply(ae,o);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(ce)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){n(i.result),m(e)}})}function v(e){return y(e,!1)}function g(e){return y(e,!0)}function b(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function _(e){return new le(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}function w(e){return u([f(atob(e.data))],{type:e.type})}function k(e){return e&&e.__local_forage_encoded_blob}function E(e){var t=this,n=t._initReady().then(function(){var e=ue[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return c(n,e,e),n}function C(e){function t(){return le.resolve()}var n=this,r={db:null};if(e)for(var o in e)r[o]=e[o];ue||(ue={});var i=ue[r.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},ue[r.name]=i),i.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=E);for(var a=[],s=0;s<i.forages.length;s++){var u=i.forages[s];u!==n&&a.push(u._initReady().catch(t))}var l=i.forages.slice(0);return le.all(a).then(function(){return r.db=i.db,v(r)}).then(function(e){return r.db=e,b(r,n._defaultConfig.version)?g(r):e}).then(function(e){r.db=i.db=e,n._dbInfo=r;for(var t=0;t<l.length;t++){var o=l[t];o!==n&&(o._dbInfo.db=r.db,o._dbInfo.version=r.version)}})}function M(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new le(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=i.get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),k(e)&&(e=w(e)),t(e)},a.onerror=function(){r(a.error)}}).catch(r)});return l(r,t),r}function T(e,t){var n=this,r=new le(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=i.openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;k(r)&&(r=w(r));var o=e(r,n.key,s++);void 0!==o?t(o):n.continue()}else t()},a.onerror=function(){r(a.error)}}).catch(r)});return l(r,t),r}function S(e,t,n){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=new le(function(n,o){var i;r.ready().then(function(){return i=r._dbInfo,"[object Blob]"===fe.call(t)?p(i.db).then(function(e){return e?t:_(t)}):t}).then(function(t){var r=i.db.transaction(i.storeName,"readwrite"),a=r.objectStore(i.storeName),s=a.put(t,e);null===t&&(t=void 0),r.oncomplete=function(){void 0===t&&(t=null),n(t)},r.onabort=r.onerror=function(){var e=s.error?s.error:s.transaction.error;o(e)}}).catch(o)});return l(o,n),o}function O(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new le(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readwrite"),a=i.objectStore(o.storeName),s=a.delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(s.error)},i.onabort=function(){var e=s.error?s.error:s.transaction.error;r(e)}}).catch(r)});return l(r,t),r}function P(e){var t=this,n=new le(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readwrite"),i=o.objectStore(r.storeName),a=i.clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=a.error?a.error:a.transaction.error;n(e)}}).catch(n)});return l(n,e),n}function x(e){var t=this,n=new le(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}).catch(n)});return l(n,e),n}function N(e,t){var n=this,r=new le(function(t,r){if(e<0)return void t(null);n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=!1,s=i.openCursor();s.onsuccess=function(){var n=s.result;if(!n)return void t(null);0===e?t(n.key):a?t(n.key):(a=!0,n.advance(e))},s.onerror=function(){r(s.error)}}).catch(r)});return l(r,t),r}function j(e){var t=this,n=new le(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.openCursor(),a=[];i.onsuccess=function(){var t=i.result;if(!t)return void e(a);a.push(t.key),t.continue()},i.onerror=function(){n(i.error)}}).catch(n)});return l(n,e),n}function I(e){var t,n,r,o,i,a=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),c=new Uint8Array(l);for(t=0;t<s;t+=4)n=pe.indexOf(e[t]),r=pe.indexOf(e[t+1]),o=pe.indexOf(e[t+2]),i=pe.indexOf(e[t+3]),c[u++]=n<<2|r>>4,c[u++]=(15&r)<<4|o>>2,c[u++]=(3&o)<<6|63&i;return l}function D(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=pe[n[t]>>2],r+=pe[(3&n[t])<<4|n[t+1]>>4],r+=pe[(15&n[t+1])<<2|n[t+2]>>6],r+=pe[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function A(e,t){var n="";if(e&&(n=xe.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===xe.call(e.buffer))){var r,o=ye;e instanceof ArrayBuffer?(r=e,o+=ge):(r=e.buffer,"[object Int8Array]"===n?o+=_e:"[object Uint8Array]"===n?o+=we:"[object Uint8ClampedArray]"===n?o+=ke:"[object Int16Array]"===n?o+=Ee:"[object Uint16Array]"===n?o+=Me:"[object Int32Array]"===n?o+=Ce:"[object Uint32Array]"===n?o+=Te:"[object Float32Array]"===n?o+=Se:"[object Float64Array]"===n?o+=Oe:t(new Error("Failed to get type for BinaryArray"))),t(o+D(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=he+e.type+"~"+D(this.result);t(ye+be+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function F(e){if(e.substring(0,ve)!==ye)return JSON.parse(e);var t,n=e.substring(Pe),r=e.substring(ve,Pe);if(r===be&&me.test(n)){var o=n.match(me);t=o[1],n=n.substring(o[0].length)}var i=I(n);switch(r){case ge:return i;case be:return u([i],{type:t});case _e:return new Int8Array(i);case we:return new Uint8Array(i);case ke:return new Uint8ClampedArray(i);case Ee:return new Int16Array(i);case Me:return new Uint16Array(i);case Ce:return new Int32Array(i);case Te:return new Uint32Array(i);case Se:return new Float32Array(i);case Oe:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}function L(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new le(function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction(function(o){o.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=n,e()},function(e,t){r(t)})})});return n.serializer=Ne,o}function R(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new le(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return l(r,t),r}function U(e,t){var n=this,r=new le(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName,[],function(n,r){for(var i=r.rows,a=i.length,s=0;s<a;s++){var u=i.item(s),l=u.value;if(l&&(l=o.serializer.deserialize(l)),void 0!==(l=e(l,u.key,s+1)))return void t(l)}t()},function(e,t){r(t)})})}).catch(r)});return l(r,t),r}function H(e,t,n,r){var o=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new le(function(i,a){o.ready().then(function(){void 0===t&&(t=null);var s=t,u=o._dbInfo;u.serializer.serialize(t,function(t,l){l?a(l):u.db.transaction(function(n){n.executeSql("INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){i(s)},function(e,t){a(t)})},function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(H.apply(o,[e,s,n,r-1]));a(t)}})})}).catch(a)});return l(i,n),i}function B(e,t,n){return H.apply(this,[e,t,n,1])}function W(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new le(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return l(r,t),r}function V(e){var t=this,n=new le(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return l(n,e),n}function z(e){var t=this,n=new le(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})}).catch(n)});return l(n,e),n}function Y(e,t){var n=this,r=new le(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})}).catch(r)});return l(r,t),r}function G(e){var t=this,n=new le(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)},function(e,t){n(t)})})}).catch(n)});return l(n,e),n}function $(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=n.name+"/",n.storeName!==t._defaultConfig.storeName&&(n.keyPrefix+=n.storeName+"/"),t._dbInfo=n,n.serializer=Ne,le.resolve()}function q(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return l(n,e),n}function K(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return l(r,t),r}function J(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,a=1,s=0;s<i;s++){var u=localStorage.key(s);if(0===u.indexOf(r)){var l=localStorage.getItem(u);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,u.substring(o),a++)))return l}}});return l(r,t),r}function Q(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return l(r,t),r}function X(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++)0===localStorage.key(o).indexOf(e.keyPrefix)&&r.push(localStorage.key(o).substring(e.keyPrefix.length));return r});return l(n,e),n}function Z(e){var t=this,n=t.keys().then(function(e){return e.length});return l(n,e),n}function ee(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return l(r,t),r}function te(e,t,n){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new le(function(o,i){var a=r._dbInfo;a.serializer.serialize(t,function(t,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}})})});return l(o,n),o}function ne(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function re(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(He(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}function oe(e){for(var t in Ae)if(Ae.hasOwnProperty(t)&&Ae[t]===e)return!0;return!1}var ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae=o();"undefined"==typeof Promise&&e(3);var se,ue,le=Promise,ce="local-forage-detect-blob-support",fe=Object.prototype.toString,de={_driver:"asyncStorage",_initStorage:C,iterate:T,getItem:M,setItem:S,removeItem:O,clear:P,length:x,key:N,keys:j},pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",he="~~local_forage_type~",me=/^~~local_forage_type~([^~]+)~/,ye="__lfsc__:",ve=ye.length,ge="arbf",be="blob",_e="si08",we="ui08",ke="uic8",Ee="si16",Ce="si32",Me="ur16",Te="ui32",Se="fl32",Oe="fl64",Pe=ve+ge.length,xe=Object.prototype.toString,Ne={serialize:A,deserialize:F,stringToBuffer:I,bufferToString:D},je={_driver:"webSQLStorage",_initStorage:L,iterate:U,getItem:R,setItem:B,removeItem:W,clear:V,length:z,key:Y,keys:G},Ie={_driver:"localStorageWrapper",_initStorage:$,iterate:J,getItem:K,setItem:te,removeItem:ee,clear:q,length:Z,key:Q,keys:X},De={},Ae={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},Fe=[Ae.INDEXEDDB,Ae.WEBSQL,Ae.LOCALSTORAGE],Le=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],Re={description:"",driver:Fe.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},Ue={};Ue[Ae.INDEXEDDB]=i(),Ue[Ae.WEBSQL]=a(),Ue[Ae.LOCALSTORAGE]=s();var He=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Be=function(){function e(t){r(this,e),this.INDEXEDDB=Ae.INDEXEDDB,this.LOCALSTORAGE=Ae.LOCALSTORAGE,this.WEBSQL=Ae.WEBSQL,this._defaultConfig=re({},Re),this._config=re({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":ie(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new le(function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),i=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void n(o);if(oe(e._driver))return void n(i);for(var a=Le.concat("_initStorage"),s=0;s<a.length;s++){var u=a[s];if(!u||!e[u]||"function"!=typeof e[u])return void n(o)}var l=le.resolve(!0);"_support"in e&&(l=e._support&&"function"==typeof e._support?e._support():le.resolve(!!e._support)),l.then(function(n){Ue[r]=n,De[r]=e,t()},n)}catch(e){n(e)}});return c(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=this,o=le.resolve().then(function(){if(!oe(e)){if(De[e])return De[e];throw new Error("Driver not found.")}switch(e){case r.INDEXEDDB:return de;case r.LOCALSTORAGE:return Ie;case r.WEBSQL:return je}});return c(o,t,n),o},e.prototype.getSerializer=function(e){var t=le.resolve(Ne);return c(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return c(n,e,e),n},e.prototype.setDriver=function(e,t,n){function r(){a._config.driver=a.driver()}function o(e){return a._extend(e),r(),a._ready=a._initStorage(a._config),a._ready}function i(e){return function(){function t(){for(;n<e.length;){var i=e[n];return n++,a._dbInfo=null,a._ready=null,a.getDriver(i).then(o).catch(t)}r();var s=new Error("No available storage method found.");return a._driverSet=le.reject(s),a._driverSet}var n=0;return t()}}var a=this;He(e)||(e=[e]);var s=this._getSupportedDrivers(e),u=null!==this._driverSet?this._driverSet.catch(function(){return le.resolve()}):le.resolve();return this._driverSet=u.then(function(){var e=s[0];return a._dbInfo=null,a._ready=null,a.getDriver(e).then(function(e){a._driver=e._driver,r(),a._wrapLibraryMethodsWithReady(),a._initDriver=i(s)})}).catch(function(){r();var e=new Error("No available storage method found.");return a._driverSet=le.reject(e),a._driverSet}),c(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Ue[e]},e.prototype._extend=function(e){re(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0;e<Le.length;e++)ne(this,Le[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),We=new Be;t.exports=We},{3:3}]},{},[4])(4)})}).call(t,n(36))},,,function(e,t,n){(function(e){!function(t,n){e.exports=n()}(0,function(){"use strict";function t(){return _r.apply(null,arguments)}function n(e){_r=e}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function i(e){var t;for(t in e)return!1;return!0}function a(e){return void 0===e}function s(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function l(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e,t){for(var n in t)c(t,n)&&(e[n]=t[n]);return c(t,"toString")&&(e.toString=t.toString),c(t,"valueOf")&&(e.valueOf=t.valueOf),e}function d(e,t,n,r){return bt(e,t,n,r,!0).utc()}function p(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function h(e){return null==e._pf&&(e._pf=p()),e._pf}function m(e){if(null==e._isValid){var t=h(e),n=kr.call(t.parsedDateParts,function(e){return null!=e}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function y(e){var t=d(NaN);return null!=e?f(h(t),e):h(t).userInvalidated=!0,t}function v(e,t){var n,r,o;if(a(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),a(t._i)||(e._i=t._i),a(t._f)||(e._f=t._f),a(t._l)||(e._l=t._l),a(t._strict)||(e._strict=t._strict),a(t._tzm)||(e._tzm=t._tzm),a(t._isUTC)||(e._isUTC=t._isUTC),a(t._offset)||(e._offset=t._offset),a(t._pf)||(e._pf=h(t)),a(t._locale)||(e._locale=t._locale),Er.length>0)for(n=0;n<Er.length;n++)r=Er[n],o=t[r],a(o)||(e[r]=o);return e}function g(e){v(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Cr&&(Cr=!0,t.updateOffset(this),Cr=!1)}function b(e){return e instanceof g||null!=e&&null!=e._isAMomentObject}function _(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function w(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=_(t)),n}function k(e,t,n){var r,o=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),a=0;for(r=0;r<o;r++)(n&&e[r]!==t[r]||!n&&w(e[r])!==w(t[r]))&&a++;return a+i}function E(e){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function C(e,n){var r=!0;return f(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),r){for(var o,i=[],a=0;a<arguments.length;a++){if(o="","object"==typeof arguments[a]){o+="\n["+a+"] ";for(var s in arguments[0])o+=s+": "+arguments[0][s]+", ";o=o.slice(0,-2)}else o=arguments[a];i.push(o)}E(e+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function M(e,n){null!=t.deprecationHandler&&t.deprecationHandler(e,n),Mr[e]||(E(n),Mr[e]=!0)}function T(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function S(e){var t,n;for(n in e)t=e[n],T(t)?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function O(e,t){var n,r=f({},e);for(n in t)c(t,n)&&(o(e[n])&&o(t[n])?(r[n]={},f(r[n],e[n]),f(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)c(e,n)&&!c(t,n)&&o(e[n])&&(r[n]=f({},r[n]));return r}function P(e){null!=e&&this.set(e)}function x(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return T(r)?r.call(t,n):r}function N(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function j(){return this._invalidDate}function I(e){return this._ordinal.replace("%d",e)}function D(e,t,n,r){var o=this._relativeTime[n];return T(o)?o(e,t,n,r):o.replace(/%d/i,e)}function A(e,t){var n=this._relativeTime[e>0?"future":"past"];return T(n)?n(t):n.replace(/%s/i,t)}function F(e,t){var n=e.toLowerCase();Ar[n]=Ar[n+"s"]=Ar[t]=e}function L(e){return"string"==typeof e?Ar[e]||Ar[e.toLowerCase()]:void 0}function R(e){var t,n,r={};for(n in e)c(e,n)&&(t=L(n))&&(r[t]=e[n]);return r}function U(e,t){Fr[e]=t}function H(e){var t=[];for(var n in e)t.push({unit:n,priority:Fr[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function B(e,n){return function(r){return null!=r?(V(this,e,r),t.updateOffset(this,n),this):W(this,e)}}function W(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function V(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function z(e){return e=L(e),T(this[e])?this[e]():this}function Y(e,t){if("object"==typeof e){e=R(e);for(var n=H(e),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit])}else if(e=L(e),T(this[e]))return this[e](t);return this}function G(e,t,n){var r=""+Math.abs(e),o=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+r}function $(e,t,n,r){var o=r;"string"==typeof r&&(o=function(){return this[r]()}),e&&(Hr[e]=o),t&&(Hr[t[0]]=function(){return G(o.apply(this,arguments),t[1],t[2])}),n&&(Hr[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function q(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function K(e){var t,n,r=e.match(Lr);for(t=0,n=r.length;t<n;t++)Hr[r[t]]?r[t]=Hr[r[t]]:r[t]=q(r[t]);return function(t){var o,i="";for(o=0;o<n;o++)i+=T(r[o])?r[o].call(t,e):r[o];return i}}function J(e,t){return e.isValid()?(t=Q(t,e.localeData()),Ur[t]=Ur[t]||K(t),Ur[t](e)):e.localeData().invalidDate()}function Q(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Rr.lastIndex=0;r>=0&&Rr.test(e);)e=e.replace(Rr,n),Rr.lastIndex=0,r-=1;return e}function X(e,t,n){oo[e]=T(t)?t:function(e,r){return e&&n?n:t}}function Z(e,t){return c(oo,e)?oo[e](t._strict,t._locale):new RegExp(ee(e))}function ee(e){return te(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,o){return t||n||r||o}))}function te(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ne(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),s(t)&&(r=function(e,n){n[t]=w(e)}),n=0;n<e.length;n++)io[e[n]]=r}function re(e,t){ne(e,function(e,n,r,o){r._w=r._w||{},t(e,r._w,r,o)})}function oe(e,t,n){null!=t&&c(io,e)&&io[e](t,n._a,n,e)}function ie(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function ae(e,t){return e?r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||vo).test(t)?"format":"standalone"][e.month()]:r(this._months)?this._months:this._months.standalone}function se(e,t){return e?r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[vo.test(t)?"format":"standalone"][e.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ue(e,t,n){var r,o,i,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=d([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return n?"MMM"===t?(o=yo.call(this._shortMonthsParse,a),-1!==o?o:null):(o=yo.call(this._longMonthsParse,a),-1!==o?o:null):"MMM"===t?-1!==(o=yo.call(this._shortMonthsParse,a))?o:(o=yo.call(this._longMonthsParse,a),-1!==o?o:null):-1!==(o=yo.call(this._longMonthsParse,a))?o:(o=yo.call(this._shortMonthsParse,a),-1!==o?o:null)}function le(e,t,n){var r,o,i;if(this._monthsParseExact)return ue.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(o=d([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ce(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=w(t);else if(t=e.localeData().monthsParse(t),!s(t))return e;return n=Math.min(e.date(),ie(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function fe(e){return null!=e?(ce(this,e),t.updateOffset(this,!0),this):W(this,"Month")}function de(){return ie(this.year(),this.month())}function pe(e){return this._monthsParseExact?(c(this,"_monthsRegex")||me.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=_o),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function he(e){return this._monthsParseExact?(c(this,"_monthsRegex")||me.call(this),e?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=wo),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function me(){function e(e,t){return t.length-e.length}var t,n,r=[],o=[],i=[];for(t=0;t<12;t++)n=d([2e3,t]),r.push(this.monthsShort(n,"")),o.push(this.months(n,"")),i.push(this.months(n,"")),i.push(this.monthsShort(n,""));for(r.sort(e),o.sort(e),i.sort(e),t=0;t<12;t++)r[t]=te(r[t]),o[t]=te(o[t]);for(t=0;t<24;t++)i[t]=te(i[t]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function ye(e){return ve(e)?366:365}function ve(e){return e%4==0&&e%100!=0||e%400==0}function ge(){return ve(this.year())}function be(e,t,n,r,o,i,a){var s=new Date(e,t,n,r,o,i,a);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function _e(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function we(e,t,n){var r=7+t-n;return-(7+_e(e,0,r).getUTCDay()-t)%7+r-1}function ke(e,t,n,r,o){var i,a,s=(7+n-r)%7,u=we(e,r,o),l=1+7*(t-1)+s+u;return l<=0?(i=e-1,a=ye(i)+l):l>ye(e)?(i=e+1,a=l-ye(e)):(i=e,a=l),{year:i,dayOfYear:a}}function Ee(e,t,n){var r,o,i=we(e.year(),t,n),a=Math.floor((e.dayOfYear()-i-1)/7)+1;return a<1?(o=e.year()-1,r=a+Ce(o,t,n)):a>Ce(e.year(),t,n)?(r=a-Ce(e.year(),t,n),o=e.year()+1):(o=e.year(),r=a),{week:r,year:o}}function Ce(e,t,n){var r=we(e,t,n),o=we(e+1,t,n);return(ye(e)-r+o)/7}function Me(e){return Ee(e,this._week.dow,this._week.doy).week}function Te(){return this._week.dow}function Se(){return this._week.doy}function Oe(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Pe(e){var t=Ee(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function xe(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Ne(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function je(e,t){return e?r(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:r(this._weekdays)?this._weekdays:this._weekdays.standalone}function Ie(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function De(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ae(e,t,n){var r,o,i,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=d([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return n?"dddd"===t?(o=yo.call(this._weekdaysParse,a),-1!==o?o:null):"ddd"===t?(o=yo.call(this._shortWeekdaysParse,a),-1!==o?o:null):(o=yo.call(this._minWeekdaysParse,a),-1!==o?o:null):"dddd"===t?-1!==(o=yo.call(this._weekdaysParse,a))?o:-1!==(o=yo.call(this._shortWeekdaysParse,a))?o:(o=yo.call(this._minWeekdaysParse,a),-1!==o?o:null):"ddd"===t?-1!==(o=yo.call(this._shortWeekdaysParse,a))?o:-1!==(o=yo.call(this._weekdaysParse,a))?o:(o=yo.call(this._minWeekdaysParse,a),-1!==o?o:null):-1!==(o=yo.call(this._minWeekdaysParse,a))?o:-1!==(o=yo.call(this._weekdaysParse,a))?o:(o=yo.call(this._shortWeekdaysParse,a),-1!==o?o:null)}function Fe(e,t,n){var r,o,i;if(this._weekdaysParseExact)return Ae.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(o=d([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(o,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(o,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(o,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Le(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=xe(e,this.localeData()),this.add(e-t,"d")):t}function Re(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ue(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Ne(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function He(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ve.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=So),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Be(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ve.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Oo),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function We(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ve.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Po),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ve(){function e(e,t){return t.length-e.length}var t,n,r,o,i,a=[],s=[],u=[],l=[];for(t=0;t<7;t++)n=d([2e3,1]).day(t),r=this.weekdaysMin(n,""),o=this.weekdaysShort(n,""),i=this.weekdays(n,""),a.push(r),s.push(o),u.push(i),l.push(r),l.push(o),l.push(i);for(a.sort(e),s.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)s[t]=te(s[t]),u[t]=te(u[t]),l[t]=te(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function ze(){return this.hours()%12||12}function Ye(){return this.hours()||24}function Ge(e,t){$(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function $e(e,t){return t._meridiemParse}function qe(e){return"p"===(e+"").toLowerCase().charAt(0)}function Ke(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Je(e){return e?e.toLowerCase().replace("_","-"):e}function Qe(e){for(var t,n,r,o,i=0;i<e.length;){for(o=Je(e[i]).split("-"),t=o.length,n=Je(e[i+1]),n=n?n.split("-"):null;t>0;){if(r=Xe(o.slice(0,t).join("-")))return r;if(n&&n.length>=t&&k(o,n,!0)>=t-1)break;t--}i++}return null}function Xe(t){var n=null;if(!Do[t]&&void 0!==e&&e&&e.exports)try{n=xo._abbr,function(){var e=new Error('Cannot find module "./locale"');throw e.code="MODULE_NOT_FOUND",e}(),Ze(n)}catch(e){}return Do[t]}function Ze(e,t){var n;return e&&(n=a(t)?nt(e):et(e,t))&&(xo=n),xo._abbr}function et(e,t){if(null!==t){var n=Io;if(t.abbr=e,null!=Do[e])M("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Do[e]._config;else if(null!=t.parentLocale){if(null==Do[t.parentLocale])return Ao[t.parentLocale]||(Ao[t.parentLocale]=[]),Ao[t.parentLocale].push({name:e,config:t}),null;n=Do[t.parentLocale]._config}return Do[e]=new P(O(n,t)),Ao[e]&&Ao[e].forEach(function(e){et(e.name,e.config)}),Ze(e),Do[e]}return delete Do[e],null}function tt(e,t){if(null!=t){var n,r=Io;null!=Do[e]&&(r=Do[e]._config),t=O(r,t),n=new P(t),n.parentLocale=Do[e],Do[e]=n,Ze(e)}else null!=Do[e]&&(null!=Do[e].parentLocale?Do[e]=Do[e].parentLocale:null!=Do[e]&&delete Do[e]);return Do[e]}function nt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return xo;if(!r(e)){if(t=Xe(e))return t;e=[e]}return Qe(e)}function rt(){return Or(Do)}function ot(e){var t,n=e._a;return n&&-2===h(e).overflow&&(t=n[so]<0||n[so]>11?so:n[uo]<1||n[uo]>ie(n[ao],n[so])?uo:n[lo]<0||n[lo]>24||24===n[lo]&&(0!==n[co]||0!==n[fo]||0!==n[po])?lo:n[co]<0||n[co]>59?co:n[fo]<0||n[fo]>59?fo:n[po]<0||n[po]>999?po:-1,h(e)._overflowDayOfYear&&(t<ao||t>uo)&&(t=uo),h(e)._overflowWeeks&&-1===t&&(t=ho),h(e)._overflowWeekday&&-1===t&&(t=mo),h(e).overflow=t),e}function it(e){var t,n,r,o,i,a,s=e._i,u=Fo.exec(s)||Lo.exec(s);if(u){for(h(e).iso=!0,t=0,n=Uo.length;t<n;t++)if(Uo[t][1].exec(u[1])){o=Uo[t][0],r=!1!==Uo[t][2];break}if(null==o)return void(e._isValid=!1);if(u[3]){for(t=0,n=Ho.length;t<n;t++)if(Ho[t][1].exec(u[3])){i=(u[2]||" ")+Ho[t][0];break}if(null==i)return void(e._isValid=!1)}if(!r&&null!=i)return void(e._isValid=!1);if(u[4]){if(!Ro.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=o+(i||"")+(a||""),dt(e)}else e._isValid=!1}function at(e){var t,n,r,o,i,a,s,u,l={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"},c="YXWVUTSRQPONZABCDEFGHIKLM";if(t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,""),n=Wo.exec(t)){if(r=n[1]?"ddd"+(5===n[1].length?", ":" "):"",o="D MMM "+(n[2].length>10?"YYYY ":"YY "),i="HH:mm"+(n[4]?":ss":""),n[1]){var f=new Date(n[2]),d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][f.getDay()];if(n[1].substr(0,3)!==d)return h(e).weekdayMismatch=!0,void(e._isValid=!1)}switch(n[5].length){case 2:0===u?s=" +0000":(u=c.indexOf(n[5][1].toUpperCase())-12,s=(u<0?" -":" +")+(""+u).replace(/^-?/,"0").match(/..$/)[0]+"00");break;case 4:s=l[n[5]];break;default:s=l[" GMT"]}n[5]=s,e._i=n.splice(1).join(""),a=" ZZ",e._f=r+o+i+a,dt(e),h(e).rfc2822=!0}else e._isValid=!1}function st(e){var n=Bo.exec(e._i);if(null!==n)return void(e._d=new Date(+n[1]));it(e),!1===e._isValid&&(delete e._isValid,at(e),!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e)))}function ut(e,t,n){return null!=e?e:null!=t?t:n}function lt(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function ct(e){var t,n,r,o,i=[];if(!e._d){for(r=lt(e),e._w&&null==e._a[uo]&&null==e._a[so]&&ft(e),null!=e._dayOfYear&&(o=ut(e._a[ao],r[ao]),(e._dayOfYear>ye(o)||0===e._dayOfYear)&&(h(e)._overflowDayOfYear=!0),n=_e(o,0,e._dayOfYear),e._a[so]=n.getUTCMonth(),e._a[uo]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=i[t]=r[t];for(;t<7;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[lo]&&0===e._a[co]&&0===e._a[fo]&&0===e._a[po]&&(e._nextDay=!0,e._a[lo]=0),e._d=(e._useUTC?_e:be).apply(null,i),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[lo]=24)}}function ft(e){var t,n,r,o,i,a,s,u;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)i=1,a=4,n=ut(t.GG,e._a[ao],Ee(_t(),1,4).year),r=ut(t.W,1),((o=ut(t.E,1))<1||o>7)&&(u=!0);else{i=e._locale._week.dow,a=e._locale._week.doy;var l=Ee(_t(),i,a);n=ut(t.gg,e._a[ao],l.year),r=ut(t.w,l.week),null!=t.d?((o=t.d)<0||o>6)&&(u=!0):null!=t.e?(o=t.e+i,(t.e<0||t.e>6)&&(u=!0)):o=i}r<1||r>Ce(n,i,a)?h(e)._overflowWeeks=!0:null!=u?h(e)._overflowWeekday=!0:(s=ke(n,r,o,i,a),e._a[ao]=s.year,e._dayOfYear=s.dayOfYear)}function dt(e){if(e._f===t.ISO_8601)return void it(e);if(e._f===t.RFC_2822)return void at(e);e._a=[],h(e).empty=!0;var n,r,o,i,a,s=""+e._i,u=s.length,l=0;for(o=Q(e._f,e._locale).match(Lr)||[],n=0;n<o.length;n++)i=o[n],r=(s.match(Z(i,e))||[])[0],r&&(a=s.substr(0,s.indexOf(r)),a.length>0&&h(e).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),l+=r.length),Hr[i]?(r?h(e).empty=!1:h(e).unusedTokens.push(i),oe(i,r,e)):e._strict&&!r&&h(e).unusedTokens.push(i);h(e).charsLeftOver=u-l,s.length>0&&h(e).unusedInput.push(s),e._a[lo]<=12&&!0===h(e).bigHour&&e._a[lo]>0&&(h(e).bigHour=void 0),h(e).parsedDateParts=e._a.slice(0),h(e).meridiem=e._meridiem,e._a[lo]=pt(e._locale,e._a[lo],e._meridiem),ct(e),ot(e)}function pt(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function ht(e){var t,n,r,o,i;if(0===e._f.length)return h(e).invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<e._f.length;o++)i=0,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],dt(t),m(t)&&(i+=h(t).charsLeftOver,i+=10*h(t).unusedTokens.length,h(t).score=i,(null==r||i<r)&&(r=i,n=t));f(e,n||t)}function mt(e){if(!e._d){var t=R(e._i);e._a=l([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ct(e)}}function yt(e){var t=new g(ot(vt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function vt(e){var t=e._i,n=e._f;return e._locale=e._locale||nt(e._l),null===t||void 0===n&&""===t?y({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),b(t)?new g(ot(t)):(u(t)?e._d=t:r(n)?ht(e):n?dt(e):gt(e),m(e)||(e._d=null),e))}function gt(e){var n=e._i;a(n)?e._d=new Date(t.now()):u(n)?e._d=new Date(n.valueOf()):"string"==typeof n?st(e):r(n)?(e._a=l(n.slice(0),function(e){return parseInt(e,10)}),ct(e)):o(n)?mt(e):s(n)?e._d=new Date(n):t.createFromInputFallback(e)}function bt(e,t,n,a,s){var u={};return!0!==n&&!1!==n||(a=n,n=void 0),(o(e)&&i(e)||r(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=n,u._i=e,u._f=t,u._strict=a,yt(u)}function _t(e,t,n,r){return bt(e,t,n,r,!1)}function wt(e,t){var n,o;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return _t();for(n=t[0],o=1;o<t.length;++o)t[o].isValid()&&!t[o][e](n)||(n=t[o]);return n}function kt(){return wt("isBefore",[].slice.call(arguments,0))}function Et(){return wt("isAfter",[].slice.call(arguments,0))}function Ct(e){for(var t in e)if(-1===Go.indexOf(t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,r=0;r<Go.length;++r)if(e[Go[r]]){if(n)return!1;parseFloat(e[Go[r]])!==w(e[Go[r]])&&(n=!0)}return!0}function Mt(){return this._isValid}function Tt(){return Yt(NaN)}function St(e){var t=R(e),n=t.year||0,r=t.quarter||0,o=t.month||0,i=t.week||0,a=t.day||0,s=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=Ct(t),this._milliseconds=+c+1e3*l+6e4*u+1e3*s*60*60,this._days=+a+7*i,this._months=+o+3*r+12*n,this._data={},this._locale=nt(),this._bubble()}function Ot(e){return e instanceof St}function Pt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function xt(e,t){$(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+G(~~(e/60),2)+t+G(~~e%60,2)})}function Nt(e,t){var n=(t||"").match(e);if(null===n)return null;var r=n[n.length-1]||[],o=(r+"").match($o)||["-",0,0],i=60*o[1]+w(o[2]);return 0===i?0:"+"===o[0]?i:-i}function jt(e,n){var r,o;return n._isUTC?(r=n.clone(),o=(b(e)||u(e)?e.valueOf():_t(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+o),t.updateOffset(r,!1),r):_t(e).local()}function It(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Dt(e,n,r){var o,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Nt(to,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&n&&(o=It(this)),this._offset=e,this._isUTC=!0,null!=o&&this.add(o,"m"),i!==e&&(!n||this._changeInProgress?Jt(this,Yt(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:It(this)}function At(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ft(e){return this.utcOffset(0,e)}function Lt(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(It(this),"m")),this}function Rt(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Nt(eo,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Ut(e){return!!this.isValid()&&(e=e?_t(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function Ht(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Bt(){if(!a(this._isDSTShifted))return this._isDSTShifted;var e={};if(v(e,this),e=vt(e),e._a){var t=e._isUTC?d(e._a):_t(e._a);this._isDSTShifted=this.isValid()&&k(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Wt(){return!!this.isValid()&&!this._isUTC}function Vt(){return!!this.isValid()&&this._isUTC}function zt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Yt(e,t){var n,r,o,i=e,a=null;return Ot(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:s(e)?(i={},t?i[t]=e:i.milliseconds=e):(a=qo.exec(e))?(n="-"===a[1]?-1:1,i={y:0,d:w(a[uo])*n,h:w(a[lo])*n,m:w(a[co])*n,s:w(a[fo])*n,ms:w(Pt(1e3*a[po]))*n}):(a=Ko.exec(e))?(n="-"===a[1]?-1:1,i={y:Gt(a[2],n),M:Gt(a[3],n),w:Gt(a[4],n),d:Gt(a[5],n),h:Gt(a[6],n),m:Gt(a[7],n),s:Gt(a[8],n)}):null==i?i={}:"object"==typeof i&&("from"in i||"to"in i)&&(o=qt(_t(i.from),_t(i.to)),i={},i.ms=o.milliseconds,i.M=o.months),r=new St(i),Ot(e)&&c(e,"_locale")&&(r._locale=e._locale),r}function Gt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function $t(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function qt(e,t){var n;return e.isValid()&&t.isValid()?(t=jt(t,e),e.isBefore(t)?n=$t(e,t):(n=$t(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Kt(e,t){return function(n,r){var o,i;return null===r||isNaN(+r)||(M(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),n="string"==typeof n?+n:n,o=Yt(n,r),Jt(this,o,e),this}}function Jt(e,n,r,o){var i=n._milliseconds,a=Pt(n._days),s=Pt(n._months);e.isValid()&&(o=null==o||o,i&&e._d.setTime(e._d.valueOf()+i*r),a&&V(e,"Date",W(e,"Date")+a*r),s&&ce(e,W(e,"Month")+s*r),o&&t.updateOffset(e,a||s))}function Qt(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Xt(e,n){var r=e||_t(),o=jt(r,this).startOf("day"),i=t.calendarFormat(this,o)||"sameElse",a=n&&(T(n[i])?n[i].call(this,r):n[i]);return this.format(a||this.localeData().calendar(i,this,_t(r)))}function Zt(){return new g(this)}function en(e,t){var n=b(e)?e:_t(e);return!(!this.isValid()||!n.isValid())&&(t=L(a(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function tn(e,t){var n=b(e)?e:_t(e);return!(!this.isValid()||!n.isValid())&&(t=L(a(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function nn(e,t,n,r){return r=r||"()",("("===r[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===r[1]?this.isBefore(t,n):!this.isAfter(t,n))}function rn(e,t){var n,r=b(e)?e:_t(e);return!(!this.isValid()||!r.isValid())&&(t=L(t||"millisecond"),"millisecond"===t?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function on(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function an(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function sn(e,t,n){var r,o,i,a;return this.isValid()?(r=jt(e,this),r.isValid()?(o=6e4*(r.utcOffset()-this.utcOffset()),t=L(t),"year"===t||"month"===t||"quarter"===t?(a=un(this,r),"quarter"===t?a/=3:"year"===t&&(a/=12)):(i=this-r,a="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-o)/864e5:"week"===t?(i-o)/6048e5:i),n?a:_(a)):NaN):NaN}function un(e,t){var n,r,o=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(o,"months");return t-i<0?(n=e.clone().add(o-1,"months"),r=(t-i)/(i-n)):(n=e.clone().add(o+1,"months"),r=(t-i)/(n-i)),-(o+r)||0}function ln(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function cn(){if(!this.isValid())return null;var e=this.clone().utc();return e.year()<0||e.year()>9999?J(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):T(Date.prototype.toISOString)?this.toDate().toISOString():J(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function fn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o=t+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+o)}function dn(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=J(this,e);return this.localeData().postformat(n)}function pn(e,t){return this.isValid()&&(b(e)&&e.isValid()||_t(e).isValid())?Yt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function hn(e){return this.from(_t(),e)}function mn(e,t){return this.isValid()&&(b(e)&&e.isValid()||_t(e).isValid())?Yt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function yn(e){return this.to(_t(),e)}function vn(e){var t;return void 0===e?this._locale._abbr:(t=nt(e),null!=t&&(this._locale=t),this)}function gn(){return this._locale}function bn(e){switch(e=L(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function _n(e){return void 0===(e=L(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function wn(){return this._d.valueOf()-6e4*(this._offset||0)}function kn(){return Math.floor(this.valueOf()/1e3)}function En(){return new Date(this.valueOf())}function Cn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Mn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Tn(){return this.isValid()?this.toISOString():null}function Sn(){return m(this)}function On(){return f({},h(this))}function Pn(){return h(this).overflow}function xn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Nn(e,t){$(0,[e,e.length],0,t)}function jn(e){return Fn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function In(e){return Fn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Dn(){return Ce(this.year(),1,4)}function An(){var e=this.localeData()._week;return Ce(this.year(),e.dow,e.doy)}function Fn(e,t,n,r,o){var i;return null==e?Ee(this,r,o).year:(i=Ce(e,r,o),t>i&&(t=i),Ln.call(this,e,t,n,r,o))}function Ln(e,t,n,r,o){var i=ke(e,t,n,r,o),a=_e(i.year,0,i.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Rn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Un(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Hn(e,t){t[po]=w(1e3*("0."+e))}function Bn(){return this._isUTC?"UTC":""}function Wn(){return this._isUTC?"Coordinated Universal Time":""}function Vn(e){return _t(1e3*e)}function zn(){return _t.apply(null,arguments).parseZone()}function Yn(e){return e}function Gn(e,t,n,r){var o=nt(),i=d().set(r,t);return o[n](i,e)}function $n(e,t,n){if(s(e)&&(t=e,e=void 0),e=e||"",null!=t)return Gn(e,t,n,"month");var r,o=[];for(r=0;r<12;r++)o[r]=Gn(e,r,n,"month");return o}function qn(e,t,n,r){"boolean"==typeof e?(s(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,s(t)&&(n=t,t=void 0),t=t||"");var o=nt(),i=e?o._week.dow:0;if(null!=n)return Gn(t,(n+i)%7,r,"day");var a,u=[];for(a=0;a<7;a++)u[a]=Gn(t,(a+i)%7,r,"day");return u}function Kn(e,t){return $n(e,t,"months")}function Jn(e,t){return $n(e,t,"monthsShort")}function Qn(e,t,n){return qn(e,t,n,"weekdays")}function Xn(e,t,n){return qn(e,t,n,"weekdaysShort")}function Zn(e,t,n){return qn(e,t,n,"weekdaysMin")}function er(){var e=this._data;return this._milliseconds=ai(this._milliseconds),this._days=ai(this._days),this._months=ai(this._months),e.milliseconds=ai(e.milliseconds),e.seconds=ai(e.seconds),e.minutes=ai(e.minutes),e.hours=ai(e.hours),e.months=ai(e.months),e.years=ai(e.years),this}function tr(e,t,n,r){var o=Yt(t,n);return e._milliseconds+=r*o._milliseconds,e._days+=r*o._days,e._months+=r*o._months,e._bubble()}function nr(e,t){return tr(this,e,t,1)}function rr(e,t){return tr(this,e,t,-1)}function or(e){return e<0?Math.floor(e):Math.ceil(e)}function ir(){var e,t,n,r,o,i=this._milliseconds,a=this._days,s=this._months,u=this._data;return i>=0&&a>=0&&s>=0||i<=0&&a<=0&&s<=0||(i+=864e5*or(sr(s)+a),a=0,s=0),u.milliseconds=i%1e3,e=_(i/1e3),u.seconds=e%60,t=_(e/60),u.minutes=t%60,n=_(t/60),u.hours=n%24,a+=_(n/24),o=_(ar(a)),s+=o,a-=or(sr(o)),r=_(s/12),s%=12,u.days=a,u.months=s,u.years=r,this}function ar(e){return 4800*e/146097}function sr(e){return 146097*e/4800}function ur(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=L(e))||"year"===e)return t=this._days+r/864e5,n=this._months+ar(t),"month"===e?n:n/12;switch(t=this._days+Math.round(sr(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function lr(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12):NaN}function cr(e){return function(){return this.as(e)}}function fr(e){return e=L(e),this.isValid()?this[e+"s"]():NaN}function dr(e){return function(){return this.isValid()?this._data[e]:NaN}}function pr(){return _(this.days()/7)}function hr(e,t,n,r,o){return o.relativeTime(t||1,!!n,e,r)}function mr(e,t,n){var r=Yt(e).abs(),o=ki(r.as("s")),i=ki(r.as("m")),a=ki(r.as("h")),s=ki(r.as("d")),u=ki(r.as("M")),l=ki(r.as("y")),c=o<=Ei.ss&&["s",o]||o<Ei.s&&["ss",o]||i<=1&&["m"]||i<Ei.m&&["mm",i]||a<=1&&["h"]||a<Ei.h&&["hh",a]||s<=1&&["d"]||s<Ei.d&&["dd",s]||u<=1&&["M"]||u<Ei.M&&["MM",u]||l<=1&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,hr.apply(null,c)}function yr(e){return void 0===e?ki:"function"==typeof e&&(ki=e,!0)}function vr(e,t){return void 0!==Ei[e]&&(void 0===t?Ei[e]:(Ei[e]=t,"s"===e&&(Ei.ss=t-1),!0))}function gr(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=mr(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function br(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r=Ci(this._milliseconds)/1e3,o=Ci(this._days),i=Ci(this._months);e=_(r/60),t=_(e/60),r%=60,e%=60,n=_(i/12),i%=12;var a=n,s=i,u=o,l=t,c=e,f=r,d=this.asSeconds();return d?(d<0?"-":"")+"P"+(a?a+"Y":"")+(s?s+"M":"")+(u?u+"D":"")+(l||c||f?"T":"")+(l?l+"H":"")+(c?c+"M":"")+(f?f+"S":""):"P0D"}var _r,wr;wr=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var kr=wr,Er=t.momentProperties=[],Cr=!1,Mr={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var Tr;Tr=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)c(e,t)&&n.push(t);return n};var Sr,Or=Tr,Pr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},xr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Nr="Invalid date",jr="%d",Ir=/\d{1,2}/,Dr={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Ar={},Fr={},Lr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Rr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ur={},Hr={},Br=/\d/,Wr=/\d\d/,Vr=/\d{3}/,zr=/\d{4}/,Yr=/[+-]?\d{6}/,Gr=/\d\d?/,$r=/\d\d\d\d?/,qr=/\d\d\d\d\d\d?/,Kr=/\d{1,3}/,Jr=/\d{1,4}/,Qr=/[+-]?\d{1,6}/,Xr=/\d+/,Zr=/[+-]?\d+/,eo=/Z|[+-]\d\d:?\d\d/gi,to=/Z|[+-]\d\d(?::?\d\d)?/gi,no=/[+-]?\d+(\.\d{1,3})?/,ro=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,oo={},io={},ao=0,so=1,uo=2,lo=3,co=4,fo=5,po=6,ho=7,mo=8;Sr=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};var yo=Sr;$("M",["MM",2],"Mo",function(){return this.month()+1}),$("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),$("MMMM",0,0,function(e){return this.localeData().months(this,e)}),F("month","M"),U("month",8),X("M",Gr),X("MM",Gr,Wr),X("MMM",function(e,t){return t.monthsShortRegex(e)}),X("MMMM",function(e,t){return t.monthsRegex(e)}),ne(["M","MM"],function(e,t){t[so]=w(e)-1}),ne(["MMM","MMMM"],function(e,t,n,r){var o=n._locale.monthsParse(e,r,n._strict);null!=o?t[so]=o:h(n).invalidMonth=e});var vo=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,go="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),bo="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),_o=ro,wo=ro;$("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),$(0,["YY",2],0,function(){return this.year()%100}),$(0,["YYYY",4],0,"year"),$(0,["YYYYY",5],0,"year"),$(0,["YYYYYY",6,!0],0,"year"),F("year","y"),U("year",1),X("Y",Zr),X("YY",Gr,Wr),X("YYYY",Jr,zr),X("YYYYY",Qr,Yr),X("YYYYYY",Qr,Yr),ne(["YYYYY","YYYYYY"],ao),ne("YYYY",function(e,n){n[ao]=2===e.length?t.parseTwoDigitYear(e):w(e)}),ne("YY",function(e,n){n[ao]=t.parseTwoDigitYear(e)}),ne("Y",function(e,t){t[ao]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return w(e)+(w(e)>68?1900:2e3)};var ko=B("FullYear",!0);$("w",["ww",2],"wo","week"),$("W",["WW",2],"Wo","isoWeek"),F("week","w"),F("isoWeek","W"),U("week",5),U("isoWeek",5),X("w",Gr),X("ww",Gr,Wr),X("W",Gr),X("WW",Gr,Wr),re(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=w(e)});var Eo={dow:0,doy:6};$("d",0,"do","day"),$("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),$("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),$("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),$("e",0,0,"weekday"),$("E",0,0,"isoWeekday"),F("day","d"),F("weekday","e"),F("isoWeekday","E"),U("day",11),U("weekday",11),U("isoWeekday",11),X("d",Gr),X("e",Gr),X("E",Gr),X("dd",function(e,t){return t.weekdaysMinRegex(e)}),X("ddd",function(e,t){return t.weekdaysShortRegex(e)}),X("dddd",function(e,t){return t.weekdaysRegex(e)}),re(["dd","ddd","dddd"],function(e,t,n,r){var o=n._locale.weekdaysParse(e,r,n._strict);null!=o?t.d=o:h(n).invalidWeekday=e}),re(["d","e","E"],function(e,t,n,r){t[r]=w(e)});var Co="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Mo="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),To="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),So=ro,Oo=ro,Po=ro;$("H",["HH",2],0,"hour"),$("h",["hh",2],0,ze),$("k",["kk",2],0,Ye),$("hmm",0,0,function(){return""+ze.apply(this)+G(this.minutes(),2)}),$("hmmss",0,0,function(){return""+ze.apply(this)+G(this.minutes(),2)+G(this.seconds(),2)}),$("Hmm",0,0,function(){return""+this.hours()+G(this.minutes(),2)}),$("Hmmss",0,0,function(){return""+this.hours()+G(this.minutes(),2)+G(this.seconds(),2)}),Ge("a",!0),Ge("A",!1),F("hour","h"),U("hour",13),X("a",$e),X("A",$e),X("H",Gr),X("h",Gr),X("k",Gr),X("HH",Gr,Wr),X("hh",Gr,Wr),X("kk",Gr,Wr),X("hmm",$r),X("hmmss",qr),X("Hmm",$r),X("Hmmss",qr),ne(["H","HH"],lo),ne(["k","kk"],function(e,t,n){var r=w(e);t[lo]=24===r?0:r}),ne(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ne(["h","hh"],function(e,t,n){t[lo]=w(e),h(n).bigHour=!0}),ne("hmm",function(e,t,n){var r=e.length-2;t[lo]=w(e.substr(0,r)),t[co]=w(e.substr(r)),h(n).bigHour=!0}),ne("hmmss",function(e,t,n){var r=e.length-4,o=e.length-2;t[lo]=w(e.substr(0,r)),t[co]=w(e.substr(r,2)),t[fo]=w(e.substr(o)),h(n).bigHour=!0}),ne("Hmm",function(e,t,n){var r=e.length-2;t[lo]=w(e.substr(0,r)),t[co]=w(e.substr(r))}),ne("Hmmss",function(e,t,n){var r=e.length-4,o=e.length-2;t[lo]=w(e.substr(0,r)),t[co]=w(e.substr(r,2)),t[fo]=w(e.substr(o))});var xo,No=/[ap]\.?m?\.?/i,jo=B("Hours",!0),Io={calendar:Pr,longDateFormat:xr,invalidDate:Nr,ordinal:jr,dayOfMonthOrdinalParse:Ir,relativeTime:Dr,months:go,monthsShort:bo,week:Eo,weekdays:Co,weekdaysMin:To,weekdaysShort:Mo,meridiemParse:No},Do={},Ao={},Fo=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Lo=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ro=/Z|[+-]\d\d(?::?\d\d)?/,Uo=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ho=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Bo=/^\/?Date\((\-?\d+)/i,Wo=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;t.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var Vo=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=_t.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()}),zo=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=_t.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:y()}),Yo=function(){return Date.now?Date.now():+new Date},Go=["year","quarter","month","week","day","hour","minute","second","millisecond"];xt("Z",":"),xt("ZZ",""),X("Z",to),X("ZZ",to),ne(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Nt(to,e)});var $o=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var qo=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ko=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Yt.fn=St.prototype,Yt.invalid=Tt;var Jo=Kt(1,"add"),Qo=Kt(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xo=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});$(0,["gg",2],0,function(){return this.weekYear()%100}),$(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Nn("gggg","weekYear"),Nn("ggggg","weekYear"),Nn("GGGG","isoWeekYear"),Nn("GGGGG","isoWeekYear"),F("weekYear","gg"),F("isoWeekYear","GG"),U("weekYear",1),U("isoWeekYear",1),X("G",Zr),X("g",Zr),X("GG",Gr,Wr),X("gg",Gr,Wr),X("GGGG",Jr,zr),X("gggg",Jr,zr),X("GGGGG",Qr,Yr),X("ggggg",Qr,Yr),re(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=w(e)}),re(["gg","GG"],function(e,n,r,o){n[o]=t.parseTwoDigitYear(e)}),$("Q",0,"Qo","quarter"),F("quarter","Q"),U("quarter",7),X("Q",Br),ne("Q",function(e,t){t[so]=3*(w(e)-1)}),$("D",["DD",2],"Do","date"),F("date","D"),U("date",9),X("D",Gr),X("DD",Gr,Wr),X("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ne(["D","DD"],uo),ne("Do",function(e,t){t[uo]=w(e.match(Gr)[0],10)});var Zo=B("Date",!0);$("DDD",["DDDD",3],"DDDo","dayOfYear"),F("dayOfYear","DDD"),U("dayOfYear",4),X("DDD",Kr),X("DDDD",Vr),ne(["DDD","DDDD"],function(e,t,n){n._dayOfYear=w(e)}),$("m",["mm",2],0,"minute"),F("minute","m"),U("minute",14),X("m",Gr),X("mm",Gr,Wr),ne(["m","mm"],co);var ei=B("Minutes",!1);$("s",["ss",2],0,"second"),F("second","s"),U("second",15),X("s",Gr),X("ss",Gr,Wr),ne(["s","ss"],fo);var ti=B("Seconds",!1);$("S",0,0,function(){return~~(this.millisecond()/100)}),$(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),$(0,["SSS",3],0,"millisecond"),$(0,["SSSS",4],0,function(){return 10*this.millisecond()}),$(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),$(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),$(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),$(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),$(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),F("millisecond","ms"),U("millisecond",16),X("S",Kr,Br),X("SS",Kr,Wr),X("SSS",Kr,Vr);var ni;for(ni="SSSS";ni.length<=9;ni+="S")X(ni,Xr);for(ni="S";ni.length<=9;ni+="S")ne(ni,Hn);var ri=B("Milliseconds",!1);$("z",0,0,"zoneAbbr"),$("zz",0,0,"zoneName");var oi=g.prototype;oi.add=Jo,oi.calendar=Xt,oi.clone=Zt,oi.diff=sn,oi.endOf=_n,oi.format=dn,oi.from=pn,oi.fromNow=hn,oi.to=mn,oi.toNow=yn,oi.get=z,oi.invalidAt=Pn,oi.isAfter=en,oi.isBefore=tn,oi.isBetween=nn,oi.isSame=rn,oi.isSameOrAfter=on,oi.isSameOrBefore=an,oi.isValid=Sn,oi.lang=Xo,oi.locale=vn,oi.localeData=gn,oi.max=zo,oi.min=Vo,oi.parsingFlags=On,oi.set=Y,oi.startOf=bn,oi.subtract=Qo,oi.toArray=Cn,oi.toObject=Mn,oi.toDate=En,oi.toISOString=cn,oi.inspect=fn,oi.toJSON=Tn,oi.toString=ln,oi.unix=kn,oi.valueOf=wn,oi.creationData=xn,oi.year=ko,oi.isLeapYear=ge,oi.weekYear=jn,oi.isoWeekYear=In,oi.quarter=oi.quarters=Rn,oi.month=fe,oi.daysInMonth=de,oi.week=oi.weeks=Oe,oi.isoWeek=oi.isoWeeks=Pe,oi.weeksInYear=An,oi.isoWeeksInYear=Dn,oi.date=Zo,oi.day=oi.days=Le,oi.weekday=Re,oi.isoWeekday=Ue,oi.dayOfYear=Un,oi.hour=oi.hours=jo,oi.minute=oi.minutes=ei,oi.second=oi.seconds=ti,oi.millisecond=oi.milliseconds=ri,oi.utcOffset=Dt,oi.utc=Ft,oi.local=Lt,oi.parseZone=Rt,oi.hasAlignedHourOffset=Ut,oi.isDST=Ht,oi.isLocal=Wt,oi.isUtcOffset=Vt,oi.isUtc=zt,oi.isUTC=zt,oi.zoneAbbr=Bn,oi.zoneName=Wn,oi.dates=C("dates accessor is deprecated. Use date instead.",Zo),oi.months=C("months accessor is deprecated. Use month instead",fe),oi.years=C("years accessor is deprecated. Use year instead",ko),oi.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",At),oi.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Bt);var ii=P.prototype;ii.calendar=x,ii.longDateFormat=N,ii.invalidDate=j,ii.ordinal=I,ii.preparse=Yn,ii.postformat=Yn,ii.relativeTime=D,ii.pastFuture=A,ii.set=S,ii.months=ae,ii.monthsShort=se,ii.monthsParse=le,ii.monthsRegex=he,ii.monthsShortRegex=pe,ii.week=Me,ii.firstDayOfYear=Se,ii.firstDayOfWeek=Te,ii.weekdays=je,ii.weekdaysMin=De,ii.weekdaysShort=Ie,ii.weekdaysParse=Fe,ii.weekdaysRegex=He,ii.weekdaysShortRegex=Be,ii.weekdaysMinRegex=We,ii.isPM=qe,ii.meridiem=Ke,Ze("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===w(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),t.lang=C("moment.lang is deprecated. Use moment.locale instead.",Ze),t.langData=C("moment.langData is deprecated. Use moment.localeData instead.",nt);var ai=Math.abs,si=cr("ms"),ui=cr("s"),li=cr("m"),ci=cr("h"),fi=cr("d"),di=cr("w"),pi=cr("M"),hi=cr("y"),mi=dr("milliseconds"),yi=dr("seconds"),vi=dr("minutes"),gi=dr("hours"),bi=dr("days"),_i=dr("months"),wi=dr("years"),ki=Math.round,Ei={ss:44,s:45,m:45,h:22,d:26,M:11},Ci=Math.abs,Mi=St.prototype;return Mi.isValid=Mt,Mi.abs=er,Mi.add=nr,Mi.subtract=rr,Mi.as=ur,Mi.asMilliseconds=si,Mi.asSeconds=ui,Mi.asMinutes=li,Mi.asHours=ci,Mi.asDays=fi,Mi.asWeeks=di,Mi.asMonths=pi,Mi.asYears=hi,Mi.valueOf=lr,Mi._bubble=ir,Mi.get=fr,Mi.milliseconds=mi,Mi.seconds=yi,Mi.minutes=vi,Mi.hours=gi,Mi.days=bi,Mi.weeks=pr,Mi.months=_i,Mi.years=wi,Mi.humanize=gr,Mi.toISOString=br,Mi.toString=br,Mi.toJSON=br,Mi.locale=vn,Mi.localeData=gn,Mi.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",br),Mi.lang=Xo,$("X",0,0,"unix"),$("x",0,0,"valueOf"),X("x",Zr),X("X",no),ne("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),ne("x",function(e,t,n){n._d=new Date(w(e))}),t.version="2.18.1",n(_t),t.fn=oi,t.min=kt,t.max=Et,t.now=Yo,t.utc=d,t.unix=Vn,t.months=Kn,t.isDate=u,t.locale=Ze,t.invalid=y,t.duration=Yt,t.isMoment=b,t.weekdays=Qn,t.parseZone=zn,t.localeData=nt,t.isDuration=Ot,t.monthsShort=Jn,t.weekdaysMin=Zn,t.defineLocale=et,t.updateLocale=tt,t.locales=rt,t.weekdaysShort=Xn,t.normalizeUnits=L,t.relativeTimeRounding=yr,t.relativeTimeThreshold=vr,t.calendarFormat=Qt,t.prototype=oi,t})}).call(t,n(52)(e))},,,function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},i="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,n){if("string"!=typeof t){var a=Object.getOwnPropertyNames(t);i&&(a=a.concat(Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;++s)if(!(r[a[s]]||o[a[s]]||n&&n[a[s]]))try{e[a[s]]=t[a[s]]}catch(e){}}return e}},function(e,t){function n(e,t){return"string"!=typeof e&&(e=e._name),{type:"@@modal/PUSH_MODAL",payload:{name:e,params:t}}}function r(){return{type:"@@modal/POP_MODAL"}}function o(){return{type:"@@modal/CLEAN_MODALS"}}Object.defineProperty(t,"__esModule",{value:!0}),t.pushModal=n,t.popModal=r,t.cleanModals=o},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=o(c),d=n(681),p=o(d),h=n(683),m=o(h),y=n(684),v=o(y),g=n(685),b=o(g),_=n(686),w=o(_),k=n(687),E=o(k),C=n(688),M=o(C),T=n(689),S=o(T),O=n(690),P=o(O),x=n(691),N=o(x),j=n(692),I=o(j),D=n(693),A=o(D),F=n(694),L=o(F),R=n(189),U=o(R),H={purchase:function(e){return(0,U.default)(e).when("renew",function(){return m.default}).when("supplementary",function(){return v.default}).others(function(){return p.default}).done()},"alipay-qrcode":function(){return b.default},"payment-success":function(){return w.default},"payment-failure":function(){return E.default},"transfers-inventory":function(){return M.default},"confirm-invoice-info":function(){return S.default},"confirm-VATInvoice-info":function(){return P.default},"fill-invoice-info":function(){return N.default},"thanks-to-buy":function(){return I.default},"waiting-pay":function(){return A.default},"cancel-order":function(){return L.default}},B=5,W=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=e.data&&e.data.page,s=cow.currentUser.team.membership;return n.state={current:o||"purchase",data:u({},n.props.data,{memberCount:r.max([s&&s.memberCount||0,B]),needRefresh:!1})},n.onNext=n.onNext.bind(n),n}return s(t,e),l(t,null,[{key:"propTypes",get:function(){return{data:c.PropTypes.object,open:c.PropTypes.bool,type:c.PropTypes.string,onClose:c.PropTypes.func,currentUser:c.PropTypes.object,team:c.PropTypes.object}}}]),l(t,[{key:"onNext",value:function(e,t){this.setState({current:e,data:u({},this.state.data,t)})}},{key:"renderComponent",value:function(e){var t=this.props,n=t.open,r=t.onClose,o=t.type,i=H[e](o),a=this.props.team;return f.default.createElement(i,{open:n,onClose:this.state.data.needRefresh?function(){return location.replace(location.pathname)}:r,onNext:this.onNext,data:this.state.data,type:o,currentUser:this.props.currentUser,team:a})}},{key:"render",value:function(){var e=this;return f.default.createElement("div",{id:"enterprise-payment"},(0,U.default)(this.state.current).when("purchase",function(){return e.renderComponent("purchase")}).when("alipay-qrcode",function(){return e.renderComponent("alipay-qrcode")}).when("payment-success",function(){return e.renderComponent("payment-success")}).when("payment-failure",function(){return e.renderComponent("payment-failure")}).when("transfers-inventory",function(){return e.renderComponent("transfers-inventory")}).when("confirm-invoice-info",function(){return e.renderComponent("confirm-invoice-info")}).when("confirm-VATInvoice-info",function(){return e.renderComponent("confirm-VATInvoice-info")}).when("fill-invoice-info",function(){return e.renderComponent("fill-invoice-info")}).when("thanks-to-buy",function(){return e.renderComponent("thanks-to-buy")}).when("waiting-pay",function(){return e.renderComponent("waiting-pay")}).when("cancel-order",function(){return e.renderComponent("cancel-order")}).done())}}]),t}(c.Component);t.default=W,e.exports=t.default}).call(t,n(1))},,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){f||(f=!0,console.error("<Provider> does not support changing `store` on the fly. It is most likely that you see this error because you updated to Redux 2.x and React Redux 2.x which no longer hot reload reducers automatically. See https://github.com/rackt/react-redux/releases/tag/v2.0.0 for the migration instructions."))}t.__esModule=!0,t.default=void 0;var u=n(0),l=n(545),c=r(l),f=!1,d=function(e){function t(n,r){o(this,t);var a=i(this,e.call(this,n,r));return a.store=n.store,a}return a(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.componentWillReceiveProps=function(e){this.store!==e.store&&s()},t.prototype.render=function(){var e=this.props.children;return u.Children.only(e)},t}(u.Component);t.default=d,d.propTypes={store:c.default.isRequired,children:u.PropTypes.element.isRequired},d.childContextTypes={store:c.default.isRequired}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e.displayName||e.name||"Component"}function u(e,t,n){function r(e,t){var n=e.getState(),r=O?g(n,t):g(n);return(0,E.default)((0,v.default)(r),"`mapStateToProps` must return an object. Instead received %s.",r),r}function u(e,t){var n=e.dispatch,r=P?_(n,t):_(n);return(0,E.default)((0,v.default)(r),"`mapDispatchToProps` must return an object. Instead received %s.",r),r}function d(e,t,n){var r=k(e,t,n);return(0,E.default)((0,v.default)(r),"`mergeProps` must return an object. Instead received %s.",r),r}var h=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],y=Boolean(e),g=e||C,_=(0,v.default)(t)?(0,b.default)(t):t||M,k=n||T,O=g.length>1,P=_.length>1,x=h.pure,N=void 0===x||x,j=h.withRef,I=void 0!==j&&j,D=S++;return function(e){var t=function(t){function n(e,a){o(this,n);var s=i(this,t.call(this,e,a));return s.version=D,s.store=e.store||a.store,(0,E.default)(s.store,'Could not find "store" in either the context or props of "'+s.constructor.displayName+'". Either wrap the root component in a <Provider>, or explicitly pass "store" as a prop to "'+s.constructor.displayName+'".'),s.stateProps=r(s.store,e),s.dispatchProps=u(s.store,e),s.state={storeState:null},s.updateState(),s}return a(n,t),n.prototype.shouldComponentUpdate=function(e,t){if(!N)return this.updateStateProps(e),this.updateDispatchProps(e),this.updateState(e),!0;var n=t.storeState!==this.state.storeState,r=!(0,m.default)(e,this.props),o=!1,i=!1;return(n||r&&O)&&(o=this.updateStateProps(e)),r&&P&&(i=this.updateDispatchProps(e)),!!(r||o||i)&&(this.updateState(e),!0)},n.prototype.computeNextState=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0];return d(this.stateProps,this.dispatchProps,e)},n.prototype.updateStateProps=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0],t=r(this.store,e);return!(0,m.default)(t,this.stateProps)&&(this.stateProps=t,!0)},n.prototype.updateDispatchProps=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0],t=u(this.store,e);return!(0,m.default)(t,this.dispatchProps)&&(this.dispatchProps=t,!0)},n.prototype.updateState=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0];this.nextState=this.computeNextState(e)},n.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},n.prototype.trySubscribe=function(){y&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},n.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},n.prototype.componentDidMount=function(){this.trySubscribe()},n.prototype.componentWillUnmount=function(){this.tryUnsubscribe()},n.prototype.handleChange=function(){this.unsubscribe&&this.setState({storeState:this.store.getState()})},n.prototype.getWrappedInstance=function(){return(0,E.default)(I,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},n.prototype.render=function(){var t=I?"wrappedInstance":null;return f.default.createElement(e,l({},this.nextState,{ref:t}))},n}(c.Component);return t.displayName="Connect("+s(e)+")",t.WrappedComponent=e,t.contextTypes={store:p.default},t.propTypes={store:p.default},(0,w.default)(t,e)}}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.__esModule=!0,t.default=u;var c=n(0),f=r(c),d=n(545),p=r(d),h=n(666),m=r(h),y=n(667),v=r(y),g=n(668),b=r(g),_=n(649),w=r(_),k=n(267),E=r(k),C=function(){return{}},M=function(e){return{dispatch:e}},T=function(e,t,n){return l({},n,e,t)},S=0},function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=Object.prototype.hasOwnProperty,i=0;i<n.length;i++)if(!o.call(t,n[i])||e[n[i]]!==t[n[i]])return!1;return!0}t.__esModule=!0,t.default=r},function(e,t,n){"use strict";function r(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function o(e){if(!e||"object"!==(void 0===e?"undefined":r(e)))return!1;var t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&i(n)===i(Object)}t.__esModule=!0,t.default=o;var i=function(e){return Function.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e){return function(t){return(0,o.bindActionCreators)(e,t)}}t.__esModule=!0,t.default=r;var o=n(151)},function(e,t,n){function r(e){if("number"==typeof e)return e;if(i(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=l.test(e);return n||c.test(e)?f(e.slice(2),n?2:8):u.test(e)?a:+e}var o=n(175),i=n(436),a=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,f=parseInt;e.exports=r},function(e,t,n){var r,o;!function(i,a){r=a,void 0!==(o="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}(0,function(){function e(e,t,n){return e<t?t:e>n?n:e}function t(e){return 100*(-1+e)}function n(e,n,r){var o;return o="translate3d"===l.positionUsing?{transform:"translate3d("+t(e)+"%,0,0)"}:"translate"===l.positionUsing?{transform:"translate("+t(e)+"%,0)"}:{"margin-left":t(e)+"%"},o.transition="all "+n+"ms "+r,o}function r(e,t){return("string"==typeof e?e:a(e)).indexOf(" "+t+" ")>=0}function o(e,t){var n=a(e),o=n+t;r(n,t)||(e.className=o.substring(1))}function i(e,t){var n,o=a(e);r(e,t)&&(n=o.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function a(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function s(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var u={};u.version="0.2.0";var l=u.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};u.configure=function(e){var t,n;for(t in e)void 0!==(n=e[t])&&e.hasOwnProperty(t)&&(l[t]=n);return this},u.status=null,u.set=function(t){var r=u.isStarted();t=e(t,l.minimum,1),u.status=1===t?null:t;var o=u.render(!r),i=o.querySelector(l.barSelector),a=l.speed,s=l.easing;return o.offsetWidth,c(function(e){""===l.positionUsing&&(l.positionUsing=u.getPositioningCSS()),f(i,n(t,a,s)),1===t?(f(o,{transition:"none",opacity:1}),o.offsetWidth,setTimeout(function(){f(o,{transition:"all "+a+"ms linear",opacity:0}),setTimeout(function(){u.remove(),e()},a)},a)):setTimeout(e,a)}),this},u.isStarted=function(){return"number"==typeof u.status},u.start=function(){u.status||u.set(0);var e=function(){setTimeout(function(){u.status&&(u.trickle(),e())},l.trickleSpeed)};return l.trickle&&e(),this},u.done=function(e){return e||u.status?u.inc(.3+.5*Math.random()).set(1):this},u.inc=function(t){var n=u.status;return n?("number"!=typeof t&&(t=(1-n)*e(Math.random()*n,.1,.95)),n=e(n+t,0,.994),u.set(n)):u.start()},u.trickle=function(){return u.inc(Math.random()*l.trickleRate)},function(){var e=0,t=0;u.promise=function(n){return n&&"resolved"!==n.state()?(0===t&&u.start(),e++,t++,n.always(function(){t--,0===t?(e=0,u.done()):u.set((e-t)/e)}),this):this}}(),u.render=function(e){if(u.isRendered())return document.getElementById("nprogress");o(document.documentElement,"nprogress-busy");var n=document.createElement("div");n.id="nprogress",n.innerHTML=l.template;var r,i=n.querySelector(l.barSelector),a=e?"-100":t(u.status||0),c=document.querySelector(l.parent);return f(i,{transition:"all 0 linear",transform:"translate3d("+a+"%,0,0)"}),l.showSpinner||(r=n.querySelector(l.spinnerSelector))&&s(r),c!=document.body&&o(c,"nprogress-custom-parent"),c.appendChild(n),n},u.remove=function(){i(document.documentElement,"nprogress-busy"),i(document.querySelector(l.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&s(e)},u.isRendered=function(){return!!document.getElementById("nprogress")},u.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var c=function(){function e(){var n=t.shift();n&&n(e)}var t=[];return function(n){t.push(n),1==t.length&&e()}}(),f=function(){function e(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function t(e){var t=document.body.style;if(e in t)return e;for(var n,r=o.length,i=e.charAt(0).toUpperCase()+e.slice(1);r--;)if((n=o[r]+i)in t)return n;return e}function n(n){return n=e(n),i[n]||(i[n]=t(n))}function r(e,t,r){t=n(t),e.style[t]=r}var o=["Webkit","O","Moz","ms"],i={};return function(e,t){var n,o,i=arguments;if(2==i.length)for(n in t)void 0!==(o=t[n])&&t.hasOwnProperty(n)&&r(e,n,o);else r(e,i[1],i[2])}}();return u})},function(e,t,n){var r=n(0),o=n(9),i=n(21),a=i.isClient();e.exports=r.createClass({displayName:"exports",propTypes:{customClass:r.PropTypes.string,placeholder:r.PropTypes.string,defaultValue:r.PropTypes.string,autoWidth:r.PropTypes.bool,tooltip:r.PropTypes.string},getInitialState:function(){return{inputWidth:this._getInputMinWidth(),value:this.props.defaultValue,inputValue:this.props.defaultValue,showTooltip:!1,focused:!1}},componentDidMount:function(){this._copyInputStyles(),this._updateInputWidth()},shouldComponentUpdate:function(e,t){return t!=this.state},componentDidUpdate:function(){this._updateInputWidth()},render:function(){var e=this.props,t={};this.state.inputWidth&&(t.width=this.state.inputWidth+"px");var n=this.state.showTooltip&&!this.state.focused?" active":"",o=e.readOnly;return r.createElement("div",{className:"span-input-wrap"},r.createElement("input",{className:e.customClass+" span-input",placeholder:e.placeholder||"输入",defaultValue:e.defaultValue||"石墨表格",readOnly:o,onChange:this._onChange,onBlur:this._onBlur,onFocus:o?null:this._onFocus,onKeyUp:this._onKeyUp,onKeyDown:this._onKeyDown,onMouseOver:this._onMouseOver,onMouseOut:this._onMouseOut,value:this.state.inputValue,style:t,maxLength:100,ref:"input"}),r.createElement("span",{ref:"input-pre",className:e.customClass+"-pre span-input-pre"},this.state.value),r.createElement("span",{className:"tooltip span-input-tooltip s-tooltip"+n},this.props.tooltip))},getValue:function(){return this.state.inputValue},setValue:function(e){this.setState({value:e,inputValue:e}),this._updateInputWidth()},_copyInputStyles:function(){if(this.isMounted()&&window.getComputedStyle){var e=window.getComputedStyle(this.refs.input),t=this.refs["input-pre"];t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing}},_updateInputWidth:function(){if(""===this.state.value&&this.props.placeholder)return void this.setState({value:this.props.placeholder});if(this.props.autoWidth&&this.isMounted()&&void 0!==this.refs["input-pre"].scrollWidth){var e=this.refs["input-pre"].scrollWidth+4,t=this._getInputMinWidth(),n=this._getInputMaxWidth();e<t?e=t:e>n&&(e=n),e!==this.state.inputWidth&&this.setState({inputWidth:e})}},_getInputMinWidth:function(){var e=parseInt(this.props.minWidth);return e=isNaN(e)?0:e},_getInputMaxWidth:function(){var e=parseInt(this.props.maxWidth);return e=isNaN(e)?9999999:e},_onChange:function(e){var t=this;this.setState({value:e.target.value,inputValue:e.target.value},function(){t.props.onChange&&t.props.onChange(),t._updateInputWidth()})},_onBlur:function(e){var t=this.props;""===this.state.inputValue&&t.placeholder?this.setState({inputValue:this.props.placeholder},function(){t.onBlur&&t.onBlur()}):t.onBlur&&t.onBlur(),this.setState({focused:!1}),a&&t.enableJsBridge&&o.notify("sheetTitleStatus",{status:"blur"})},_onFocus:function(e){"无标题"===e.target.value&&this.setState({inputValue:""});var t=this.props;this.setState({focused:!0},function(){t.onFocus&&t.onFocus()}),a&&this.props.enableJsBridge&&o.notify("sheetTitleStatus",{status:"focus"})},_onKeyUp:function(e){13==e.keyCode&&e.target.blur()},_onKeyDown:function(e){if((90===e.keyCode||89===e.keyCode)&&e.ctrlKey)return e.stopPropagation(),e.preventDefault(),!1},_onMouseOver:function(e){this.props.tooltip&&!this.state.showTooltip&&this.setState({showTooltip:!0})},_onMouseOut:function(e){this.props.tooltip&&this.state.showTooltip&&this.setState({showTooltip:!1})}})},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return f(e,t)};var o=n(151),i=n(437),a=r(i),s=n(673),u=(r(s),n(438)),l=r(u),c=[a.default,l.default],f=o.applyMiddleware.apply(void 0,c)(o.createStore);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i({},l.default,e),n=t.logger,r=t.transformer,o=t.stateTransformer,u=t.errorTransformer,c=t.predicate,f=t.logErrors,d=t.diffPredicate;if(void 0===n)return function(){return function(e){return function(t){return e(t)}}};if(r&&console.error("Option 'transformer' is deprecated, use 'stateTransformer' instead!"),e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n\n\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\n\nconst logger = createLogger({\n  // ...options\n});\n\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var p=[];return function(e){var n=e.getState;return function(e){return function(r){if("function"==typeof c&&!c(n,r))return e(r);var l={};p.push(l),l.started=s.timer.now(),l.startedTime=new Date,l.prevState=o(n()),l.action=r;var h=void 0;if(f)try{h=e(r)}catch(e){l.error=u(e)}else h=e(r);l.took=s.timer.now()-l.started,l.nextState=o(n());var m=t.diff&&"function"==typeof d?d(n,r):t.diff;if((0,a.printBuffer)(p,i({},t,{diff:m})),p.length=0,l.error)throw l.error;return h}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.defaults=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(674),s=n(547),u=n(677),l=r(u),c=o();t.defaults=l.default,t.logger=c,t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n,r){switch(void 0===e?"undefined":u(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,o(n)):e[r];case"function":return e(t);default:return e}}function a(e){var t=e.timestamp,n=e.duration;return function(e,r,o){var i=["action"];return i.push("%c"+String(e.type)),t&&i.push("%c@ "+r),n&&i.push("%c(in "+o.toFixed(2)+" ms)"),i.join(" ")}}function s(e,t){var n=t.logger,r=t.actionTransformer,o=t.titleFormatter,s=void 0===o?a(t):o,u=t.collapsed,c=t.colors,d=t.level,p=t.diff;e.forEach(function(o,a){var h=o.started,m=o.startedTime,y=o.action,v=o.prevState,g=o.error,b=o.took,_=o.nextState,w=e[a+1];w&&(_=w.prevState,b=w.started-h);var k=r(y),E="function"==typeof u?u(function(){return _},y,o):u,C=(0,l.formatTime)(m),M=c.title?"color: "+c.title(k)+";":"",T=["color: gray; font-weight: lighter;"];T.push(M),t.timestamp&&T.push("color: gray; font-weight: lighter;"),t.duration&&T.push("color: gray; font-weight: lighter;");var S=s(k,C,b);try{E?c.title?n.groupCollapsed.apply(n,["%c "+S].concat(T)):n.groupCollapsed(S):c.title?n.group.apply(n,["%c "+S].concat(T)):n.group(S)}catch(e){n.log(S)}var O=i(d,k,[v],"prevState"),P=i(d,k,[k],"action"),x=i(d,k,[g,v],"error"),N=i(d,k,[_],"nextState");O&&(c.prevState?n[O]("%c prev state","color: "+c.prevState(v)+"; font-weight: bold",v):n[O]("prev state",v)),P&&(c.action?n[P]("%c action    ","color: "+c.action(k)+"; font-weight: bold",k):n[P]("action    ",k)),g&&x&&(c.error?n[x]("%c error     ","color: "+c.error(g,v)+"; font-weight: bold;",g):n[x]("error     ",g)),N&&(c.nextState?n[N]("%c next state","color: "+c.nextState(_)+"; font-weight: bold",_):n[N]("next state",_)),p&&(0,f.default)(v,_,n,E);try{n.groupEnd()}catch(e){n.log("—— log end ——")}})}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.printBuffer=s;var l=n(547),c=n(675),f=r(c)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){return"color: "+c[e].color+"; font-weight: bold"}function a(e){var t=e.kind,n=e.path,r=e.lhs,o=e.rhs,i=e.index,a=e.item;switch(t){case"E":return[n.join("."),r,"→",o];case"N":return[n.join("."),o];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+i+"]",a];default:return[]}}function s(e,t,n,r){var s=(0,l.default)(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}s?s.forEach(function(e){var t=e.kind,r=a(e);n.log.apply(n,["%c "+c[t].text,i(t)].concat(o(r)))}):n.log("—— no diff ——");try{n.groupEnd()}catch(e){n.log("—— diff end —— ")}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var u=n(676),l=r(u),c={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}};e.exports=t.default},function(e,t,n){(function(n){var r,o;!function(n,i){"use strict";r=[],void 0!==(o=function(){return i()}.apply(t,r))&&(e.exports=o)}(0,function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function o(e,t,n){o.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function i(e,t){i.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function a(e,t){a.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,n){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function u(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function l(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":void 0!==e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function c(t,n,r,f,d,p,h){d=d||[];var m=d.slice(0);if(void 0!==p){if(f){if("function"==typeof f&&f(m,p))return;if("object"==typeof f){if(f.prefilter&&f.prefilter(m,p))return;if(f.normalize){var y=f.normalize(m,p,t,n);y&&(t=y[0],n=y[1])}}}m.push(p)}"regexp"===l(t)&&"regexp"===l(n)&&(t=t.toString(),n=n.toString());var v=typeof t,g=typeof n;if("undefined"===v)"undefined"!==g&&r(new i(m,n));else if("undefined"===g)r(new a(m,t));else if(l(t)!==l(n))r(new o(m,t,n));else if("[object Date]"===Object.prototype.toString.call(t)&&"[object Date]"===Object.prototype.toString.call(n)&&t-n!=0)r(new o(m,t,n));else if("object"===v&&null!==t&&null!==n){if(h=h||[],h.indexOf(t)<0){if(h.push(t),Array.isArray(t)){var b;t.length;for(b=0;b<t.length;b++)b>=n.length?r(new s(m,b,new a(e,t[b]))):c(t[b],n[b],r,f,m,b,h);for(;b<n.length;)r(new s(m,b,new i(e,n[b++])))}else{var _=Object.keys(t),w=Object.keys(n);_.forEach(function(o,i){var a=w.indexOf(o);a>=0?(c(t[o],n[o],r,f,m,o,h),w=u(w,a)):c(t[o],e,r,f,m,o,h)}),w.forEach(function(t){c(e,n[t],r,f,m,t,h)})}h.length=h.length-1}}else t!==n&&("number"===v&&isNaN(t)&&isNaN(n)||r(new o(m,t,n)))}function f(t,n,r,o){return o=o||[],c(t,n,function(e){e&&o.push(e)},r),o.length?o:e}function d(e,t,n){if(n.path&&n.path.length){var r,o=e[t],i=n.path.length-1;for(r=0;r<i;r++)o=o[n.path[r]];switch(n.kind){case"A":d(o[n.path[r]],n.index,n.item);break;case"D":delete o[n.path[r]];break;case"E":case"N":o[n.path[r]]=n.rhs}}else switch(n.kind){case"A":d(e[t],n.index,n.item);break;case"D":e=u(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function p(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,o=-1,i=n.path?n.path.length-1:0;++o<i;)void 0===r[n.path[o]]&&(r[n.path[o]]="number"==typeof n.path[o]?[]:{}),r=r[n.path[o]];switch(n.kind){case"A":d(n.path?r[n.path[o]]:r,n.index,n.item);break;case"D":delete r[n.path[o]];break;case"E":case"N":r[n.path[o]]=n.rhs}}}function h(e,t,n){if(n.path&&n.path.length){var r,o=e[t],i=n.path.length-1;for(r=0;r<i;r++)o=o[n.path[r]];switch(n.kind){case"A":h(o[n.path[r]],n.index,n.item);break;case"D":case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}else switch(n.kind){case"A":h(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=u(e,t)}return e}function m(e,t,n){if(e&&t&&n&&n.kind){var r,o,i=e;for(o=n.path.length-1,r=0;r<o;r++)void 0===i[n.path[r]]&&(i[n.path[r]]={}),i=i[n.path[r]];switch(n.kind){case"A":h(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}}function y(e,t,n){if(e&&t){c(e,t,function(r){n&&!n(e,t,r)||p(e,t,r)})}}var v,g,b=[];return v="object"==typeof n&&n?n:"undefined"!=typeof window?window:{},g=v.DeepDiff,g&&b.push(function(){void 0!==g&&v.DeepDiff===f&&(v.DeepDiff=g,g=e)}),t(o,r),t(i,r),t(a,r),t(s,r),Object.defineProperties(f,{diff:{value:f,enumerable:!0},observableDiff:{value:c,enumerable:!0},applyDiff:{value:y,enumerable:!0},applyChange:{value:p,enumerable:!0},revertChange:{value:m,enumerable:!0},isConflict:{value:function(){return void 0!==g},enumerable:!0},noConflict:{value:function(){return b&&(b.forEach(function(e){e()}),b=null),f},enumerable:!0}}),f})}).call(t,n(36))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return t._name=e,h[e]=t,t}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.register=s;var c=n(0),f=r(c),d=n(345),p=r(d),h={},m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleCloseClick=n.handleCloseClick.bind(n),n}return a(t,e),l(t,null,[{key:"propTypes",get:function(){return{popModal:c.PropTypes.func.isRequired,cleanModals:c.PropTypes.func.isRequired,modals:c.PropTypes.arrayOf(c.PropTypes.shape({name:c.PropTypes.string,params:c.PropTypes.object})).isRequired}}}]),l(t,[{key:"handleCloseClick",value:function(e){var t=e.target.dataset.modal;"clean"===t?this.props.cleanModals():"pop"===t&&this.props.popModal()}},{key:"renderModalComponent",value:function(){if(0!==this.props.modals.length){var e=this.props.modals[0],t=e.name,n=e.params,r=h[t],o=(0,p.default)({},this.props,n);return f.default.createElement("div",{className:"shimo-modal-overlay","data-modal":"clean"},f.default.createElement(r,u({},o,{params:n})))}}},{key:"render",value:function(){return f.default.createElement("div",{className:"modal-root",onClick:this.handleCloseClick},this.renderModalComponent())}}]),t}(c.Component);t.default=m},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.calcModalPosition()}},{key:"componentWillReceiveProps",value:function(){var e=this;setTimeout(function(){return e.calcModalPosition()},50)}},{key:"calcModalPosition",value:function(){var e=this.refs.modal,t=e.offsetWidth,n=e.offsetHeight;this.refs.modal.style.marginLeft=-t/2+"px",this.refs.modal.style.marginTop=-n/2+"px"}},{key:"render",value:function(){var e=this.props,t=c.default.Children.toArray(e.children),n=s(t,2),r=n[0],o=n[1];return c.default.createElement("div",{className:"shimo-modal",style:e.style,ref:"modal"},c.default.createElement("div",{className:"shimo-modal-header"},c.default.createElement("span",null,e.title),c.default.createElement("span",{className:"dialog-close-icon","data-modal":"clean"})),c.default.createElement("div",{className:"shimo-modal-content",style:e.contentStyle},r),o&&c.default.createElement("div",{className:"shimo-modal-footer"},o))}}],[{key:"propTypes",get:function(){return{title:l.PropTypes.string.isRequired,style:l.PropTypes.object,contentStyle:l.PropTypes.object}}}]),t}(l.Component);t.default=f,e.exports=t.default},function(e,t){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"@@modal/PUSH_MODAL":return[].concat(e,t.payload);case"@@modal/POP_MODAL":return[].concat(e.slice(0,-1));case"@@modal/CLEAN_MODALS":return[];default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),d=i(f),p=n(51),h=i(p),m=n(144),y=n(189),v=i(y),g=n(190),b=n(682),_=i(b),w=0,k={},E=function(e){var t=e.index,n=e.duration,r=e.price,o=e.active,i=e.originPrice,a=e.discount,s=e.loading,u=e.onClick;return d.default.createElement("div",{className:o?"option-outer-border active":"option-outer-border",onClick:function(){u(t)}},s||0===r?d.default.createElement("div",{className:"option"},d.default.createElement("div",{className:"year"},n),d.default.createElement("div",{className:"price"},"正在获取价格...")):d.default.createElement("div",{className:"option"},d.default.createElement("div",{className:"year"},n),d.default.createElement("div",{className:"price"},"¥"," ",r," ","/"," ","人",i&&a?d.default.createElement("span",{className:"origin-price"},"¥ ",i):null),a?d.default.createElement("div",{className:"discount "+a}):null))};E.propTypes={index:f.PropTypes.number,duration:f.PropTypes.string,price:f.PropTypes.oneOfType([f.PropTypes.string,f.PropTypes.number]),active:f.PropTypes.bool,originPrice:f.PropTypes.oneOfType([f.PropTypes.string,f.PropTypes.number]),discount:f.PropTypes.string,loading:f.PropTypes.bool,onClick:f.PropTypes.func};var C=function(e){var t=e.id,n=e.icon,r=e.text,o=e.active,i=e.onClick;return d.default.createElement("div",{onClick:function(){i(t)},className:o?"option-outer-border active":"option-outer-border"},d.default.createElement("div",{className:"option "+n},r))};C.propTypes={id:f.PropTypes.number,icon:f.PropTypes.string,text:f.PropTypes.string,active:f.PropTypes.bool,onClick:f.PropTypes.func};var M=function(e){var t=e.children,n=e.checked,r=e.onClick;return d.default.createElement("div",{className:"checkbox noselect "+(n?"checked":"")},d.default.createElement("span",{onClick:r},t))};M.propTypes={checked:f.PropTypes.bool,onClick:f.PropTypes.func};var T=[{index:0,month:3,text:"3 个月"},{index:1,month:12,text:"1 年"},{index:2,month:24,text:"2 年"}],S=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.data.memberCount||0,o={memberCount:r,recentMembersCount:0,unitPrice:216,quantity:{min:5,realValue:r,value:r,error:null},price:{selectedIndex:1,real:[0,0,0],original:[0,0,0],loading:!1},payment:{selectedId:1},agree:{checked:!1,error:!1},ajaxError:null,loadingDuringSubmitting:!1},i=e.data.purchase?e.data.purchase:{quantity:null};return n.state=l({},o,i,{quantity:l({},o.quantity,i.quantity),loadingDuringSubmitting:!1,showRecentMembers:!1}),n.onQuantityChange=n.onQuantityChange.bind(n),n.onPriceChange=n.onPriceChange.bind(n),n.onPaymentChange=n.onPaymentChange.bind(n),n.onAgreeChange=n.onAgreeChange.bind(n),n.onSubmit=n.onSubmit.bind(n),n.ajaxRetry=n.ajaxRetry.bind(n),n.renderContent=n.renderContent.bind(n),n.hideRecentMembers=n.hideRecentMembers.bind(n),n.renderRecentMembers=n.renderRecentMembers.bind(n),n.showRecentMembers=n.showRecentMembers.bind(n),n}return u(t,e),c(t,null,[{key:"propTypes",get:function(){return{onClose:f.PropTypes.func,open:f.PropTypes.bool,data:f.PropTypes.object,onNext:f.PropTypes.func,type:f.PropTypes.string,getRecentMembersCount:f.PropTypes.func,currentUser:f.PropTypes.object,team:f.PropTypes.object}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),c(t,[{key:"componentDidMount",value:function(){this.getSumPrice(),this.getRecentMembersCount()}},{key:"componentWillReceiveProps",value:function(e){var t=e.data.memberCount;this.setState({memberCount:t,quantity:l({},this.state.quantity,{value:t,realValue:t,error:this.checkMemberCount(t)})})}},{key:"componentDidUpdate",value:function(e,t){t.quantity.realValue===this.state.quantity.realValue&&t.quantity.error===this.state.quantity.error||this.getSumPrice()}},{key:"ajaxRetry",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return function(){t[e].apply(t,r)}}},{key:"calculateSumPrice",value:function(e,t,n){Promise.all(T.map(function(t){return(0,m.ajaxGet)("/smapi/orders/action/calculate?type=team&duration="+t.month+"&memberCount="+e+"&detail=1")})).then(function(n){var r=n.map(function(e){return(0,g.getAmount)(e.data.real)}),o=n.map(function(e){return(0,g.getAmount)(e.data.original)});"function"==typeof t&&t(e,r,o)}).catch(function(){"function"==typeof n&&n(e)})}},{key:"getSumPrice",value:function(){var e=this,t=this.state.quantity.realValue;if(!(t<=0)){var n=t===this.state.quantity.min||k[t]?0:800;n>0&&this.setState({price:l({},this.state.price,{loading:!0})}),setTimeout(function(){if(w===t){var n=k[t];n?e.setState({price:l({},e.state.price,{real:n.real,original:n.original,loading:!1}),ajaxError:null}):e.calculateSumPrice(t,function(t,n,r){e.state.quantity.error||(k[t]={real:n,original:r},e.state.quantity.realValue===t&&e.setState({price:l({},e.state.price,{real:n,original:r,loading:!1}),ajaxError:null}))},function(){e.setState({price:l({},e.state.price),ajaxError:{functionName:"getSumPrice",functionParams:[]}})})}else w=t,e.getSumPrice()},n)}}},{key:"checkMemberCount",value:function(e){var t=this.state.quantity;return isNaN(e)?"请输入数字":r.isInteger(e)?e<0?"请输入正整数":e<r.max([t.min,this.state.memberCount])?e<t.min?"最少购买 "+t.min+" 人":"不可小于当前企业人数 "+this.state.memberCount:null:"请输入整数"}},{key:"onQuantityChange",value:function(e){var t=this,n=(0,g.allowNumber)(e.target.value);null===this.checkMemberCount(n)?this.setState({quantity:l({},this.state.quantity,{value:n,realValue:n,error:null})}):(this.setState({quantity:l({},this.state.quantity,{value:n})}),setTimeout(function(){var n=(0,g.allowNumber)(e.target.value),r=t.checkMemberCount(n);null!==r&&t.setState({quantity:l({},t.state.quantity,{error:r})})},1e3))}},{key:"onPriceChange",value:function(e){var t=this.state.price;this.setState({price:l({},t,{selectedIndex:e})})}},{key:"onPaymentChange",value:function(e){var t=this.state.payment;this.setState({payment:l({},t,{selectedId:e})})}},{key:"onAgreeChange",value:function(){var e=this.state.agree;this.setState({agree:l({},e,{checked:!e.checked,error:!1})})}},{key:"navTo",value:function(e,t){var r=this,o=T[this.state.price.selectedIndex].month,i=this.state.quantity.realValue,a=(0,v.default)(e).when("alipay-qrcode","alipay_qr").when("waiting-pay","upacp").when("transfers-inventory","offline").done(),s=(0,v.default)(e).when("alipay-qrcode",{type:"team",duration:o,channel:a,member_count:i}).when("waiting-pay",{type:"team",duration:o,channel:a,member_count:i}).when("transfers-inventory",{skip_charge:1,duration:o,member_count:i,type:"team",channel:a}).done();this.setState({loadingDuringSubmitting:!0}),(0,m.ajaxPost)("/orders/create",s).then(function(o){if("alipay-qrcode"===e)r.props.onNext(e,l({},t,o.data,{purchase:r.state,needRefresh:!0}));else if("waiting-pay"===e)n.e(2).then(function(r){n(546).createPayment(o.data.charge,function(n){"success"===n?this.props.onNext(e,l({},t,o.data,{needRefresh:!0})):"fail"===n?this.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1}):"cancel"===n&&this.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1})})}.bind(null,n)).catch(n.oe);else{if("transfers-inventory"!==e)throw new Error("Unknown nextPage: "+e);r.props.onNext(e,l({},t,o.data,{needRefresh:!0}))}}).catch(function(){r.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1})})}},{key:"onSubmit",value:function(e){var t=this;return function(){var n=t.state,r=n.payment,o=n.agree;e?1===r.selectedId?t.navTo("alipay-qrcode"):2===r.selectedId?t.navTo("waiting-pay"):3===r.selectedId&&t.navTo("transfers-inventory"):o.checked||t.setState({agree:l({},o,{error:!0})})}}},{key:"showRecentMembers",value:function(){this.setState({showRecentMembers:!0})}},{key:"hideRecentMembers",value:function(){this.setState({showRecentMembers:!1})}},{key:"getRecentMembersCount",value:function(){var e=this;o.get("/smapi/teams/mine/members/recent_count").then(function(t){0===t.code&&e.setState({recentMembersCount:t.data})})}},{key:"renderRecentMembers",value:function(){return d.default.createElement(_.default,{onClose:this.hideRecentMembers})}},{key:"renderContent",value:function(){var e=this.state,t=e.quantity,n=e.price,r=e.payment,i=e.agree,a=e.unitPrice,s=e.ajaxError,u=e.loadingDuringSubmitting,l=document.getElementById("enterprise-payment-purchase-input"),c=Math.floor(216),f=Math.floor(388.8),p=n.loading,h=n.real[n.selectedIndex],m=this.props.type,y=!t.error&&l&&Number(l.value)>=t.min&&i.checked&&!p,g=this.props.team||window.cow.currentUser.team||this.props.currentUser.team;return d.default.createElement("div",{className:"purchase"},d.default.createElement("div",{className:"crumb-list"},d.default.createElement("span",{className:"crumb"},"确认订单"),d.default.createElement("span",{className:"hicon icon-breadcrumb"}),d.default.createElement("span",{className:"no-crumb"},"付款"),d.default.createElement("span",{className:"hicon icon-breadcrumb"}),d.default.createElement("span",{className:"no-crumb"},"填写发票信息")),(0,v.default)(m).when("supplementary",d.default.createElement("div",{className:"field first expired-time"},d.default.createElement("header",null,"当前企业版到期时间"),d.default.createElement("div",{className:"text"},"2017 / 07 / 12"))).others(null).done(),(0,v.default)(m).when("supplementary",null).others(d.default.createElement("div",{className:"field price-options"},d.default.createElement("header",null,"购买时长"),d.default.createElement("div",{className:"options-wrapper"},d.default.createElement(E,{index:0,active:0===n.selectedIndex,duration:T[0].text,price:54,onClick:this.onPriceChange,loading:!1}),d.default.createElement(E,{index:1,active:1===n.selectedIndex,duration:T[1].text,price:c,originPrice:216,onClick:this.onPriceChange,loading:!1}),d.default.createElement(E,{index:2,active:2===n.selectedIndex,duration:T[2].text,price:f,originPrice:432,discount:"nine",onClick:this.onPriceChange,loading:!1})))).done(),d.default.createElement("div",{className:"field quantity "+(0,v.default)(m).when("supplementary","").others("first").done()},d.default.createElement("header",null,"购买席位数"),d.default.createElement("div",{className:"input",onClick:function(){return o("#enterprise-payment-purchase-input").select()}},(0,v.default)(m).when("supplementary",d.default.createElement("label",{className:"placeholder"},a," 元 / 人")).done(),t.error?d.default.createElement("label",{className:"error"},t.error):null,d.default.createElement("input",{id:"enterprise-payment-purchase-input",type:"text",maxLength:"3",onChange:this.onQuantityChange,value:t.value})),g.dingtalkCorp?null:d.default.createElement("div",{className:"purchase-seatTips"},"您的企业最近有 ",d.default.createElement("span",{className:"count",onClick:this.showRecentMembers},this.state.recentMembersCount,"人"),"  使用石墨文档，推荐您购买 ",this.state.recentMembersCount+5," 席位")),d.default.createElement("div",{className:"field payment-options"},d.default.createElement("header",null,"支付方式"),d.default.createElement("div",{className:"options-wrapper"},d.default.createElement(C,{id:1,icon:"alipay",text:"支付宝",active:1===r.selectedId,onClick:this.onPaymentChange}),d.default.createElement(C,{id:3,icon:"transfers",text:"对公转账",active:3===r.selectedId,onClick:this.onPaymentChange}))),d.default.createElement("div",{className:"field sum-price"},d.default.createElement("div",{className:"sum-price-title"},"总计："),p?d.default.createElement("div",{className:"sum-price-number-loading"},"正在获取价格..."):d.default.createElement("div",{className:"sum-price-number"},"¥"," ",h,".00")),d.default.createElement("div",{className:"field agree"},s?d.default.createElement("span",{className:"error"},"网络异常，请重试"):i.error?d.default.createElement("span",{className:"error"},"请勾选同意"):null,d.default.createElement(M,{checked:i.checked,onClick:this.onAgreeChange},"我已阅读并同意签署",d.default.createElement("a",{target:"_blank",href:"https://shimo.im/agreement"},"《服务协议》"))),u?d.default.createElement("div",{className:"fluid-submit-button"},"...跳转中"):d.default.createElement("div",{className:"fluid-submit-button "+(y?"enabled":""),onClick:this.onSubmit(y)},p?"正在获取价格...":"下一步"))}},{key:"render",value:function(){var e=this.props.type,t=(0,v.default)(e).when("renew","续约企业版").when("supplementary","补充席位").others("购买企业版").done();return this.state.showRecentMembers?d.default.createElement(h.default,{key:"1",ref:"flatDialog",customClass:"purchase-recentMembers",title:"最近使用石墨文档的成员",open:this.props.open,onClose:this.hideRecentMembers,bodyTpl:this.renderRecentMembers}):d.default.createElement(h.default,{key:"2",customClass:"purchase-dialog"+(this.props.data.loading?" purchase-loading":""),ref:"flatDialog",title:t,hasCloseButton:!0,onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(f.Component);t.default=S,e.exports=t.default}).call(t,n(1),n(2))},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={recentMembers:[]},n.close=n.close.bind(n),n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{onClose:l.PropTypes.func}}}]),u(t,[{key:"componentDidMount",value:function(){var e=this;r.get("/smapi/teams/mine/members/recent").then(function(t){0===t.code&&e.setState({recentMembers:t.data})})}},{key:"close",value:function(){this.props.onClose()}},{key:"render",value:function(){return c.default.createElement("div",{className:"recentMembersList"},c.default.createElement("div",{className:"member-header"},c.default.createElement("div",{className:"header-member"},"成员"),c.default.createElement("div",{className:"header-email"},"邮箱"),c.default.createElement("div",{className:"header-lastVisit"},"上次登陆时间")),this.state.recentMembers.map(function(e){return c.default.createElement("div",{key:e.id,className:"row"},c.default.createElement("div",{className:"avatarAndName"},c.default.createElement("img",{className:"avatar",src:e.avatar,alt:""}),c.default.createElement("div",{className:"name"},e.name)),c.default.createElement("div",{className:"email"},e.email),c.default.createElement("div",{className:"lastVisit"},e.last_visit.slice(0,-14).replace(/-/g,"/")))}),c.default.createElement("div",{className:"bottom"},c.default.createElement("div",{className:"submit-button enabled",onClick:this.close},"知道了")))}}]),t}(c.default.Component);t.default=f,e.exports=t.default}).call(t,n(2))},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),d=i(f),p=n(51),h=i(p),m=n(144),y=n(189),v=i(y),g=n(190),b=0,_={},w=function(e){var t=e.index,n=e.duration,r=e.price,o=e.active,i=e.originPrice,a=e.discount,s=e.loading,u=e.onClick;return d.default.createElement("div",{className:o?"option-outer-border active":"option-outer-border",onClick:function(){u(t)}},s||0===r?d.default.createElement("div",{className:"option"},d.default.createElement("div",{className:"year"},n),d.default.createElement("div",{className:"price"},"正在获取价格...")):d.default.createElement("div",{className:"option"},d.default.createElement("div",{className:"year"},n),d.default.createElement("div",{className:"price"},"¥"," ",r," ","/"," ","人",i&&a?d.default.createElement("span",{className:"origin-price"},"¥ ",i):null),a?d.default.createElement("div",{className:"discount "+a}):null))};w.propTypes={index:f.PropTypes.number,duration:f.PropTypes.string,price:f.PropTypes.oneOfType([f.PropTypes.string,f.PropTypes.number]),active:f.PropTypes.bool,originPrice:f.PropTypes.oneOfType([f.PropTypes.string,f.PropTypes.number]),discount:f.PropTypes.string,loading:f.PropTypes.bool,onClick:f.PropTypes.func};var k=function(e){var t=e.id,n=e.icon,r=e.text,o=e.active,i=e.onClick;return d.default.createElement("div",{onClick:function(){i(t)},className:o?"option-outer-border active":"option-outer-border"},d.default.createElement("div",{className:"option "+n},r))};k.propTypes={id:f.PropTypes.number,icon:f.PropTypes.string,text:f.PropTypes.string,active:f.PropTypes.bool,onClick:f.PropTypes.func};var E=function(e){var t=e.children,n=e.checked,r=e.onClick;return d.default.createElement("div",{className:"checkbox noselect "+(n?"checked":"")},d.default.createElement("span",{onClick:r},t))};E.propTypes={checked:f.PropTypes.bool,onClick:f.PropTypes.func};var C=[{index:1,month:12,text:"1 年"},{index:2,month:24,text:"2 年"}],M=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.data.memberCount||0,o={memberCount:r,quantity:{min:5,value:r,realValue:r,error:null},price:{selectedIndex:0,real:[0,0],original:[0,0],sum:[0,0],loading:!1},payment:{selectedId:1},agree:{checked:!1,error:!1},ajaxError:null,loadingDuringSubmitting:!1},i=e.data.purchase?l({},e.data.purchase,{quantity:{value:e.data.purchase.quantity.realValue+e.data.memberCount,realValue:e.data.purchase.quantity.realValue+e.data.memberCount}}):{quantity:null};return n.state=l({},o,i,{quantity:l({},o.quantity,i.quantity),loadingDuringSubmitting:!1}),n.onQuantityChange=n.onQuantityChange.bind(n),n.onPriceChange=n.onPriceChange.bind(n),n.onPaymentChange=n.onPaymentChange.bind(n),n.onAgreeChange=n.onAgreeChange.bind(n),n.onSubmit=n.onSubmit.bind(n),n.ajaxRetry=n.ajaxRetry.bind(n),n.renderContent=n.renderContent.bind(n),n}return u(t,e),c(t,null,[{key:"propTypes",get:function(){return{data:f.PropTypes.object,onNext:f.PropTypes.func,onClose:f.PropTypes.func,open:f.PropTypes.bool}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),c(t,[{key:"componentDidMount",value:function(){this.getSumPrice()}},{key:"componentWillReceiveProps",value:function(e){var t=e.data.memberCount;this.setState({memberCount:t,quantity:l({},this.state.quantity,{value:t,realValue:t,error:this.checkMemberCount(t)})})}},{key:"componentDidUpdate",value:function(e,t){t.quantity.realValue===this.state.quantity.realValue&&t.quantity.error===this.state.quantity.error||this.getSumPrice()}},{key:"ajaxRetry",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return function(){t[e].apply(t,r)}}},{key:"calculateSumPrice",value:function(e,t,n){var r=this;Promise.all(C.map(function(t){return(0,m.ajaxGet)("/smapi/orders/action/calculate?type=team&duration="+t.month+"&memberCount="+e+"&detail=1")})).then(function(n){var o=n.map(function(e){return Math.floor((0,g.getAmount)(e.data.real/r.state.quantity.realValue))}),i=n.map(function(e){return Math.floor((0,g.getAmount)(e.data.original/r.state.quantity.realValue))}),a=n.map(function(e){return(0,g.getAmount)(e.data.real)});"function"==typeof t&&t(e,o,i,a)}).catch(function(){"function"==typeof n&&n(e)})}},{key:"getSumPrice",value:function(){var e=this,t=this.state.quantity.realValue-this.state.memberCount,n=0===t||_[t]?0:800;n>0&&this.setState({price:l({},this.state.price,{loading:!0})}),setTimeout(function(){if(b===t){var n=_[t];n?e.setState({price:l({},e.state.price,{real:n.real,original:n.original,sum:n.sum,loading:!1}),ajaxError:null}):e.calculateSumPrice(t,function(t,n,r,o){e.state.quantity.error||(_[t]={real:n,original:r,sum:o},e.state.quantity.realValue-e.state.memberCount===t&&e.setState({price:l({},e.state.price,{real:n,original:r,sum:o,loading:!1}),ajaxError:null}))},function(){e.setState({price:l({},e.state.price),ajaxError:{functionName:"getSumPrice",functionParams:[]}})})}else b=t,e.getSumPrice()},n)}},{key:"checkMemberCount",value:function(e){var t=this.state.quantity;return isNaN(e)?"请输入数字":r.isInteger(e)?e<0?"请输入正整数":e<r.max([t.min,this.state.memberCount])?e<t.min?"最少购买 "+t.min+" 人":"不可小于当前企业席位数 "+this.state.memberCount:null:"请输入整数"}},{key:"onQuantityChange",value:function(e){var t=this,n=(0,g.allowNumber)(e.target.value);null===this.checkMemberCount(n)?this.setState({quantity:l({},this.state.quantity,{value:n,realValue:n,error:null})}):(this.setState({quantity:l({},this.state.quantity,{value:n})}),setTimeout(function(){var n=(0,g.allowNumber)(e.target.value),r=t.checkMemberCount(n);null!==r&&t.setState({quantity:l({},t.state.quantity,{error:r})})},1e3))}},{key:"onPriceChange",value:function(e){var t=this.state.price;this.setState({price:l({},t,{selectedIndex:e})})}},{key:"onPaymentChange",value:function(e){var t=this.state.payment;this.setState({payment:l({},t,{selectedId:e})})}},{key:"onAgreeChange",value:function(){var e=this.state.agree;this.setState({agree:l({},e,{checked:!e.checked,error:!1})})}},{key:"navTo",value:function(e,t){var r=this,o=C[this.state.price.selectedIndex].month,i=this.state.quantity.realValue,a=this.state.memberCount,s=(0,v.default)(e).when("alipay-qrcode","alipay_qr").when("waiting-pay","upacp").when("transfers-inventory","offline").done(),u=(0,v.default)(e).when("alipay-qrcode",{type:"team",duration:o,channel:s,member_count:i-a}).when("waiting-pay",{type:"team",duration:o,channel:s,member_count:i-a}).when("transfers-inventory",{skip_charge:1,duration:o,member_count:i-a,type:"team",channel:s}).done();this.setState({loadingDuringSubmitting:!0}),(0,m.ajaxPost)("/orders/create",u).then(function(o){if("alipay-qrcode"===e)r.props.onNext(e,l({},t,o.data,{purchase:l({},r.state,{quantity:{realValue:r.state.quantity.realValue-r.state.memberCount,value:r.state.quantity.realValue-r.state.memberCount}}),needRefresh:!0}));else if("waiting-pay"===e)n.e(2).then(function(r){n(546).createPayment(o.data.charge,function(n){"success"===n?this.props.onNext(e,l({},t,o.data,{needRefresh:!0})):"fail"===n?this.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1}):"cancel"===n&&this.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1})})}.bind(null,n)).catch(n.oe);else{if("transfers-inventory"!==e)throw new Error("Unknown nextPage: "+e);r.props.onNext(e,l({},t,o.data,{needRefresh:!0}))}}).catch(function(){r.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1})})}},{key:"onSubmit",value:function(e){var t=this;return function(){var n=t.state,r=n.payment,o=n.agree;e?1===r.selectedId?t.navTo("alipay-qrcode"):2===r.selectedId?t.navTo("waiting-pay"):3===r.selectedId&&t.navTo("transfers-inventory"):o.checked||t.setState({agree:l({},o,{error:!0})})}}},{key:"renderContent",value:function(){var e=this.state,t=e.quantity,n=e.price,r=e.payment,i=e.agree,a=e.ajaxError,s=e.loadingDuringSubmitting,u=document.getElementById("enterprise-payment-purchase-input"),l=n.real[0],c=n.real[1],f=n.loading,p=n.original[0],h=n.original[1],m=n.sum[n.selectedIndex],y=!t.error&&u&&Number(u.value)>=t.min&&i.checked&&!f;return d.default.createElement("div",{id:"renew",className:"purchase"},d.default.createElement("div",{className:"crumb-list"},d.default.createElement("span",{className:"crumb"},"确认订单"),d.default.createElement("span",{className:"hicon icon-breadcrumb"}),d.default.createElement("span",{className:"no-crumb"},"付款"),d.default.createElement("span",{className:"hicon icon-breadcrumb"}),d.default.createElement("span",{className:"no-crumb"},"填写发票信息")),d.default.createElement("div",{className:"field price-options"},d.default.createElement("header",null,"续约时长"),d.default.createElement("div",{className:"options-wrapper"},d.default.createElement(w,{index:0,active:0===n.selectedIndex,duration:C[0].text,price:l,originPrice:p,loading:f,onClick:this.onPriceChange}),d.default.createElement(w,{index:1,active:1===n.selectedIndex,duration:C[1].text,price:c,originPrice:h,discount:"nine",loading:f,onClick:this.onPriceChange}))),d.default.createElement("div",{className:"field quantity first"},d.default.createElement("header",null,"续约席位数"),d.default.createElement("div",{className:"input",onClick:function(){return o("#enterprise-payment-purchase-input").select()}},t.error?d.default.createElement("label",{className:"error"},t.error):null,d.default.createElement("input",{id:"enterprise-payment-purchase-input",type:"text",disabled:!0,maxLength:"3",onChange:this.onQuantityChange,value:t.value}))),d.default.createElement("div",{className:"field payment-options"},d.default.createElement("header",null,"支付方式"),d.default.createElement("div",{className:"options-wrapper"},d.default.createElement(k,{id:1,icon:"alipay",text:"支付宝",active:1===r.selectedId,onClick:this.onPaymentChange}),d.default.createElement(k,{id:3,icon:"transfers",text:"对公转账",active:3===r.selectedId,onClick:this.onPaymentChange}))),d.default.createElement("div",{className:"field sum-price"},d.default.createElement("div",{className:"sum-price-title"},"总计："),f?d.default.createElement("div",{className:"sum-price-number-loading"},"正在获取价格..."):d.default.createElement("div",{className:"sum-price-number"},"¥"," ",m,".00")),d.default.createElement("div",{className:"field agree"},a?d.default.createElement("span",{className:"error"},"网络异常，请重试"):i.error?d.default.createElement("span",{className:"error"},"请勾选同意"):null,d.default.createElement(E,{checked:i.checked,onClick:this.onAgreeChange},"我已阅读并同意签署",d.default.createElement("a",{target:"_blank",href:"https://shimo.im/agreement"},"《服务协议》"))),s?d.default.createElement("div",{className:"fluid-submit-button"},"...跳转中"):d.default.createElement("div",{className:"fluid-submit-button "+(y?"enabled":""),onClick:this.onSubmit(y)},f?"正在获取价格...":"下一步"))}},{key:"render",value:function(){return d.default.createElement(h.default,{customClass:"purchase-dialog"+(this.props.data.loading?" purchase-loading":""),ref:"flatDialog",hasCloseButton:!0,title:"续约企业版",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(f.Component);t.default=M,e.exports=t.default}).call(t,n(1),n(2))},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),d=i(f),p=n(51),h=i(p),m=n(144),y=n(189),v=i(y),g=n(190),b=0,_={},w=function(e){var t=e.id,n=e.icon,r=e.text,o=e.active,i=e.onClick;return d.default.createElement("div",{onClick:function(){i(t)},className:o?"option-outer-border active":"option-outer-border"},d.default.createElement("div",{className:"option "+n},r))};w.propTypes={id:f.PropTypes.number,icon:f.PropTypes.string,text:f.PropTypes.string,active:f.PropTypes.bool,onClick:f.PropTypes.func};var k=function(e){var t=e.children,n=e.checked,r=e.onClick;return d.default.createElement("div",{className:"checkbox noselect "+(n?"checked":"")},d.default.createElement("span",{onClick:r},t))};k.propTypes={checked:f.PropTypes.bool,onClick:f.PropTypes.func};var E=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r={unitPrice:0,quantity:{min:1,value:1,realValue:1,error:null},price:{loading:!1},sumPrice:0,payment:{selectedId:1},agree:{checked:!1,error:!1},ajaxError:null,loadingDuringSubmitting:!1},o=e.data.purchase?e.data.purchase:{quantity:null};return n.state=l({},r,e.data.purchase,{quantity:l({},r.quantity,o.quantity),loadingDuringSubmitting:!1}),n.onQuantityChange=n.onQuantityChange.bind(n),n.onPaymentChange=n.onPaymentChange.bind(n),n.onAgreeChange=n.onAgreeChange.bind(n),n.onSubmit=n.onSubmit.bind(n),n.ajaxRetry=n.ajaxRetry.bind(n),n.renderContent=n.renderContent.bind(n),n}return u(t,e),c(t,null,[{key:"propTypes",get:function(){return{data:f.PropTypes.object,onClose:f.PropTypes.func,open:f.PropTypes.bool,onNext:f.PropTypes.func}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),c(t,[{key:"componentDidMount",value:function(){this.getSumPrice()}},{key:"componentDidUpdate",value:function(e,t){t.quantity.realValue===this.state.quantity.realValue&&t.quantity.error===this.state.quantity.error||this.getSumPrice()}},{key:"ajaxRetry",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return function(){t[e].apply(t,r)}}},{key:"calculateSumPrice",value:function(e,t,n){(0,m.ajaxGet)("/smapi/orders/action/calculate?type=team&duration=0&memberCount="+e).then(function(n){var r=(0,g.getAmount)(n.data),o=(0,g.getAmount)(n.data/e);"function"==typeof t&&t(e,r,o)}).catch(function(){"function"==typeof n&&n(e)})}},{key:"getSumPrice",value:function(){var e=this,t=this.state.quantity.realValue,n=t===this.state.quantity.min||_[t]?0:800;n>0&&this.setState({price:l({},this.state.price,{loading:!0})}),setTimeout(function(){if(b===t){var n=_[t];n?e.setState({price:l({},e.state.price,{loading:!1}),sumPrice:n.sumPrice,unitPrice:n.unitPrice,ajaxError:null}):e.calculateSumPrice(t,function(t,n,r){e.state.quantity.error||(_[t]={sumPrice:n,unitPrice:r},e.setState({price:l({},e.state.price,{loading:!1}),sumPrice:n,unitPrice:r,ajaxError:null}))},function(){e.setState({ajaxError:{functionName:"getSumPrice",functionParams:[]}})})}else b=t,e.getSumPrice()},n)}},{key:"checkMemberCount",value:function(e){var t=this.state.quantity;return isNaN(e)?"请输入数字":r.isInteger(e)?e<0?"请输入正整数":e<t.min?"最少购买 "+t.min+" 人":null:"请输入整数"}},{key:"onQuantityChange",value:function(e){var t=this,n=(0,g.allowNumber)(e.target.value);null===this.checkMemberCount(n)?this.setState({quantity:l({},this.state.quantity,{value:n,realValue:n,error:null})}):(this.setState({quantity:l({},this.state.quantity,{value:n})}),setTimeout(function(){var n=(0,g.allowNumber)(e.target.value),r=t.checkMemberCount(n);null!==r&&t.setState({quantity:l({},t.state.quantity,{error:r})})},1e3))}},{key:"onPaymentChange",value:function(e){var t=this.state.payment;this.setState({payment:l({},t,{selectedId:e})})}},{key:"onAgreeChange",value:function(){var e=this.state.agree;this.setState({agree:l({},e,{checked:!e.checked,error:!1})})}},{key:"navTo",value:function(e,t){var r=this,o=this.state.quantity.realValue,i=(0,v.default)(e).when("alipay-qrcode","alipay_qr").when("waiting-pay","upacp").when("transfers-inventory","offline").done(),a=(0,v.default)(e).when("alipay-qrcode",{type:"team",duration:0,channel:i,member_count:o}).when("waiting-pay",{type:"team",duration:0,channel:i,member_count:o}).when("transfers-inventory",{skip_charge:1,duration:0,member_count:o,type:"team",channel:i}).done();this.setState({loadingDuringSubmitting:!0}),(0,m.ajaxPost)("/orders/create",a).then(function(o){if("alipay-qrcode"===e)r.props.onNext(e,l({},t,o.data,{purchase:r.state,needRefresh:!0}));else if("waiting-pay"===e)n.e(2).then(function(r){n(546).createPayment(o.data.charge,function(n){"success"===n?this.props.onNext(e,l({},t,o.data,{needRefresh:!0})):"fail"===n?this.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1}):"cancel"===n&&this.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1})})}.bind(null,n)).catch(n.oe);else{if("transfers-inventory"!==e)throw new Error("Unknown nextPage: "+e);r.props.onNext(e,l({},t,o.data,{needRefresh:!0}))}}).catch(function(){r.setState({ajaxError:{functionName:"navTo",functionParams:[e,t]},loadingDuringSubmitting:!1})})}},{key:"onSubmit",value:function(e){var t=this;return function(){var n=t.state,r=n.payment,o=n.agree;e?1===r.selectedId?t.navTo("alipay-qrcode"):2===r.selectedId?t.navTo("waiting-pay"):3===r.selectedId&&t.navTo("transfers-inventory",{durationDesc:"",discount:""}):o.checked||t.setState({agree:l({},o,{error:!0})})}}},{key:"renderContent",value:function(){var e=this.state,t=e.quantity,n=e.payment,r=e.agree,i=e.unitPrice,a=e.price,s=e.ajaxError,u=e.sumPrice,l=e.loadingDuringSubmitting,c=document.getElementById("enterprise-payment-purchase-input"),f=a.loading,p=!t.error&&c&&Number(c.value)>=t.min&&r.checked&&!f,h=function(){var e=function(e){return e>0&&e<10?"0"+e:e},t=new Date(cow.currentUser.accountTypeExpiredAt);return t.getFullYear()+" / "+e(t.getMonth()+1)+" / "+e(t.getDate())}();return d.default.createElement("div",{className:"purchase"},d.default.createElement("div",{className:"crumb-list"},d.default.createElement("span",{className:"crumb"},"确认订单"),d.default.createElement("span",{className:"hicon icon-breadcrumb"}),d.default.createElement("span",{className:"no-crumb"},"付款"),d.default.createElement("span",{className:"hicon icon-breadcrumb"}),d.default.createElement("span",{className:"no-crumb"},"填写发票信息")),d.default.createElement("div",{className:"field first expired-time"},d.default.createElement("header",null,"当前企业版到期时间"),d.default.createElement("div",{className:"text"},h)),d.default.createElement("div",{className:"field quantity"},d.default.createElement("header",null,"补充席位数"),d.default.createElement("div",{className:"input",onClick:function(){return o("#enterprise-payment-purchase-input").select()}},f&&!i?null:d.default.createElement("label",{className:"placeholder"},i," 元 / 人"),t.error?d.default.createElement("label",{className:"error"},t.error):null,d.default.createElement("input",{id:"enterprise-payment-purchase-input",type:"text",maxLength:"3",onChange:this.onQuantityChange,value:t.value}))),d.default.createElement("div",{className:"field payment-options"},d.default.createElement("header",null,"支付方式"),d.default.createElement("div",{className:"options-wrapper"},d.default.createElement(w,{id:1,icon:"alipay",text:"支付宝",active:1===n.selectedId,onClick:this.onPaymentChange}),d.default.createElement(w,{id:3,icon:"transfers",text:"对公转账",active:3===n.selectedId,onClick:this.onPaymentChange}))),d.default.createElement("div",{className:"field agree"},s?d.default.createElement("span",{className:"error"},"网络异常，请重试"):r.error?d.default.createElement("span",{className:"error"},"请勾选同意"):null,d.default.createElement(k,{checked:r.checked,onClick:this.onAgreeChange},"我已阅读并同意签署",d.default.createElement("a",{target:"_blank",href:"https://shimo.im/agreement"},"《服务协议》"))),l?d.default.createElement("div",{className:"fluid-submit-button"},"...跳转中"):d.default.createElement("div",{className:"fluid-submit-button "+(p?"enabled":""),onClick:this.onSubmit(p)},f?"正在获取价格...":"确认支付 ¥ "+u))}},{key:"render",value:function(){return d.default.createElement(h.default,{customClass:"purchase-dialog"+(this.props.data.loading?" purchase-loading":""),ref:"flatDialog",hasCloseButton:!0,title:"补充席位",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(f.Component);t.default=E,e.exports=t.default}).call(t,n(1),n(2))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(51),d=r(f),p=n(189),h=r(p),m=n(5),y=r(m),v=n(144),g=n(190),b=n(9),_=r(b),w=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!1},n.navTo=n.navTo.bind(n),n.onClickHere=n.onClickHere.bind(n),n.renderContent=n.renderContent.bind(n),n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{onNext:l.PropTypes.func,data:l.PropTypes.object,type:l.PropTypes.string,onClose:l.PropTypes.func,open:l.PropTypes.bool}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),u(t,[{key:"componentDidMount",value:function(){_.default.attach("enterprise-payment:payment-success",this.navToPaymentSuccess,{scope:this,isAsync:!0})}},{key:"componentWillUnmount",value:function(){_.default.detach("enterprise-payment:payment-success",this.navToPaymentSuccess)}},{key:"navToPaymentSuccess",value:function(){this.props.onNext("payment-success",s({},this.props.data))}},{key:"navTo",value:function(e,t){var n=this;return function(){n.props.onNext(e,t)}}},{key:"onClickHere",value:function(){var e=this;return function(){var t=e.props.data.charge.id;e.setState({loading:!0}),(0,v.ajaxPost)("/orders/payment_succeed",{charge_id:t}).then(function(t){!0===t.data.paid?e.props.onNext("payment-success",s({},e.props.data)):e.setState({loading:!1})}).catch(function(){e.setState({loading:!1})})}}},{key:"renderContent",value:function(){var e=this.state.loading,t=this.props.data,n=function(){var e=t.charge,n=e.credential,r=n[e.channel];return y.default.getQrImageUrl(300,r)}();return c.default.createElement("div",{className:"alipay-qrcode"},c.default.createElement("div",{className:"crumb-list"},c.default.createElement("span",{className:"no-crumb back",onClick:this.navTo("purchase")},"确认订单"),c.default.createElement("span",{className:"hicon icon-breadcrumb"}),c.default.createElement("span",{className:"crumb"},"付款"),c.default.createElement("span",{className:"hicon icon-breadcrumb"}),c.default.createElement("span",{className:"no-crumb"},"填写发票信息")),c.default.createElement("div",{className:"qrcode-container"},c.default.createElement("header",null,"请用支付宝扫码完成支付"),c.default.createElement("div",{className:"qrcode",style:{backgroundImage:"url("+n+")"}}),c.default.createElement("footer",null,"扫码支付后，如果没有自动跳转",c.default.createElement("br",null),e?c.default.createElement("span",{className:"link"},"...跳转中"):c.default.createElement("span",{className:"link",onClick:this.onClickHere()},"请点这里"))))}},{key:"render",value:function(){var e=this.props.data,t=this.props.type,n=(0,g.getAmount)(e.order.amount),r=(0,h.default)(t).when("renew","续约企业版").when("supplementary","补充席位").others("购买企业版").done();return c.default.createElement(d.default,{customClass:"alipay-qrcode-dialog",ref:"flatDialog",hasCloseButton:!0,title:r+" 支付 ¥ "+n,onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(l.Component);t.default=w,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(51),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.timer=null,n.navTo=n.navTo.bind(n),n.renderContent=n.renderContent.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{onClose:u.PropTypes.func,open:u.PropTypes.bool,data:u.PropTypes.object,onNext:u.PropTypes.func}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),s(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.data;this.timer=setTimeout(function(){e.props.onNext("fill-invoice-info",t)},1500)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"navTo",value:function(e){var t=this;return function(){t.props.onNext(e)}}},{key:"renderContent",value:function(){return l.default.createElement("div",{className:"payment-success"},l.default.createElement("div",{className:"success-icon"}),l.default.createElement("div",{className:"success-text"},"支付成功"),l.default.createElement("footer",null,"如果没有自动跳转",l.default.createElement("br",null),l.default.createElement("span",{className:"link",onClick:this.navTo("fill-invoice-info")},"请点这里")))}},{key:"render",value:function(){return l.default.createElement(f.default,{customClass:"payment-success-dialog",ref:"flatDialog",hasCloseButton:!0,title:"",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(51),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navTo=n.navTo.bind(n),n.renderContent=n.renderContent.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{onClose:u.PropTypes.func,open:u.PropTypes.bool,onNext:u.PropTypes.func}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),s(t,[{key:"navTo",value:function(e){var t=this;return function(){t.props.onNext(e)}}},{key:"renderContent",value:function(){return l.default.createElement("div",{className:"payment-failure"},l.default.createElement("header",null,"支付失败"),l.default.createElement("div",{className:"failure-text"},"如您有任何疑问，请立即联系我们的客户顾问帮助您解决"),l.default.createElement("div",{className:"telephone"},"电话 400-006-0506"),l.default.createElement("div",{className:"center"},l.default.createElement("div",{className:"submit-button enabled",onClick:this.navTo("purchase")},"重新支付")))}},{key:"render",value:function(){return l.default.createElement(f.default,{customClass:"payment-failure-dialog",ref:"flatDialog",hasCloseButton:!0,title:"",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(51),f=r(c),d=n(189),p=r(d),h=n(190),m=function(e){return Math.round(e/31)},y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navTo=n.navTo.bind(n),n.renderContent=n.renderContent.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{data:u.PropTypes.object,onClose:u.PropTypes.func,open:u.PropTypes.bool,onNext:u.PropTypes.func,type:u.PropTypes.string}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),s(t,[{key:"navTo",value:function(e){var t=this;return function(){var n=t.props.data.order,r=t.props.type;t.props.onNext(e,{purchase:{quantity:{value:String(n.memberCount),realValue:n.memberCount,error:null},price:function(){return"normal"===r?{selectedIndex:m(n.duration)<12?0:m(n.duration)<24?1:2,real:[0,0,0],original:[0,0,0]}:"renew"===r?{selectedIndex:m(n.duration)>=24?1:0,real:[0,0],original:[0,0]}:{}}(),payment:{selectedId:3},agree:{checked:!0,error:!1},ajaxError:null,loadingDuringSubmitting:!1}})}}},{key:"renderContent",value:function(){var e=this.props.type,t=this.props.data.order,n=t.memberCount,r=t.amount,o=t.orderNo,i=t.duration,a=m(i),s=a<12?" "+a+" 个月":a>=12&&a<24?" 1 年":" 2 年",u=a<12?"":a>=12&&a<24?"（八折）":"（七折）",c=function(){return"renew"===e?0===n?"延长"+s+"使用期"+u:"补充 "+n+" 席位，延长"+s+"使用期"+u:"supplementary"===e?"补充 "+n+" 席位":"购买 "+n+" 席位，"+s+"使用期"+u}(),f=cow.currentUser.team.enterpriseId.length<8?"0"+cow.currentUser.team.enterpriseId:cow.currentUser.team.enterpriseId;return l.default.createElement("div",{className:"transfers-inventory"},l.default.createElement("section",null,l.default.createElement("div",{className:"two-column-grid"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"left-column"},"转账金额"),l.default.createElement("div",{className:"right-column"},l.default.createElement("strong",null,(0,h.getAmount)(r)," 元"))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"left-column"},"收款公司名"),l.default.createElement("div",{className:"right-column"},l.default.createElement("strong",null,"武汉初心科技有限公司"))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"left-column"},"收款账户"),l.default.createElement("div",{className:"right-column"},l.default.createElement("strong",null,"1279 0701 9410 802 ",f))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"left-column"},"开户行"),l.default.createElement("div",{className:"right-column"},l.default.createElement("strong",null,"招商银行武汉分行光谷科技支行"))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"left-column"},"开户地"),l.default.createElement("div",{className:"right-column"},l.default.createElement("strong",null,"武汉"))))),l.default.createElement("section",null,l.default.createElement("div",{className:"two-column-grid"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"left-column"},"订单号"),l.default.createElement("div",{className:"right-column"},o)),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"left-column"},"订单详情"),l.default.createElement("div",{className:"right-column"},c)))),l.default.createElement("section",null,l.default.createElement("div",{className:"noting"},"请于 ",l.default.createElement("strong",null,"10日")," 内完成转账，我们会尽快确认到账并开通服务。如您有任何疑问，请立即联系我们的客户顾问帮助您解决，电话 400-006-0506")),l.default.createElement("footer",null,l.default.createElement("div",{className:"submit-button enabled",onClick:this.props.onClose},"知道了"),l.default.createElement("div",{className:"submit-button flat",onClick:this.navTo("purchase")},"更改支付方式")))}},{key:"render",value:function(){var e=this.props.data.order.amount,t=this.props.type,n=(0,p.default)(t).when("renew","续约企业版").when("supplementary","补充席位").others("购买企业版").done();return l.default.createElement(f.default,{customClass:"transfers-inventory-dialog",ref:"flatDialog",hasCloseButton:!0,title:n+" 对公转账 ¥ "+(0,h.getAmount)(e),onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(u.Component);t.default=y,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(51),d=r(f),p=n(144),h=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.data.invoice,a=r.taxType,s=r.amount,u=r.title,l=r.address,c=r.contact,f=r.phone;return n.state={taxType:a,amount:s,title:u,address:l,contact:c,phone:f,loading:!1,error:!1},n.navTo=n.navTo.bind(n),n.submit=n.submit.bind(n),n.renderContent=n.renderContent.bind(n),n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{onClose:l.PropTypes.func,open:l.PropTypes.bool,data:l.PropTypes.object,onNext:l.PropTypes.func}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),u(t,[{key:"navTo",value:function(e,t){var n=this;return function(){n.props.onNext(e,{fillInvoiceInfo:s({},n.props.data.fillInvoiceInfo,{selectedIndex:0},t)})}}},{key:"submit",value:function(){var e=this,t=this.state,n=t.taxType,r=t.title,o=t.contact,i=t.phone,a=t.address;this.setState({loading:!0}),(0,p.ajaxPost)("/smapi/invoices",{taxType:n,title:r,contact:o,phone:i,address:a}).then(function(){e.props.onNext("thanks-to-buy",{needRefresh:!0})}).catch(function(){e.setState({loading:!1,error:!0})})}},{key:"renderContent",value:function(){var e=this.state,t=e.amount,n=e.title,r=e.address,o=e.contact,i=e.phone,a=e.loading,s=e.error;return c.default.createElement("div",{className:"confirm-invoice-info"},c.default.createElement("section",null,c.default.createElement("div",{className:"two-column-grid"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"发票金额"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,t," 元"))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"发票抬头"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,n))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"发票邮寄地址"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,r))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"收件人"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,o))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"联系电话"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,i))))),s?c.default.createElement("section",{className:"error"},"网络异常，请重试"):c.default.createElement("section",{className:"noting"},"确认后不能修改发票信息，不能重开发票"),c.default.createElement("footer",null,a?c.default.createElement("div",{className:"submit-button"},"...跳转中"):c.default.createElement("div",{className:"submit-button enabled",onClick:this.submit},"确认提交"),c.default.createElement("div",{className:"submit-button flat",onClick:this.navTo("fill-invoice-info",{modify:!0})},"修改信息")))}},{key:"render",value:function(){return c.default.createElement(d.default,{customClass:"confirm-invoice-info-dialog",ref:"flatDialog",hasCloseButton:!0,title:"请确认发票信息",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(l.Component);t.default=h,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(51),d=r(f),p=n(144),h=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n.props.data.VATInvoice,a=r.amount,s=r.taxType,u=r.contact,l=r.phone,c=r.address,f=r.taxpayer,d=r.taxpayerId,p=r.bank,h=r.bankAccount,m=r.companyAddress,y=r.companyPhone;return n.state={amount:a,taxType:s,contact:u,phone:l,address:c,taxpayer:f,taxpayerId:d,bank:p,bankAccount:h,companyAddress:m,companyPhone:y,loading:!1,error:!1},n.submit=n.submit.bind(n),n.renderContent=n.renderContent.bind(n),n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{onClose:l.PropTypes.func,open:l.PropTypes.bool,data:l.PropTypes.object,onNext:l.PropTypes.func}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),u(t,[{key:"navTo",value:function(e,t){var n=this;return function(){n.props.onNext(e,{fillInvoiceInfo:s({},n.props.data.fillInvoiceInfo,{selectedIndex:1},t)})}}},{key:"submit",value:function(){var e=this,t=this.state,n=t.taxType,r=t.contact,o=t.phone,i=t.address,a=t.taxpayer,s=t.taxpayerId,u=t.bank,l=t.bankAccount,c=t.companyAddress,f=t.companyPhone;this.setState({loading:!0}),(0,p.ajaxPost)("/smapi/invoices",{taxType:n,contact:r,phone:o,address:i,taxpayer:a,taxpayerId:s,bank:u,bankAccount:l,companyAddress:c,companyPhone:f}).then(function(){e.props.onNext("thanks-to-buy",{needRefresh:!0})}).catch(function(){e.setState({loading:!1,error:!0})})}},{key:"renderContent",value:function(){var e=this.state,t=e.amount,n=e.contact,r=e.phone,o=e.address,i=e.taxpayer,a=e.taxpayerId,s=e.bank,u=e.bankAccount,l=e.companyAddress,f=e.companyPhone,d=e.loading,p=e.error;return c.default.createElement("div",{className:"confirm-vat-invoice-info"},c.default.createElement("section",null,c.default.createElement("div",{className:"two-column-grid"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"发票金额"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,t," 元"))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"纳税人名称"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,i))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"纳税人识别号"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,a))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"公司地址"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,l))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"开户银行"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,s))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"银行账户"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,u))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"联系电话"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,f))))),c.default.createElement("section",null,c.default.createElement("div",{className:"two-column-grid"},c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"发票邮寄地址"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,o))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"收件人"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,n))),c.default.createElement("div",{className:"row"},c.default.createElement("div",{className:"left-column"},"联系电话"),c.default.createElement("div",{className:"right-column"},c.default.createElement("strong",null,r))))),p?c.default.createElement("section",{className:"error"},"网络异常，请重试"):c.default.createElement("section",{className:"noting"},"确认后不能修改发票信息，不能重开发票"),c.default.createElement("footer",null,d?c.default.createElement("div",{className:"submit-button"},"...跳转中"):c.default.createElement("div",{className:"submit-button enabled",onClick:this.submit},"确认提交"),c.default.createElement("div",{className:"submit-button flat",onClick:this.navTo("fill-invoice-info",{modify:!0})},"修改信息")))}},{key:"render",value:function(){return c.default.createElement(d.default,{customClass:"confirm-vat-invoice-info-dialog",ref:"flatDialog",hasCloseButton:!0,title:"请确认发票信息",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(l.Component);t.default=h,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),d=n(51),p=r(d),h=n(54),m=n(190),y=n(144),v=200,g=[{field:"title",name:"发票抬头"},{field:"address",name:"邮寄地址"},{field:"receiver",name:"收件人"},{field:"phone",name:"联系电话"}],b=[{field:"taxpayerName",name:"纳税人名称"},{field:"taxpayerId",name:"纳税人识别号"},{field:"registerAddress",name:"注册地址"},{field:"registerPhone",name:"注册电话"},{field:"bankName",name:"开户银行"},{field:"bankAccount",name:"银行账户"},{field:"postAddress",name:"发票邮寄地址"},{field:"receiverName",name:"收件人"},{field:"receiverPhone",name:"联系电话"}],_=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r={invoice:{amount:{value:"",loading:!1,error:null},title:"",address:"",receiver:"",phone:"",error:null},VATInvoice:{amount:{value:"",loading:!1,error:null},taxpayerName:"",taxpayerId:"",registerAddress:"",registerPhone:"",bankName:"",bankAccount:"",postAddress:"",receiverName:"",receiverPhone:"",error:null},selectedIndex:0},o=n.props.data.fillInvoiceInfo;return n.state=u({},r,o),n.onChange=n.onChange.bind(n),n.onInvoiceSubmit=n.onInvoiceSubmit.bind(n),n.onVATInvoiceSubmit=n.onVATInvoiceSubmit.bind(n),n.tabDidChange=n.tabDidChange.bind(n),n.renderContent=n.renderContent.bind(n),n}return s(t,e),l(t,null,[{key:"propTypes",get:function(){return{onClose:c.PropTypes.func,open:c.PropTypes.bool,data:c.PropTypes.object,onNext:c.PropTypes.func}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),l(t,[{key:"componentDidMount",value:function(){this.props.data.fillInvoiceInfo&&this.props.data.fillInvoiceInfo.modify||this.getInvoiceContent(),this.getInvoiceAmount()}},{key:"componentDidUpdate",value:function(e,t){t.selectedIndex!==this.state.selectedIndex&&this.tabDidChange()}},{key:"getInvoiceContent",value:function(){var e=this;(0,y.ajaxGet)("/invoices?page=1&per_page=1&type=team").then(function(t){var n=t.data;if(!(n.length<=0)){var r=n[0];"vat"===r.type?e.setState({VATInvoice:u({},e.state.VATInvoice,{taxpayerName:r.taxpayer,taxpayerId:r.taxpayerId,registerAddress:r.companyAddress,registerPhone:r.companyPhone,bankName:r.bank,bankAccount:r.bankAccount,postAddress:r.address,receiverName:r.contact,receiverPhone:r.phone}),selectedIndex:1}):e.setState({invoice:u({},e.state.invoice,{title:r.title,address:r.address,receiver:r.contact,phone:r.phone}),selectedIndex:0})}})}},{key:"getInvoiceAmount",value:function(){var e=this;this.setState({invoice:u({},this.state.invoice,{amount:u({},this.state.invoice.amount,{loading:!0})}),VATInvoice:u({},this.state.VATInvoice,{amount:u({},this.state.VATInvoice.amount,{loading:!0})})}),(0,y.ajaxGet)("/smapi/invoices/amount").then(function(t){var n=(0,m.getAmount)(t.data),r=null;n<v&&(r="抱歉，开票金额需大于 "+v+" 元"),e.setState({invoice:u({},e.state.invoice,{amount:u({},e.state.invoice.amount,{loading:!1,error:r,value:n})}),VATInvoice:u({},e.state.VATInvoice,{amount:u({},e.state.VATInvoice.amount,{loading:!1,error:r,value:n})})})}).catch(function(){e.setState({invoice:u({},e.state.invoice,{amount:u({},e.state.invoice.amount,{loading:!1,value:"",error:f.default.createElement("span",null,"获取失败，请",f.default.createElement("span",{onClick:e.getInvoiceAmount.bind(e),style:{textDecoration:"underline",cursor:"pointer"}},"重试"))})}),VATInvoice:u({},e.state.VATInvoice,{amount:u({},e.state.VATInvoice.amount,{loading:!1,value:"",error:f.default.createElement("span",null,"获取失败，请",f.default.createElement("span",{onClick:e.getInvoiceAmount.bind(e),style:{textDecoration:"underline",cursor:"pointer"}},"重试"))})})})})}},{key:"onChange",value:function(e){var t=this;return function(n){return function(r){var i;t.setState(o({},e,u({},t.state[e],(i={},o(i,n,r.target.value),o(i,"error",null),i))))}}}},{key:"checkInvoiceItems",value:function(){for(var e=g,t=this.state.invoice,n=void 0,r=0;r<e.length;r++){var o=e[r];if(t[o.field].length<=0){n="请填写"+o.name;break}}return n&&this.setState({invoice:u({},t,{error:n})}),n}},{key:"onInvoiceSubmit",value:function(){var e=this.state.invoice;this.checkInvoiceItems()||e.amount.error||this.props.onNext("confirm-invoice-info",u({},this.props.data,{invoice:{taxType:"normal",title:e.title,address:e.address,contact:e.receiver,phone:e.phone,amount:this.state.invoice.amount.value},fillInvoiceInfo:this.state}))}},{key:"checkVATInvoiceItems",value:function(){for(var e=b,t=this.state.VATInvoice,n=void 0,r=0;r<e.length;r++){var o=e[r];if(t[o.field].length<=0){n="请填写"+o.name;break}}return n&&this.setState({VATInvoice:u({},t,{error:n})}),n}},{key:"onVATInvoiceSubmit",value:function(){var e=this.state.VATInvoice;this.checkVATInvoiceItems()||e.amount.error||this.props.onNext("confirm-VATInvoice-info",u({},this.props.data,{VATInvoice:{amount:this.state.VATInvoice.amount.value,taxType:"vat",taxpayer:e.taxpayerName,taxpayerId:e.taxpayerId,bank:e.bankName,bankAccount:e.bankAccount,companyAddress:e.registerAddress,companyPhone:e.registerPhone,contact:e.receiverName,phone:e.receiverPhone,address:e.postAddress},fillInvoiceInfo:this.state}))}},{key:"tabDidChange",value:function(){var e=document.getElementsByClassName("fill-invoice-info-dialog")[0];e&&(e.style.marginLeft=-e.clientWidth/2+"px",e.style.marginTop=-e.clientHeight/2+"px")}},{key:"renderField",value:function(e){var t=this.state,n=e.key,r=e.name,o=e.field,i=e.subField,a=e.space,s=t[o][i];return f.default.createElement("div",{key:n,className:a?"row space":"row"},f.default.createElement("div",{className:"left-column"},r),f.default.createElement("div",{className:"right-column"},f.default.createElement("input",{type:"text",onChange:this.onChange(o)(i),value:s})))}},{key:"renderInvoiceTab",value:function(){var e=this,t=this.state.invoice,n=!t.amount.loading&&!t.amount.error&&!t.error;return f.default.createElement(h.TabItem,{title:"开增值税普票"},f.default.createElement("div",{className:"two-column-grid"},f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"left-column"},"发票金额"),f.default.createElement("div",{className:"right-column"},t.amount.loading?f.default.createElement("span",{className:"text"},"...正在获取"):f.default.createElement("span",{className:"text"},t.amount.value," 元"),t.amount.error?f.default.createElement("div",{className:"error"},t.amount.error):null)),g.reduce(function(t,n,r){return t.push(e.renderField({key:r,name:n.name,field:"invoice",subField:n.field})),t},[])),f.default.createElement("footer",null,t.error?f.default.createElement("div",{className:"error"},t.error):null,f.default.createElement("div",{className:"submit-button "+(n?"enabled":""),onClick:this.onInvoiceSubmit},"确定"),f.default.createElement("div",{className:"submit-button flat",onClick:this.props.onClose},"稍后再开")))}},{key:"renderVATInvoiceTab",value:function(){var e=this,t=this.state.VATInvoice,n=!t.amount.loading&&!t.amount.error&&!t.error;return f.default.createElement(h.TabItem,{title:"开增值税专票"},f.default.createElement("div",{className:"two-column-grid"},f.default.createElement("div",{className:"row"},f.default.createElement("div",{className:"left-column"},"发票金额"),f.default.createElement("div",{className:"right-column"},t.amount.loading?f.default.createElement("span",{className:"text"},"...正在获取"):f.default.createElement("span",{className:"text"},t.amount.value," 元"),t.amount.error?f.default.createElement("div",{className:"error"},t.amount.error):null)),b.reduce(function(t,n,r){return t.push(e.renderField({key:r,name:n.name,field:"VATInvoice",subField:n.field,space:"postAddress"===n.field})),t},[])),f.default.createElement("footer",null,t.error?f.default.createElement("div",{className:"error"},t.error):null,f.default.createElement("div",{className:"submit-button "+(n?"enabled":""),onClick:this.onVATInvoiceSubmit},"确定"),f.default.createElement("div",{className:"submit-button flat",onClick:this.props.onClose},"稍后再开")))}},{key:"renderContent",value:function(){return f.default.createElement("div",{className:"fill-invoice-info"},f.default.createElement("span",{className:"hicon icon-close dialog-close",onClick:this.props.onClose}),f.default.createElement(h.Tab,{customClass:"sm-nav-tabs invitation-tabs large",disableSetWidth:!0,selectedIndex:this.state.selectedIndex,headTpl:function(e){return f.default.createElement("div",null,e)},tabDidChange:this.tabDidChange},this.renderInvoiceTab(),this.renderVATInvoiceTab()))}},{key:"render",value:function(){return f.default.createElement(p.default,{customClass:"fill-invoice-info-dialog",ref:"flatDialog",hasCloseButton:!0,title:"",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(c.Component);t.default=_,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(51),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderContent=n.renderContent.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{onClose:u.PropTypes.func,open:u.PropTypes.bool}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),s(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.props.onClose()},1500)}},{key:"renderContent",value:function(){return l.default.createElement("div",{className:"thanks-to-buy"},l.default.createElement("div",{className:"icon"}),l.default.createElement("div",{className:"text"},"感谢您的购买"),l.default.createElement("div",{className:"desc"},"发票会在 10 个工作日内",l.default.createElement("br",null),"快递给您"))}},{key:"render",value:function(){return l.default.createElement(f.default,{customClass:"thanks-to-buy-dialog",ref:"flatDialog",hasCloseButton:!0,title:"",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(51),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.navTo=n.navTo.bind(n),n.renderContent=n.renderContent.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{onClose:u.PropTypes.func,open:u.PropTypes.bool,onNext:u.PropTypes.func}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),s(t,[{key:"navTo",value:function(e,t){var n=this;return function(){n.props.onNext(e,t)}}},{key:"renderContent",value:function(){return l.default.createElement("div",{className:"waiting-pay"},l.default.createElement("header",null,"等待支付"),l.default.createElement("p",null,"在新打开的页面中完成支付，支付完成前请不要关闭这个窗口。如遇到问题请联系我们的客户顾问 400-006-0506"),l.default.createElement("footer",null,l.default.createElement("div",{className:"submit-button enabled",onClick:this.navTo("payment-success")},"支付成功"),l.default.createElement("div",{className:"submit-button flat",onClick:this.navTo("payment-failure")},"遇到问题")))}},{key:"render",value:function(){return l.default.createElement(f.default,{customClass:"waiting-pay-dialog",ref:"flatDialog",hasCloseButton:!0,title:"",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(51),f=r(c),d=n(144),p=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!1,errorMessage:null},n.cancel=n.cancel.bind(n),n.renderContent=n.renderContent.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{onClose:u.PropTypes.func,open:u.PropTypes.bool}}},{key:"defaultProps",get:function(){return{onClose:function(){},open:!1}}}]),s(t,[{key:"cancel",value:function(){var e=this,t={type:"team",duration:0,channel:"alipay_qr",member_count:0,skip_charge:1};this.setState({loading:!0,errorMessage:null}),(0,d.ajaxPost)("/orders/create",t).then(function(){location.replace(location.pathname)}).catch(function(){e.setState({loading:!1,errorMessage:"网络异常，请重试"})})}},{key:"renderContent",value:function(){var e=this.state;return l.default.createElement("div",{className:"cancel-order"},l.default.createElement("p",null,"确认取消对公转账订单吗?",l.default.createElement("br",null),"取消后，你可以重新购买企业版"),l.default.createElement("footer",null,e.errorMessage?l.default.createElement("div",{className:"error"},e.errorMessage):null,e.loading?l.default.createElement("div",{className:"submit-button"},"...正在取消"):l.default.createElement("div",{className:"submit-button warn",onClick:this.cancel},"确认取消"),l.default.createElement("div",{className:"submit-button flat",onClick:this.props.onClose},"取消")))}},{key:"render",value:function(){return l.default.createElement(f.default,{customClass:"cancel-order-dialog",ref:"flatDialog",hasCloseButton:!0,title:"取消订单",onClose:this.props.onClose,open:this.props.open,enableCloseClickMask:!1,bodyTpl:this.renderContent})}}]),t}(u.Component);t.default=p,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(696),i=r(o);t.default=i.default,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(1),f=n(20),d=r(f),p=n(697),h=r(p),m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleLoadMore=n.handleLoadMore.bind(n),n.state={data:n.props.initData,hasMore:n.props.hasMore},n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{className:u.PropTypes.string,children:u.PropTypes.node,renderItem:u.PropTypes.func,initData:u.PropTypes.array,data:u.PropTypes.array,getListData:u.PropTypes.func,getScrollContainer:u.PropTypes.func,loadingState:u.PropTypes.node,noMoreState:u.PropTypes.node,throttle:u.PropTypes.number,threshold:u.PropTypes.number,useWindow:u.PropTypes.bool}}},{key:"defaultProps",get:function(){return{initData:[],renderItem:c.noop,getListData:void 0}}}]),s(t,[{key:"componentWillReceiveProps",value:function(e){void 0!==e.data&&this.setState({data:e.data})}},{key:"patchData",value:function(e,t){var n=[];this.state.data.forEach(function(r){if(r.id===e){if(void 0===t)return;r=(0,c.assign)(r,t)}n.push(r)}),this.setState({data:n})}},{key:"handleLoadMore",value:function(e){var t=this;return this.props.getListData(e,!0).then(function(e){(400===e.code||e.error&&400===e.error.code)&&t.setState({hasMore:!1})})}},{key:"renderItems",value:function(){return this.state.data.map(this.props.renderItem)}},{key:"render",value:function(){var e=(0,d.default)("member-list",this.props.className);return l.default.createElement("div",{className:e},l.default.createElement(h.default,{useWindow:this.props.useWindow,hasMore:this.state.hasMore,loadMore:this.handleLoadMore,getScrollContainer:this.props.getScrollContainer,loadingState:this.props.loadingState,noMoreState:this.props.noMoreState,throttle:this.props.throttle,threshold:this.props.throttle},this.props.children||this.renderItems()))}}]),t}(u.Component);t.default=m,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),n(698);var o=n(699),i=r(o);t.default=i.default,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=(n(1),{LOADING:1,LOADED:2}),f=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.eventHandler=n.eventHandler.bind(n),n.state={loadState:void 0},n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{useWindow:u.PropTypes.bool,hasMore:u.PropTypes.bool,loadMore:u.PropTypes.func,loadingState:u.PropTypes.node,noMoreState:u.PropTypes.node,throttle:u.PropTypes.number,threshold:u.PropTypes.number}}},{key:"defaultProps",get:function(){return{useWindow:!1,hasMore:!1,loadMore:function(){return new Promise(function(e){return setTimeout(e,3e3)})},loadingState:"正在加载下一页...",noMoreState:"已经是最后一页了.",throttle:300,threshold:20,pageStart:1}}}]),s(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.attachListener()}},{key:"componentDidUpdate",value:function(){this.attachListener()}},{key:"componentWillUnmount",value:function(){this.detachListener()}},{key:"attachListener",value:function(){if(this.props.hasMore){(this.props.useWindow?document.querySelector(".content-wrap"):this.refs.waterfall).addEventListener("scroll",this.eventHandler,!1),this.props.initialLoad&&this.eventHandler()}}},{key:"detachListener",value:function(){(this.props.useWindow?document.querySelector(".content-wrap"):this.refs.waterfall).removeEventListener("scroll",this.eventHandler)}},{key:"eventHandler",value:function(e){var t=this,n=e.target;n.firstChild.offsetHeight-n.offsetHeight-n.scrollTop<this.props.threshold&&(this.detachListener(),this.setState({loadState:c.LOADING}),this.props.loadMore(this.pageLoaded+=1).then(function(){t.setState({loadState:c.LOADED})}))}},{key:"renderLoadMore",value:function(){var e=null;return this.props.hasMore?this.state.loadState===c.LOADING&&(e=l.default.createElement("div",{className:"loadMore"},this.props.loadingState)):this.state.loadState===c.LOADED&&(e=l.default.createElement("div",{className:"loadMore"},this.props.noMoreState)),e}},{key:"render",value:function(){return l.default.createElement("div",{className:"waterfall",ref:"waterfall"},l.default.createElement("div",{className:"waterfall-inner"},this.props.children),this.renderLoadMore())}}]),t}(u.Component);t.default=f,e.exports=t.default},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(){function e(e,n){var a=r.pick(e,["guid","rev","changeset","apool","clientId","committingCS","userCS"]),s=a.changeset,u=a.rev,l=a.apool,f=a.docType,p=a.guid,m=a.committingCS,y=a.userCS,v=a.clientId,b=void 0,w=void 0,k=void 0,E=void 0;if((m||y)&&(m.apool&&y.apool||(f="newdoc"),"doc"===f?(m&&(k=(new g.default).fromJsonable(t(m.apool))),y&&(E=y&&(new g.default).fromJsonable(t(y.apool))),m&&y?(s=d.default.moveOpsToNewPool(m.changeset,k,E),s=d.default.compose(s,y.changeset,E),u=m.rev,l=E):m?(s=m.changeset,u=m.rev,l=k):(s=y.changeset,u=y.rev,l=E)):"newdoc"===f&&(m&&y?("string"!=typeof m.changeset&&(m.changeset=JSON.stringify(m.changeset)),"string"!=typeof y.changeset&&(y.changeset=JSON.stringify(y.changeset)),s=h.default.pack(h.default.unpack(m.changeset).compose(h.default.unpack(y.changeset))),u=m.rev):m?(s=m.changeset,u=m.rev):(s=y.changeset,u=y.rev))),!u||!s)return i.remove(p,v),void n(!0);l=JSON.stringify(l),b=P.SYNC_OFFLINE.replace("{%guid%}",p),w={guid:p,rev:u,changeset:s,apool:l,clientId:v},c.default.post(b,w,function(){console.log("offline sync success"),n(!0)},function(){try{var e=d.default.unpack(s).charBank.trim();if(0===e.length)return void n(!0);var t='文档离线同步出现错误，同步失败内容的纯文本为：<br /><span style="color:black;font-size: 13px;">'+e+"</span><br />你可以复制该文本，在文档打开后粘贴到文档。";_.default.show({okCallback:function(){window.location.href="/doc/"+p},modal:!0,okText:"前往文档",headText:"非常抱歉",bodyText:t}),o.post("/api/log/sockets",{guid:p,sockets:JSON.stringify(s)}),n(!1)}catch(e){n(!1)}})}function t(e){return"object"!==(void 0===e?"undefined":u(e))&&e?JSON.parse(e):e}s();var n=r.get(window,"cow.currentUser.id");if(!(n<1)){var i=void 0;try{i=new T.default({userId:n})}catch(e){return void C.default.alert({type:"error",title:"您的浏览器不支持离线编辑",delay:1e4})}var a=r.get(window,"cow.tempCurrentFile.guid");O.default.initialize({userId:n,currentFileGuid:a,store:i,syncFn:e}).sync()}}function s(){x||(x=!0,y.default.attach("statusBar:triggerCleanData",function(){if("doc"!==window.cow.pageType)return!1;(0,k.default)({title:"确认删除离线数据？",description:"删除离线数据无法恢复，请确认已手动复制内容到本地，以免数据丢失",confirmFun:function(){try{window.localStorage.removeItem("shimo-offline-data")}catch(e){console.log("remove error"),console.dir(e)}C.default.alert({title:"删除成功",delay:1e3})}})}))}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=a;var l=n(34),c=i(l),f=n(88),d=i(f),p=n(53),h=i(p),m=n(9),y=i(m),v=n(196),g=i(v),b=n(194),_=i(b),w=n(146),k=i(w),E=n(5),C=i(E),M=n(446),T=i(M),S=n(701),O=i(S),P=n(69),x=!1;e.exports=t.default}).call(t,n(1),n(2))},function(e,t,n){"use strict";var r=n(1),o={initialize:function(e){return this.userId=e.userId,this.currentFileGuid=e.currentFileGuid,this.syncFn=e.syncFn,this.store=e.store,this.dataArray=this._flattern(this.currentFileGuid),this},_flattern:function(e){var t=[],n=this.store.getAll();return Object.keys(n).forEach(function(e){Object.keys(n[e]).forEach(function(o){t.push(r.assign({clientId:e},n[e][o]))})}),e?r.sortBy(t,function(t){return t.guid===e?-1:1}):t},sync:function(){if(this.dataArray.length>0)try{this._syncOne(this.dataArray[0])}catch(e){console.error(e)}},_syncOne:function(e){var t=this;this.syncFn.call(null,e,function(n){t.store.remove(e.guid,e.clientId),t.dataArray.shift(),n&&t.sync()})}};e.exports=o},function(e,t,n){(function(r,o,i){function a(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=window.cow.favicons,n=B.faviconNode,r=t.default;if(n.length>0)switch(e=e||window.cow.pageType){case"home":r=t.default;break;case"folder":r=t.folder;break;case"doc":r=t.doc;break;case"spreadsheet":case"sheet":r=t.sheet}if(n.attr("href")!==r){if(i.msie)return;n.attr("href",r)}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(9),l=a(u),c=n(5),f=a(c),d=n(884),p=a(d),h=n(885),m=a(h),y=n(887),v=a(y),g=n(48),b=a(g),_=n(628),w=a(_),k=n(629),E=a(k),C=n(579),M=a(C),T=n(710),S=a(T),O=n(0),P=a(O),x=n(13),N=a(x);n(888);var j=n(433),I=a(j),D=n(700),A=a(D),F=n(627),L=n(576),R=a(L),U=n(630),H=a(U),B={headerWrap:r("#header-wrap"),listViewWrap:r("#list-view-wrap"),docViewWrap:r("#doc-view"),padViewWrap:r("#pad-view"),qlViewWrap:r("#ql-view"),spreadsheetViewWrap:r("#spreadsheet-view"),sheetViewWrap:r("#sheet-view"),feedback:r(".meiqia-feedback"),galleryBox:r("#gallery-box"),faviconNode:r("#favicon-link"),headNode:r("head"),bodyNode:r("body")},W=!1,V=null,z={checkNewVersion:function(e,t){window.cow._needReload&&(window.location.href=e.path),t()},checkNewSeq:function(e,t){window.cow.usingNewSeq=!1;var n=(0,H.default)(e.pathname);(0,R.default)(n).then(function(e){window.cow.usingNewSeq=e,t()})},setPageType:function(e,t){var n=e.path,r=/^\/(desktop|recent|favorites)/,o=/^\/folder\/*/,i=/^\/doc\/\/*/,a=/^\/spreadsheet\/*/,s=/^\/sheet\/*/,u=/^\/newdoc\/\/*/,l=!0,c="";switch(r.test(n)?c="home":o.test(n)?c="folder":i.test(n)?c="doc":a.test(n)?c="spreadsheet":s.test(n)?c="sheet":u.test(n)?c="newdoc":l=!1,window.ga&&window.ga("send","event","visit",c,e.path),e.path){case"/recent":window.cow.listType="recent";break;case"/favorites":window.cow.listType="favorites";break;default:window.cow.listType="list"}l&&(window.cow.pageType=c),e.init||(window._czc&&window._czc.push(["_trackPageview",e.path]),window.ga&&window.ga("send","pageview",e.path)),t()},syncOfflineData:function(e,t){(0,A.default)(),(0,F.syncOfflineData)(),t()},renderHeader:function(){B.headerWrap.length>0&&(r(".header-avatar-wrap").children().remove(),V?V.update({type:cow.pageType,currentFile:cow.currentFile}):V=N.default.render(P.default.createElement(S.default,{type:cow.pageType,currentUser:cow.currentUser,currentFile:cow.currentFile}),document.getElementById("header-wrap"))),s()},hideLast:function(){z.renderHeader(),"doc"===window.cow.lastType?G.hide("doc"):"spreadsheet"===window.cow.lastType?$.hide():"sheet"===window.cow.lastType?q.hide():"newdoc"===window.cow.lastType?G.hide("newdoc"):window.cow.lastType&&Y.hide(),window.cow.loading=!1},exit:function(e,t){M.default.start(),window.cow.lastType=window.cow.pageType,window.cow.loading=!0,t()}},Y={show:function(){z.hideLast(),B.listViewWrap.removeClass("hide"),B.spreadsheetViewWrap.addClass("hide"),B.sheetViewWrap.addClass("hide"),B.padViewWrap.add(B.qlViewWrap).addClass("hide"),B.bodyNode.addClass("list"),r(".list-container").scrollTop(0),r("div.import").show()},render:function(e){""!==window.cow.welcomeFile&&location.search.indexOf("from=register")>0&&(location.href="/doc/"+window.cow.welcomeFile);var t=e.params.guid||"",n=!0;e.init&&(b.default.load(),n=!1),(0,p.default)({guid:t,isAjaxForce:n})},hide:function(){}},G={show:function(e){z.hideLast(),B.listViewWrap.addClass("hide"),B.spreadsheetViewWrap.addClass("hide"),B.sheetViewWrap.addClass("hide"),B.feedback.removeClass("hide"),B.bodyNode.removeClass("list"),"newdoc"===e?(B.padViewWrap.addClass("hide"),B.qlViewWrap.removeClass("hide")):(B.padViewWrap.removeClass("hide"),B.qlViewWrap.addClass("hide"))},init:function(e){var t=e.params.guid;b.default.load(t),window.cow.currentUser.id<0&&o.stop(),W=!1,window.cow.directory={firstOpen:!1,isOpened:!1,isRunTimer:null},window.cow.doceditor={},/^\/newdoc\/\/*/.test(e.path)?(0,v.default)(t,!0):(0,m.default)(t,!0)},hide:function(e){r("#pad-view-inner").removeClass("readonly commentable"),r(".image-resize-bar").removeClass("active"),B.docViewWrap.scrollTop(0),r("#doc-title-input").blur(),r("#doc-container").css("opacity",0),B.padViewWrap.add(B.qlViewWrap).removeClass("selection-unfold edit-mode"),r(".sidebar-body").removeClass("start-s-comment s-comment"),r("#doc-directory").children("ul").html('<li class="dir-not-found">添加标题后会在这里自动生成目录。</li>'),r("#display-selection .display-item").removeClass("pressed"),B.galleryBox.removeClass("modal"),r("#tempImageResizeStyle").remove(),r("#tempAttachmentStyle").remove(),f.default.clearDropdown(),"doc"===e?(l.default.notify("pad:dispose"),l.default.detach("caret:change")):"newdoc"===e&&l.default.notify("newpad:dispose"),l.default.notify("doc:goback")}},$={show:function(){z.hideLast(),B.listViewWrap.addClass("hide"),B.padViewWrap.add(B.padViewWrap).addClass("hide"),B.feedback.addClass("hide"),B.sheetViewWrap.addClass("hide"),B.spreadsheetViewWrap.removeClass("hide"),B.bodyNode.removeClass("list").addClass("spreadsheet"),I.default.reset(cow.currentFile.guid),l.default.notify("spreadsheet:enter")},init:function(e){var t=e.params.guid,n=e.params.sheetId;b.default.load(t),(0,w.default)(t,n,{isReadonly:!1})},hide:function(){B.spreadsheetViewWrap.removeClass("ready"),B.bodyNode.removeClass("spreadsheet"),B.feedback.removeClass("hide"),l.default.notify("handsontable:destroy"),window.cow.tempCurrentFile&&(window.cow.tempCurrentFile.content=null),window._collabClient&&window._collabClient.stop(),l.default.notify("spreadsheet:exit"),l.default.detach("handsontable:inited"),N.default.unmountComponentAtNode(document.getElementById("spreadsheet-view"))}},q={show:function(){z.hideLast(),B.listViewWrap.addClass("hide"),B.padViewWrap.add(B.padViewWrap).addClass("hide"),B.feedback.addClass("hide"),B.spreadsheetViewWrap.addClass("hide"),B.sheetViewWrap.removeClass("hide"),B.bodyNode.removeClass("list").addClass("spreadsheet"),I.default.reset(cow.currentFile.guid),l.default.notify("spreadsheet:enter")},init:function(e){var t=e.params.guid,n=e.params.sheetId;b.default.load(t),(0,E.default)(t,n,{isReadonly:!1})},hide:function(){B.sheetViewWrap.removeClass("ready"),B.bodyNode.removeClass("spreadsheet"),B.feedback.removeClass("hide"),window.cow.tempCurrentFile&&(window.cow.tempCurrentFile.content=null),l.default.notify("spreadsheet:exit"),N.default.unmountComponentAtNode(document.getElementById("sheet-view"))}},K=function(){if(!W){var e=o.current.replace("/doc/",""),t=history.state.isAjaxForce||!1;b.default.load(e),window.cow.currentUser.id<0&&o.stop(),(0,m.default)(e,t)}},J=function(e){W=e};l.default.attach("socket:reconnected",function(){if("doc"===window.cow.pageType){var e=/^\/doc\/*/,t=o.current;e.test(t)&&K()}});var Q=function(e,t){V=N.default.render(P.default.createElement(S.default,{type:cow.pageType,currentUser:cow.currentUser,currentFile:cow.currentFile}),document.getElementById("header-wrap")),t()};t.default={common:z,list:Y,doc:G,spreadsheet:$,sheet:q,setDocInit:J,preloadHeader:Q},e.exports=t.default}).call(t,n(2),n(23),n(262))},,,,,,,function(e,t){function n(e,t){return{type:"RECEIVE_INIT_SHEET",submittedCS:e,revision:t}}function r(e,t){return{type:"COMPOSE_USER_CHANGES",disableRecords:t,newChange:e}}function o(){return{type:"SEND_CHANGE"}}function i(){return{type:"SEND_OFFLINE_CHANGE"}}function a(e,t){return{type:"SEND_CHANGE_SUCCESS",revision:e,msgType:t}}function s(e,t){return{type:"NEW_CHANGE_FROM_SERVER",newChange:e,revision:t}}function u(e,t){return{type:"SEND_CLIENT_STATUS",status:e,isReconnect:t}}function l(){return{type:"OFFLINE"}}e.exports={receivedInitSheet:n,composeUserChanges:r,sendChange:o,sendOfflineChange:i,sendChangeSuccess:a,receivedNewChange:s,sendClientStatus:u,offline:l}},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=i(c),d=n(13),p=i(d),h=n(803),m=i(h),y=n(804),v=i(y),g=n(810),b=i(g),_=n(811),w=i(_),k=n(813),E=i(k),C=n(817),M=i(C),T=n(20),S=i(T),O=n(819),P=i(O),x=n(745),N=i(x),j=n(747),I=i(j),D=n(820),A=i(D),F=n(72),L=n(331),R=i(L),U=n(651),H=i(U),B=n(821),W=i(B),V=n(615),z=i(V),Y=n(5),G=i(Y),$=n(823),q=i($),K=n(824),J=i(K),Q=n(825),X=i(Q),Z=["spreadsheet","sheet","doc","newdoc"],ee=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isDingtalkPc=G.default.isDingtalkPc(),n.state={currentUser:r.assign({},e.currentUser),currentFile:e.currentFile,type:e.type,showEnterprisePayment:!1,enterprisePaymentType:"normal",enterprisePaymentDialogParams:null},n.closeEnterprisePaymentDialog=n.closeEnterprisePaymentDialog.bind(n),n.showEnterprisePaymentDialog=n.showEnterprisePaymentDialog.bind(n),n}return u(t,e),l(t,null,[{key:"propTypes",get:function(){return{currentUser:c.PropTypes.object.isRequired,currentFile:c.PropTypes.object,type:c.PropTypes.string,showEnterprisePayment:c.PropTypes.bool,enterprisePaymentType:c.PropTypes.string}}}]),l(t,[{key:"getChildContext",value:function(){return{showEnterprisePayment:this.showEnterprisePaymentDialog}}},{key:"componentDidMount",value:function(){(0,b.default)(),(0,N.default)()}},{key:"componentDidUpdate",value:function(e,t){if(t.showEnterprisePayment!==this.state.showEnterprisePayment){document.getElementById("enterprise-payment-wrapper")||o(document.body).append(o('<div id="enterprise-payment-wrapper"></div>'));var n=document.getElementById("enterprise-payment-wrapper");this.state.showEnterprisePayment?p.default.render(f.default.createElement(H.default,{type:this.state.enterprisePaymentType,open:this.state.showEnterprisePayment,onClose:this.closeEnterprisePaymentDialog,data:this.state.enterprisePaymentDialogParams}),n):p.default.render(f.default.createElement("div",null),n)}}},{key:"closeEnterprisePaymentDialog",value:function(){this.setState({showEnterprisePayment:!1})}},{key:"showEnterprisePaymentDialog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal",t=arguments[1];this.setState({showEnterprisePayment:!0,enterprisePaymentType:e,enterprisePaymentDialogParams:t})}},{key:"update",value:function(e){this.setState(e)}},{key:"renderLeftHeader",value:function(){var e=this.state.type;if(Z.indexOf(e)>-1){var t=[f.default.createElement(M.default,{key:"file_info",currentFile:this.state.currentFile,currentUser:this.state.currentUser})];return this.isDingtalkPc&&t.push(f.default.createElement(W.default,{mode:"file",key:"dingtalk_external_entry"})),t}var n=this.state.currentUser.team,r=[],o=void 0;return n&&n.resources&&(o=f.default.createElement("img",{className:"header-logo-img",src:n.resources.desktopLogo})),r.push(f.default.createElement("a",{key:"shimo-logo",className:"header-logo "+(o?"":"logo-22"),href:"/desktop"},o)),this.isDingtalkPc&&r.push(f.default.createElement(W.default,{key:"dingtalk-entry"})),r}},{key:"renderRightHeader",value:function(){var e=this.state,t=e.type,n=e.currentUser,r=e.currentFile,o=[];return Z.indexOf(t)>-1?(o=[f.default.createElement(P.default,{key:0}),f.default.createElement("div",{key:1,className:"header-item-wrap"},f.default.createElement(m.default,{currentUser:n}))],this.state.currentUser.id<0?o.push(f.default.createElement(R.default,{key:"star_file",currentFile:r,currentUser:n}),f.default.createElement(z.default,{key:"operations",file:r})):o.push(f.default.createElement(I.default,{key:"action_btns",file:r})),(0,F.checkIsExampleFile)()&&o.push(f.default.createElement(A.default,{key:"doc_guide_tip"}))):(o.push(f.default.createElement("div",{key:0,className:"header-item-wrap"},f.default.createElement(w.default,{currentUser:n}))),-1===["profile"].indexOf(t)&&o.push(f.default.createElement("div",{key:1,className:"header-item-wrap"},f.default.createElement(E.default,null))),o.push(f.default.createElement("div",{key:2,className:"header-item-wrap"},f.default.createElement(v.default,{onlyUnread:!0}))),o.push(f.default.createElement("div",{key:3,className:"header-item-wrap"},f.default.createElement(m.default,{currentUser:n})))),o}},{key:"render",value:function(){var e=this.state.type,t=(0,S.default)({header:!0,"file-header":Z.indexOf(e)>-1,"old-sheet-header":"spreadsheet"===e}),n=-1===["sheet","spreadsheet"].indexOf(e)?"":"hide";return f.default.createElement("div",{id:"header",className:t},f.default.createElement("div",{className:n},f.default.createElement(q.default,null,f.default.createElement(J.default,{name:"meiqia"}),f.default.createElement(X.default,{name:"userGuide"}))),f.default.createElement("div",{className:"h-container"},f.default.createElement("div",{className:"header-left-box list-header"},this.renderLeftHeader()),f.default.createElement("div",{className:"header-right-box"},this.renderRightHeader())))}}]),t}(c.Component);t.default=ee,ee.childContextTypes={showEnterprisePayment:f.default.PropTypes.func},e.exports=t.default}).call(t,n(1),n(2))},function(e,t){function n(e,t){window.cow.usingNewSeq&&t&&"COLLABROOM"===t.type||window.socket&&window.socket.emit(e,t)}e.exports={send:n}},,,,,,,,,,,,,,function(e,t){function n(e,t,n){return{type:i,payload:{timeout:e,actionToWatch:t,actionToDispatch:n}}}function r(e){return{type:a,payload:{actionToRemove:e}}}function o(){var e={};return function(t){return function(n){return function(r){function o(t){var n=t.timeout,r=t.actionToWatch,o=t.actionToDispatch,i=e[r];i&&i.timeoutId&&clearTimeout(i.timeoutId);var a=u({timeout:n,actionToDispatch:o,dispatching:!1});e[r]=a}function s(t){var n=t.actionToRemove,r=e[n];r&&(clearTimeout(r.timeoutId),delete e[n])}function u(e){return e.timeoutId=setTimeout(function(){t.dispatch(e.actionToDispatch)},e.timeout),e}var l=r.type,c=r.payload;return l===i?o(c):s(l===a?c:{actionToRemove:l}),n(r)}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.addTimeout=n,t.removeTimeout=r,t.default=o;var i="@@TIMEOUT/ADD_TIMEOUT",a="@@TIMEOUT/REMOVE_TIMEOUT"},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),n(749);var o=n(750),i=r(o),a=n(440),s=r(a),u=n(613),l=r(u),c={AddUserDialog:l.default,SharedUsersDialog:s.default,Popover:i.default};t.default=c,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){c.hasOwnProperty(e)||l.default.bind(e,f(e)),c[e]=t}function i(e){c[e]=null}function a(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText.trim()}function s(e){return e.replace(/(<a\s+)/g,"@$1")}Object.defineProperty(t,"__esModule",{value:!0}),t.subscribePush=o,t.unsubscribePush=i,t.washHTML=a,t.markMentionText=s;var u=n(33),l=r(u),c={},f=function(e){return function(t){return c[e]&&c[e].call(null,t)}}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(754),i=r(o);t.default=i.default,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(606),i=r(o),a=n(607),s=r(a);i.default.Button=s.default,t.default=i.default,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){h&&i();var t=(0,d.qsa)(p);t.length&&(h=(0,l.render)(u.default.createElement(f.default,a({},e,{onClose:i})),t[0]))}function i(){var e=(0,d.qsa)(p);e.length&&(0,l.unmountComponentAtNode)(e[0]),h=null}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.showFileMover=o,t.removeFileMover=i;var s=n(0),u=r(s),l=n(13),c=n(777),f=r(c),d=n(87),p="#file-mover",h=null},,,,,,,,,,,,function(e,t,n){"use strict";function r(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to ReactCSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}}}var o=n(215),i=n(7),a=n(798),s=n(800),u=o.createClass({displayName:"ReactCSSTransitionGroup",propTypes:{transitionName:s.propTypes.name,transitionAppear:o.PropTypes.bool,transitionEnter:o.PropTypes.bool,transitionLeave:o.PropTypes.bool,transitionAppearTimeout:r("Appear"),transitionEnterTimeout:r("Enter"),transitionLeaveTimeout:r("Leave")},getDefaultProps:function(){return{transitionAppear:!1,transitionEnter:!0,transitionLeave:!0}},_wrapChild:function(e){return o.createElement(s,{name:this.props.transitionName,appear:this.props.transitionAppear,enter:this.props.transitionEnter,leave:this.props.transitionLeave,appearTimeout:this.props.transitionAppearTimeout,enterTimeout:this.props.transitionEnterTimeout,leaveTimeout:this.props.transitionLeaveTimeout},e)},render:function(){return o.createElement(a,i({},this.props,{childFactory:this._wrapChild}))}});e.exports=u},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n={};return(0,E.forEach)(t,function(e){n[e.id]={permission:e.permission,role:e.role}}),{type:"UPDATE_PERMISSIONS",payload:r({},e,n)}}function i(e,t,n){return{type:"PATCH_PERMISSIONS",payload:{fileGuid:e,userId:t,permission:{role:n}}}}function a(e,t){return function(n){return 0!=+t.code?n((0,C.error)("GET_SHARED_USERS",t)):Promise.all([n(d(t.data)),n(o(e,t.data)),n(s(e,t.data))])}}function s(e,t){return{type:"PATCH_SHARED_USERS",payload:r({},e,(0,E.map)(t,"id"))}}function u(e){return function(t){return t({type:"GET_SHARED_USERS"}),(0,k.ajaxGet)("/smapi/files/"+e+"/collaborators").then(function(n){return t(a(e,n))},function(e){return t((0,C.error)("GET_SHARED_USERS",e))})}}function l(){var e="GET_RECENT_CONTACTS";return function(t){return t({type:e}),(0,k.ajaxGet)("/smapi/users/mine/recent_contacts").then(function(e){return t(c(e))},function(n){return t((0,C.error)(e,n))})}}function c(e){return function(t){return 0!=+e.code?t((0,C.error)("GET_RECENT_CONTACTS",e)):Promise.all([t(d(e.data)),t(f(e.data))])}}function f(e){return{type:"PATCH_RECENT_CONTACTS",payload:(0,E.map)(e,"id")}}function d(e){var t=(0,E.map)(e,"id");return{type:"PATCH_USERS",payload:(0,E.zipObject)(t,e)}}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"editor",r="SET_PERMISSION";return function(o){switch(n){case"remove":return(0,k.ajaxDelete)("/smapi/files/"+e+"/collaborators/"+t).then(function(t){return o(h(t,e))},function(e){return o((0,C.error)(r,e))});case"add":return(0,k.ajaxPost)("/smapi/files/"+e+"/collaborators",{userId:t,role:"editor"}).then(function(t){return o(h(t,e))},function(e){return o((0,C.error)(r,e))});default:return(0,k.ajaxPatch)("/smapi/files/"+e+"/collaborators/"+t,{role:n}).then(function(r){return o(h(r,e,t,n))},function(e){return o((0,C.error)(r,e))})}}}function h(e,t,n,r){return function(o){return 0!=+e.code?o((0,C.error)("SET_PERMISSION",e)):r?r?o(i(t,n,e.data.role)):void 0:o(u(t))}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){return(0,k.ajaxGet)("/smapi/teams/mine/members?pagination=true&perPage=20&page="+e).then(function(r){return n(y(e,r,t))},function(e){return n((0,C.error)("GET_TEAM_MEMBERS",e))})}}function y(e,t,n){return function(r){return 0!=+t.code?r((0,C.error)("GET_TEAM_MEMBERS",t,n)):Promise.all([r(d(t.data)),r(v(e,t.data))])}}function v(e,t){return{type:"UPDATE_TEAM_MEMBER",payload:{page:e,teamMembers:(0,E.map)(t,"id")}}}function g(e){return function(t){return(0,k.ajaxGet)("/smapi/files/"+e).then(function(e){return t(b(e))},function(e){return t((0,C.error)("GET_FILE",e))})}}function b(e){return function(t){return t(0!=+e.code?(0,C.error)("GET_FILE",e):_(e.data))}}function _(e){return{type:"PATCH_FILES",payload:r({},e.guid,e)}}function w(e,t){var n="UPDATE_FILE";return function(r,o){var i=o(),a=i.storage,s=a.files[e],l=function(o){return 0!==o.code?r((0,C.error)(n,o)):Promise.all([r(_((0,E.assign)({},s,t))),r(u(e))])};return(0,k.ajaxPatch)("/smapi/files/"+e,t).then(function(e){return l(e)},function(e){return r((0,C.error)(n,e))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.getSharedUsers=u,t.getRecentContacts=l,t.getRecentContactsSuccess=c,t.updateRecentContacts=f,t.updateUserStorage=d,t.setPermission=p,t.setPermissionSuccess=h,t.getTeamMembers=m,t.getTeamMembersSuccess=y,t.getFile=g,t.getFileSuccess=b,t.updateFileStorage=_,t.patchFile=w;var k=n(22),E=n(1),C=n(748)},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"PATCH_USERS":return(0,f.default)({},e,t.payload);default:return e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"PATCH_FILES":return(0,f.default)({},e,t.payload);default:return e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"UPDATE_PERMISSIONS":return(0,f.default)({},e,t.payload);case"PATCH_PERMISSIONS":var n=t.payload,r=n.fileGuid,o=n.userId,i=n.permission;return e[r][o]=i,(0,f.default)({},e);default:return e}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"PATCH_SHARED_USERS":return(0,f.default)({},e,t.payload);default:return e}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"PATCH_RECENT_CONTACTS":return t.payload;default:return e}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"UPDATE_TEAM_MEMBER":var n=t.payload,r=n.teamMembers;return 1==n.page?r:[].concat(e).concat(r);default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var c=n(345),f=r(c),d=n(151);t.default=(0,d.combineReducers)({users:o,files:i,permissions:a,filePermissions:s,recentContacts:u,teamMembers:l}),e.exports=t.default},function(e,t,n){(function(e,r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(){if("enterprise_expired"===k.accountType){var e=new Date,t=new Date(e.getFullYear(),0,0),n=e-t,r=864e5,o=Math.floor(n/r);if(o>(d.default.get("lastSeen")||0)){var i="";i=["creator","admin"].indexOf(k.team_role)?'<div>石墨文档企业版已到期。目前无法新建／导入文档、添加企业成员，但已有文档仍可以正常编辑与共享。</div><br><div>您可以购买或续费企业版服务，也可以删除企业退回到个人版（不会影响任何文档和共享关系）。</div><br><div>致电 400-006-0506 获取购买与折扣信息，或前往 <a href="/enterprise/billing" target="_blank" style="color: #4A90E2; text-decoration: underline;">企业管理</a> 页面。</div>':"<div>石墨文档企业版已到期。目前无法新建／导入文档、添加企业成员，但已有文档仍可以正常编辑与共享。</div><br><div>请尽快提醒管理员购买或续费企业版服务，或者删除企业退回到个人版（不会影响任何文档和共享关系）。</div><br><div>致电 400-006-0506 获取购买与折扣信息。</div>";var a={title:"试用到期提醒",description:i,buttons:[{type:"button",buttonLabel:"知道了",customClass:"btn btn-ok",closeAfterClick:!0}]};return(0,c.default)(a),d.default.set("lastSeen",o,{expires:7}),!0}return!1}}function s(){h.default.needToGuide()&&w&&w.survey&&(w.survey=null,(0,c.default)({customClass:"paid-survey-modal",buttons:[],title:"",description:'<span id="survey-letter"></span><span id="survey-computer"></span><div>石墨文档 @ 你：</div><br><div>感谢您参与本次用户调研，我们已将「石墨文档高级版」<b>2 个月免费</b> 使用机会冲入您的账户。如未收到，请联系我们的客服人员。</div><div>我们还要偷偷告诉您：「石墨文档企业版」即将上线，如您的团队有需求，请联系邮箱<a href="mailto:wangxi@shimo.im">wangxi@shimo.im</a> , 我们同样会奉上 <b>专属折扣</b>。</div>'}))}function u(){y.default.bind("File",function(t){var n=t.data;w.readonly&&e("#doc-title-input").html((0,g.default)(n.name));var o=w.currentFile&&w.currentFile.id;n.id===o&&n.is_delete>=1&&r("/desktop")}),y.default.bind("Contact",function(e){o.isArray(e.data)||(e.data=[e.data]),e.data.forEach(function(e){_.default.push(e)})}),y.default.bind("Unsubscribe",function(e){var t=e.data;"desktop"===t.channel&&(w.desktopNotification=t.is_delete)})}Object.defineProperty(t,"__esModule",{value:!0}),t.checkEnterpriseExpired=a,t.targetedPaidUsersSurvey=s,t.hookSocket=u;var l=n(146),c=i(l),f=n(89),d=i(f),p=n(552),h=i(p),m=n(33),y=i(m),v=n(148),g=i(v),b=n(48),_=i(b),w=window.cow,k=w.currentUser;t.default=function(){s(),u()}}).call(t,n(2),n(23),n(1))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return l.default.createElement("div",{className:"bubble-wrap"},l.default.createElement("div",{className:"bubble-outter"}),l.default.createElement("div",{className:"bubble-inner"}))}}]),t}(u.Component);t.default=c,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(786),f=r(c),d=n(726),p=r(d),h=n(615),m=r(h),y=n(796),v=r(y),g=window.cow,b=function(e){function t(e){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props.file,t=[0,-3].indexOf(g.currentFile.type)>-1,n=t?l.default.createElement(v.default,null):null,r=g.authorized?l.default.createElement("div",{className:"list-share-box"},l.default.createElement(p.default.Popover,null)):null,o=g.authorized?l.default.createElement(f.default,null):null;return l.default.createElement("div",{className:"s-menu-btn-wrap"},n,r,o,l.default.createElement(m.default,{file:e}))}}]),t}(u.Component);t.default=b,b.propTypes={file:u.PropTypes.object},e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return n||a.default.alert({title:t.message,type:"error"}),{type:e+"_FAILED",error:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.error=o;var i=n(5),a=r(i)},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o),a=n(268),s=n(751),u=r(s),l=n(752),c=function(){return i.default.createElement(a.Provider,{store:u.default},i.default.createElement(l.TeamworkPopoverContainer,null))};t.default=c,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(151),i=n(672),a=r(i),s=n(744),u=r(s),l=n(252),c={storage:{}},f=(0,o.combineReducers)({modals:l.reducer,storage:u.default});t.default=(0,a.default)(f,c),e.exports=t.default},function(e,t,n){(function(e){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TeamworkPopoverContainer=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=o(c),d=n(268),p=n(151),h=n(743),m=r(h),y=n(275),v=o(y),g=n(603),b=o(g),_=n(609),w=o(_),k=n(612),E=o(k),C=n(72),M=o(C),T=n(9),S=o(T),O=function(t){function n(e){i(this,n);var t=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleVisibleChange=t.handleVisibleChange.bind(t),t.handleContentSwitch=t.handleContentSwitch.bind(t),t.handleTriggerClick=t.handleTriggerClick.bind(t),t.setUnVisible=t.setUnVisible.bind(t),t.state={visible:!1,content:"show"},t.popstateHandler=function(){return t.setState({visible:!1})},t}return s(n,t),l(n,null,[{key:"propTypes",get:function(){return{fileGuid:c.PropTypes.string,storage:c.PropTypes.object,maxShareCount:c.PropTypes.number,getSharedUsers:c.PropTypes.func,setPermission:c.PropTypes.func,cleanModals:c.PropTypes.func,pushModal:c.PropTypes.func,popModal:c.PropTypes.func}}},{key:"defaultProps",get:function(){return{fileGuid:cow.currentFile.guid}}}]),l(n,[{key:"componentDidMount",value:function(){e(window).on("popstate",this.setUnVisible)}},{key:"componentWillUnmount",value:function(){e(window).off("popstate",this.setUnVisible)}},{key:"setUnVisible",value:function(){this.setState({visible:!1})}},{key:"handleVisibleChange",value:function(e){!1===e?(M.default.checkIsWelcomeFile()&&S.default.notify("guideTip:visible",{tag:"teamwork",value:!1}),this.setState({visible:e,content:"show"})):this.setState({visible:e})}},{key:"handleContentSwitch",value:function(e){var t=this;setTimeout(function(){t.setState({content:e})},100)}},{key:"handleTriggerClick",value:function(){M.default.checkIsWelcomeFile()&&S.default.notify("guideTip:visible",{tag:"teamwork",value:!1})}},{key:"renderContent",value:function(){var e=this,t=void 0;if(!this.state.visible)return t;var n=(0,p.bindActionCreators)(m,this.props.dispatch);switch(this.state.content){case"show":t=f.default.createElement(b.default,u({},this.props,n,{onButtonClick:this.handleContentSwitch,file:this.file,overflow:[0,25]}));break;case"add":t=f.default.createElement(w.default,u({},this.props,n,{showButton:!0,onButtonClick:function(){return e.handleContentSwitch("show")},file:this.file,overflow:[0,25]}));break;case"transfer":t=f.default.createElement(E.default,u({},this.props,n,{showButton:!0,onButtonClick:function(){return e.handleContentSwitch("show")},fileGuid:this.file,overflow:[0,25]}))}return t}},{key:"render",value:function(){var e={points:["tr","br"],offset:[0,2]};return f.default.createElement(v.default,{align:e,overlayClassName:"teamwork-popover",visible:this.state.visible,onVisibleChange:this.handleVisibleChange,content:this.renderContent()},f.default.createElement("div",{className:"teamwork-popover-trigger",onClick:this.handleTriggerClick},"协作"))}},{key:"file",get:function(){var e=this.props.storage,t=e.files[cow.currentFile.guid];return t&&(t.teamId=t.teamId||0),t}}]),n}(c.Component);t.default=O;var P=function(e){return e},x=(0,d.connect)(P)(O);t.TeamworkPopoverContainer=x}).call(t,n(2))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(728),f=r(c),d=n(729),p=n(20),h=r(p),m={empty:"添加",editor:"可以编辑",commentator:"只能评论",reader:"只能阅读"},y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleActionClick=n.handleActionClick.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{userId:u.PropTypes.number,email:u.PropTypes.string,permission:u.PropTypes.shape({permission:u.PropTypes.string,isCreator:u.PropTypes.bool,isOutsider:u.PropTypes.bool,fromParent:u.PropTypes.bool}),file:u.PropTypes.object,ownDropdown:u.PropTypes.bool,handleActionClick:u.PropTypes.func,getPopupContainer:u.PropTypes.func,classPrefix:u.PropTypes.string}}},{key:"defaultProps",get:function(){return{permission:{permission:"empty"},file:{teamId:void 0},ownDropdown:!1,getPopupContainer:function(){return document.body}}}}]),s(t,[{key:"handleActionClick",value:function(e){var t=e.key;switch(t){case"commentator":case"reader":if(!cow.currentUser.teamId)return;default:var n={id:this.props.userId,email:this.props.email};this.props.handleActionClick(n,t)}}},{key:"renderTransferOverlay",value:function(){return l.default.createElement(f.default,{className:"roles-menu",onClick:this.handleActionClick},l.default.createElement(f.default.Item,{key:"transfer"},l.default.createElement("span",null,"转让所有权")))}},{key:"renderPermissionOverlay",value:function(){var e=(0,h.default)("roles-menu",{personal:!cow.currentUser.teamId});return l.default.createElement(f.default,{className:e,onClick:this.handleActionClick},l.default.createElement(f.default.Item,{className:"item-editable",key:"editor"},l.default.createElement("span",null,"可以编辑"),l.default.createElement("span",null,"可以编辑、评论、分享文件")),l.default.createElement(f.default.Item,{className:"item-commentable",key:"commentator"},l.default.createElement("span",null,"只能评论"),l.default.createElement("span",null,"只能评论、不能编辑、分享文件"),l.default.createElement("div",{className:"tooltip s-tooltip right"},"企业版选项")),l.default.createElement(f.default.Item,{className:"item-readonly",key:"reader"},l.default.createElement("span",null,"只能阅读"),l.default.createElement("span",null,"不能编辑、评论、分享文件"),l.default.createElement("div",{className:"tooltip s-tooltip right"},"企业版选项")),l.default.createElement(f.default.Divider,null),l.default.createElement(f.default.Item,{className:"danger",key:"remove"},"移除"))}},{key:"render",value:function(){var e=this,t=void 0,n=this.props,r=n.permission,o=n.getPopupContainer;if("owner"===r.role){var i=this.props.userId===cow.currentUser.id,a=cow.currentUser.teamId===this.props.file.teamId&&("admin"===cow.currentUser.teamRole||"creator"===cow.currentUser.teamRole);t=i||a?l.default.createElement(d.Button,{mask:!0,getPopupContainer:o,overlay:this.renderTransferOverlay()},"所有者"):l.default.createElement("div",{className:"sm-dropdown-button no-overlay ownship"},"所有者")}else t="empty"===r.permission?l.default.createElement("div",{className:"sm-dropdown-button no-overlay",onClick:function(){return e.handleActionClick({key:"add"})}},m[r.permission]):l.default.createElement(d.Button,{mask:!0,getPopupContainer:o,overlay:this.renderPermissionOverlay()},m[r.role]);return t}}]),t}(u.Component);t.default=y,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),d=n(604),p=r(d),h=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={openKeys:[]},n.handleClick=n.handleClick.bind(n),n.handleOpenChange=n.handleOpenChange.bind(n),n}return a(t,e),l(t,null,[{key:"propTypes",get:function(){return{mode:c.PropTypes.oneOf(["vertical","horizontal","inline"]),selectedKeys:c.PropTypes.arrayOf(c.PropTypes.string),defaultSelectedKeys:c.PropTypes.arrayOf(c.PropTypes.string),openKeys:c.PropTypes.arrayOf(c.PropTypes.string),defaultOpenKeys:c.PropTypes.arrayOf(c.PropTypes.string),onClick:c.PropTypes.func,className:c.PropTypes.string,prefixCls:c.PropTypes.string,onOpenChange:c.PropTypes.func}}},{key:"defaultProps",get:function(){return{prefixCls:"sm-menu",onClick:s,onOpenChange:s,className:""}}}]),l(t,[{key:"componentWillReceiveProps",value:function(e){"inline"===this.props.mode&&"inline"!==e.mode&&(this.switchModeFromInline=!0),"openKeys"in e&&this.setOpenKeys(e.openKeys)}},{key:"handleClick",value:function(e){this.setOpenKeys([]),this.props.onClick(e)}},{key:"handleOpenChange",value:function(e){this.setOpenKeys(e),this.props.onOpenChange(e)}},{key:"setOpenKeys",value:function(e){"openKeys"in this.props||this.setState({openKeys:e})}},{key:"render",value:function(){var e={};return"inline"!==this.props.mode&&(e={openKeys:this.state.openKeys,onClick:this.handleClick,onOpenChange:this.handleOpenChange}),f.default.createElement(p.default,u({},this.props,e))}}]),t}(c.Component);t.default=h,h.Divider=d.Divider,h.Item=d.Item,h.SubMenu=d.SubMenu,h.ItemGroup=d.ItemGroup,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(67),i=r(o),a=n(37),s=r(a),u=n(145),l=r(u),c=n(605),f=r(c),d=n(340),p=(0,l.default)({displayName:"Menu",propTypes:{openSubMenuOnMouseEnter:s.default.bool,closeSubMenuOnMouseLeave:s.default.bool,selectedKeys:s.default.arrayOf(s.default.string),defaultSelectedKeys:s.default.arrayOf(s.default.string),defaultOpenKeys:s.default.arrayOf(s.default.string),openKeys:s.default.arrayOf(s.default.string),mode:s.default.string,onClick:s.default.func,onSelect:s.default.func,onDeselect:s.default.func,onDestroy:s.default.func,openTransitionName:s.default.string,openAnimation:s.default.oneOfType([s.default.string,s.default.object]),level:s.default.number,eventKey:s.default.string,selectable:s.default.bool,children:s.default.any},mixins:[f.default],getDefaultProps:function(){return{openSubMenuOnMouseEnter:!0,closeSubMenuOnMouseLeave:!0,selectable:!0,onClick:d.noop,onSelect:d.noop,onOpenChange:d.noop,onDeselect:d.noop,defaultSelectedKeys:[],defaultOpenKeys:[]}},getInitialState:function(){var e=this.props,t=e.defaultSelectedKeys,n=e.defaultOpenKeys;return"selectedKeys"in e&&(t=e.selectedKeys||[]),"openKeys"in e&&(n=e.openKeys||[]),{selectedKeys:t,openKeys:n}},componentWillReceiveProps:function(e){var t={};"selectedKeys"in e&&(t.selectedKeys=e.selectedKeys||[]),"openKeys"in e&&(t.openKeys=e.openKeys||[]),this.setState(t)},onDestroy:function(e){var t=this.state,n=this.props,r=t.selectedKeys,o=t.openKeys,i=r.indexOf(e);"selectedKeys"in n||-1===i||r.splice(i,1),i=o.indexOf(e),"openKeys"in n||-1===i||o.splice(i,1)},onItemHover:function(e){var t=this,n=e.item,r=this.props,o=r.mode,i=r.closeSubMenuOnMouseLeave,a=e.openChanges,s=void 0===a?[]:a;"inline"!==o&&!i&&n.isSubMenu&&function(){var r=t.state.activeKey,o=t.getFlatInstanceArray().filter(function(e){return e&&e.props.eventKey===r})[0];o&&o.props.open&&(s=s.concat({key:n.props.eventKey,item:n,originalEvent:e,open:!0}))}(),s=s.concat(this.getOpenChangesOnItemHover(e)),s.length&&this.onOpenChange(s)},onSelect:function(e){var t=this.props;if(t.selectable){var n=this.state.selectedKeys,r=e.key;n=t.multiple?n.concat([r]):[r],"selectedKeys"in t||this.setState({selectedKeys:n}),t.onSelect((0,i.default)({},e,{selectedKeys:n}))}},onClick:function(e){this.props.onClick(e)},onOpenChange:function(e){var t=this.props,n=this.state.openKeys.concat(),r=!1,o=function(e){var t=!1;if(e.open)(t=-1===n.indexOf(e.key))&&n.push(e.key);else{var o=n.indexOf(e.key);t=-1!==o,t&&n.splice(o,1)}r=r||t};Array.isArray(e)?e.forEach(o):o(e),r&&("openKeys"in this.props||this.setState({openKeys:n}),t.onOpenChange(n))},onDeselect:function(e){var t=this.props;if(t.selectable){var n=this.state.selectedKeys.concat(),r=e.key,o=n.indexOf(r);-1!==o&&n.splice(o,1),"selectedKeys"in t||this.setState({selectedKeys:n}),t.onDeselect((0,i.default)({},e,{selectedKeys:n}))}},getOpenTransitionName:function(){var e=this.props,t=e.openTransitionName,n=e.openAnimation;return t||"string"!=typeof n||(t=e.prefixCls+"-open-"+n),t},isInlineMode:function(){return"inline"===this.props.mode},lastOpenSubMenu:function(){var e=[],t=this.state.openKeys;return t.length&&(e=this.getFlatInstanceArray().filter(function(e){return e&&-1!==t.indexOf(e.props.eventKey)})),e[0]},renderMenuItem:function(e,t,n){if(!e)return null;var r=this.state,o={openKeys:r.openKeys,selectedKeys:r.selectedKeys,openSubMenuOnMouseEnter:this.props.openSubMenuOnMouseEnter};return this.renderCommonMenuItem(e,t,n,o)},render:function(){var e=(0,i.default)({},this.props);return e.className+=" "+e.prefixCls+"-root",this.renderRoot(e)}});t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(){var e=[].slice.call(arguments,0);return 1===e.length?e[0]:function(){for(var t=0;t<e.length;t++)e[t]&&e[t].apply&&e[t].apply(this,arguments)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";e.exports=n(758)},function(e,t,n){"use strict";function r(e,t,n){n=n||{},9===t.nodeType&&(t=o.getWindow(t));var r=n.allowHorizontalScroll,i=n.onlyScrollIfNeeded,a=n.alignWithTop,s=n.alignWithLeft,u=n.offsetTop||0,l=n.offsetLeft||0,c=n.offsetBottom||0,f=n.offsetRight||0;r=void 0===r||r;var d=o.isWindow(t),p=o.offset(e),h=o.outerHeight(e),m=o.outerWidth(e),y=void 0,v=void 0,g=void 0,b=void 0,_=void 0,w=void 0,k=void 0,E=void 0,C=void 0,M=void 0;d?(k=t,M=o.height(k),C=o.width(k),E={left:o.scrollLeft(k),top:o.scrollTop(k)},_={left:p.left-E.left-l,top:p.top-E.top-u},w={left:p.left+m-(E.left+C)+f,top:p.top+h-(E.top+M)+c},b=E):(y=o.offset(t),v=t.clientHeight,g=t.clientWidth,b={left:t.scrollLeft,top:t.scrollTop},_={left:p.left-(y.left+(parseFloat(o.css(t,"borderLeftWidth"))||0))-l,top:p.top-(y.top+(parseFloat(o.css(t,"borderTopWidth"))||0))-u},w={left:p.left+m-(y.left+g+(parseFloat(o.css(t,"borderRightWidth"))||0))+f,top:p.top+h-(y.top+v+(parseFloat(o.css(t,"borderBottomWidth"))||0))+c}),_.top<0||w.top>0?!0===a?o.scrollTop(t,b.top+_.top):!1===a?o.scrollTop(t,b.top+w.top):_.top<0?o.scrollTop(t,b.top+_.top):o.scrollTop(t,b.top+w.top):i||(a=void 0===a||!!a,a?o.scrollTop(t,b.top+_.top):o.scrollTop(t,b.top+w.top)),r&&(_.left<0||w.left>0?!0===s?o.scrollLeft(t,b.left+_.left):!1===s?o.scrollLeft(t,b.left+w.left):_.left<0?o.scrollLeft(t,b.left+_.left):o.scrollLeft(t,b.left+w.left):i||(s=void 0===s||!!s,s?o.scrollLeft(t,b.left+_.left):o.scrollLeft(t,b.left+w.left)))}var o=n(759);e.exports=r},function(e,t,n){"use strict";function r(e){var t=void 0,n=void 0,r=void 0,o=e.ownerDocument,i=o.body,a=o&&o.documentElement;return t=e.getBoundingClientRect(),n=t.left,r=t.top,n-=a.clientLeft||i.clientLeft||0,r-=a.clientTop||i.clientTop||0,{left:n,top:r}}function o(e,t){var n=e["page"+(t?"Y":"X")+"Offset"],r="scroll"+(t?"Top":"Left");if("number"!=typeof n){var o=e.document;n=o.documentElement[r],"number"!=typeof n&&(n=o.body[r])}return n}function i(e){return o(e)}function a(e){return o(e,!0)}function s(e){var t=r(e),n=e.ownerDocument,o=n.defaultView||n.parentWindow;return t.left+=i(o),t.top+=a(o),t}function u(e,t,n){var r="",o=e.ownerDocument,i=n||o.defaultView.getComputedStyle(e,null);return i&&(r=i.getPropertyValue(t)||i[t]),r}function l(e,t){var n=e[C]&&e[C][t];if(k.test(n)&&!E.test(t)){var r=e.style,o=r[T],i=e[M][T];e[M][T]=e[C][T],r[T]="fontSize"===t?"1em":n||0,n=r.pixelLeft+S,r[T]=o,e[M][T]=i}return""===n?"auto":n}function c(e,t){for(var n=0;n<e.length;n++)t(e[n])}function f(e){return"border-box"===O(e,"boxSizing")}function d(e,t,n){var r={},o=e.style,i=void 0;for(i in t)t.hasOwnProperty(i)&&(r[i]=o[i],o[i]=t[i]);n.call(e);for(i in t)t.hasOwnProperty(i)&&(o[i]=r[i])}function p(e,t,n){var r=0,o=void 0,i=void 0,a=void 0;for(i=0;i<t.length;i++)if(o=t[i])for(a=0;a<n.length;a++){var s=void 0;s="border"===o?o+n[a]+"Width":o+n[a],r+=parseFloat(O(e,s))||0}return r}function h(e){return null!=e&&e==e.window}function m(e,t,n){if(h(e))return"width"===t?D.viewportWidth(e):D.viewportHeight(e);if(9===e.nodeType)return"width"===t?D.docWidth(e):D.docHeight(e);var r="width"===t?["Left","Right"]:["Top","Bottom"],o="width"===t?e.offsetWidth:e.offsetHeight,i=O(e),a=f(e,i),s=0;(null==o||o<=0)&&(o=void 0,s=O(e,t),(null==s||Number(s)<0)&&(s=e.style[t]||0),s=parseFloat(s)||0),void 0===n&&(n=a?j:x);var u=void 0!==o||a,l=o||s;if(n===x)return u?l-p(e,["border","padding"],r,i):s;if(u){var c=n===N?-p(e,["border"],r,i):p(e,["margin"],r,i);return l+(n===j?0:c)}return s+p(e,P.slice(n),r,i)}function y(e){var t=void 0,n=arguments;return 0!==e.offsetWidth?t=m.apply(void 0,n):d(e,A,function(){t=m.apply(void 0,n)}),t}function v(e,t,n){var r=n;{if("object"!==(void 0===t?"undefined":_(t)))return void 0!==r?("number"==typeof r&&(r+="px"),void(e.style[t]=r)):O(e,t);for(var o in t)t.hasOwnProperty(o)&&v(e,o,t[o])}}function g(e,t){"static"===v(e,"position")&&(e.style.position="relative");var n=s(e),r={},o=void 0,i=void 0;for(i in t)t.hasOwnProperty(i)&&(o=parseFloat(v(e,i))||0,r[i]=o+t[i]-n[i]);v(e,r)}var b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},w=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,k=new RegExp("^("+w+")(?!px)[a-z%]+$","i"),E=/^(top|right|bottom|left)$/,C="currentStyle",M="runtimeStyle",T="left",S="px",O=void 0;"undefined"!=typeof window&&(O=window.getComputedStyle?u:l);var P=["margin","border","padding"],x=-1,N=2,j=1,I=0,D={};c(["Width","Height"],function(e){D["doc"+e]=function(t){var n=t.document;return Math.max(n.documentElement["scroll"+e],n.body["scroll"+e],D["viewport"+e](n))},D["viewport"+e]=function(t){var n="client"+e,r=t.document,o=r.body,i=r.documentElement,a=i[n];return"CSS1Compat"===r.compatMode&&a||o&&o[n]||a}});var A={position:"absolute",visibility:"hidden",display:"block"};c(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);D["outer"+t]=function(t,n){return t&&y(t,e,n?I:j)};var n="width"===e?["Left","Right"]:["Top","Bottom"];D[e]=function(t,r){if(void 0===r)return t&&y(t,e,x);if(t){var o=O(t);return f(t)&&(r+=p(t,["padding","border"],n,o)),v(t,e,r)}}}),e.exports=b({getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},offset:function(e,t){if(void 0===t)return s(e);g(e,t)},isWindow:h,each:c,css:v,clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);if(e.overflow)for(var n in e)e.hasOwnProperty(n)&&(t.overflow[n]=e.overflow[n]);return t},scrollLeft:function(e,t){if(h(e)){if(void 0===t)return i(e);window.scrollTo(t,a(e))}else{if(void 0===t)return e.scrollLeft;e.scrollLeft=t}},scrollTop:function(e,t){if(h(e)){if(void 0===t)return a(e);window.scrollTo(i(e),t)}else{if(void 0===t)return e.scrollTop;e.scrollTop=t}},viewportWidth:0,viewportHeight:0},D)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(67),i=r(o),a=n(0),s=r(a),u=n(37),l=r(u),c=n(145),f=r(c),d=(0,f.default)({displayName:"DOMWrap",propTypes:{tag:l.default.string,hiddenClassName:l.default.string,visible:l.default.bool},getDefaultProps:function(){return{tag:"div"}},render:function(){var e=(0,i.default)({},this.props);e.visible||(e.className=e.className||"",e.className+=" "+e.hiddenClassName);var t=e.tag;return delete e.tag,delete e.hiddenClassName,delete e.visible,s.default.createElement(t,e)}});t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(300),i=r(o),a=n(67),s=r(a),u=n(0),l=r(u),c=n(37),f=r(c),d=n(145),p=r(d),h=n(762),m=r(h),y=n(339),v=r(y),g=n(20),b=r(g),_=n(340),w=0,k=(0,p.default)({displayName:"SubMenu",propTypes:{parentMenu:f.default.object,title:f.default.node,children:f.default.any,selectedKeys:f.default.array,openKeys:f.default.array,onClick:f.default.func,onOpenChange:f.default.func,rootPrefixCls:f.default.string,eventKey:f.default.string,multiple:f.default.bool,active:f.default.bool,onSelect:f.default.func,closeSubMenuOnMouseLeave:f.default.bool,openSubMenuOnMouseEnter:f.default.bool,onDeselect:f.default.func,onDestroy:f.default.func,onItemHover:f.default.func,onMouseEnter:f.default.func,onMouseLeave:f.default.func,onTitleMouseEnter:f.default.func,onTitleMouseLeave:f.default.func,onTitleClick:f.default.func},mixins:[n(763)],getDefaultProps:function(){return{onMouseEnter:_.noop,onMouseLeave:_.noop,onTitleMouseEnter:_.noop,onTitleMouseLeave:_.noop,onTitleClick:_.noop,title:""}},getInitialState:function(){return this.isSubMenu=1,{defaultActiveFirst:!1}},componentWillUnmount:function(){var e=this.props,t=e.onDestroy,n=e.eventKey,r=e.parentMenu;t&&t(n),r.subMenuInstance===this&&this.clearSubMenuTimers()},onDestroy:function(e){this.props.onDestroy(e)},onKeyDown:function(e){var t=e.keyCode,n=this.menuInstance,r=this.isOpen();if(t===v.default.ENTER)return this.onTitleClick(e),this.setState({defaultActiveFirst:!0}),!0;if(t===v.default.RIGHT)return r?n.onKeyDown(e):(this.triggerOpenChange(!0),this.setState({defaultActiveFirst:!0})),!0;if(t===v.default.LEFT){var o=void 0;if(!r)return;return o=n.onKeyDown(e),o||(this.triggerOpenChange(!1),o=!0),o}return!r||t!==v.default.UP&&t!==v.default.DOWN?void 0:n.onKeyDown(e)},onOpenChange:function(e){this.props.onOpenChange(e)},onMouseEnter:function(e){var t=this.props;this.clearSubMenuLeaveTimer(t.parentMenu.subMenuInstance!==this),t.onMouseEnter({key:t.eventKey,domEvent:e})},onTitleMouseEnter:function(e){var t=this.props,n=t.parentMenu,r=t.eventKey,o=this;this.clearSubMenuTitleLeaveTimer(n.subMenuInstance!==o),n.menuItemInstance&&n.menuItemInstance.clearMenuItemMouseLeaveTimer(!0);var i=[];t.openSubMenuOnMouseEnter&&i.push({key:r,item:o,trigger:"mouseenter",open:!0}),t.onItemHover({key:r,item:o,hover:!0,trigger:"mouseenter",openChanges:i}),this.setState({defaultActiveFirst:!1}),t.onTitleMouseEnter({key:r,domEvent:e})},onTitleMouseLeave:function(e){var t=this,n=this.props,r=n.parentMenu,o=n.eventKey;r.subMenuInstance=this,r.subMenuTitleLeaveFn=function(){"inline"===n.mode&&n.active&&n.onItemHover({key:o,item:t,hover:!1,trigger:"mouseleave"}),n.onTitleMouseLeave({key:n.eventKey,domEvent:e})},r.subMenuTitleLeaveTimer=setTimeout(r.subMenuTitleLeaveFn,100)},onMouseLeave:function(e){var t=this,n=this.props,r=n.parentMenu,o=n.eventKey;r.subMenuInstance=this,r.subMenuLeaveFn=function(){if("inline"!==n.mode){var r=t.isOpen();r&&n.closeSubMenuOnMouseLeave&&n.active?n.onItemHover({key:o,item:t,hover:!1,trigger:"mouseleave",openChanges:[{key:o,item:t,trigger:"mouseleave",open:!1}]}):(n.active&&n.onItemHover({key:o,item:t,hover:!1,trigger:"mouseleave"}),r&&n.closeSubMenuOnMouseLeave&&t.triggerOpenChange(!1))}n.onMouseLeave({key:o,domEvent:e})},r.subMenuLeaveTimer=setTimeout(r.subMenuLeaveFn,100)},onTitleClick:function(e){var t=this.props;t.onTitleClick({key:t.eventKey,domEvent:e}),t.openSubMenuOnMouseEnter||(this.triggerOpenChange(!this.isOpen(),"click"),this.setState({defaultActiveFirst:!1}))},onSubMenuClick:function(e){this.props.onClick(this.addKeyPath(e))},onSelect:function(e){this.props.onSelect(e)},onDeselect:function(e){this.props.onDeselect(e)},getPrefixCls:function(){return this.props.rootPrefixCls+"-submenu"},getActiveClassName:function(){return this.getPrefixCls()+"-active"},getDisabledClassName:function(){return this.getPrefixCls()+"-disabled"},getSelectedClassName:function(){return this.getPrefixCls()+"-selected"},getOpenClassName:function(){return this.props.rootPrefixCls+"-submenu-open"},saveMenuInstance:function(e){this.menuInstance=e},addKeyPath:function(e){return(0,s.default)({},e,{keyPath:(e.keyPath||[]).concat(this.props.eventKey)})},triggerOpenChange:function(e,t){var n=this.props.eventKey;this.onOpenChange({key:n,item:this,trigger:t,open:e})},clearSubMenuTimers:function(){var e=void 0;this.clearSubMenuLeaveTimer(e),this.clearSubMenuTitleLeaveTimer(e)},clearSubMenuTitleLeaveTimer:function(){var e=this.props.parentMenu;e.subMenuTitleLeaveTimer&&(clearTimeout(e.subMenuTitleLeaveTimer),e.subMenuTitleLeaveTimer=null,e.subMenuTitleLeaveFn=null)},clearSubMenuLeaveTimer:function(){var e=this.props.parentMenu;e.subMenuLeaveTimer&&(clearTimeout(e.subMenuLeaveTimer),e.subMenuLeaveTimer=null,e.subMenuLeaveFn=null)},isChildrenSelected:function(){var e={find:!1};return(0,_.loopMenuItemRecusively)(this.props.children,this.props.selectedKeys,e),e.find},isOpen:function(){return-1!==this.props.openKeys.indexOf(this.props.eventKey)},renderChildren:function(e){var t=this.props,n={mode:"horizontal"===t.mode?"vertical":t.mode,visible:this.isOpen(),level:t.level+1,inlineIndent:t.inlineIndent,focusable:!1,onClick:this.onSubMenuClick,onSelect:this.onSelect,onDeselect:this.onDeselect,onDestroy:this.onDestroy,selectedKeys:t.selectedKeys,eventKey:t.eventKey+"-menu-",openKeys:t.openKeys,openTransitionName:t.openTransitionName,openAnimation:t.openAnimation,onOpenChange:this.onOpenChange,closeSubMenuOnMouseLeave:t.closeSubMenuOnMouseLeave,defaultActiveFirst:this.state.defaultActiveFirst,multiple:t.multiple,prefixCls:t.rootPrefixCls,id:this._menuId,ref:this.saveMenuInstance};return l.default.createElement(m.default,n,e)},render:function(){var e,t=this.isOpen();this.haveOpen=this.haveOpen||t;var n=this.props,r=this.getPrefixCls(),o=(e={},(0,i.default)(e,n.className,!!n.className),(0,i.default)(e,r+"-"+n.mode,1),e);o[this.getOpenClassName()]=t,o[this.getActiveClassName()]=n.active,o[this.getDisabledClassName()]=n.disabled,o[this.getSelectedClassName()]=this.isChildrenSelected(),this._menuId||(n.eventKey?this._menuId=n.eventKey+"$Menu":this._menuId="$__$"+ ++w+"$Menu"),o[r]=!0,o[r+"-"+n.mode]=1;var a={},u={},c={};n.disabled||(a={onClick:this.onTitleClick},u={onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter},c={onMouseEnter:this.onTitleMouseEnter,onMouseLeave:this.onTitleMouseLeave});var f={};return"inline"===n.mode&&(f.paddingLeft=n.inlineIndent*n.level),l.default.createElement("li",(0,s.default)({className:(0,b.default)(o)},u),l.default.createElement("div",(0,s.default)({style:f,className:r+"-title"},c,a,{"aria-expanded":t,"aria-owns":this._menuId,"aria-haspopup":"true"}),n.title),this.renderChildren(n.children))}});k.isSubMenu=1,t.default=k,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(184),i=r(o),a=n(67),s=r(a),u=n(0),l=r(u),c=n(37),f=r(c),d=n(145),p=r(d),h=n(605),m=r(h),y=n(342),v=r(y),g=(0,p.default)({displayName:"SubPopupMenu",propTypes:{onSelect:f.default.func,onClick:f.default.func,onDeselect:f.default.func,onOpenChange:f.default.func,onDestroy:f.default.func,openTransitionName:f.default.string,openAnimation:f.default.oneOfType([f.default.string,f.default.object]),openKeys:f.default.arrayOf(f.default.string),closeSubMenuOnMouseLeave:f.default.bool,visible:f.default.bool,children:f.default.any},mixins:[m.default],onDeselect:function(e){this.props.onDeselect(e)},onSelect:function(e){this.props.onSelect(e)},onClick:function(e){this.props.onClick(e)},onOpenChange:function(e){this.props.onOpenChange(e)},onDestroy:function(e){this.props.onDestroy(e)},onItemHover:function(e){var t=e.openChanges,n=void 0===t?[]:t;n=n.concat(this.getOpenChangesOnItemHover(e)),n.length&&this.onOpenChange(n)},getOpenTransitionName:function(){return this.props.openTransitionName},renderMenuItem:function(e,t,n){if(!e)return null;var r=this.props,o={openKeys:r.openKeys,selectedKeys:r.selectedKeys,openSubMenuOnMouseEnter:!0};return this.renderCommonMenuItem(e,t,n,o)},render:function(){var e=this.renderFirst;if(this.renderFirst=1,this.haveOpened=this.haveOpened||this.props.visible,!this.haveOpened)return null;var t=!0;!e&&this.props.visible&&(t=!1);var n=(0,s.default)({},this.props);n.className+=" "+n.prefixCls+"-sub";var r={};return n.openTransitionName?r.transitionName=n.openTransitionName:"object"===(0,i.default)(n.openAnimation)&&(r.animation=(0,s.default)({},n.openAnimation),t||delete r.animation.appear),l.default.createElement(v.default,(0,s.default)({},r,{showProp:"visible",component:"",transitionAppear:t}),this.renderRoot(n))}});t.default=g,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(339),i=r(o),a=n(258),s=r(a),u=n(764),l=r(u),c=n(13),f=r(c);t.default={componentDidMount:function(){this.componentDidUpdate()},componentDidUpdate:function(){"inline"!==this.props.mode&&(this.props.open?this.bindRootCloseHandlers():this.unbindRootCloseHandlers())},handleDocumentKeyUp:function(e){e.keyCode===i.default.ESC&&this.props.onItemHover({key:this.props.eventKey,item:this,hover:!1})},handleDocumentClick:function(e){if(!(0,l.default)(f.default.findDOMNode(this),e.target)){this.props.onItemHover({hover:!1,item:this,key:this.props.eventKey}),this.triggerOpenChange(!1)}},bindRootCloseHandlers:function(){this._onDocumentClickListener||(this._onDocumentClickListener=(0,s.default)(document,"click",this.handleDocumentClick),this._onDocumentKeyupListener=(0,s.default)(document,"keyup",this.handleDocumentKeyUp))},unbindRootCloseHandlers:function(){this._onDocumentClickListener&&(this._onDocumentClickListener.remove(),this._onDocumentClickListener=null),this._onDocumentKeyupListener&&(this._onDocumentKeyupListener.remove(),this._onDocumentKeyupListener=null)},componentWillUnmount:function(){this.unbindRootCloseHandlers()}},e.exports=t.default},function(e,t,n){"use strict";function r(e,t){for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(67),i=r(o),a=n(0),s=r(a),u=n(37),l=r(u),c=n(145),f=r(c),d=n(339),p=r(d),h=n(20),m=r(h),y=n(340),v=(0,f.default)({displayName:"MenuItem",propTypes:{rootPrefixCls:l.default.string,eventKey:l.default.string,active:l.default.bool,children:l.default.any,selectedKeys:l.default.array,disabled:l.default.bool,title:l.default.string,onSelect:l.default.func,onClick:l.default.func,onDeselect:l.default.func,parentMenu:l.default.object,onItemHover:l.default.func,onDestroy:l.default.func,onMouseEnter:l.default.func,onMouseLeave:l.default.func},getDefaultProps:function(){return{onSelect:y.noop,onMouseEnter:y.noop,onMouseLeave:y.noop}},componentWillUnmount:function(){var e=this.props;e.onDestroy&&e.onDestroy(e.eventKey),e.parentMenu.menuItemInstance===this&&this.clearMenuItemMouseLeaveTimer()},onKeyDown:function(e){if(e.keyCode===p.default.ENTER)return this.onClick(e),!0},onMouseLeave:function(e){var t=this,n=this.props,r=n.eventKey,o=n.parentMenu;o.menuItemInstance=this,o.menuItemMouseLeaveFn=function(){n.active&&n.onItemHover({key:r,item:t,hover:!1,domEvent:e,trigger:"mouseleave"})},o.menuItemMouseLeaveTimer=setTimeout(o.menuItemMouseLeaveFn,30),n.onMouseLeave({key:r,domEvent:e})},onMouseEnter:function(e){var t=this.props,n=t.eventKey,r=t.parentMenu;this.clearMenuItemMouseLeaveTimer(r.menuItemInstance!==this),r.subMenuInstance&&r.subMenuInstance.clearSubMenuTimers(),t.onItemHover({key:n,item:this,hover:!0,domEvent:e,trigger:"mouseenter"}),t.onMouseEnter({key:n,domEvent:e})},onClick:function(e){var t=this.props,n=this.isSelected(),r=t.eventKey,o={key:r,keyPath:[r],item:this,domEvent:e};t.onClick(o),t.multiple?n?t.onDeselect(o):t.onSelect(o):n||t.onSelect(o)},getPrefixCls:function(){return this.props.rootPrefixCls+"-item"},getActiveClassName:function(){return this.getPrefixCls()+"-active"},getSelectedClassName:function(){return this.getPrefixCls()+"-selected"},getDisabledClassName:function(){return this.getPrefixCls()+"-disabled"},clearMenuItemMouseLeaveTimer:function(){var e=this.props,t=e.parentMenu;t.menuItemMouseLeaveTimer&&(clearTimeout(t.menuItemMouseLeaveTimer),t.menuItemMouseLeaveTimer=null,t.menuItemMouseLeaveFn=null)},isSelected:function(){return-1!==this.props.selectedKeys.indexOf(this.props.eventKey)},render:function(){var e=this.props,t=this.isSelected(),n={};n[this.getActiveClassName()]=!e.disabled&&e.active,n[this.getSelectedClassName()]=t,n[this.getDisabledClassName()]=e.disabled,n[this.getPrefixCls()]=!0,n[e.className]=!!e.className;var r=(0,i.default)({},e.attribute,{title:e.title,className:(0,m.default)(n),role:"menuitem","aria-selected":t,"aria-disabled":e.disabled}),o={};e.disabled||(o={onClick:this.onClick,onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter});var a=(0,i.default)({},e.style);return"inline"===e.mode&&(a.paddingLeft=e.inlineIndent*e.level),s.default.createElement("li",(0,i.default)({style:a},r,o),e.children)}});v.isMenuItem=1,t.default=v,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o),a=n(37),s=r(a),u=n(145),l=r(u),c=(0,l.default)({displayName:"MenuItemGroup",propTypes:{renderMenuItem:s.default.func,index:s.default.number,className:s.default.string,rootPrefixCls:s.default.string},getDefaultProps:function(){return{disabled:!0}},renderInnerMenuItem:function(e,t){var n=this.props;return(0,n.renderMenuItem)(e,n.index,t)},render:function(){var e=this.props,t=e.className,n=void 0===t?"":t,r=e.rootPrefixCls,o=r+"-item-group-title",a=r+"-item-group-list";return i.default.createElement("li",{className:n+" "+r+"-item-group"},i.default.createElement("div",{className:o},e.title),i.default.createElement("ul",{className:a},i.default.Children.map(e.children,this.renderInnerMenuItem)))}});c.isMenuItemGroup=!0,t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=r(o),a=n(37),s=r(a),u=n(145),l=r(u),c=(0,l.default)({displayName:"Divider",propTypes:{disabled:s.default.bool,className:s.default.string,rootPrefixCls:s.default.string},getDefaultProps:function(){return{disabled:!0}},render:function(){var e=this.props,t=e.className,n=void 0===t?"":t,r=e.rootPrefixCls;return i.default.createElement("li",{className:n+" "+r+"-item-divider"})}});t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(769),i=r(o);t.default=i.default,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(0),f=r(c),d=n(37),p=r(d),h=n(13),m=r(h),y=n(341),v=r(y),g=n(770),b=r(g),_=function(e){function t(n){a(this,t);var r=s(this,e.call(this,n));return w.call(r),r.state="visible"in n?{visible:n.visible}:{visible:n.defaultVisible},r}return u(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.visible;void 0!==t&&this.setState({visible:t})},t.prototype.getMenuElement=function(){var e=this.props,t=e.overlay,n=e.prefixCls,r={prefixCls:n+"-menu",onClick:this.onClick};return"string"==typeof t.type&&delete r.prefixCls,f.default.cloneElement(t,r)},t.prototype.getPopupDomNode=function(){return this.refs.trigger.getPopupDomNode()},t.prototype.render=function(){var e=this.props,t=e.prefixCls,n=e.children,r=e.transitionName,o=e.animation,a=e.align,s=e.placement,u=e.getPopupContainer,c=e.showAction,d=e.hideAction,p=e.overlayClassName,h=e.overlayStyle,m=e.trigger,y=i(e,["prefixCls","children","transitionName","animation","align","placement","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","trigger"]);return f.default.createElement(v.default,l({},y,{prefixCls:t,ref:"trigger",popupClassName:p,popupStyle:h,builtinPlacements:b.default,action:m,showAction:c,hideAction:d,popupPlacement:s,popupAlign:a,popupTransitionName:r,popupAnimation:o,popupVisible:this.state.visible,afterPopupVisibleChange:this.afterVisibleChange,popup:this.getMenuElement(),onPopupVisibleChange:this.onVisibleChange,getPopupContainer:u}),n)},t}(c.Component);_.propTypes={minOverlayWidthMatchTrigger:p.default.bool,onVisibleChange:p.default.func,prefixCls:p.default.string,children:p.default.any,transitionName:p.default.string,overlayClassName:p.default.string,animation:p.default.any,align:p.default.object,overlayStyle:p.default.object,placement:p.default.string,overlay:p.default.node,trigger:p.default.array,showAction:p.default.array,hideAction:p.default.array,getPopupContainer:p.default.func,visible:p.default.bool,defaultVisible:p.default.bool},_.defaultProps={minOverlayWidthMatchTrigger:!0,prefixCls:"rc-dropdown",trigger:["hover"],showAction:[],hideAction:[],overlayClassName:"",overlayStyle:{},defaultVisible:!1,onVisibleChange:function(){},placement:"bottomLeft"};var w=function(){var e=this;this.onClick=function(t){var n=e.props,r=n.overlay.props;"visible"in n||e.setState({visible:!1}),r.onClick&&r.onClick(t)},this.onVisibleChange=function(t){var n=e.props;"visible"in n||e.setState({visible:t}),n.onVisibleChange(t)},this.afterVisibleChange=function(t){if(t&&e.props.minOverlayWidthMatchTrigger){var n=e.getPopupDomNode(),r=m.default.findDOMNode(e);r.offsetWidth>n.offsetWidth&&(n.style.width=r.offsetWidth+"px")}}};t.default=_,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={adjustX:1,adjustY:1},o=[0,0],i=t.placements={topLeft:{points:["bl","tl"],overflow:r,offset:[0,-4],targetOffset:o},topCenter:{points:["bc","tc"],overflow:r,offset:[0,-4],targetOffset:o},topRight:{points:["br","tr"],overflow:r,offset:[0,-4],targetOffset:o},bottomLeft:{points:["tl","bl"],overflow:r,offset:[0,4],targetOffset:o},bottomCenter:{points:["tc","bc"],overflow:r,offset:[0,4],targetOffset:o},bottomRight:{points:["tr","br"],overflow:r,offset:[0,4],targetOffset:o}};t.default=i},function(e,t,n){function r(e,t,n){var r=!0,s=!0;if("function"!=typeof e)throw new TypeError(a);return i(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),o(e,t,{leading:r,maxWait:t,trailing:s})}var o=n(772),i=n(175),a="Expected a function";e.exports=r},function(e,t,n){function r(e,t,n){function r(t){var n=g,r=b;return g=b=void 0,C=t,w=e.apply(r,n)}function c(e){return C=e,k=setTimeout(p,t),M?r(e):w}function f(e){var n=e-E,r=e-C,o=t-n;return T?l(o,_-r):o}function d(e){var n=e-E,r=e-C;return void 0===E||n>=t||n<0||T&&r>=_}function p(){var e=i();if(d(e))return h(e);k=setTimeout(p,f(e))}function h(e){return k=void 0,S&&g?r(e):(g=b=void 0,w)}function m(){void 0!==k&&clearTimeout(k),C=0,g=E=b=k=void 0}function y(){return void 0===k?w:h(i())}function v(){var e=i(),n=d(e);if(g=arguments,b=this,E=e,n){if(void 0===k)return c(E);if(T)return k=setTimeout(p,t),r(E)}return void 0===k&&(k=setTimeout(p,t)),w}var g,b,_,w,k,E,C=0,M=!1,T=!1,S=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,o(n)&&(M=!!n.leading,T="maxWait"in n,_=T?u(a(n.maxWait)||0,t):_,S="trailing"in n?!!n.trailing:S),v.cancel=m,v.flush=y,v}var o=n(175),i=n(773),a=n(669),s="Expected a function",u=Math.max,l=Math.min;e.exports=r},function(e,t,n){var r=n(150),o=function(){return r.Date.now()};e.exports=o},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e<10?"0"+e:e}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",i=new Date,a=+i/1e3,s=new Date(e),u=+new Date(e)/1e3;if(t){var l=a-u;if(l<60)return"刚刚";if(l<3600)return parseInt(l/60,10)+"分钟前"}var c=new Date(i.getFullYear()+"/"+(i.getMonth()+1)+"/"+i.getDate()+" 00:00:00"),f=new Date(e),d=864e5,p=c-f+d,h=o(s.getHours())+":"+o(s.getMinutes());if(p>0&&p<=d)return n?"今天":"今天 "+h;if(p>d&&p<=2*d)return n?"昨天":"昨天 "+h;var m=r,y=""+(s.getMonth()+1)+m+s.getDate()+" "+h;return n&&(y=""+(s.getMonth()+1)+m+s.getDate()),s.getFullYear()!==i.getFullYear()&&(y=""+s.getFullYear()+m+y),y}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=r(a),u=n(608),l=r(u),c=function(e){var t=i(e.children,e.hasOwnProperty("within1Hour")&&e.within1Hour,e.hasOwnProperty("onlyDate")&&e.onlyDate,e.dateSymbol),n=e.before,r=e.after;return s.default.createElement(l.default,null,n+t+r)};c.propTypes={children:a.PropTypes.string,within1Hour:a.PropTypes.bool,onlyDate:a.PropTypes.bool,dateSymbol:a.PropTypes.string,before:a.PropTypes.string,after:a.PropTypes.string},c.defaultProps={within1Hour:!1,onlyDate:!1,dateSymbol:"/",before:"",after:""},t.default=c,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(20),d=r(f),p=n(611),h=r(p),m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleScroll=n.handleScroll.bind(n),n.state={scrolledToEnd:!1},n}return a(t,e),u(t,null,[{key:"propTypes",get:function(){return{className:l.PropTypes.string,loadMore:l.PropTypes.func,hasMore:l.PropTypes.bool,spinning:l.PropTypes.bool,defaultText:l.PropTypes.node,noMoreText:l.PropTypes.node}}},{key:"defaultProps",get:function(){return{className:"",loadMore:function(){},hasMore:!0,spinning:!1,defaultText:"正在加载下一页...",noMoreText:"已经是最后一页了."}}}]),u(t,[{key:"handleScroll",value:function(e){var t=e.target;t.scrollTop+t.offsetHeight===t.firstChild.offsetHeight&&this.handleLoadMore()}},{key:"handleLoadMore",value:function(){this.state.scrolledToEnd||this.setState({scrolledToEnd:!0}),this.props.loadMore()}},{key:"renderLoadMore",value:function(){var e=this.props,t=e.hasMore,n=e.defaultText,r=e.noMoreText;return c.default.createElement("div",{className:"load-more"},t?n:r)}},{key:"render",value:function(){var e=(0,d.default)("infinite-scroll",this.props.className);return c.default.createElement(h.default,s({},this.props,{className:e,spinning:this.props.spinning,onScroll:this.handleScroll}),this.props.children,this.state.scrolledToEnd&&this.renderLoadMore())}}]),t}(l.Component);t.default=m,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(5),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={inviteUrl:null},n.isDingtalkPc=f.default.isDingtalkPc(),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{fileGuid:u.PropTypes.string,fileType:u.PropTypes.string}}},{key:"defaultProps",get:function(){return{fileGuid:cow.currentFile.guid,fileType:cow.pageType}}}]),s(t,[{key:"componentDidMount",value:function(){var e=this;f.default.get("/api/file/"+this.props.fileGuid+"/invite_link").then(function(t){e.setState({inviteUrl:f.default.getQrImageUrl(114,t.data.link)})})}},{key:"render",value:function(){return l.default.createElement("div",{className:"wechat-invite"},this.isDingtalkPc?null:l.default.createElement("span",{className:"btn"},"添加微信好友"),l.default.createElement("div",{className:"invite-link-popup"},l.default.createElement("p",null,"微信扫一扫"),l.default.createElement("img",{src:this.state.inviteUrl}),l.default.createElement("p",null,"把链接发送给好友",l.default.createElement("br",null),"邀请好友加入")))}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(51),d=o(f),p=n(778),h=o(p),m=n(780),y=o(m),v=n(781),g=o(v),b=n(782),_=o(b),w=n(72),k=n(783),E=o(k),C=n(5),M=o(C),T=n(146),S=o(T);n(784);var O=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loaderVisible:!1,currentDirectory:{},selectedDirectory:{},visible:!0,isMoved:!1},n.onNavigatorBack=n.onNavigatorBack.bind(n),n.onDirectoryClick=n.onDirectoryClick.bind(n),n.startMove=n.startMove.bind(n),n.socketHooker=n.socketHooker.bind(n),n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{sourceFile:l.PropTypes.object,onSuccess:l.PropTypes.func,onFail:l.PropTypes.func,onCancel:l.PropTypes.func,onClose:l.PropTypes.func}}},{key:"defaultProps",get:function(){return{onSuccess:function(){},onFail:function(){},onCancel:function(){},onClose:function(){}}}}]),u(t,[{key:"componentDidMount",value:function(){var e=this;(0,E.default)(this.socketHooker),this.mounted=!0,this.redirectDirectoryByChild(this.props.sourceFile).then(function(t){e.directoryOfSourceFile=t},function(){e.directoryOfSourceFile=null})}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.directoryOfSourceFile=null}},{key:"socketHooker",value:function(e){var t=this;if(this.mounted&&!this.state.isMoved){var n=e.guid,o=this.state.currentDirectory,i=this.props.sourceFile;["removePermission","delete"].indexOf(e.type)>-1?e.guid&&e.guid===i.guid?(M.default.alert({title:"文件已被删除，移动失败",type:"error"}),this.props.onClose()):r.remove(o.children,{guid:n})?this.setState({currentDirectory:o}):o.guid===n&&this.redirectDesktop():["add","getPermission","update"].indexOf(e.type)>-1&&(0,w.getDirectoryInfo)(e.file).then(function(n){var o=n.file,i=n.crumbInfo,a=o,s=r.get(i,"includedFileGuid",""),u=r.get(i,"crumbList",[]),l=e.file;if(s&&u.length){var c=t.state.currentDirectory;a.guid===c.guid?"update"===e.type?c.children=c.children.map(function(e){return e.guid===l.guid?l:e}):1===l.type?c.children.unshift(l):c.children.push(l):c.guid===l.guid&&(l.children=c.children,c=l),c.children=[].concat(c.children),t.mounted&&t.setState({currentDirectory:c})}})}}},{key:"redirectDirectoryByChild",value:function(e){var t=this;return new Promise(function(n,r){e||r(),t.setState({loaderVisible:!0},function(){(0,w.getDirectoryInfo)(e).then(function(e){var r=e.file;r.children&&(r.children=t.topAlignDirectory(r.children)),t.setState({currentDirectory:r,loaderVisible:!1},function(){n(r)})},function(e){M.default.alert({title:e.message,type:"error"}),t.redirectDesktop(),r(e)})})})}},{key:"redirectDirectory",value:function(e){var t=this;return new Promise(function(n,r){t.state.loaderVisible||(e&&e.children?(t.setState({currentDirectory:e}),n(e)):t.setState({loaderVisible:!0},function(){(0,w.getFile)(e.guid).then(function(e){e.children&&(e.children=t.topAlignDirectory(e.children)),t.setState({currentDirectory:e,loaderVisible:!1},function(){return n(e)})},function(e){M.default.alert(e.message),t.redirectDesktop(),r(e)})}))})}},{key:"redirectDesktop",value:function(){var e=this;this.setState({loaderVisible:!1},function(){e.redirectDirectory({guid:""})})}},{key:"topAlignDirectory",value:function(e){return r.sortBy(e,[function(e){return 1!==e.type}])}},{key:"onNavigatorBack",value:function(){var e=this.state,t=e.currentDirectory;e.loaderVisible||this.redirectDirectoryByChild(t)}},{key:"onDirectoryClick",value:function(e){this.redirectDirectory(e)}},{key:"confirmPreMove",value:function(e){var t=this,n=this.props.sourceFile,o=this.state.currentDirectory,i=this.directoryOfSourceFile,a=n.shortcut_id?"shortcut":"file",s=n.guid,u=o.guid;if(o.children.some(function(e){return e.guid===n.guid}))return M.default.alert({title:"移动成功"}),void this.props.onClose();this.setState({loaderVisible:!0}),(0,w.moveToFolder)(s,u,a,"info").then(function(n){if(0===n.code&&n.data&&"dialog"===n.data.type){var a=n.data.data,s=a.addUserCount,u=a.removeUserCount;if(s||u){var l={confirmFun:function(){e()},abortFun:function(){t.setState({visible:!0})}};s&&!u?r.assign(l,{title:"分享文件？",description:"移动后文件将与所有共享文件夹「"+o.name+"」的协作者共享。"}):!s&&u?r.assign(l,{title:"部分协作者可能失去访问权限？",description:"您正在将文档移出共享文件夹「"+i.name+"」，部分协作者将无权限访问该文档。"}):s&&u&&r.assign(l,{title:"部分协作者可能失去访问权限？",description:"移动后文件将与所有共享文件夹「"+o.name+"」的协作者共享。<br />您正在将文档移出共享文件夹「"+i.name+"」，部分协作者将无权限访问该文档。"}),t.setState({visible:!1,loaderVisible:!1},function(){(0,S.default)(l)})}}else 0===n.code&&n.data&&n.data.success?(M.default.alert({title:"移动成功"}),t.props.onClose(),t.props.onSuccess()):t.setState({visible:!0,loaderVisible:!1})},function(e){1===e.code&&e.error&&t.setState({visible:!1},function(){(0,S.default)({title:"没有权限移动",description:e.error,buttons:[{buttonLabel:"确定",customClass:"btn btn-ok",onClick:function(){return t.setState({visible:!0,loaderVisible:!1})},closeAfterClick:!0}]})})})}},{key:"startMove",value:function(){var e=this,t=this.props,n=t.sourceFile,r=t.onSuccess,o=this.state,i=o.currentDirectory;o.loaderVisible||this.confirmPreMove(function(){var t=n.shortcut_id?"shortcut":"file",o=n.guid,a=i.guid;e.setState({loaderVisible:!0,isMoved:!0},function(){(0,w.moveToFolder)(o,a,t,"action").then(function(t){0===t.code&&(M.default.alert({title:"移动成功"}),e.props.onClose(),r())},function(){M.default.alert({title:"移动失败"}),e.setState({loaderVisible:!1,isMoved:!1})})})})}},{key:"render",value:function(){var e=this.state,t=e.loaderVisible,n=e.currentDirectory,r=e.visible,o=this.props,i=o.onClose,a=o.sourceFile,s=n.children||[];return c.default.createElement(d.default,{onClose:i,open:r,customClass:"file-mover-dialog"},c.default.createElement(y.default,{visible:t}),c.default.createElement(g.default,{disable:!n.id,title:n.name,onClose:this.props.onClose,onBack:this.onNavigatorBack}),c.default.createElement(h.default,{onItemClick:this.onDirectoryClick,sourceFileId:a.id,isLoading:t,files:s}),c.default.createElement(_.default,{targetFolder:n,onAction:this.startMove}))}}]),t}(l.Component);t.default=O,e.exports=t.default}).call(t,n(1))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(779),f=r(c),d=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onItemClick=e.onItemClick.bind(e),e}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{sourceFileId:u.PropTypes.number,files:u.PropTypes.array,onItemClick:u.PropTypes.func,isLoading:u.PropTypes.bool}}},{key:"defaultProps",get:function(){return{files:[],onItemClick:function(){}}}}]),s(t,[{key:"onItemClick",value:function(e){this.props.onItemClick(e)}},{key:"renderItems",value:function(){var e=this.props,t=e.files,n=e.sourceFileId,r=e.isLoading,o=this.onItemClick,i=[];return t.forEach(function(e){var t=e.id===n&&1===e.type;i.push(l.default.createElement(f.default,{key:e.id,file:e,isSourceFile:t,onClick:o}))}),i.length?i:r?null:l.default.createElement("div",{className:"list-empty"},l.default.createElement("div",{className:"list-empty-icon"}),l.default.createElement("div",{className:"list-empty-text"},"没有文件"))}},{key:"render",value:function(){return l.default.createElement("ul",{className:"file-mover-list"},this.renderItems())}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),f=n(20),d=r(f),p=n(271),h=r(p),m=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.file,o=e.isSourceFile;return n.state={tipVisible:!1,disable:1!==r.type||r.permissions&&!r.permissions.editable||o},n.timerId=-1,n.onClick=n.onClick.bind(n),n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseOut=n.onMouseOut.bind(n),n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{isSourceFile:l.PropTypes.bool,file:l.PropTypes.object,onClick:l.PropTypes.func}}}]),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.file,n=e.isSourceFile,r=1!==t.type||t.permissions&&!t.permissions.editable||n;r!==this.state.disable&&this.setState({disable:r})}},{key:"componentWillUnmount",value:function(){this.clearTimerId()}},{key:"clearTimerId",value:function(){this.timerId>-1&&(clearTimeout(this.timerId),this.timerId=-1)}},{key:"onClick",value:function(){var e=this.props.file;!this.state.disable&&this.props.onClick(e)}},{key:"onMouseEnter",value:function(){var e=this,t=this.state.tipVisible;this.clearTimerId(),t||(this.timerId=setTimeout(function(){e.setState({tipVisible:!0})},1e3))}},{key:"onMouseOut",value:function(){this.clearTimerId(),this.state.tipVisible&&this.setState({tipVisible:!1})}},{key:"renderTitle",value:function(){var e=this.props,t=e.file,n=e.isSourceFile,r="";if(1!==t.type&&(r="这不是文件夹，不能移动到这里"),t.permissions&&!t.permissions.editable&&(r="只能阅读的文件夹"),n&&(r="正在被移动的文件夹"),r){var o={pointerEvents:"none"};return c.default.createElement(h.default,{title:r,align:{offset:[0,-12]},arrowPointAtCenter:!0,placement:"bottom",visible:this.state.tipVisible,offsetTop:-20},c.default.createElement("span",{className:"file-name-text",style:o},t.name))}return c.default.createElement("span",{className:"file-name-text"},t.name)}},{key:"render",value:function(){var e,t=this.props.file,n=this.state.disable,r=t.parent_id,i=t.share_count,a=t.type,s=1===a?"folder":-1===a?"spreadsheet":"doc",u=(0,d.default)({"file-list-item":!0,disable:n}),l=0===r&&i>0||r>0&&i>0,f=(0,d.default)((e={"file-icon":!0,"file-sprite":!0},o(e,"file-"+s+"-icon",!0),o(e,"file-shared",l),e)),p={pointerEvents:"none"};return c.default.createElement("li",{key:t.id,"data-id":t.id,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseOut:this.onMouseOut,className:u},c.default.createElement("i",{className:f,style:p}),this.renderTitle(),t.starred&&c.default.createElement("i",{className:"file-tag-icon file-star-icon active",style:p}),1!==t.type&&l&&c.default.createElement("i",{className:"file-tag-icon file-shared-icon",style:p}),1===t.type&&c.default.createElement("i",{className:"enter-folder-icon",style:p}))}}]),t}(l.Component);t.default=m,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return this.props.visible?l.default.createElement("div",{className:"file-list-loader"},l.default.createElement("div",{className:"spinner"})):null}}],[{key:"propTypes",get:function(){return{visible:u.PropTypes.bool}}}]),t}(u.Component);t.default=c,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onGobackClick=e.onGobackClick.bind(e),e.onCloseClick=e.onCloseClick.bind(e),e}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{title:u.PropTypes.string,onBack:u.PropTypes.func,onClose:u.PropTypes.func,disable:u.PropTypes.bool}}},{key:"defaultProps",get:function(){return{title:"我的桌面",onBack:function(){},onClose:function(){},disable:!1}}}]),s(t,[{key:"onGobackClick",value:function(){var e=this.props,t=e.onBack;!e.disable&&t()}},{key:"onCloseClick",value:function(){(0,this.props.onClose)()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.disable;return l.default.createElement("div",{className:"file-mover-navigator"},l.default.createElement("a",{href:"javascript:void(0)",className:n?"disable":"",style:{display:"inline-block"},onClick:this.onGobackClick},l.default.createElement("i",{className:"navigator-back"}),l.default.createElement("span",{className:"navigator-title"},t)),l.default.createElement("a",{href:"javascript:void(0)",onClick:this.onCloseClick,className:"file-mover-close"},l.default.createElement("i",{className:"dialog-close-icon"})))}}]),t}(u.Component);t.default=c,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onClick=e.onClick.bind(e),e}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{targetFolder:u.PropTypes.object,onAction:u.PropTypes.func}}},{key:"defaultProps",get:function(){return{onAction:function(){}}}}]),s(t,[{key:"onClick",value:function(){(0,this.props.onAction)()}},{key:"render",value:function(){var e=this.props.targetFolder;return l.default.createElement("div",{className:"file-mover-action"},l.default.createElement("button",{onClick:this.onClick,className:"sm-btn sm-btn-primary file-mover-btn"},"移动到 "+(e.name||"我的桌面")))}}]),t}(u.Component);t.default=c,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||function(){},i.default.bind("File",function(t){"update"===t.db_event?e(+t.data.is_delete>0?{type:"delete",guid:t.data.guid}:{type:"update",file:t.data}):"create"===t.db_event&&e({type:"add",file:t.data})}),i.default.bind("Permission",function(t){"destroy"===t.db_event?e({type:"removePermission",guid:t.data.guid}):"create"===t.db_event&&e({type:"getPermission",file:t.data.file})})};var o=n(33),i=r(o);e.exports=t.default},function(e,t){},function(e,t){},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(256),d=o(f),p=n(5),h=o(p),m=n(33),y=o(m),v=n(22),g=n(9),b=o(g),_=n(72),w=o(_),k=n(21),E=n(69),C=n(787),M=o(C),T=n(444),S=o(T),O=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={open:!1,isEnableShare:!1,readOnly:!1,isEnterprise:!1,isPasswordProtected:!1,password:(0,S.default)("cow","currentFile","password")?cow.currentFile.password:null},n.changeShareState=n.changeShareState.bind(n),n.changePassword=n.changePassword.bind(n),n.onToggleBtn=n.onToggleBtn.bind(n),n.componentClick=n.componentClick.bind(n),n}return s(t,e),u(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.init(),b.default.attach("doc:init",this.init,{scope:this})}},{key:"componentWillUnmount",value:function(){this.mounted=!1,b.default.detach("doc:init",this.init)}},{key:"componentClick",value:function(){this.setState({open:!1})}},{key:"onToggleBtn",value:function(){w.default.checkIsWelcomeFile()&&b.default.notify("guideTip:visible",{tag:"share",value:!1}),this.setState({open:!this.state.open})}},{key:"changeShareStatusAjax",value:function(e,t,n){var r="";(0,k.isSheet)(cow.pageType)?r=cow.currentSheetGuid:(0,k.isDoc)(cow.pageType)&&(r=cow.currentDocGuid),(0,v.ajaxPatch)(E.SET_EXTERNAL_LINK.replace("{%guid%}",r),{shareMode:e,passwordProtected:t}).then(function(t){if("function"==typeof n)if(0===t.code)n(!0),(0,k.setShareMode)(e),(0,k.setPasswordProtected)(t.data.passwordProtected,t.data.password),h.default.alert({title:"设置成功"});else{n(!1);var r=t.message||t.error,o={type:"error",title:r};h.default.alert(o)}},function(){h.default.alert({type:"error",title:"网络异常，设置失败"}),"function"==typeof n&&n(!1)})}},{key:"changePasswordAjax",value:function(e){var t="";(0,k.isSheet)(cow.pageType)?t=cow.currentSheetGuid:(0,k.isDoc)(cow.pageType)&&(t=cow.currentDocGuid),(0,v.ajaxPatch)(E.SET_EXTERNAL_LINK.replace("{%guid%}",t),{resetPassword:1}).then(function(t){if(0===t.code)"function"==typeof e&&e(!0,t.data.password),(0,k.setPasswordProtected)(!0,t.data.password),h.default.alert({title:"设置成功"});else{"function"==typeof e&&e(!1);var n={type:"error",title:t.error};t.error.length>=20&&(n.title="设置失败",n.content=t.error),h.default.alert(n)}},function(){h.default.alert({type:"error",title:"网络异常，设置失败"}),"function"==typeof e&&e(!1)}).catch(function(){h.default.alert({type:"error",title:"设置失败"}),"function"==typeof e&&e(!1)})}},{key:"updateShareState",value:function(e,t){var n={isEnableShare:!1,readOnly:!1,isEnterprise:!1,isPasswordProtected:!1};"private"===e?n.isEnableShare=!1:"readonly"===e?(n.isEnableShare=!0,n.readOnly=!0):"editable"===e?n.isEnableShare=!0:"enterprise_editable"===e?(n.isEnableShare=!0,n.isEnterprise=!0):"enterprise_readonly"===e&&(n.isEnableShare=!0,n.readOnly=!0,n.isEnterprise=!0),n.isPasswordProtected=t,n.password=(0,S.default)("cow","currentFile","password")?cow.currentFile.password:null,this.setState(n)}},{key:"changeShareState",value:function(e,t,n){var r=this,o=(0,k.getShareMode)(),i=this.state.isPasswordProtected;o===e&&i===t||this.changeShareStatusAjax(e,t?1:0,function(o){o?(r.updateShareState(e,t),"function"==typeof n&&n(null)):"function"==typeof n&&n(!0)})}},{key:"changePassword",value:function(e){var t=this;this.changePasswordAjax(function(n,r){n?(t.setState({password:r}),"function"==typeof e&&e(null)):"function"==typeof e&&e(!0)})}},{key:"init",value:function(){this.initShareStatus(),this.setState({shareList:[]})}},{key:"initShareStatus",value:function(){this.updateShareState((0,k.getShareMode)(),(0,k.getPasswordProtected)()),this.initPush()}},{key:"initPush",value:function(){var e=this;y.default.bind("File",function(t){if(e.mounted&&r.get(window,"cow.currentFile.guid")===t.data.guid){var n=t.data.shareMode;(0,k.setShareMode)(n),(0,k.setPasswordProtected)(t.data.passwordProtected,t.data.password),e.updateShareState(n,t.data.passwordProtected)}})}},{key:"render",value:function(){var e=this.state.open?"":"hide",t=this.state,n=t.isEnableShare,r=t.readOnly,o=t.isEnterprise,i=t.isPasswordProtected,a=t.password;return c.default.createElement("div",{className:"share-btn-wrap"},c.default.createElement("div",{className:"s-btn sm-share-btn "+(this.state.open?"active":""),onTouchTap:this.onToggleBtn},"分享"),c.default.createElement("div",{className:"sheet-share-dropdown with-trangle "+e},c.default.createElement(M.default,{isEnableShare:n,readOnly:r,isEnterprise:o,isPasswordProtected:i,password:a,onShareStateChange:this.changeShareState,onPasswordChange:this.changePassword})))}}]),t}(l.Component);t.default=(0,d.default)(O),e.exports=t.default}).call(t,n(1))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(788);var u=n(0),l=r(u),c=n(789),f=r(c),d=n(791),p=r(d),h=n(443),m=r(h),y=n(444),v=r(y),g=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.isEnableShare,n=e.readOnly,r=e.isEnterprise,o=e.isPasswordProtected,i=e.password,a=e.onShareStateChange,s=e.onPasswordChange,u=(0,v.default)("cow","currentUser","accountType")&&!!cow.currentUser.accountType.match(/^personal_/),c=void 0;return c=t?r?o?"public-enterprise-password":"public-enterprise":u?"public-personal":o?"public-password":"public":u?"private-personal":"private",l.default.createElement("div",{className:"scw"},(0,m.default)(c).when("private",function(){return l.default.createElement(f.default,{onStateChange:a})}).when("private-personal",function(){return l.default.createElement(f.default,{personal:u,onStateChange:a})}).when("public",function(){return l.default.createElement(p.default,{readOnly:n,onStateChange:a})}).when("public-password",function(){return l.default.createElement(p.default,{isPasswordProtected:!0,password:i,readOnly:n,onStateChange:a,onPasswordChange:s})}).when("public-enterprise",function(){return l.default.createElement(p.default,{enterprise:!0,readOnly:n,onStateChange:a})}).when("public-enterprise-password",function(){return l.default.createElement(p.default,{enterprise:!0,isPasswordProtected:!0,password:i,readOnly:n,onStateChange:a,onPasswordChange:s})}).when("public-personal",function(){return l.default.createElement(p.default,{personal:!0,readOnly:n,onStateChange:a,isPasswordProtected:o,password:i})}).done())}}]),t}(u.Component);g.defaultProps={isEnableShare:!1,readOnly:!1,isEnterprise:!1,isPasswordProtected:!1,password:null},g.propTypes={isEnableShare:u.PropTypes.bool,readOnly:u.PropTypes.bool,isEnterprise:u.PropTypes.bool,isPasswordProtected:u.PropTypes.bool,password:l.default.PropTypes.oneOfType([l.default.PropTypes.string,null]),onShareStateChange:u.PropTypes.func,onPasswordChange:u.PropTypes.func},t.default=g,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u);n(790);var c=n(443),f=r(c),d=n(444),p=r(d),h="shimo-share-new-feature-has-presented",m=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isPersonalNotPresented:!window.localStorage.getItem(h)},e.onModeClick=e.onModeClick.bind(e),e}return a(t,e),s(t,[{key:"componentDidUpdate",value:function(){window.localStorage.getItem(h)||window.localStorage.setItem(h,"1")}},{key:"onModeClick",value:function(e,t){var n=this;return function(r){r.preventDefault(),"function"==typeof n.props.onStateChange&&n.props.onStateChange(e,t)}}},{key:"nothing",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this.props.personal,t=this.state.isPersonalNotPresented,n=(0,p.default)("cow","currentFile","shareMode")&&cow.currentFile.shareMode.match(/editable/)?"editable":"readonly";return l.default.createElement("div",{className:"private-content"},l.default.createElement("a",{className:"option",href:"#",onClick:this.onModeClick(n,!1)},l.default.createElement("div",{className:"icon public"},l.default.createElement("div",{className:"glyph glyph-public"})),l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"公开链接分享"),l.default.createElement("div",{className:"descr"},"有链接的人可以访问"))),l.default.createElement("a",{className:e?"option disabled":"option",href:"#",onClick:e?this.nothing:this.onModeClick(n,!0)},l.default.createElement("div",{className:"icon password"},l.default.createElement("div",{className:"glyph glyph-password"}),(0,f.default)(!e&&t).when(!0,function(){return l.default.createElement("div",{className:"flag feature-new"},"新功能")}).done(),(0,f.default)(e).when(!0,function(){return l.default.createElement("div",{className:"flag feature-enterprise"},"企业版功能")}).done()),l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"密码链接分享"),l.default.createElement("div",{className:"descr"},"有密码和链接的人可以访问"))),l.default.createElement("a",{className:e?"option disabled":"option",href:"#",onClick:e?this.nothing:this.onModeClick("enterprise_"+n,!1)},l.default.createElement("div",{className:"icon enterprise"},l.default.createElement("div",{className:"glyph glyph-enterprise"}),(0,f.default)(e).when(!0,function(){return l.default.createElement("div",{className:"flag feature-enterprise"},"企业版功能")}).done()),l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"仅企业内部共享"),l.default.createElement("div",{className:"descr"},"所有企业成员可以访问"))),l.default.createElement("a",{className:e?"option disabled":"option",href:"#",onClick:e?this.nothing:this.onModeClick("enterprise_"+n,!0)},l.default.createElement("div",{className:"icon enterprise-password"},l.default.createElement("div",{className:"glyph glyph-enterprise-password"}),(0,f.default)(e).when(!0,function(){return l.default.createElement("div",{className:"flag feature-enterprise"},"企业版功能")}).done()),l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"仅企业内部加密共享"),l.default.createElement("div",{className:"descr"},"所有企业成员可以通过密码访问"))),l.default.createElement("hr",{className:"separator"}),l.default.createElement("a",{className:"option",href:"#",onClick:this.onModeClick("private",!1)},l.default.createElement("div",{className:"icon private"},l.default.createElement("div",{className:"glyph glyph-private"})),l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"私有文档"),l.default.createElement("div",{className:"descr"},"只有协作者可以访问"),l.default.createElement("div",{className:"glyph glyph-checker"}))))}}]),t}(u.Component);m.defaultProps={personal:!1},m.propTypes={personal:l.default.PropTypes.bool,onStateChange:l.default.PropTypes.func},t.default=m,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u);n(792);var c=n(443),f=r(c),d=n(327),p=r(d),h=n(5),m=r(h),y=n(793),v=r(y),g=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isPriorityListVisible:!1},e.onReadonlyVisibleChange=e.onReadonlyVisibleChange.bind(e),e.onModeChange=e.onModeChange.bind(e),e.onPasswordProtectedChange=e.onPasswordProtectedChange.bind(e),e.onEnterpriseChange=e.onEnterpriseChange.bind(e),e.onPasswordChange=e.onPasswordChange.bind(e),e}return a(t,e),s(t,[{key:"componentDidMount",value:function(){document.documentElement.addEventListener("click",this.onReadonlyVisibleChange),this.initCopy()}},{key:"componentDidUpdate",value:function(){this.initCopy()}},{key:"componentWillUnmount",value:function(){document.documentElement.removeEventListener("click",this.onReadonlyVisibleChange)}},{key:"initCopy",value:function(){var e=new p.default(this.refs.copy);e.on("success",function(){m.default.alert({title:"复制成功！",delay:1500})}),e.on("error",function(){m.default.alert({title:"复制失败！",delay:1500,type:"error"})})}},{key:"onReadonlyVisibleChange",value:function(e){var t=this;setTimeout(function(){e.target===t.refs["priority-content"]?t.setState({isPriorityListVisible:!t.state.isPriorityListVisible}):t.setState({isPriorityListVisible:!1})},0)}},{key:"onModeChange",value:function(e,t){var n=this;return function(r){r.preventDefault();var o=n.props.onStateChange;"function"==typeof o&&o(e,t)}}},{key:"onPasswordProtectedChange",value:function(e){var t=this;return function(n){var r=t.props.onStateChange;"function"==typeof r&&r(e,n)}}},{key:"onPasswordChange",value:function(e){e.preventDefault();var t=this.props.onPasswordChange;"function"==typeof t&&t()}},{key:"onEnterpriseChange",value:function(e){var t=this;return function(n,r){var o=function(e){return"enterprise_"+e.replace("enterprise_","")},i=function(e){return e.replace("enterprise_","")};"function"==typeof t.props.onStateChange&&t.props.onStateChange(n?o(e):i(e),t.props.isPasswordProtected,r)}}},{key:"generateMode",value:function(e,t){return e?t?"enterprise_readonly":"enterprise_editable":t?"readonly":"editable"}},{key:"render",value:function(){var e=this.state.isPriorityListVisible,t=this.props,n=t.isPasswordProtected,r=t.enterprise,o=t.personal,i=t.readOnly,a=t.password,s=this.generateMode(r,i);return l.default.createElement("div",{className:"public-content"},l.default.createElement("div",{className:"content-header"},function(){return n&&r?l.default.createElement("div",{className:"icon enterprise-password"},l.default.createElement("div",{className:"glyph glyph-enterprise-password"})):n?l.default.createElement("div",{className:"icon password"},l.default.createElement("div",{className:"glyph glyph-password"})):r?l.default.createElement("div",{className:"icon enterprise"},l.default.createElement("div",{className:"glyph glyph-enterprise"})):l.default.createElement("div",{className:"icon public"},l.default.createElement("div",{className:"glyph glyph-public"}))}(),function(){return n&&r?l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"仅企业内部加密共享"),l.default.createElement("div",{className:"descr"},"所有企业成员可以通过密码访问")):n?l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"密码链接分享"),l.default.createElement("div",{className:"descr"},"有密码和链接的人可以访问")):r?l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"仅企业内部共享"),l.default.createElement("div",{className:"descr"},"所有企业成员可以访问")):l.default.createElement("div",{className:"text"},l.default.createElement("div",{className:"title"},"公开链接分享"),l.default.createElement("div",{className:"descr"},"有链接的人可以访问"))}(),l.default.createElement("div",{className:"priority"},l.default.createElement("div",{className:"priority-content",ref:"priority-content"},i?"只能阅读":"可以编辑"),e?l.default.createElement("div",{className:"priority-list"},l.default.createElement("a",{href:"#",className:"priority-item",onClick:this.onModeChange(r?"enterprise_editable":"editable",n)},l.default.createElement("div",{className:"priority-title"},"可以编辑"),l.default.createElement("div",{className:"priority-descr"},"可以编辑、评论、分享文件")),l.default.createElement("a",{href:"#",className:"priority-item",onClick:this.onModeChange(r?"enterprise_readonly":"readonly",n)},l.default.createElement("div",{className:"priority-title"},"只能阅读"),l.default.createElement("div",{className:"priority-descr"},"不能编辑、评论、分享文件")),l.default.createElement("div",{className:"priority-separator"}),l.default.createElement("a",{href:"#",id:"priority-cancel-item",className:"priority-cancel-item",onClick:this.onModeChange("private",!1)},l.default.createElement("div",{className:"priority-title"},"取消共享"))):null)),l.default.createElement("div",{className:"copy-section"},l.default.createElement("div",{className:"copy-url"},l.default.createElement("input",{type:"text",readOnly:!0,className:"copy-input",value:location.href+"/「"+m.default.cutName(cow.currentFile.name,30)+"」"+(a?"访问密码 "+a:"")})),l.default.createElement("span",{className:"copy-button",ref:"copy","data-clipboard-action":"copy","data-clipboard-target":".copy-input"},"复制链接")),l.default.createElement("div",{className:"qrcode-section"},l.default.createElement("div",{className:"qrcode",style:{backgroundImage:"url("+m.default.getQrImageUrl(115,location.href)+")",backgroundPosition:"-7px -7px",backgroundSize:"115px 115px"}}),l.default.createElement("div",{className:"qrcode-text"},"扫一扫",l.default.createElement("br",null),"分享给朋友")),l.default.createElement("div",{className:"options-section"},l.default.createElement("div",{className:"checkbox-wrapper"},l.default.createElement(v.default,{disabled:o&&!n,checked:n,onChange:this.onPasswordProtectedChange(s)},(0,f.default)(o).when(!0,"需要密码才能访问（企业版功能）").when(!1,"需要密码才能访问").done())),l.default.createElement("div",{className:"checkbox-wrapper",style:{marginTop:10}},l.default.createElement(v.default,{disabled:o,checked:r,onChange:this.onEnterpriseChange(s)},(0,f.default)(o).when(!0,"仅企业内部共享（企业版功能）").when(!1,"仅企业内部共享").done())),n?l.default.createElement("div",{className:"password-section"},l.default.createElement("input",{type:"text",className:"password",value:a,readOnly:!0}),o?null:l.default.createElement("a",{href:"#",className:"change-password",onClick:this.onPasswordChange},"更换密码")):null,o&&!n?l.default.createElement("a",{href:"/company/register?from=share",target:"_blank",className:"try-enterprise-edition"},"免费试用企业版"):null))}}]),t}(u.Component);g.defaultProps={isPasswordProtected:!1,password:null,enterprise:!1,personal:!1,readOnly:!0},g.propTypes={isPasswordProtected:l.default.PropTypes.bool,password:l.default.PropTypes.oneOfType([l.default.PropTypes.string,null]),enterprise:l.default.PropTypes.bool,personal:l.default.PropTypes.bool,readOnly:l.default.PropTypes.bool,onStateChange:l.default.PropTypes.func,onPasswordChange:l.default.PropTypes.func},t.default=g,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n}return a(t,e),s(t,[{key:"onChange",value:function(){this.props.disabled||"function"==typeof this.props.onChange&&this.props.onChange(!this.props.checked)}},{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.checked,r=e.children;return l.default.createElement("div",{className:"checkbox"+(t?" disabled":"")+(n&&!t?" checked":""),onClick:this.onChange},l.default.createElement("div",{className:"checker"},l.default.createElement("div",{className:"glyph glyph-checkbox-checker"})),r)}}]),t}(u.Component);c.defaultProps={disabled:!1,checked:!1},c.propTypes={disabled:l.default.PropTypes.bool,checked:l.default.PropTypes.bool,onChange:l.default.PropTypes.func},t.default=c,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(441),d=o(f),p=n(5),h=o(p),m=n(34),y=o(m),v=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"close",value:function(e){"export-dialog show"===e.target.className&&this.props.close()}},{key:"doExport",value:function(e){var t={title:r("#doc-title-input").val(),type:e,guid:window.cow.currentFile.guid};window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var n=function(e,t){t=encodeURIComponent(decodeURIComponent(t));var n=document.createElement("a");if(n.href=location.origin+"/download/export?filename="+e,n.href+="&downloadAs="+t,n.download=t,!d.default.detectIE)return d.default.simulate(n,"click");window.location=n};h.default.alert({title:"正在导出…"}),y.default.get(location.origin+"/export",t,function(t){return n(t.data.filename,r("#doc-title-input").val()+"."+e)},function(){return h.default.alert({title:"下载出错，请重试。",type:"error"})}),this.props.close()}},{key:"render",value:function(){return c.default.createElement("div",{className:"export-dialog show",onClick:this.close.bind(this)},c.default.createElement("div",{className:"export-box"},c.default.createElement("div",{className:"export-header"},c.default.createElement("span",{className:"title"},"导出"),c.default.createElement("span",{className:"icon-close hicon",onClick:this.props.close})),c.default.createElement("div",{className:"export-content"},c.default.createElement("div",{className:"export-pdf"},c.default.createElement("span",{className:"export-sprite pdf",onClick:this.doExport.bind(this,"pdf")}),c.default.createElement("span",{className:"text"},"PDF")),c.default.createElement("div",{className:"export-word"},c.default.createElement("span",{className:"export-sprite docx",onClick:this.doExport.bind(this,"docx")}),c.default.createElement("span",{className:"text"},"Word")),c.default.createElement("div",{className:"export-jpg"},c.default.createElement("span",{className:"export-sprite jpg",onClick:this.doExport.bind(this,"jpg")}),c.default.createElement("span",{className:"text"},"JPG")),c.default.createElement("div",{className:"error-msg"}))))}}]),t}(l.Component);t.default=v,v.propTypes={close:c.default.PropTypes.func},e.exports=t.default}).call(t,n(2))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(72),f=r(c),d=n(9),p=r(d);n(797);var h=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"_showHistory",value:function(){p.default.notify("history:toggle"),f.default.checkIsWelcomeFile()&&p.default.notify("guideTip:visible",{tag:"history",value:!1})}},{key:"render",value:function(){return l.default.createElement("div",{className:"history-icon",onClick:this._showHistory})}}]),t}(u.Component);t.default=h,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";var r=n(215),o=n(799),i=n(7),a=n(29),s=r.createClass({displayName:"ReactTransitionGroup",propTypes:{component:r.PropTypes.any,childFactory:r.PropTypes.func},getDefaultProps:function(){return{component:"span",childFactory:a.thatReturnsArgument}},getInitialState:function(){return{children:o.getChildMapping(this.props.children)}},componentWillMount:function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},componentDidMount:function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t)},componentWillReceiveProps:function(e){var t=o.getChildMapping(e.children),n=this.state.children;this.setState({children:o.mergeChildMappings(n,t)});var r;for(r in t){var i=n&&n.hasOwnProperty(r);!t[r]||i||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(r in n){var a=t&&t.hasOwnProperty(r);!n[r]||a||this.currentlyTransitioningKeys[r]||this.keysToLeave.push(r)}},componentDidUpdate:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},performAppear:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)},_handleDoneAppearing:function(e){var t=this.refs[e];t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e];var n=o.getChildMapping(this.props.children);n&&n.hasOwnProperty(e)||this.performLeave(e)},performEnter:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)},_handleDoneEntering:function(e){var t=this.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e];var n=o.getChildMapping(this.props.children);n&&n.hasOwnProperty(e)||this.performLeave(e)},performLeave:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillLeave?t.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)},_handleDoneLeaving:function(e){var t=this.refs[e];t.componentDidLeave&&t.componentDidLeave(),delete this.currentlyTransitioningKeys[e];var n=o.getChildMapping(this.props.children);n&&n.hasOwnProperty(e)?this.performEnter(e):this.setState(function(t){var n=i({},t.children);return delete n[e],{children:n}})},render:function(){var e=[];for(var t in this.state.children){var n=this.state.children[t];n&&e.push(r.cloneElement(this.props.childFactory(n),{ref:t,key:t}))}return r.createElement(this.props.component,this.props,e)}});e.exports=s},function(e,t,n){"use strict";var r=n(316),o={getChildMapping:function(e){return e?r(e):e},mergeChildMappings:function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},o=[];for(var i in e)t.hasOwnProperty(i)?o.length&&(r[i]=o,o=[]):o.push(i);var a,s={};for(var u in t){if(r.hasOwnProperty(u))for(a=0;a<r[u].length;a++){var l=r[u][a];s[r[u][a]]=n(l)}s[u]=n(u)}for(a=0;a<o.length;a++)s[o[a]]=n(o[a]);return s}};e.exports=o},function(e,t,n){"use strict";var r=n(215),o=n(195),i=n(801),a=n(802),s=n(317),u=17,l=r.createClass({displayName:"ReactCSSTransitionGroupChild",propTypes:{name:r.PropTypes.oneOfType([r.PropTypes.string,r.PropTypes.shape({enter:r.PropTypes.string,leave:r.PropTypes.string,active:r.PropTypes.string}),r.PropTypes.shape({enter:r.PropTypes.string,enterActive:r.PropTypes.string,leave:r.PropTypes.string,leaveActive:r.PropTypes.string,appear:r.PropTypes.string,appearActive:r.PropTypes.string})]).isRequired,appear:r.PropTypes.bool,enter:r.PropTypes.bool,leave:r.PropTypes.bool,appearTimeout:r.PropTypes.number,enterTimeout:r.PropTypes.number,leaveTimeout:r.PropTypes.number},transition:function(e,t,n){var r=o.findDOMNode(this);if(!r)return void(t&&t());var s=this.props.name[e]||this.props.name+"-"+e,u=this.props.name[e+"Active"]||s+"-active",l=null,c=function(e){e&&e.target!==r||(clearTimeout(l),i.removeClass(r,s),i.removeClass(r,u),a.removeEndEventListener(r,c),t&&t())};i.addClass(r,s),this.queueClass(u),n?(l=setTimeout(c,n),this.transitionTimeouts.push(l)):a.addEndEventListener(r,c)},queueClass:function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,u))},flushClassNameQueue:function(){this.isMounted()&&this.classNameQueue.forEach(i.addClass.bind(i,o.findDOMNode(this))),this.classNameQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameQueue=[],this.transitionTimeouts=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)})},componentWillAppear:function(e){this.props.appear?this.transition("appear",e,this.props.appearTimeout):e()},componentWillEnter:function(e){this.props.enter?this.transition("enter",e,this.props.enterTimeout):e()},componentWillLeave:function(e){this.props.leave?this.transition("leave",e,this.props.leaveTimeout):e()},render:function(){return s(this.props.children)}});e.exports=l},function(e,t,n){"use strict";function r(e,t){for(var n=e;n.parentNode;)n=n.parentNode;var r=n.querySelectorAll(t);return-1!==Array.prototype.indexOf.call(r,e)}var o=n(3),i={addClass:function(e,t){return/\s/.test(t)&&o(!1),t&&(e.classList?e.classList.add(t):i.hasClass(e,t)||(e.className=e.className+" "+t)),e},removeClass:function(e,t){return/\s/.test(t)&&o(!1),t&&(e.classList?e.classList.remove(t):i.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e},conditionClass:function(e,t,n){return(n?i.addClass:i.removeClass)(e,t)},hasClass:function(e,t){return/\s/.test(t)&&o(!1),e.classList?!!t&&e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1},matchesSelector:function(e,t){return(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||function(t){return r(e,t)}).call(e,t)}};e.exports=i},function(e,t,n){"use strict";function r(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete s.animationend.animation,"TransitionEvent"in window||delete s.transitionend.transition;for(var n in s){var r=s[n];for(var o in r)if(o in t){u.push(r[o]);break}}}function o(e,t,n){e.addEventListener(t,n,!1)}function i(e,t,n){e.removeEventListener(t,n,!1)}var a=n(12),s={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},u=[];a.canUseDOM&&r();var l={addEndEventListener:function(e,t){if(0===u.length)return void window.setTimeout(t,0);u.forEach(function(n){o(e,n,t)})},removeEndEventListener:function(e,t){0!==u.length&&u.forEach(function(n){i(e,n,t)})}};e.exports=l},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=(0,l.qsa)(e)[0],r=t.currentUser;n&&(0,u.render)(s.default.createElement(f.default,{currentUser:r}),n)}function i(e){var t=(0,l.qsa)(e)[0];t&&(0,u.unmountComponentAtNode)(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.mount=o,t.unmount=i;var a=n(0),s=r(a),u=n(13),l=n(87),c=n(330),f=r(c);t.default=f.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=document.querySelector(e);t&&(0,u.render)(s.default.createElement(c.default,{onlyUnread:!0}),t)}function i(e){var t=document.querySelector(e);t&&(0,u.unmountComponentAtNode)(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.mount=o,t.unmount=i,n(805);var a=n(0),s=r(a),u=n(13),l=n(806),c=r(l);t.default=c.default},function(e,t){},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=(n(1),n(275)),d=o(f),p=n(807),h=o(p),m=n(22),y=n(337),v=o(y),g=n(581),b=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleVisibleChange=n.handleVisibleChange.bind(n),n.hideGuideTip=n.hideGuideTip.bind(n),n.state={visible:!1,unpeaked:0,guideTipVisible:!1},n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{messages:l.PropTypes.array}}},{key:"defaultProps",get:function(){return{messages:[]}}}]),u(t,[{key:"componentDidMount",value:function(){var e=this;this.getMessageCount(),this.interval=setInterval(function(){return e.getMessageCount()},6e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"showGuideTip",value:function(){location.href.match(/from=tutorial/)&&this.setState({guideTipVisible:!0,positionNodeElement:document.getElementsByClassName("message-popover-trigger")[0]})}},{key:"hideGuideTip",value:function(){location.href.match(/from=tutorial/)&&this.setState({guideTipVisible:!1},function(){return r("/desktop")})}},{key:"getMessageCount",value:function(){var e=this;(0,m.ajaxGet)("/smapi/notifications/unpeeked_count").then(function(t){e.setState({unpeaked:t.data||0})})}},{key:"handleVisibleChange",value:function(e){!0===e&&(0,g.track)("click","message","popup"),this.setState({visible:e,unpeaked:0})}},{key:"renderContent",value:function(){return c.default.createElement(h.default,null)}},{key:"renderBadge",value:function(){var e=this.state.unpeaked>99?"99+":this.state.unpeaked;return c.default.createElement("span",{className:"badge"},c.default.createElement("em",null,e))}},{key:"render",value:function(){return c.default.createElement(d.default,{arrowPointAtCenter:!0,destroyTooltipOnHide:!0,align:{offset:[60,3]},overlayClassName:"message-popover",visible:this.state.visible,onVisibleChange:this.handleVisibleChange,content:this.renderContent()},c.default.createElement("div",{className:"message-popover-trigger",onClick:this.hideGuideTip},c.default.createElement("div",{className:"icon icon-message"},this.state.unpeaked>0&&this.renderBadge()),c.default.createElement(v.default,{text:"来自 石墨文档 的新消息",placement:"bottomRight",colorName:"blue",hasBubble:!1,offsetLeft:10,offsetTop:20,visible:this.state.guideTipVisible,positionNodeElement:this.state.positionNodeElement})))}}]),t}(l.Component);t.default=b,e.exports=t.default}).call(t,n(23))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(20),f=r(c),d=n(22),p=n(610),h=n(808),m=r(h),y=n(581),v=function(e,t){var n="/smapi/notifications?action=peek&status="+e;return t&&(n+="&lt="+t),(0,d.ajaxGet)(n).then(function(e){return e.data})},g=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleFilterClick=n.handleFilterClick.bind(n),n.handleReadAllClick=n.handleReadAllClick.bind(n),n.handleLoadMore=n.handleLoadMore.bind(n),n.readMessage=n.readMessage.bind(n),n.joinTeam=n.joinTeam.bind(n),n.state={loaded:!1,unread:0,filter:"all",hasMore:!0,messages:[]},n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.getMessages(),this.getMessageCount()}},{key:"handleFilterClick",value:function(e){var t=this;if((0,y.track)("click","message",e.target.className),"span"===e.target.tagName.toLowerCase()){var n=e.target.className;this.setState({filter:n,loaded:!1,messages:[]},function(){t.getMessages()})}}},{key:"handleReadAllClick",value:function(){var e=this;(0,y.track)("click","message","read_all"),(0,d.ajaxPost)("/smapi/notifications/action/read_all",{}).then(function(){var t=e.state.messages.map(function(e){return e.status="read",e});e.setState({unread:0,messages:t})})}},{key:"handleLoadMore",value:function(){var e=this,t=this.state.messages,n=t[t.length-1].id;return v(this.state.filter,n).then(function(n){var r=t;n.length>0&&(r=[].concat(r,n)),e.setState({hasMore:n.length>=20,messages:r})})}},{key:"getMessages",value:function(){var e=this;return v(this.state.filter).then(function(t){e.setState({messages:t,loaded:!0})})}},{key:"getMessageCount",value:function(){var e=this;return(0,d.ajaxGet)("/smapi/notifications/unread_count").then(function(t){e.setState({unread:t.data||0})})}},{key:"readMessage",value:function(e){var t=this;return(0,d.ajaxPatch)("/smapi/notifications/"+e+"?status=read").then(function(){var e=t.state.unread-1;e<=0&&(e=0),t.setState({unread:e})})}},{key:"joinTeam",value:function(e){return(0,d.ajaxPost)("/smapi/users/me/action/join_team_by_invitation",{teamId:e})}},{key:"renderMessageItems",value:function(){var e=this,t="all"===this.state.filter?"没有通知":"没有未读通知",n=this.state.messages;return 0===n.length?l.default.createElement("div",{className:"empty"},t):n.map(function(t){var n=(0,m.default)(t.notification.type);return l.default.createElement(n,{key:t.id,message:t,joinTeam:e.joinTeam,readMessage:e.readMessage})})}},{key:"render",value:function(){var e=(0,f.default)("filter",this.state.filter);return l.default.createElement("div",{className:"message-box"},l.default.createElement("div",{className:"panel"},l.default.createElement("div",{className:e,onClick:this.handleFilterClick},l.default.createElement("span",{className:"all"},"全部通知"),l.default.createElement("span",{className:"unread"},"未读 ("+this.state.unread+")")),l.default.createElement("div",{className:"btn btn-link",onClick:this.handleReadAllClick},"标记全部已读")),l.default.createElement(p.InfiniteScroll,{noMoreText:"没有更多通知了",key:this.state.filter,spinning:!this.state.loaded,hasMore:this.state.hasMore,loadMore:this.handleLoadMore},this.renderMessageItems()))}}]),t}(u.Component);t.default=g,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText.trim()}function i(e){return e.replace(/(<a\s+)/g,"@$1")}function a(e,t){var n=(0,m.get)(e,t);return n||("name"===t?"未知用户":"avatar"===t?"/static/unmd5/default-avatar-moke.png":"team.name"===t?"未知团队":void 0)}Object.defineProperty(t,"__esModule",{value:!0}),t.Member=t.Invitation=t.System=t.Team=t.Mention=t.Destroy=t.Teamwork=t.Comment=t.Default=void 0,t.washHTML=o,t.markMentionText=i,t.default=function(e){var t=d.default.TYPES[e];return y[t]||y.default};var s=n(0),u=r(s),l=n(20),c=r(l),f=n(809),d=r(f),p=n(270),h=r(p),m=n(1),y={};t.Default=y.default=function(e){return u.default.createElement("noscript",null)},t.Comment=y.comment=function(e){var t=e.message.notification,n=t.user,r=t.file;return u.default.createElement(d.default,e,u.default.createElement("img",{className:"message-icon",src:a(n,"avatar")}),u.default.createElement("div",{className:"message-title"},u.default.createElement(h.default,{size:8},a(n,"name")),u.default.createElement("span",null,"评论了"),u.default.createElement(h.default,{className:"file-name",size:20},r.name)),u.default.createElement(h.default,{className:"message-content",size:78},o(i(t.msg))))},t.Teamwork=y.teamwork=function(e){var t=e.message.notification,n=t.user,r=t.file,o=(0,c.default)("message-icon",r.type);return u.default.createElement(d.default,e,u.default.createElement("div",{className:o}),u.default.createElement("div",{className:"message-title"},u.default.createElement(h.default,{size:8},a(n,"name")),u.default.createElement("span",null,t.msg)),u.default.createElement(h.default,{className:"message-content",size:36},r&&r.name))},t.Destroy=y.destroy=function(e){var t=e.message.notification,n=t.user,r=t.file,o=(0,c.default)("message-icon",r.type);return u.default.createElement(d.default,e,u.default.createElement("div",{className:o}),u.default.createElement("div",{className:"message-title"},u.default.createElement(h.default,{size:8},a(n,"name")),u.default.createElement("span",null,t.msg)),u.default.createElement(h.default,{className:"message-content",size:36},r&&r.name))},t.Mention=y.mention=function(e){var t=e.message.notification,n=t.user,r=t.file;return u.default.createElement(d.default,e,u.default.createElement("img",{className:"message-icon",src:a(n,"avatar")}),u.default.createElement("div",{className:"message-title"},u.default.createElement(h.default,{size:8},a(n,"name")),u.default.createElement("span",null,t.msg)),u.default.createElement(h.default,{className:"message-content",size:36},r.name))},t.Team=y.team=function(e){var t=e.message.notification,n=t.user,r=(0,c.default)("message-icon","team");return u.default.createElement(d.default,e,u.default.createElement("div",{className:r}),u.default.createElement("div",{className:"message-title"},u.default.createElement(h.default,{size:8},a(n,"name")),u.default.createElement("span",null,t.msg)))},t.System=y.system=function(e){var t=e.message.notification,n=(0,c.default)("message-icon","system");return u.default.createElement(d.default,e,u.default.createElement("div",{className:n}),u.default.createElement("div",{className:"message-title"},u.default.createElement("span",null,t.msg),t.link&&u.default.createElement("span",{className:"link"},"了解更多")))},t.Invitation=y.invitation=function(e){var t=e.message.notification,n=t.user,r=(0,c.default)("message-icon","team");return u.default.createElement(d.default,e,u.default.createElement("div",{className:r}),u.default.createElement("div",{className:"message-title"},u.default.createElement(h.default,{size:8},a(n,"name")),u.default.createElement("span",null,t.msg),u.default.createElement(h.default,{className:"team-name"},a(n,"team.name"))))},t.Member=y.member=function(e){var t=e.message.notification,n=t.user;t.file;return u.default.createElement(d.default,e,u.default.createElement("img",{className:"message-icon",src:a(n,"avatar")}),u.default.createElement("div",{className:"message-title"},u.default.createElement(h.default,{size:8},a(n,"name")),u.default.createElement("span",null,t.msg)))}},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(20),d=o(f),p=n(270),h=n(5),m=o(h),y={0:"comment",1:"mention",2:"teamwork",3:"team",4:"invitation",5:"member",6:"destroy",20:"system"},v=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=n.handleClick.bind(n),n.state={status:e.message.status},n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{message:l.PropTypes.object,readMessage:l.PropTypes.func,joinTeam:l.PropTypes.func}}}]),u(t,[{key:"componentWillReceiveProps",value:function(e){"read"===e.message.status&&this.setState({status:"read"})}},{key:"handleClick",value:function(e){var t=this.props.message,n=t.notification;"read"!==t.status&&this.readMessage(this.props.message.id);var o=n.link,i=n.file,a=i&&i.type,s=o;o&&a&&("document"===a?s="/doc"+s:"spreadsheet"!==a&&"sheet"!==a||(s="/"+(a+s))),"mark-read"!==e.target.className&&r(s)}},{key:"readMessage",value:function(e){var t=this,n=this.state.status;this.setState({status:"read"}),this.props.readMessage(e).catch(function(e){t.setState({status:n})})}},{key:"renderExtra",value:function(){var e=this,t=this.props.message.notification.user.team.id,n=cow.currentUser.teamId===t,o=n?"已加入":"加入",i=(0,d.default)("btn",{"btn-ok":!n,"btn-disabled":n}),a=function(o){return o.preventDefault(),n?o.stopPropagation():cow.currentUser.teamId?m.default.alert({title:"请先退出当前企业",type:"error"}):e.props.joinTeam(t).then(function(e){if(e.code)return m.default.alert({title:e.message,type:"error"});r("/enterprise")})};return c.default.createElement("button",{className:i,onClick:a},o)}},{key:"render",value:function(){var e=this.props.message,t=e.notification,n=(e.status,(0,d.default)("message-item","type-"+y[t.type],{read:"read"===this.state.status,unread:"read"!==this.state.status}));return c.default.createElement("div",{className:n,onClick:this.handleClick},this.props.children,c.default.createElement("div",{className:"message-meta"},20===t.type&&c.default.createElement("span",{className:"offcial"},"系统通知・"),c.default.createElement(p.Timeago,null,t.createdAt)),c.default.createElement("div",{className:"message-extra"},4===t.type&&this.renderExtra()),c.default.createElement("div",{className:"mark-read"}))}}]),t}(l.Component);t.default=v,v.TYPES=y,e.exports=t.default}).call(t,n(23))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.data,n=e.desktopNotification,r=window.cow,o=r.desktopNotification,a=r.currentUser,s=r.pageType,u=r.currentFile;o&&n&&t.notification.user.id!==a.id&&"doc"===s&&u.id===t.notification.file_id&&i(t.notification.file.name,t.notification.user.name+" "+(0,l.washHTML)((0,l.markMentionText)(t.notification.msg)),{icon:t.notification.user.avatar})}function i(e,t,n,r){var o=window,i=o.Notification;if(void 0===i)return!1;var s=function(){var o=new i(e,a({body:t},n));o.onclick=r,setTimeout(function(){return o.close()},6e3)};"granted"===i.permission?s():i.requestPermission().then(function(e){return"granted"===e&&s()})}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){u.default.bind("Notification_v2",o)};var s=n(33),u=r(s),l=n(727);e.exports=t.default},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(13),c=n(0),f=o(c),d=n(552),p=o(d),h=n(147),m=n(337),y=(o(m),n(9)),v=o(y),g=n(89),b=o(g),_=n(343),w=o(_);n(812);var k=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={withCookie:!1,sDate:null,eDate:null,visible:!1,text:"",link:"",recordTag:"",customize:null,openNewTab:!0},n.onCloseClick=n.onCloseClick.bind(n),n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{currentUser:c.PropTypes.object}}}]),u(t,[{key:"componentDidMount",value:function(){this.initStatus()}},{key:"onCloseClick",value:function(){this.setState({visible:!1});var e=this.state,t=e.recordTag,n=e.withCookie,r=e.sDate,o=e.eDate;if(t)if("special"===t&&["renewal","expiration"].indexOf(p.default.accountTypeStatus)>-1)p.default.removeMembershipTip();else if(n){if(b.default.get(t))return;if(o){var i=r?Date.parse(r):Date.now(),a=Date.parse(o),s=Math.ceil((a-i)/864e5);b.default.set(t,!0,{expires:s})}else b.default.set(t,!0)}else p.default.removeTipAjax(t)}},{key:"filterNotification",value:function(e){var t=this;return h.notifications.length?r.maxBy(h.notifications.filter(function(n){if(!n.enable)return!1;var r=n.recordTag;if(n.withCookie&&b.default.get(r))return!1;if(n.startDate||n.endDate){var o=new Date(n.startDate),i=new Date(n.endDate),a=new Date;if(a<o||a>i)return!1}if(r&&e&&e[r])return!1;if(n.targetUser){var s=n.targetUser,u=t.props.currentUser,l=u.accountType;if(void 0!==s.personal){if(!s.personal&&["personal_free","personal_premium"].indexOf(l)>-1)return!1;if(s.personal&&-1===["personal_free","personal_premium"].indexOf(l))return!1}if(void 0!==s.isEnterprise&&s.isEnterprise&&["personal_free","personal_premium"].indexOf(l)>-1)return!1;if(void 0!==s.isEnterpriseOfficial){if(s.isEnterpriseOfficial&&(-1===u.accountType.indexOf("enterprise")||!u.isOfficial))return!1;if(!s.isEnterpriseOfficial&&u.accountType.indexOf("enterprise")>-1&&u.isOfficial)return!1}}return!0}),"order"):null}},{key:"initStatus",value:function(){var e=this,t=this.props.currentUser;"enterprise_dingtalk"!==t.accountType&&p.default.needToGuide()&&p.default.checkIsReady().then(function(n){var r=e.filterNotification(n);if(r)return void e.setState({withCookie:r.withCookie,sDate:r.sDate,eDate:r.eDate,text:r.text,recordTag:r.recordTag,link:r.targetLink,openNewTab:r.openNewTab,visible:!0,customize:r.customize});p.default.getMembershipInfo().then(function(){var r=t.accountType;if(t.accountTypeExpiredAt){var o=new Date(t.accountTypeExpiredAt),i=new Date;if(o<i)p.default.shouldNotifyExpiration&&(p.default.accountTypeStatus="expiration","enterprise_expired"!==r&&e.setState({text:"石墨个人高级版已到期，点此升级",link:"/payment",visible:!0,openNewTab:!0,recordTag:"special"}));else{var a=Math.ceil((o-i)/864e5);a<=7&&p.default.shouldNotifyRenewal&&(p.default.accountTypeStatus="renewal","personal_premium"===t.accountType?e.setState({text:"石墨个人高级版剩余"+a+"天，点此续费",link:"/payment",visible:!0,openNewTab:!0,recordTag:"special"}):"enterprise_standard"===t.accountType&&v.default.notify("enterprise-payment:renewal",o))}}else n.upgrade_pro?e.setState({visible:!1}):"personal_free"!==t.accountType?(e.setState({visible:!1}),p.default.removeTipAjax("upgrade_pro")):e.setState({text:"升级石墨账号",link:"/payment",visible:!0,openNewTab:!0,recordTag:"upgrade_pro"})})})}},{key:"customizedOnClick",value:function(e){var t=this;if("invite-friends"===e){var n=this.props.currentUser,r="invite-friends-modal-container";this.infModalContainer=document.getElementById(r),this.infModalContainer||(this.infModalContainer=document.createElement("div"),this.infModalContainer.id=r,document.body.appendChild(this.infModalContainer)),(0,l.render)(f.default.createElement(w.default,{onClose:function(){return(0,l.unmountComponentAtNode)(t.infModalContainer)},currentUser:n}),this.infModalContainer)}}},{key:"render",value:function(){var e=this,t=this.state,n=t.visible,r=t.text,o=t.link,i=t.openNewTab,a=t.customize;return n?a?f.default.createElement("div",{className:"header-notification-wrap"},f.default.createElement("span",{className:"header-notification-link",onClick:function(){return e.customizedOnClick(a)}},r),f.default.createElement("span",{className:"team-sprite header-item-icon header-notification-close",onClick:this.onCloseClick})):f.default.createElement("div",{className:"header-notification-wrap"},f.default.createElement("a",{className:"header-notification-link",href:o,target:i?"_blank":"",dangerouslySetInnerHTML:{__html:r}}),f.default.createElement("span",{className:"team-sprite header-item-icon header-notification-close",onClick:this.onCloseClick})):null}}]),t}(c.Component);t.default=k,e.exports=t.default}).call(t,n(1))},function(e,t){},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=i(c),d=n(814),p=i(d),h=n(616),m=i(h),y=n(72),v=i(y),g=n(5),b=i(g),_=n(256),w=i(_);n(816);var k=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=t.initState,n.handleSearchEntryClick=n.handleSearchEntryClick.bind(n),n.handleSearchInputKeydown=n.handleSearchInputKeydown.bind(n),n.handleSearchInputKeyup=r.debounce(n.handleSearchInputKeyup.bind(n),300),n.handleResultItemHovered=n.handleResultItemHovered.bind(n),n.handleResultItemClick=n.handleResultItemClick.bind(n),n.handleSearchInputChange=n.handleSearchInputChange.bind(n),n.handleScrollEnd=n.handleScrollEnd.bind(n),n.handleClearClick=n.handleClearClick.bind(n),n.componentClick=n.componentClick.bind(n),n.search=n.search.bind(n),n}return u(t,e),l(t,null,[{key:"initState",get:function(){return{active:!1,results:[],page:0,keyword:"",lastKeyword:"",pageCount:0,selectedIndex:-1,count:0,dropdownVisible:!1}}}]),l(t,[{key:"componentClick",value:function(){this.clearAndReset()}},{key:"clearAndReset",value:function(e){this.setState(t.initState,function(){"function"==typeof e&&e()})}},{key:"handleSearchEntryClick",value:function(){var e=this;this.setState({active:!0},function(){setTimeout(function(){e.refs.searchInput.focus()},200)})}},{key:"handleSearchInputChange",value:function(e){this.setState({keyword:e.target.value})}},{key:"scrollToFixedPosition",value:function(e,t){var n=document.getElementsByClassName("search-result-item")[t];if(n){var r=n.getBoundingClientRect();if(e&&r.top<=100||!e&&r.top>=390){var o=document.getElementsByClassName("search-result-list")[0];o&&o&&(o.scrollTop=o.scrollTop+200*(e?-1:1))}}}},{key:"handleSearchInputKeydown",value:function(e){var t=e.keyCode,n=b.default.keyCodes,r=this.state,i=r.results,a=r.selectedIndex;if(t===n.UP)a>0&&this.setState({selectedIndex:this.state.selectedIndex-1}),this.scrollToFixedPosition(!0,this.state.selectedIndex);else if(t===n.DOWN)a<i.length-1&&this.setState({selectedIndex:a+1}),this.scrollToFixedPosition(!1,this.state.selectedIndex);else if(t===n.ENTER){var s=i[a];if(s){var u=s.source,l=u.type,c=u.guid,f="document"===l?"doc":l,d="/"+f+"/"+c;this.clearAndReset(function(){o(d)})}}[n.UP,n.DOWN,n.ENTER].indexOf(t)>-1&&(e.preventDefault(),e.stopPropagation())}},{key:"handleSearchInputKeyup",value:function(e){var t=this;if(!([b.default.keyCodes.UP,b.default.keyCodes.DOWN,b.default.keyCodes.ENTER].indexOf(e.keyCode)>-1)){var n=e.target.value.trim();n&&n!==this.state.lastKeyword?this.setState({lastKeyword:n,isLoading:!0,dropdownVisible:!0,page:0,count:0,pageCount:0},function(){t.search(n)}):n||n===this.state.lastKeyword||this.setState({lastKeyword:"",isLoading:!1,dropdownVisible:!1})}}},{key:"handleResultItemHovered",value:function(e){this.state.selectedIndex!==e&&this.setState({selectedIndex:e})}},{key:"handleResultItemClick",value:function(){this.clearAndReset()}},{key:"handleClearClick",value:function(){var e=this;this.setState(r.assign({},t.initState,{active:!0}),function(){e.refs.searchInput.focus()})}},{key:"search",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;v.default.searchFile(e,n,r).then(function(e){var n=e.page,r=e.pageCount,o=e.count,i=e.results;n>0&&(i=t.state.results.concat(i)),t.setState({page:n,results:i,pageCount:r,count:o,isLoading:!1})},function(){t.setState({results:[]})})}},{key:"searchNextPage",value:function(){var e=this,t=this.state,n=t.keyword,r=t.page,o=t.pageCount;!t.isLoading&&r+1<o&&this.setState({isLoading:!0},function(){setTimeout(function(){e.search(n,r+1)},1e3)})}},{key:"handleScrollEnd",value:function(){this.searchNextPage()}},{key:"renderEntryWithAnimation",value:function(){var e={verticalAlign:"middle"},t=this.state.active?[f.default.createElement("div",{key:0,className:"search-input-wrap"},f.default.createElement("span",{className:"search-input-icon"}),f.default.createElement("input",{ref:"searchInput",type:"text",placeholder:"输入文件名、文件内容搜索",className:"form-control header-search-input",value:this.state.keyword,onChange:this.handleSearchInputChange,onKeyDown:this.handleSearchInputKeydown,onKeyUp:this.handleSearchInputKeyup}),this.state.keyword?f.default.createElement("a",{className:"search-clear-icon",onClick:this.handleClearClick,href:"javascript:void(0);"}):null)]:[f.default.createElement("a",{key:1,className:"file-search-entry",onClick:this.handleSearchEntryClick,href:"javascript:void(0);"},f.default.createElement("span",{style:e,className:"header-search-icon"}),f.default.createElement("span",{style:e},"搜索"))];return f.default.createElement(m.default,{transitionName:"file-search",transitionAppearTimeout:100,transitionEnterTimeout:120,transitionLeaveTimeout:100,transitionAppear:!0},t)}},{key:"render",value:function(){var e=this.state.selectedIndex;return f.default.createElement("div",{className:"header-search-wrap"},this.renderEntryWithAnimation(),f.default.createElement(p.default,{selectedIndex:e,onScrollEnd:this.handleScrollEnd,isLoading:this.state.isLoading,visible:this.state.dropdownVisible,onItemHovered:this.handleResultItemHovered,onItemClick:this.handleResultItemClick,results:this.state.results}))}}]),t}(c.Component);t.default=(0,w.default)(k),e.exports=t.default}).call(t,n(1),n(23))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(815),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onScroll=n.onScroll.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{results:u.PropTypes.array,visible:u.PropTypes.bool,isLoading:u.PropTypes.bool,selectedIndex:u.PropTypes.number,onItemHovered:u.PropTypes.func,onItemClick:u.PropTypes.func,onScrollEnd:u.PropTypes.func}}}]),s(t,[{key:"onScroll",value:function(e){var t=this.props,n=t.isLoading,r=t.onScrollEnd,o=this.refs.resultList,i=o.scrollHeight-o.scrollTop-o.clientHeight;!n&&i<=0&&"function"==typeof r&&r(),e.stopPropagation(),e.preventDefault()}},{key:"renderResultItems",value:function(){var e=this.props,t=e.results,n=e.selectedIndex,r=e.onItemHovered,o=e.onItemClick;return t.map(function(e,t){var i=n===t;return l.default.createElement(f.default,{isSelected:i,onMouseOver:r,onClick:o,key:t,index:t,data:e})})}},{key:"render",value:function(){var e=this.props,t=e.results,n=e.visible,r=e.isLoading;return n?!r&&t&&0===t.length?l.default.createElement("div",{className:"search-result-wrap"},l.default.createElement("div",{className:"search-no-result"},l.default.createElement("span",null,"无搜索结果"))):l.default.createElement("div",{className:"search-result-wrap"},l.default.createElement("ul",{className:"scrollable search-result-list",ref:"resultList",onScroll:this.onScroll,style:{maxHeight:"437px"}},this.renderResultItems(),r?l.default.createElement("div",{className:"search-loading"},l.default.createElement("div",{className:"spinner"})):null)):null}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(20),d=o(f),p=n(148),h=o(p),m=n(270),y=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseOver=n.onMouseOver.bind(n),n.onClick=n.onClick.bind(n),n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{data:l.PropTypes.object,onMouseOver:l.PropTypes.func,index:l.PropTypes.number,isSelected:l.PropTypes.bool,onClick:l.PropTypes.func}}}]),u(t,[{key:"onMouseOver",value:function(){var e=this.props.onMouseOver;"function"==typeof e&&e(this.props.index)}},{key:"onClick",value:function(){var e=this.props,t=e.data,n=e.onClick,o=t.source,i=o.type,a=o.guid,s="/"+("document"===i?"doc":i)+"/"+a;"function"==typeof n&&n(),r(s)}},{key:"getName",value:function(){var e=this.props.data.source.name,t=this.props.data.highlight.name,n="";return t&&t[0]?n=t[0]:e&&e[0]&&(n=e[0]),(0,h.default)(n)}},{key:"getInnerContent",value:function(){var e=this.props.data,t=e.source.type,n=e.highlight.content,r="";"sheet"===t||"spreadsheet"===t?r="<i>表格</i>":"document"!==t&&"newdoc"!==t||(r=n&&n[0]?n[0]:"<i>空</i>");try{r=(0,h.default)(decodeURI(r))}catch(e){r=(0,h.default)(r)}return r}},{key:"render",value:function(){var e=this.props,t=e.isSelected,n=e.data,r=n.source,o=r.updated_at,i=r.starred,a=r.type,s=a;"document"===a||"newdoc"===a?s="doc":"sheet"===a&&(s="spreadsheet");var u=this.getName(),l=(0,d.default)({"search-result-item":!0,active:t,folder:"folder"===a,file:"folder"!==a});if(!u)return null;var f=this.getInnerContent();return c.default.createElement("li",{className:l,onClick:this.onClick,onMouseOver:this.onMouseOver},c.default.createElement("div",{className:"search-result-info"},c.default.createElement("span",{className:"search-list-icon "+s}),c.default.createElement("span",{className:"search-result-title",dangerouslySetInnerHTML:{__html:u}}),c.default.createElement("span",{className:"search-result-time"},c.default.createElement(m.Timeago,null,o)),i?c.default.createElement("span",{className:"search-star-icon"}):null),"folder"!==a?c.default.createElement("div",{className:"search-result-content"},c.default.createElement("span",{className:"search-result-content-text",dangerouslySetInnerHTML:{__html:f}})):null)}}]),t}(l.Component);t.default=y,e.exports=t.default}).call(t,n(23))},function(e,t){},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=i(c),d=n(671),p=i(d),h=n(582),m=i(h),y=n(818),v=i(y),g=n(33),b=i(g),_=n(9),w=i(_),k=n(20),E=i(k),C=n(5),M=i(C),T=n(72),S=n(337),O=i(S),P=n(21),x=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={tableTitle:e.currentFile.name,userId:e.currentUser.id,shareStatus:(0,P.getShareMode)(),starred:e.currentFile.starred,guideTipVisible:!1},n.onStarBtnClick=n.onStarBtnClick.bind(n),n.handleGuideTipVisibleChange=n.handleGuideTipVisibleChange.bind(n),n}return u(t,e),l(t,null,[{key:"propTypes",get:function(){return{currentFile:c.PropTypes.object,currentUser:c.PropTypes.object}}}]),l(t,[{key:"componentDidMount",value:function(){this.isUnmount=!1,this._init()}},{key:"componentWillUnmount",value:function(){this.isUnmount=!0,w.default.detach("guideTip:visible:desktop",this.handleGuideTipVisibleChange)}},{key:"handleGuideTipVisibleChange",value:function(e){var t=r.assign({},this.state);t.guideTipVisible=e,!this.state.guideTipVisible&&e&&(t.positionNodeElement=document.getElementsByClassName("header-back-up")[0]),this.setState(t)}},{key:"_onTitleChange",value:function(){}},{key:"_onTitleBlur",value:function(){var e=this.refs.tableName.getValue();e!==this.state.tableTitle&&(0,T.updateTitle)(e)}},{key:"_init",value:function(){var e=this;this._initPush(),(0,T.checkIsWelcomeFile)()&&(0,T.starFile)(window.cow.currentFile.id).then(function(){e.setState({starred:!0})})}},{key:"_initPush",value:function(){var e=this;b.default.bind("File",function(t){if(!e.isUnmount){var n=e.props,r=n.currentFile,o=n.currentUser;if(!(["spreadsheet","sheet","doc","newdoc"].indexOf(window.cow.pageType)<0)&&"update"===t.db_event&&+t.data.id==+r.id)if(0==+t.data.is_delete){var i=t.data.name;w.default.notify("file:updateTitle",i)}else 1==+t.data.is_delete&&+t.data.deleted_by!=+o.id&&e._backParent()}}),b.default.bind("StarredFile",function(t){if(!e.isUnmount){var n=e.props.currentFile;if(t.data.fileId===n.id){var r="create"===t.action;n.starred=r,e.setState({starred:r})}}}),w.default.detach("file:updateTitle",this._updateTitle),w.default.attach("file:updateTitle",this._updateTitle,{scope:this}),w.default.detach("guideTip:visible:desktop",this.handleGuideTipVisibleChange),w.default.attach("guideTip:visible:desktop",this.handleGuideTipVisibleChange)}},{key:"_updateTitle",value:function(e){this.setState({tableTitle:e}),this.props.currentFile.name=e,this.refs.tableName&&(document.title=e,this.refs.tableName.setValue(e))}},{key:"_backParent",value:function(){if(this._isBackFromSheet()){var e=(0,T.checkIsWelcomeFile)();if(e&&this.setState({guideTipVisible:!1}),e&&window.cow.authorized&&window.cow.currentUser&&!window.cow.currentUser.lastVisit)return void(window.location.href="/desktop?from=tutorial");var t=void 0,n=void 0;o.len>0?o.back():(t=this.props.currentFile,n=window.cow.authorized&&t.parent&&t.parent.guid?"/folder/"+t.parent.guid:"/desktop",o(n))}}},{key:"_isBackFromSheet",value:function(){var e=!0;return"sheet"===window.cow.pageType&&(window.cow.isEmptyQueue()||(e=!1,M.default.alert({title:"当前表格正在保存中，为防止数据丢失，请勿离开。",type:"error"}))),e}},{key:"onStarBtnClick",value:function(){var e=this,t=this.props.currentFile.id;this.state.starred?(0,T.unstarFile)(t).then(function(){e.setState({starred:!1})},function(e){M.default.alert({title:e.message,type:"error"})}):(0,T.starFile)(t).then(function(){e.setState({starred:!0})},function(e){M.default.alert({title:e.message,type:"error"})})}},{key:"renderStatusBar",value:function(){var e=this.props.currentFile,t=e.type,n=e.role,r=e.permissions,o=this.state.userId;return-1!==t&&-3!==t||n||r.editable?o>0?f.default.createElement(m.default,{customClassName:"s-header-time"}):0===t?f.default.createElement(m.default,{customClassName:"s-header-time"}):-1===t||-3===t?f.default.createElement(m.default,{customClassName:"writeable-sheet-status-bar s-header-time"}):void 0:null}},{key:"render",value:function(){var e=this,t=this.props.currentFile,n=[0,-1,-2,-3],r=t.type;if(n.indexOf(r)>-1){var o=(0,E.default)({"header-star-btn":!0,"s-header-star-btn":!0,active:this.state.starred}),i=(0,E.default)({"team-icon-sheet":-1===r||-3===r,"team-icon-doc":0===r||-2===r}),a=f.default.createElement("a",{className:o,onClick:this.onStarBtnClick},f.default.createElement("span",{className:"team-sprite team-icon-star mark-star-icon"}),f.default.createElement("span",{className:"s-tooltip"},this.state.starred?"取消标星":"标星"));if(this.state.userId>0)return f.default.createElement("div",{className:"s-header"},f.default.createElement("a",{className:"header-back-up",onClick:function(t){return e._backParent(t)}},f.default.createElement("span",{className:"header-back-icon"})),f.default.createElement("span",{className:"header-crumb-arrow little-icon-sprite"}),f.default.createElement("span",{className:"left-sheet-img team-sprite "+i}),f.default.createElement("span",{className:"s-header-text"},f.default.createElement(p.default,{customClass:"title-input",defaultValue:this.state.tableTitle?this.state.tableTitle:"无标题",placeholder:"无标题",maxWidth:"240px",autoWidth:!0,onBlur:function(t){return e._onTitleBlur(t)},onChange:function(t){return e._onTitleChange(t)},tooltip:"重命名",ref:"tableName"})),this.props.currentFile.authorized?f.default.createElement(v.default,{guid:this.props.currentFile.guid}):null,a,f.default.createElement(O.default,{text:"返回桌面",placement:"right",offsetLeft:12,offsetTop:12,visible:this.state.guideTipVisible,positionNodeElement:this.state.positionNodeElement}),this.renderStatusBar());var s=t.team,u=void 0;if(s&&s.resources&&(u=f.default.createElement("img",{className:"header-logo-img",src:s.resources.desktopLogo})),0===r)return f.default.createElement("div",{className:"s-header"},f.default.createElement("a",{href:"/",className:"home-link doc-logo "+(u?"":"logo-22")},u),this.renderStatusBar());if(-1===r||-3===r)return f.default.createElement("div",{className:"s-header"},f.default.createElement("div",{className:"s-home-link-wrap"},f.default.createElement("a",{className:"s-home-link "+(u?"custom-logo":""),href:"/"},u)),f.default.createElement("span",{className:"sheet-img-not-loggin left-sheet-img team-sprite team-icon-sheet"}),f.default.createElement("div",{className:"s-title"},window.cow.tempCurrentFile.name),this.renderStatusBar())}return f.default.createElement("a",{className:"header-logo logo-22",href:"/desktop"})}}]),t}(c.Component);t.default=x,e.exports=t.default}).call(t,n(1),n(23))},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=(n(22),n(216)),d=n(177),p=n(72),h=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoading:!0,ancestors:[],active:!1},n}return s(t,e),u(t,[{key:"componentDidMount",value:function(){this._getAncestors(),this.handleOtherClick=this._otherClick.bind(this),(0,d.on)(document.getElementsByTagName("html")[0],"click",this.handleOtherClick)}},{key:"componentWillUnmount",value:function(){(0,d.off)(document.getElementsByTagName("html")[0],"click",this.handleOtherClick)}},{key:"_otherClick",value:function(e){void 0!==this.state.active&&this.state.active&&(e.target.className.match(/crumb-dropdown-btn/)||this.setState({active:!1}))}},{key:"_renderCrumbList",value:function(e){var t=this,n=[];if(this.state.isLoading)return c.default.createElement("div",{className:"crumb-loading"},c.default.createElement("img",{className:"crumb-loading-img",src:"https://assets-cdn.shimo.im/assets/images/loading-b67e5a67dc.gif"}));var r=[22,20,18,16];return e.forEach(function(e,o){var i=o>3?3:o,a=(0,f.cutLength)(e.name,r[i]),s=a===e.name?"":e.name;n.push(c.default.createElement("li",{key:o,className:"crumb-list-item",title:s,"data-href":e.link,"data-type":e.type,onClick:t._onCrumbListClick.bind(t)},c.default.createElement("a",{className:"crumb-list-link crumb-list-indent"+i,href:"javascript:void(0);"},c.default.createElement("span",{className:"little-icon-sprite crumb-list-icon crumb-"+e.type+"-icon"}),c.default.createElement("span",{className:"crumb-item-name"},a))))}),n}},{key:"_onCrumbListClick",value:function(e){var t=e.currentTarget,n=t.getAttribute("data-href");n&&r(n)}},{key:"_toggleDropdown",value:function(){this.setState({active:!this.state.active})}},{key:"_getAncestors",value:function(){var e=this,t=this.props.guid;this.setState({isLoading:!0}),(0,p.getAncestors)(t).then(function(t){e.setState({isLoading:!1,ancestors:t})})}},{key:"render",value:function(){var e=this.state.ancestors||[],t=this.state.active?"active":"";return c.default.createElement("div",{className:"crumb-wrap"},c.default.createElement("a",{className:"crumb-dropdown-btn little-icon-sprite",onClick:this._toggleDropdown.bind(this)}),c.default.createElement("ul",{className:"crumb-dropdown-wrap "+t},this._renderCrumbList(e)))}}]),t}(l.Component);t.default=h,h.propTypes={guid:l.PropTypes.string},e.exports=t.default}).call(t,n(23))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(616),f=r(c),d=n(9),p=r(d),h=n(20),m=r(h),y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={cooperators:[]},n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;p.default.detach("cooperation:updateAvatar"),p.default.attach("cooperation:updateAvatar",function(t){e.setState({cooperators:[].concat(t)})})}},{key:"componentWillUnmount",value:function(){p.default.detach("cooperation:updateAvatar")}},{key:"renderAvatars",value:function(){var e=this.state.cooperators,t=[];return e.forEach(function(e,n){var r={zIndex:110-n-1,right:28*(n+1)+"px"};t.push(l.default.createElement("div",{key:e.id,className:"header-avatar",style:r},l.default.createElement("div",{className:"avatar-wrap"},l.default.createElement("img",{src:e.avatar,alt:e.name})),l.default.createElement("span",{className:"header-avatar-color",style:{backgroundColor:e.color}}),l.default.createElement("span",{className:"tooltip header-avatar-tooltip s-tooltip"},e.name)))}),t}},{key:"render",value:function(){var e=(0,m.default)({"header-avatar-wrap":!0,"header-avatar-wrap-anonymous":window.cow.currentUser.id<0,"header-avatar-wrap-unauthorized":!window.cow.authorized&&window.cow.currentUser.id>0});return l.default.createElement("div",{className:e},l.default.createElement(f.default,{transitionName:"header-avatar",transitionAppearTimeout:100,transitionEnterTimeout:1e3,transitionLeaveTimeout:300,transitionAppear:!0},this.renderAvatars()))}}]),t}(u.Component);t.default=y,e.exports=t.default},function(e,t,n){(function(r,o){function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=i(c),d=n(337),p=i(d),h=n(87),m=n(177),y=n(72),v=[{fileName:"示例 - 待办事项",targetElementSelector:'.editbar-list-item[data-key="checklist"]',offsetTop:3,offsetLeft:-7,needExpand:!1,expandElementSelector:"",text:"点这里，添加任务列表",autoHide:!1,hideTriggerElementSelectror:'.editbar-list-item[data-key="checklist"]'},{fileName:"示例 - 会议记录",targetElementSelector:"#upload-attachment",offsetTop:-7,offsetLeft:0,needExpand:!0,expandElementSelector:"#doc-insert",text:"点这里，插入附件",autoHide:!0,hideTriggerElementSelectror:""}],g=function(e){function t(){a(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={guideTipVisible:!1,text:"",positionNodeElement:null},e.hideGuideTip=e.hideGuideTip.bind(e),e.handlePadReady=e.handlePadReady.bind(e),e}return u(t,e),l(t,[{key:"componentDidMount",value:function(){r(window).off("pad_ready",this.handlePadReady),r(window).on("pad_ready",this.handlePadReady)}},{key:"componentWillUpdate",value:function(e,t){var n=this.state;n.hideTriggerElementSelectror&&!t.hideTriggerElementSelectror?this.bindTriggerEvent(t):!n.hideTriggerElementSelectror&&t.hideTriggerElementSelectror?this.unbindTriggerEvent(n):n.hideTriggerElementSelectror!==t.hideTriggerElementSelectror&&(this.unbindTriggerEvent(n),this.bindTriggerEvent(t))}},{key:"componentWillUnmount",value:function(){r(window).off("pad_ready",this.handlePadReady),this.unbindTriggerEvent(this.state)}},{key:"bindTriggerEvent",value:function(e){if(e||(e=this.state),e.hideTriggerElementSelectror){var t=(0,h.qsa)(e.hideTriggerElementSelectror);t.length&&(0,m.on)(t[0],"click",this.hideGuideTip)}}},{key:"unbindTriggerEvent",value:function(e){if(e||(e=this.state),e.hideTriggerElementSelectror){var t=(0,h.qsa)(e.hideTriggerElementSelectror);t.length&&(0,m.off)(t[0],"click",this.hideGuideTip)}}},{key:"getGuideConfig",value:function(){return(0,y.checkIsExampleFile)()&&v.length?o.find(v,{fileName:window.cow.currentFile.name}):null}},{key:"handlePadReady",value:function(){var e=this;setTimeout(function(){var t=e.getGuideConfig();if(t){if(t.needExpand&&t.expandElementSelector){var n=(0,h.qsa)(t.expandElementSelector);n.length&&n[0].click()}if(t.targetElementSelector){var r=(0,h.qsa)(t.targetElementSelector);r.length&&e.setState({guideTipVisible:!0,positionNodeElement:r[0],text:t.text,hideTriggerElementSelectror:t.hideTriggerElementSelectror,autoHide:!!t.autoHide,offsetTop:o.isNumber(t.offsetTop)?t.offsetTop:0,offsetLeft:o.isNumber(t.offsetLeft)?t.offsetLeft:0},function(){e.bindTriggerEvent(e.state)})}}},2e3)}},{key:"hideGuideTip",value:function(){this.setState({guideTipVisible:!1})}},{key:"render",value:function(){var e=this.state,t=e.offsetLeft,n=e.offsetTop,r=e.autoHide,o=e.guideTipVisible,i=e.positionNodeElement,a=e.text;return f.default.createElement(p.default,{text:a,placement:"left",autoHide:r,offsetLeft:t,offsetTop:n,visible:o,onNeedHide:this.hideGuideTip,positionNodeElement:i})}}]),t}(c.Component);t.default=g,e.exports=t.default}).call(t,n(2),n(1))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u);n(822);var c=n(408),f=r(c),d=n(22),p=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.openLink=e.openLink.bind(e),e}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{mode:u.PropTypes.string}}},{key:"defaultProps",get:function(){return{mode:"list"}}}]),s(t,[{key:"clearUrlParam",value:function(e){var t=f.default.parse(e,!0);return delete t.search,delete t.query.corpid,delete t.query.dingtalkcode,f.default.format(t)}},{key:"openLink",value:function(){if(DingTalkPC&&DingTalkPC.checkIsReady){var e=this.clearUrlParam(window.location.href);DingTalkPC.checkIsReady(function(){DingTalkPC.runtime.permission.requestAuthCode({corpId:cow.signInfo.corpId,onSuccess:function(t){var n=t.code;DingTalkPC.biz.util.openLink({url:e+"?dingtalkcode="+n+"&corpid="+cow.signInfo.corpId})},onFail:function(e){console.error("requestAuthCode3",e),(0,d.ajaxPost)("/api/log/jserror",{msg:"dingtalk_requestAuthCode_3",url:window.location.href,error_code:e.errorCode,error_message:JSON.stringify(e)})}})})}}},{key:"render",value:function(){var e=this.props.mode;return l.default.createElement("a",{onClick:this.openLink,className:"dt-external-entry dt-mode-"+e},l.default.createElement("div",{className:"dt-external-tag"},"在浏览器中打开"))}}]),t}(u.Component);t.default=p,e.exports=t.default},function(e,t){},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(20),f=r(c),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=n.handleClick.bind(n),n.reactive=n.reactive.bind(n),n.state={active:!0,activedChild:null},n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){}}]),s(t,[{key:"handleClick",value:function(e){this.setState({active:!1,activedChild:e})}},{key:"reactive",value:function(){this.setState({active:!0,activedChild:null})}},{key:"render",value:function(){var e=this,t=l.default.Children.map(this.props.children,function(t){var n=t.props.name;return l.default.cloneElement(t,{key:n,actived:e.state.activedChild===n,onBtnClick:e.handleClick.bind(e,n),onClose:e.reactive})}),n=(0,f.default)("fixed-box",{active:this.state.active});return l.default.createElement("div",{className:n},t)}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(578),f=r(c),d=n(1),p=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={unreadCount:0},n.onVisibleChange=n.onVisibleChange.bind(n),n.onUnreadChange=n.onUnreadChange.bind(n),n.onOfflineMessageChange=n.onOfflineMessageChange.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{actived:u.PropTypes.bool,onClose:u.PropTypes.func,onBtnClick:u.PropTypes.func}}}]),s(t,[{key:"componentDidMount",value:function(){new f.default({trigger:"meiqia-btn",moduleType:this.getModuleType(),onVisibleChange:this.onVisibleChange,onUnreadChange:this.onUnreadChange,onOfflineMessageChange:this.onOfflineMessageChange,dataArgs:this.getUserInfo()})}},{key:"getUserInfo",value:function(){if(!cow.currentUser||cow.currentUser.id<0)return{};var e=window.cow.currentUser,t=new Date(e.created_at),n="",r=e.accountType;"personal_free"===r?n="基础免费":"personal_premium"===r?n="个人高级":"enterprise_dingding"===r?n="钉钉":"enterprise_standard"===r&&(n="企业");var o={};return e.team&&(o.enterpriseId=e.team.enterpriseId,o.enterprise=e.team.name,o.userRole=e.teamRole),(0,d.assign)({avatar:e.avatar,name:e.name,realName:e.name,isOfficial:e.isOfficial?"是":"否",registerAt:t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate(),userType:n,email:e.email||"",mobile:e.mobile||"",userId:e.id},o)}},{key:"getModuleType",value:function(){var e=3;return cow.currentUser&&cow.currentUser.id>0&&cow.currentUser.isOfficial&&(e=4),e}},{key:"onVisibleChange",value:function(e){e?(this.props.onBtnClick(),this.state.unreadCount>0&&this.setState({unreadCount:0})):this.props.onClose()}},{key:"onUnreadChange",value:function(e){this.setState({unreadCount:e.data.length})}},{key:"onOfflineMessageChange",value:function(e){this.setState({unreadCount:e})}},{key:"render",value:function(){return l.default.createElement("div",null,l.default.createElement("div",{className:"fixed-button meiqia-btn"},"反馈"),l.default.createElement("div",{className:"meiqia-unread-msg"},l.default.createElement("span",{className:"meiqia-msg-count "+(0===this.state.unreadCount?"hide":"")},this.state.unreadCount),l.default.createElement("div",{className:"meiqia-msg-content hide"})))}}]),t}(u.Component);t.default=p,e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=r(u),c=n(20),f=r(c),d=n(54),p=n(445),h=r(p),m=n(826),y=r(m),v=n(827),g=r(v),b=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=(0,p.getDefaultData)();return n.state={selectedGroup:r.groupTag,selectedItem:r.item.tag},n.tabDidChange=n.tabDidChange.bind(n),n.tabWillChange=n.tabWillChange.bind(n),n.handleListClick=n.handleListClick.bind(n),n}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{actived:u.PropTypes.bool,onBtnClick:u.PropTypes.func,onClose:u.PropTypes.func}}}]),s(t,[{key:"handleListClick",value:function(e,t){this.setState({selectedGroup:e,selectedItem:t})}},{key:"tabDidChange",value:function(){}},{key:"tabWillChange",value:function(e,t){var n=h.default[t];this.setState({selectedGroup:n.tag,selectedItem:n.items[0].tag})}},{key:"renderTabs",value:function(){return h.default.map(function(e){return l.default.createElement(d.TabItem,{key:e.tag,title:e.label})})}},{key:"render",value:function(){var e=this.state,t=e.selectedGroup,n=e.selectedItem,r=(0,p.getGroupIndex)(t),o=(0,f.default)("user-guide",{active:this.props.actived});return l.default.createElement("div",null,l.default.createElement("div",{className:"fixed-button",onClick:this.props.onBtnClick},"帮助"),l.default.createElement("div",{className:o},l.default.createElement("span",{className:"hicon icon-close",onClick:this.props.onClose}),l.default.createElement(d.Tab,{customClass:"sm-nav-tabs user-guide-nav-tabs large",disableSetWidth:!0,selectedIndex:r,tabWillChange:this.tabWillChange},this.renderTabs()),l.default.createElement("div",{className:"guide-content-wrapper"},l.default.createElement(y.default,{selectedGroup:t,selectedItem:n,onSelect:this.handleListClick}),l.default.createElement(g.default,{selectedGroup:t,selectedItem:n}))))}}]),t}(u.Component);t.default=b,e.exports=t.default},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(20),d=o(f),p=n(445),h=o(p),m=n(87),y=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scrollTimer=-1,n.state={selectedItem:"assignTask",showFadeMask:!0},n.onScroll=r.debounce(n.onScroll.bind(n),100),n}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{groupData:l.PropTypes.array,selectedGroup:l.PropTypes.string,selectedItem:l.PropTypes.string,onSelect:l.PropTypes.func}}},{key:"defaultProps",get:function(){return{selectedGroup:"",onSelect:function(){}}}}]),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.selectedGroup&&e.selectedGroup!==this.props.selectedGroup&&this.setState({selectedItem:(0,p.isIncludeGroup)(e.selectedItem,e.selectedGroup)?e.selectedItem:(0,p.getFirstTagInGroup)(e.selectedGroup)},function(){t.adjustScrollPosition()})}},{key:"adjustScrollPosition",value:function(){var e=this.state.selectedItem,t=this.props.selectedGroup,n=this.refs.listWrap,r=this.refs[t+"_"+e];if(n&&r){var o=n.getBoundingClientRect(),i=r.getBoundingClientRect(),a=i.bottom-o.bottom,s=o.top-i.top;a>=0?(0,m.scrollWithAnimation)(n,n.scrollTop+a+.67*o.height):s>=0&&(0,m.scrollWithAnimation)(n,n.scrollTop-s)}}},{key:"onClick",value:function(e,t){this.setState({selectedItem:t}),this.props.onSelect(e,t)}},{key:"onScroll",value:function(e){var t=e.target;t.scrollHeight-(t.scrollTop+t.clientHeight)<=10?this.state.showFadeMask&&this.setState({showFadeMask:!1}):this.state.showFadeMask||this.setState({showFadeMask:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.selectedItem,r=t.showFadeMask,o=h.default.map(function(t){var r=t.items.map(function(r){var o=(0,d.default)({active:r.tag===n,"guide-list-item":!0});return c.default.createElement("li",{className:o,ref:t.tag+"_"+r.tag,key:r.tag,onClick:e.onClick.bind(e,t.tag,r.tag)},r.label)});return c.default.createElement("li",{className:"guide-group",ref:"group_"+t.tag,key:t.tag,"data-tag":t.tag},c.default.createElement("label",{className:"group-label"},t.label),c.default.createElement("ul",{className:"guide-group-list"},r))}),i=(0,d.default)({"guide-list-wrapper":!0,"scroll-bottom":!r});return c.default.createElement("div",{className:i},c.default.createElement("ul",{ref:"listWrap",onScroll:this.onScroll,className:"guide-list"},o))}}]),t}(l.Component);t.default=y,e.exports=t.default}).call(t,n(1))},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),f=n(445),d=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isLoaded:!1},e.onImageLoaded=e.onImageLoaded.bind(e),e.onImageClick=e.onImageClick.bind(e),e}return s(t,e),u(t,null,[{key:"propTypes",get:function(){return{selectedItem:l.PropTypes.string,selectedGroup:l.PropTypes.string}}}]),u(t,[{key:"onImageLoaded",value:function(){this.setState({isLoaded:!0})}},{key:"onImageClick",value:function(e){var t=e.target.src;t&&window.open(t)}},{key:"renderLoader",value:function(){return this.state.isLoaded?null:c.default.createElement("div",{className:"spinner"})}},{key:"render",value:function(){var e=this.props,t=e.selectedItem,n=e.selectedGroup,o=(0,f.getItemData)(n,t),i={};return this.state.isLoaded||r.assign(i,{opacity:.3,pointerEvents:"none"}),c.default.createElement("div",{className:"guide-content"},c.default.createElement("p",{className:"guide-desc",dangerouslySetInnerHTML:{__html:o.desc}}),c.default.createElement("img",{style:i,className:"guide-img",onLoad:this.onImageLoaded,onClick:this.onImageClick,src:o.img}),this.renderLoader())}}]),t}(l.Component);t.default=d,e.exports=t.default}).call(t,n(1))},,,,,,function(e,t,n){(function(r){var o,i;o=[n(33),n(9),n(191)],void 0!==(i=function(e,t,n){var o,i;return Object.defineProperty(window.cow,"currentFile",{get:function(){return this._currentFile||{}},set:function(e){return this._currentFile=e,this._currentFile.typeName=n.FILE_ZH_TYPE_MAP[e.type]||"",e}}),window.cow.setCurrentFile=function(e,t){var n;return t?(n=window.cow.currentFile,n[t]=e,window.cow.currentFile=n):window.cow.currentFile=e},window.cow.updateDocCurrentFile=function(e){var t,n,r;t=window.cow.currentFile.guid;for(n in e)r=e[n],window.cow.currentFile[n]=r;return window.cow.currentListByGuid[t]=window.cow.currentFile},window.cow.appendCurrentFileAttribute=function(e,t){var n;if(n=window.cow.currentFile,r.isArray(n[t]))return n[t].push(e),window.cow.currentFile=n},o=!0,i=function(){return o?(window.cow.currentFile=window.cow.tempCurrentFile,o=!1):window.cow.currentFile=window.cow.currentFile},t.on("socket:connected",i),t.on("socket:reconnected",i)}.apply(t,o))&&(e.exports=i)}).call(t,n(1))},,,,,,,function(e,t,n){var r;!function(o,i,a){function s(e,t,n){if(e.addEventListener)return void e.addEventListener(t,n,!1);e.attachEvent("on"+t,n)}function u(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return w[e.which]?w[e.which]:k[e.which]?k[e.which]:String.fromCharCode(e.which).toLowerCase()}function l(e,t){return e.sort().join(",")===t.sort().join(",")}function c(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function f(e){if(e.preventDefault)return void e.preventDefault();e.returnValue=!1}function d(e){if(e.stopPropagation)return void e.stopPropagation();e.cancelBubble=!0}function p(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function h(){if(!_){_={};for(var e in w)e>95&&e<112||w.hasOwnProperty(e)&&(_[w[e]]=e)}return _}function m(e,t,n){return n||(n=h()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function y(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus"),e.split("+"))}function v(e,t){var n,r,o,i=[];for(n=y(e),o=0;o<n.length;++o)r=n[o],C[r]&&(r=C[r]),t&&"keypress"!=t&&E[r]&&(r=E[r],i.push("shift")),p(r)&&i.push(r);return t=m(r,i,t),{key:r,modifiers:i,action:t}}function g(e,t){return null!==e&&e!==i&&(e===t||g(e.parentNode,t))}function b(e){function t(e){e=e||{};var t,n=!1;for(t in _)e[t]?n=!0:_[t]=0;n||(E=!1)}function n(e,t,n,r,o,i){var a,s,u=[],c=n.type;if(!y._callbacks[e])return[];for("keyup"==c&&p(e)&&(t=[e]),a=0;a<y._callbacks[e].length;++a)if(s=y._callbacks[e][a],(r||!s.seq||_[s.seq]==s.level)&&c==s.action&&("keypress"==c&&!n.metaKey&&!n.ctrlKey||l(t,s.modifiers))){var f=!r&&s.combo==o,d=r&&s.seq==r&&s.level==i;(f||d)&&y._callbacks[e].splice(a,1),u.push(s)}return u}function r(e,t,n,r){y.stopCallback(t,t.target||t.srcElement,n,r)||!1===e(t,n)&&(f(t),d(t))}function o(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=u(e);if(t)return"keyup"==e.type&&w===t?void(w=!1):void y.handleKey(t,c(e),e)}function a(){clearTimeout(g),g=setTimeout(t,1e3)}function h(e,n,o,i){function s(t){return function(){E=t,++_[e],a()}}function l(n){r(o,n,e),"keyup"!==i&&(w=u(n)),setTimeout(t,10)}_[e]=0;for(var c=0;c<n.length;++c){var f=c+1===n.length,d=f?l:s(i||v(n[c+1]).action);m(n[c],d,i,e,c)}}function m(e,t,r,o,i){y._directMap[e+":"+r]=t,e=e.replace(/\s+/g," ");var a,s=e.split(" ");if(s.length>1)return void h(e,s,t,r);a=v(e,r),y._callbacks[a.key]=y._callbacks[a.key]||[],n(a.key,a.modifiers,{type:a.action},o,e,i),y._callbacks[a.key][o?"unshift":"push"]({callback:t,modifiers:a.modifiers,action:a.action,seq:o,level:i,combo:e})}var y=this;if(e=e||i,!(y instanceof b))return new b(e);y.target=e,y._callbacks={},y._directMap={};var g,_={},w=!1,k=!1,E=!1;y._handleKey=function(e,o,i){var a,s=n(e,o,i),u={},l=0,c=!1;for(a=0;a<s.length;++a)s[a].seq&&(l=Math.max(l,s[a].level));for(a=0;a<s.length;++a)if(s[a].seq){if(s[a].level!=l)continue;c=!0,u[s[a].seq]=1,r(s[a].callback,i,s[a].combo,s[a].seq)}else c||r(s[a].callback,i,s[a].combo);var f="keypress"==i.type&&k;i.type!=E||p(e)||f||t(u),k=c&&"keydown"==i.type},y._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)m(e[r],t,n)},s(e,"keypress",o),s(e,"keydown",o),s(e,"keyup",o)}if(o){for(var _,w={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},k={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},E={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},C={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},M=1;M<20;++M)w[111+M]="f"+M;for(M=0;M<=9;++M)w[M+96]=M.toString();b.prototype.bind=function(e,t,n){var r=this;return e=e instanceof Array?e:[e],r._bindMultiple.call(r,e,t,n),r},b.prototype.unbind=function(e,t){var n=this;return n.bind.call(n,e,function(){},t)},b.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},b.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},b.prototype.stopCallback=function(e,t){var n=this;return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(!g(t,n.target)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable))},b.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},b.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(w[t]=e[t]);_=null},b.init=function(){var e=b(i);for(var t in e)"_"!==t.charAt(0)&&(b[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},b.init(),o.Mousetrap=b,void 0!==e&&e.exports&&(e.exports=b),(r=function(){return b}.call(t,n,t,e))!==a&&(e.exports=r)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},,function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return M(C,e)}var i=n(151),a=n(437),s=r(a),u=n(438),l=r(u),c=n(725),f=r(c),d=n(896),p=r(d),h=n(897),m=r(h),y=n(899),v=r(y),g=n(900),b=r(g),_=n(901),w=r(_),k=n(902),E=r(k);e.exports=function(){var e=null;return{getInstance:function(){return e||(e=o()),e},destory:function(){e=null}}}();var C=(0,i.combineReducers)({spreadsheet:p.default,msg:m.default,handsontable:v.default,collaborators:b.default,selection:w.default,lockpermission:E.default}),M=(0,i.applyMiddleware)(s.default,l.default,(0,f.default)())(i.createStore)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(702),i=r(o);t.default=function(e){var t=e.guid,r=e.isAjaxForce;n.e(5).then(function(){var e=n(1060).ListContainer,o=n(1061);i.default.list.show(),o({guid:t,ListContainer:e,isAjaxForce:r})}.bind(null,n)).catch(n.oe)},e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){n.e(6).then(function(){(0,n(1062).initDoc)(e,t)}.bind(null,n)).catch(n.oe)},e.exports=t.default},,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){n.e(7).then(function(){(0,n(1063).initDoc)(e,t)}.bind(null,n)).catch(n.oe)},e.exports=t.default},function(e,t,n){(function(r){var o,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;o=[n(5),n(840),n(889),n(9)],void 0!==(i=function(e,t,n,o){return new(function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return a(i,t),i.prototype.init=function(){return this.$editor=r("#innerdocbody"),this.$pad=r("#pad-view"),this.initConfig(),this.initBinding()},i.prototype.initConfig=function(){return this.metaKey=e.isMac()?"command":"ctrl",this.baseConfig="shift+"+this.metaKey+"+",this.docConfig={up:"handleFontUp",down:"handleFontDown",p:"handleComment",k:"handleTitle",u:'li[data-key="insertorderedlist"]',i:'li[data-key="insertunorderedlist"]',y:'li[data-key="checklist"]',l:"handleHistory",o:"handleDirectory",x:"handleAddShare"},this.listConfig={},this.commonConfig={e:"handleNewHome"},this.inDoc="k u i y up down"},i.prototype.initBinding=function(){var e,t,n,o,i,a,s,u,l;l=this,i=this.docConfig,e=function(){var e,t;return e=n,t=o,Mousetrap.bind(l.baseConfig+e,function(n){if(0===l.$pad.length&&(l.$pad=r("#pad-view")),0===l.$editor.length&&(l.$editor=r("#innerdocbody")),n.preventDefault?n.preventDefault():n.returnValue=!1,!l.$pad.hasClass("hide")&&(!l.inDoc.match(new RegExp("\\b"+e+"\\b"))||l.$editor.is(":focus"))&&("p"!==e||l.$editor.is(":focus")||r(".selection-comment-input").is(":focus")))return"function"==typeof l[t]?l[t]():r(t).click(),!1})};for(n in i)o=i[n],e();a=this.listConfig,t=function(){var e,t;return e=n,t=o,Mousetrap.bind(e,function(e){var n;if("home"===(n=window.cow.pageType)||"folder"===n)return r(t).click(),e.preventDefault?e.preventDefault():e.returnValue=!1})};for(n in a)o=a[n],t();s=this.commonConfig,u=[];for(n in s)o=s[n],u.push(function(){var e,t;return e=n,t=o,Mousetrap.bind(l.baseConfig+e,function(e){return l[t](),e.preventDefault?e.preventDefault():e.returnValue=!1})}());return u},i.prototype.handleFontUp=function(){return this.handleFontChange("up")},i.prototype.handleFontDown=function(){return this.handleFontChange("down")},i.prototype.handleComment=function(){var e,t,n;return n=r("#select-comment"),t=r(".close-temp"),e=r(".temp-list"),"none"===window.getComputedStyle(e[0]).getPropertyValue("display")?n.click():t.click()},i.prototype.handleFontChange=function(e){var t,n,o;if(window.getSelection().toString().length&&(o={9:1,10:2,11:3,12:4,14:5,18:6,24:7,30:8,36:9},t=r(".size-txt").text()))return n=o[t],"up"===e?n++:n--,n=Math.min(Math.max(n,1),9),r("#size-list [data-value='"+n+"']").trigger("click",[!0])},i.prototype.handleTitle=function(){var e,t,n;return e={"普通":-1,"小标题":1,"中标题":2,"大标题":3},t=r(".type-txt").text(),n=e[t],3===n?n=-1:-1===n?n=1:n++,r(".font-type-item [data-value='"+n+"']").trigger("click",[!0])},i.prototype.handleHistory=function(){return o.notify("history:toggle")},i.prototype.handleDirectory=function(){return o.notify("directory:toggle")},i.prototype.handleAddShare=function(){var e,t,o;return o=r("#teamworker-setting"),t=r(".teamworker-inner"),e=r(".teamworker-close"),!o.hasClass("hide")&&t.hasClass("share-menu")?e.click():new n("#teamworker-setting")},i.prototype.handleNewHome=function(){return window.open("http:///shimo.im/desktop")},i}(e.DomModule))("body")}.apply(t,o))&&(e.exports=i)}).call(t,n(2))},function(e,t,n){(function(r,o,i){var a,s,u=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;a=[n(5),n(895),n(891),n(892),n(893),n(894),n(890),n(48),n(152),n(194),n(257),n(147)],void 0!==(s=function(e,t,n,a,s,l,c,f,d,p,h,m){return function(y){function v(){return v.__super__.constructor.apply(this,arguments)}return u(v,y),v.prototype.inited=!1,v.prototype.init=function(t,n){var i;!1!==window.cow.authorized&&(i=this,this.cow=window.cow,this.defaultAvatar="https://assets-cdn.shimo.im/assets/images/invited-f41924e412.png",this.option=this.option=r.extend({file:window.cow.currentFile,isTeamCreator:this.isTeamCreator},n),this.teamId=this.option.teamId,this.isTeamCreator=this.option.isTeamCreator,this.readOnly=this.option.readOnly=this.option.readOnly||!1,this.isMobile=e.isMobile,this.maxTeamworkerCount=m.initLimition().teamworkerCount,this.modal=void 0===this.option.modal||this.option.modal,this.teamId?(this.memberList=[],this.membersObj={}):this.file=this.option.file,this.option.shareList?this.renderShareList():this.renderTeamworker(),this.sharedUserlist={current:[],grand:[]},this.show(),this.$view.click(function(e){if(o(e.target).is(i.$view)&&i.modal)return i.hide()}))},v.prototype.renderTeamworker=function(){return this.$view.html(r.template(t)(this.option)),this.$shareMenu=this.$view.find(".share-menu"),this.$emailInput=this.$shareMenu.find(".teamworker-input"),this.$searchList=this.$shareMenu.find(".search-user-list"),this.$userList=this.$shareMenu.find(".teamworker-user-list"),this.$delBtn=this.$view.find(".teamworker-input-clear"),this.$listItem=this.$view.closest(".ob-li"),this.$notFound=this.$view.find(".user-not-found"),this.$teamworkerRight=o(".teamworker-content-right"),this.$teamworkerShadow=o(".teamworker-list-shadow"),this.$inviteBtn=o(".invite-users"),this.$inviteLinkPopup=this.$view.find(".invite-link-popup"),this.$inviteLinkBtn=this.$view.find("a.btn.invite-link"),this.$inviteLinkQr=this.$inviteLinkPopup.find("img"),this.showShareMenu(),this.waitingInvited=[]},v.prototype.renderShareList=function(){return this.$view.html(r.template(n)(this.option)),this.$userList=this.$view.find(".teamworker-content"),this.$shareNumber=this.$view.find(".teamworker-number"),this.$teamworkerShadow=o(".sharelist-content-shadow"),this.showShareList()},v.prototype.showShareList=function(){return this.teamId?this.getTeamMembers("",!0):this.getUserList("",!0)},v.prototype.renderTeamworkerInner=function(){return this.$userList.find("ul").html(""),this.renderRecentlyContacts()},v.prototype.renderRecentlyContacts=function(){var t;return t=this,e.get("/api/share/recent_contact",{},function(e){var n,o,i;return t.recentContacts=i=e.data,t.teamId?r.forEach(i,function(e){t.membersObj[e.id]?e.shareClass="is-shared":e.shareClass=""}):r.forEach(i,function(e){window.cow.shareObj[e.id]?e.shareClass="is-shared":e.shareClass=""}),o={userList:i.filter(function(e){return e.status>-1}),title:"最近"},this.recentlyObject=o,n=r.template(c)({contactsList:[o]}),t.$userList.find("ul").prepend(n)})},v.prototype.renderContacts=function(){var e,t,n,o,i,a;return a=this,t=f.contacts,i={},r.forIn(t,function(e,t){var n;if(-1!==e.status)return n=e.name_pinyin.substr(0,1),a.teamId?a.membersObj[e.id]?e.shareClass="is-shared":e.shareClass="":window.cow.shareObj[e.id]?e.shareClass="is-shared":e.shareClass="",n.match(/[a-zA-Z]/)||(n="#"),i[n]?i[n].userList.push(e):i[n]={title:n.toUpperCase(),userList:[e]}}),o=r.values(i),o.sort(function(e,t){return e.title>t.title?1:-1}),o[0]&&"#"===o[0].title&&(n=o.shift(),o.push(n)),e=r.template(c)({contactsList:o}),this.$userList.find("ul").append(e)},v.prototype.renderSearchList=function(){var e,t;return t=this,this.$searchList.find("ul").html(""),r.forEach(this.searchUsers,function(e){var n,o;o=!1,r.each(t.waitingInvited,function(t){if(o=e.id?e.id===t.id:e.email===t.email)return o}),n=t.teamId?t.membersObj:window.cow.shareObj,n[e.id]?e.shareClass="is-shared":e.shareClass=o?"is-checked":""}),e={userList:this.searchUsers,title:""},l=r.template(c)({contactsList:[e]}),this.$searchList.find("ul").append(l)},v.prototype.renderInvitedUser=function(){var e,t,n;return n="待添加成员"+(this.waitingInvited.length?"("+this.waitingInvited.length+")":""),e={userList:this.waitingInvited,title:n,titleClass:"invite-title"},t=r.template(c)({contactsList:[e]}),this.$teamworkerRight.find("ul").html(t),this.waitingInvited.length?this.$inviteBtn.removeClass("disable"):this.$inviteBtn.addClass("disable")},v.prototype.changeListShadow=function(){return this.$userList.find("ul").height()>this.$userList.height()?this.$teamworkerShadow.show():this.$teamworkerShadow.hide()},v.prototype.eventMap={"click .dropdown-btn":"dropClick","click .dropdown":"stopPropagation","click .search-list li":"shareClick","click .user-input .input-group-addon":"handlerUserInput","click .share-ob ":"showShareMenu","click .share-ob":"onlineStatusWatch","mouseover .search-list li":"searchHover","click .icon-close:first":"close","click .add-share":"openAddShare","keyup .teamworker-input":"emailInputKeyup","keydown .teamworker-input":"emailInputKeydown","click .teamworker-input-clear":"clearInput","click .invite-users":"inviteUsers","click .cancel-invite":"closeInvite","click .share-user-remove":"cancelShare","click .share-menu-content .share-user-li":"pickUser","click .invite-link":"inviteLinks","click *":"hideInviteLinkPopup","click .team-role-item":"roleItemClick"},v.prototype.domEvents={dropClick:function(e,t){var n,r,i,a,s,u,l,c,f,d;r=o(t),u=r.hasClass("active"),h.clearDropdown(),this.$view.find(".is-dropup").removeClass("is-dropup"),this.$view.find(".has-drop").removeClass("has-drop"),a=this.$view.find(".user-list>.share-user-li"),u||(i=o(t).closest(".user-li"),f=this.$view.find(".sharelist-content").scrollTop(),s=i.find(".role-dropdown-wrap").height()+20+10,d=a.index(i),l=36*(d+1)-f,c=this.$view.find(".sharelist-content").height()-l,i.addClass("has-drop"),n=r.addClass("active").next(".dropdown").addClass("active"),c<s&&n.addClass("is-dropup")),e.stopPropagation()},stopPropagation:function(e,t){return e.stopPropagation(),e.preventDefault(),!1},closeInvite:function(){return"sharelist"===this.option.pre?this.renderShareList():(o(".teamworker-close").click(),this.isTeamCreator?this.gotoCurrentTeam():void 0)},inviteUsers:function(){if(!this.$inviteBtn.hasClass("disable"))return this.$inviteBtn.addClass("disable").text("请求中..."),this.invite()},pickUser:function(e,t){var n,i,a,s,u,l,c,d,p,h,m,y,v,g;if(d=o.Deferred(),d.then(function(e){return function(t){if(t)return e.waitingInvited.push(t)}}(this)),d.then(function(e){return function(){return e.renderInvitedUser()}}(this)),n=o(t),i=n.find(".operation-icon"),!i.hasClass("is-shared"))return h=i.hasClass("is-checked"),m=i.hasClass("is-remove"),g=n.attr("data-user-id"),p=n.attr("data-user-email"),g?(a=this.$view.find(".teamworker-user-li[data-user-id="+g+"] .operation-icon"),s="id",u=g):(a=this.$view.find(".teamworker-user-li[data-user-email='"+p+"'] .operation-icon"),s="email",u=p),this.waitingInvited=r.remove(this.waitingInvited,function(e){return e[s]+""!=u+""}),h||m?(a.removeClass("is-checked"),d.resolve()):(a.addClass("is-checked"),g?(v=f.contacts[g],v?(v.shareClass="is-remove",c=o.extend(!0,{},v),d.resolve(c)):(y=n.find(".share-user-name").text(),l=n.find(".share-user-avatar img").attr("src"),c={name:y,email:p,id:g,avatar:l,shareClass:"is-remove"},d.resolve(c))):(c={name:"邮件邀请",email:p,avatar:this.defaultAvatar,shareClass:"is-remove"},cooperation.getUserInfo(p).done(function(e){return function(e){return 0===e.code&&(c.name=e.data.name,c.avatar=e.data.avatar),d.resolve(c)}}())))},openAddShare:function(){return Infinity!==this.maxTeamworkerCount&&cow.shareList.length>=this.maxTeamworkerCount&&!this.isTeamCreator?void this.showOutCountWarning():this.readOnly?o(".teamworker-close").click():(this.renderTeamworker(),this.option.pre="sharelist")},cancelShare:function(t){var n,r,i,a,s,u,l;return a=this,l=o(t.target).parents(".user-li"),u=+l.attr("data-user-id"),r=l.hasClass("verified"),u===window.cow.currentUser.id?n="确认要删除对你自己的共享吗？<br />删除后你将无权限访问该文件":(s=f.get(u),i=r?s.email:s.name,n='确认要删除对<span class="blue">'+i+"</span>的共享吗？<br />删除后该成员将无权限访问该文件"),a.tempHide(),p.show({okCallback:function(){return a.tempShow(),a.showCancelInviteStatus(l),e.post("/api/share/delete",{guid:a.file.guid,user_id:u},function(){return u===window.cow.currentUser.id?(a.hide(),e.alert({title:"已删除对你自己的共享"})):(a.getUserList(!0,!0),e.alert({title:"已删除<span class='blue'>"+f.get(u).name+"</span>"}))},function(){return e.alert({title:"删除失败",type:"error"}),a.showCancelInviteStatus(l,"confirm")})},cancelCallback:function(){return a.tempShow()},headText:"删除共享",bodyText:n})},shareClick:function(e,t){},handlerUserInput:function(){return this.handlerUserInput.apply(this,arguments)},onlineStatusWatch:function(){return d.watch("shareMenu",this.$shareMenu,function(e){return this.find("ul li[data-user-id="+e+"]")})},emailInputKeydown:function(t){var n;(n=t.keyCode)===e.keyCodes.UP||n===e.keyCodes.DOWN?t.preventDefault():t.keyCode===e.keyCodes.ENTER&&this.handlerUserInput(t)},emailInputKeyup:function(t){var n;return t.keyCode===e.keyCodes.ESC&&this.hide(),n=this.$emailInput.val().trim(),n?this.showSearchList():this.hideSearchList(),t.keyCode===e.keyCodes.UP?(this.selectSearchItem("up"),this.scrollSearch()):t.keyCode===e.keyCodes.DOWN?(this.selectSearchItem("down"),this.scrollSearch()):(this.$emailInput.parents(".user-input").removeClass("has-error"),this.search(t.target.value))},searchHover:function(e,t){var n;if(n=o(t),!n.hasClass("active"))return this.$searchList.find("li").removeClass("active"),n.addClass("active")},close:function(){return this.hide()},clearInput:function(e){return this.$emailInput.val("").focus(),this.hideSearchList(),this.$notFound.hide()},inviteLinks:function(){return this,this.$inviteLinkPopup.toggleClass("hide"),this.$inviteLinkPopup.hasClass("hide")||this.$inviteLinkQr.prop("src",""),e.get("/api/file/"+this.file.guid+"/invite_link").then(function(t){return function(n){var r;return r=e.getQrImageUrl(114,n.data.link),t.$inviteLinkQr.prop("src",r)}}(this))},hideInviteLinkPopup:function(e){var t;if(this.modal){if(t=o(e.target),0===this.$view.find(".invite-link-popup").length)return;!t.is(this.$inviteLinkPopup.find("*"))&&!t.is(this.$inviteLinkBtn)&&!this.$inviteLinkPopup.hasClass("hide")&&this.$inviteLinkPopup.addClass("hide")}},roleItemClick:function(e,t){var n,i,a,s,u,l;if(s=this,n=o(t),a=o(t).attr("action-type"),i=o(t).closest(".user-li"),h.clearDropdown(),i.length>0){if(u=i.attr("data-user-id"),l=s.membersObj[u],void 0===u)return;if("delete"===a||"cancel-invite"===a)return p.show({okCallback:function(){return s.removeTeamMember(u).then(function(){return i.remove(),r.remove(s.memberList,function(e){return+e.id==+u}),delete s.membersObj[u]}).fail(function(){})},headText:"移除成员",bodyText:"<div>确定要移除 "+l.name+" 吗？</div><div>移除后该成员将无权限访问该文件夹</div>"});if(r.includes(["admin","member","visitor"],a))return this.changeMemberRole(u,a).then(function(e){return i.find(".role-title").text(e),i.find(".team-role-list li").removeClass("checked"),n.addClass("checked")}).fail(function(){})}}},v.prototype.getMobileShareList=function(){var e,t;return e=this.sharedUserlist,t=[],"",r.forEach(e.current,function(e){return t.push(e.name)}),r.forEach(e.grand,function(e){return r.forEach(e.users,function(e){if(t.length<4)return t.push(e.name)})}),t.length<=3?t.toString()+'<span class="m-icon">':t.slice(0,3).toString()+'...<span class="m-icon">'},v.prototype.showCancelInviteStatus=function(e,t){return null==t&&(t="loading"),"loading"===t?(t="userlist-"+t,e.find(".status").hide(),e.find(".status."+t).show()):e.find(".status").attr("style","")},v.prototype.showShareMenu=function(e,t){return this.teamId?this.getTeamMembers():this.getUserList()},v.prototype.showSearchList=function(){return this.$delBtn.show(),this.$emailInput.addClass("search-result-shown"),this.$searchList.show(),this.$userList.hide()},v.prototype.hideSearchList=function(){return this.$emailInput.val("").removeClass("search-result-shown"),this.$delBtn.hide(),this.$searchList.hide(),this.$userList.show()},v.prototype.selectSearchItem=function(e){var t,n,r;return n=this.$searchList.find("li"),void 0===e?n.removeClass("active").first().addClass("active"):(t=this.$searchList.find("li.active"),0!==t.length?(r=t.attr("data-index"),"up"===e&&r>0&&t.prev().length>0&&t.removeClass("active").prev().addClass("active"),"down"===e&&r<n.length-1&&t.next().length>0?t.removeClass("active").next().addClass("active"):void 0):void 0)},v.prototype.updateAttr=function(t,n){return e.post("/api/file/"+n,t,function(){})},v.prototype.showInviteStatus=function(e){return this.$activeSearchLi.find("span.icon-add,span.icon-loading,span.icon-remind").hide(),this.$activeSearchLi.find("span.icon-"+e).show()},v.prototype.invite=function(){var t,n,o,i,a;if(i=this,this.waitingInvited.length)return a="",n={},i.teamId?(n={team_id:this.teamId,users:[]},a="/team_members/invite"):(n={file_id:this.file.id,users:[]},a="/api/invite"),o=!1,Infinity===this.maxTeamworkerCount||this.isTeamCreator||(t=this.maxTeamworkerCount-cow.shareList.length,t<=0?o=!0:this.waitingInvited.length>t&&(o=!0)),o?(i.$inviteBtn.removeClass("disable").text("确定"),void i.showOutCountWarning()):(r.forEach(this.waitingInvited,function(e){var t;return t=e.id?e.id:e.email,n.users.push(t)}),n.users.length>0?e.post(a,n).then(function(t){return 0===t.code&&t.data.success?(e.alert({title:"邀请成功！"}),i.renderShareList()):(e.alert({title:"添加失败",type:"error"}),i.$inviteBtn.removeClass("disable").text("确定"))}).fail(function(){return e.alert({title:"添加失败",type:"error"}),i.$inviteBtn.removeClass("disable").text("确定")}):void 0)},v.prototype.showOutCountWarning=function(){var e;return e=this.maxTeamworkerCount,p.show({headText:"到达上限",bodyText:"最多添加"+e+"个协作者，升级<b>石墨高级版</b>无此限制",buttons:[{type:"link-button",buttonLabel:"了解详情",href:"/payment",target:"_blank",customClass:"btn btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"btn btn-cancel",closeAfterClick:!0}]})},v.prototype.setTplClassName=function(e){return e.isOwner?(e.tplClassName="user-admin",e.tplTitle="管理员"):"verified"!==e.status&&"verified"!==e._status?(e.tplClassName="user-wait-confirm",e.tplTitle="成员"):(e.tplTitle="成员",e.tplClassName="user-normal",+e.id===window.cow.currentUser.id?e.tplClassName="user-self":void 0)},v.prototype.getTeamMembers=function(t,n){var o,i,a;return null==t&&(t=!0),a=this,i=function(){var e,t;return n?(e=a.membersObj[cow.currentUser.id].team_role,t=r.template(s)({myRole:e,userList:a.memberList,readOnly:a.readOnly}),a.$userList.find("ul").html(t),a.memberList&&a.$shareNumber.text("团队成员("+a.memberList.length+")")):a.renderTeamworkerInner(),a.changeListShadow()},t||n?(o=function(e){var t;return t=e.data,t.map(function(e){switch(+e.id===window.cow.currentUser.id&&(e.isSelf=!0),e.team_role){case"creator":e.roleTitle="创建者";break;case"admin":e.roleTitle="管理员";break;case"member":e.roleTitle="成员"}return a.membersObj[e.id]=e}),t=t.sort(function(e,t){return("admin"===t.team_role)-("admin"===e.team_role)}).sort(function(e,t){return("creator"===t.team_role)-("creator"===e.team_role)}),a.memberList=t},e.get("/smapi/teams/mine/members").then(function(e){if(0===e.code)return o(e),i()})):i()},v.prototype.getUserList=function(t,n){var o,i,s;return null==t&&(t=!0),s=this,i=function(){var e;return n?(e=r.template(a)(s.sharedUserlist),s.$userList.find("ul").html(e),window.shareList&&s.$shareNumber.text("成员("+window.shareList.length+")")):(s.renderTeamworkerInner(),s.$emailInput.focus()),s.changeListShadow()},t||n?(o=function(e){var t;return t=e.data,t.grandUsers=[],t.grand.map(function(e){return e.users=[],e.user_ids.split(",").forEach(function(t){var n;if(f.exists(t))return n=f.get(t),n._status="verified",n.isOwner=+e.user_id==+t,+n.id===window.cow.currentUser.id&&(n.isSelf=!0),s.setTplClassName(n),e.users.push(n)}),t.grandUsers=t.grandUsers.concat(e.users),e}),t.grandUsers=t.grandUsers.sort(function(e,t){return t.status-e.status}).sort(function(e,t){return!!t.isSelf-!!e.isSelf}).sort(function(e,t){return t.isOwner-e.isOwner}),t.current.map(function(e){return e.online=d.isOnline(e.id),+e.id===window.cow.currentUser.id&&(e.isSelf=!0),s.setTplClassName(e),e}),t.current=t.current.sort(function(e,t){return t.status-e.status}).sort(function(e,t){return!!t.isSelf-!!e.isSelf}).sort(function(e,t){return t.isOwner-e.isOwner}),s.sharedUserlist=t,window.shareList=t.grandUsers.concat(e.data.current),cow.shareList=window.shareList},e.post("/api/share/"+s.file.guid,{},function(e){if(0===e.code)return o(e),i()},function(t){if("err_shortcut_inside"===t.message)return e.alert({title:"文件夹中有他人分享的文档/文件夹，无法添加共享人",type:"error"}),s.hide()})):i()},v.prototype.search=function(t){var n;return n=this,this.searchUsers=f.search(t,n.recentContacts||[]).filter(function(e){return+e.id!=+window.cow.currentUser.id&&e.status>-1}).map(function(e,t){return e.index=t,e}),0===this.searchUsers.length&&t?e.regs.email.test(t)?(this.searchUsers.push({name:"邮件邀请",email:t,avatar:this.defaultAvatar}),this.$notFound.hide()):this.$notFound.text("无搜索结果").show():this.$notFound.hide(),this.renderSearchList()},v.prototype.scrollSearch=function(){var e,t,n,r;if(t=this.$searchList.find(".active").index(),n=this.$searchList.scrollTop(),e=50,150,(r=e*t)-n>e-e||r<n)return this.$searchList.scrollTop(r)},v.prototype.handlerUserInput=function(e){var t;this.$searchLi=this.$searchList.find(".share-user-li"),t=this.$searchLi.find(".operation-icon"),1!==this.$searchLi.length||t.hasClass("is-shared")||t.hasClass("is-checked")||(this.$searchLi.click(),this.$delBtn.click())},v.prototype.toggleOverflow=function(e){return e?o("body,html").addClass("overflow-hidden"):o("body,html").removeClass("overflow-hidden")},v.prototype.show=function(){return this.$view.removeClass("hide").click(),this.toggleOverflow(!0)},v.prototype.tempHide=function(){return this.$view.addClass("hide"),this.toggleOverflow(!1)},v.prototype.tempShow=function(){return this.$view.removeClass("hide"),o("body").click(),this.toggleOverflow(!0)},v.prototype.hide=function(){if(this.$view.hasClass("show")?this.$view.removeClass("show"):(this.$view.off(),this.$view.addClass("hide")),o("body").click(),this.toggleOverflow(!1),this.isTeamCreator)return this.gotoCurrentTeam()},v.prototype.gotoCurrentTeam=function(){return this.cow.currentTeam=this.teamId,i("/team/"+this.teamId+"/files")},v.prototype.removeTeamMember=function(t){var n,r,i,a,s;return i=o.Deferred(),a=this,n="/team_members/delete",s=this.membersObj[t],r={team_id:a.teamId,user_id:t},e.post(n,r).then(function(t){if(0===t.code)return e.alert({title:"已删除<span class='blue'>"+s.name+"</span>"}),i.resolve()}).fail(function(t){return e.alert({title:"删除<span class='blue'>"+s.name+"</span>失败",type:"error"}),i.reject()}),i.promise()},v.prototype.changeMemberRole=function(t,n){var r,i,a,s,u;return a=o.Deferred(),s=this,r="/team_members/change_role",u=this.membersObj[t],i={team_id:s.teamId,user_id:t,role:n},e.post(r,i).then(function(t){var r;if(0===t.code){switch(r="",n){case"admin":r="管理员";break;case"member":r="成员";break;case"visitor":r="访客"}return e.alert({title:"已将<span class='blue'>"+u.name+"</span>修改为"+r}),a.resolve(r)}return e.alert({title:"更新<span class='blue'>"+u.name+"</span>角色失败"}),a.reject()}).fail(function(t){return e.alert({title:"更新<span class='blue'>"+u.name+"</span>角色失败"}),a.reject()}),a.promise()},v}(e.DomModule)}.apply(t,a))&&(e.exports=s)}).call(t,n(1),n(2),n(23))},function(e,t){e.exports='<% _.each(contactsList, function(userObject) { %>\n    <% if (userObject.userList.length && userObject.title || userObject.titleClass === "invite-title") {%>\n        <li class="share-li-title teamworker-li-title <%= userObject.titleClass %>"><%= userObject.title %></li>\n    <% } %>\n    <% _.each(userObject.userList, function (user) { %>\n        <li class="share-user-li teamworker-user-li <%= user.online?\'online\':\'\' %> <%= user.status || \'\' %>" data-share-id="<%= user.share_id %>" data-user-id="<%= user.id %>" data-user-email="<%= user.email %>">\n            <span class="share-user-avatar">\n                <img src="<%= user.avatar%>">\n                <span class="online-circle"></span>\n            </span>\n            <span class="share-user-name ellipsis teamworker-user-name"><%= user.name %></span>\n            <span class="share-user-email ellipsis teamworker-user-email"><%= user.email || \'石墨用户\'%></span>\n            <span class="operation-icon doc-share-icon <%= user.shareClass%>"></span>\n        </li>\n    <% }) %>\n<% }) %>\n\n\n\n'},function(e,t){e.exports='<div class="sharelist-dialog teamworker-inner">\n    <div class="share-title teamworker-title">\n        <span class="teamworker-number">成员</span>\n        <span class="hicon icon-close teamworker-close"></span>\n    </div>\n\n    <div class="teamworker-content sharelist-content">\n        <ul class="user-list"></ul>\n    </div>\n    <div class="sharelist-content-shadow"></div>\n    <div class="teamworker-footer">\n        \n        <a href="javascript:void(0);" class="teamworker-btn add-share btn btn-ok"><% if (readOnly) {print(\'完成\')} else {print(\'添加成员\')}%></a>\n    </div>\n</div>'},function(e,t){e.exports='<% if (grandUsers.length > 0) { %>\n    <li class="share-li-title user-li-title">共享文件夹</li>\n<% } %>\n<% _.each(grandUsers, function (user) {   %>\n    <li class="grand-li share-user-li user-li <%= user.online?\'online\':\'\' %> <%= user.status || \'\' %>" data-share-id="<%= user.share_id %>" data-user-id="<%= user.id %>" data-user-email="<%= user.email %>">\n        <span class="share-user-avatar">\n            <img src="<%= user.avatar%>">\n            <span class="online-circle"></span>\n        </span>\n        <span class="share-user-name ellipsis"><%= user.name %></span>\n        <span class="share-user-email ellipsis"><%= user.email || \'石墨用户\' %></span>\n        <span class="share-status share-user-identity <%= user.tplClassName %>"><%= user.tplTitle %></span>\n    </li>\n<% }) %>\n\n<% if (current.length > 0) { %>\n    <li class="share-li-title user-li-title <% if (grandUsers.length == 0) {%>no-grand<%}%>">与<%= grandUsers.length > 0 ? \'另\' : \'\' %><%= current.length %>人分享</li>\n<% } %>\n<% _.each(current, function (user) {   %>\n    <li class="share-user-li user-li <%= user.online?\'online\':\'\' %> <%= user.status || \'\' %>" data-share-id="<%= user.share_id %>" data-user-id="<%= user.id %>" data-user-email="<%= user.email %>">\n        <span class="share-user-avatar">\n            <img src="<%= user.avatar%>">\n            <span class="online-circle"></span>\n        </span>\n        <span class="share-user-name ellipsis"><%= user.name %></span>\n        <span class="share-user-email ellipsis"><%= user.email || \'石墨用户\' %></span>\n        <span class="share-status share-user-identity <%= user.tplClassName %>"><%= user.tplTitle %></span>\n        <% if (user.tplClassName != \'user-admin\') { %>\n        <span class="share-status share-user-remove doc-share-icon"></span>\n        <% } %>\n        <span class="share-status share-user-loading"><img src="https://assets-cdn.shimo.im/assets/images/loading-b67e5a67dc.gif" /></span>\n    </li>\n<% }) %>\n\n<% if (!grandUsers.length && !current.length) {%>\n    <li class="no-contact">暂无共享者</li>\n<% } %>\n'},function(e,t){e.exports='<% _.each(userList, function (user, index) {   %>\n    <li class="share-user-li user-li <%= user.online?\'online\':\'\' %> <%= user.status || \'\' %>" data-share-id="<%= user.share_id %>" data-user-id="<%= user.id %>" data-user-email="<%= user.email %>">\n        <span class="share-user-avatar">\n            <img src="<%= user.avatar%>">\n            <span class="online-circle"></span>\n        </span>\n        <span class="share-user-name ellipsis"><%= user.name %></span>\n        <span class="share-user-email ellipsis team-user-email"><%= user.email || \'\' %></span>\n        <div class="team-role-select">\n            \x3c!-- 不修改自己的角色，不是管理员没权限，但是可以取消邀请自己邀请的用户, 访客没任何权限 --\x3e\n            <% if (!readOnly && (!user.isSelf && myRole==\'admin\')) { %>\n            <a class="role-select-btn dropdown-btn" href="javascript:void(0);">\n                <span class="team-sprite select-btn-icon"></span>\n            <% } else { %>\n            <a class="role-select-btn" href="javascript:void(0);">\n            <% } %>\n                <span class="role-title"><%=user.roleTitle%></span>\n            </a>\n            <div class="role-dropdown-wrap dropdown">\n                <div class="trangle">\n                    <span class="top"></span>\n                    <span class="down"></span>\n                </div>\n                <ul class="team-role-list">\n                    <li action-type="admin" class="team-role-item <%= (user.role == \'admin\') ? \'checked\' : \'\' %>">\n                        <span>管理员</span>\n                        <span class="select-role-icon team-sprite"></span>\n                    </li>\n                    <li action-type="member" class="team-role-item <%= (user.role == \'member\') ? \'checked\' : \'\' %>">\n                        <span>成员</span>\n                        <span class="select-role-icon team-sprite"></span>\n                    </li>\n                    <li class="team-role-separator"></li>\n                    <li action-type="delete" class="team-role-item">\n                        <span>移除成员</span>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </li>\n<% }) %>\n'},function(e,t){e.exports='<% if (users.length) { %>\n  <% _.each(users, function (user) { %>\n    <li class="user-li search-li <% if (user.selected) {print(\'active\')} %> " data-user-id="<%= user.id %>" data-user-name="${user.name}" data-email="${user.email}" data-index="${user.index}">\n      <span class="icon">\n        <img src="<%= user.avatar%>">\n        <span class="online-circle"></span>\n      </span>\n      <span class="account-span">\n        <span class="account-name"><%= user.name %></span>\n        <span class="account-email"><%= user.email %></span>\n      </span>\n      <span class="hicon icon-add"></span>\n      <span class="icon-loading"><img src="https://assets-cdn.shimo.im/assets/images/loading-b67e5a67dc.gif" /></span>\n      <span class="hicon icon-remind"></span>\n    </li>\n  <% }) %>\n<% } else { %>\n  <li class="user-not-found">无搜索结果</li>\n<% } %>'},function(e,t){e.exports='<div class="share-menu teamworker-inner">\n    <div class="share-title teamworker-title">\n        <span class="teamworker-number">添加成员</span>\n        <span class="hicon icon-close teamworker-close <%= (typeof isTeamCreator != \'undefined\' && !isTeamCreator)? \'hide\' : \'\' %>"></span>\n    </div>\n    <div class="teamworker-content share-menu-content">\n        <div class="teamworker-content-left">\n            <div class="teamworker-input-box">\n                <input class="form-control teamworker-input" type="text" autocomplete="off" placeholder="输入邮箱、搜索姓名进行添加" />\n                <a class="teamworker-input-clear" href="javascript:void(0);"><span class="hicon icon-delete"></span></a>\n                <ul class="search-list"></ul>\n            </div>\n            \n            <div class="teamworker-user-list">\n                <div class="teamworker-nobody-info hide">\n                    <span class="teamworker-nobody-text">还没有联系人</span>\n                    <span class="teamworker-nobody-text">你可以在上方<strong>输入对方邮箱</strong>直接添加</span>\n                    <% if(typeof teamId == \'undefined\' || !teamId) { %>\n                    <span class="teamworker-nobody-text">或点击下方「<strong>添加微信好友</strong>」按钮</span>\n                    <% } %>\n                </div>\n                <ul></ul>\n            </div>\n\n            <div class="search-user-list">\n                <ul></ul>\n            </div>\n\n            <div class="user-not-found"></div>\n            \n        </div>\n        <div class="teamworker-content-right">\n            <ul>\n                <li class="share-li-title teamworker-li-title invite-title">待添加成员</li>\n            </ul>\n        </div>\n    </div>\n    <div class="teamworker-list-shadow"></div>\n    <div class="invite-link-popup hide">\n        <p>微信扫一扫</p>\n        <img src="" />\n        <p>把文档发送给好友<br />邀请好友加入</p>\n        <div class="arrow-down" style="display: block;">\n          <span class="top"></span>\n          <span class="down"></span>\n        </div>\n    </div>\n    <div class="teamworker-footer">\n        <% if(typeof teamId == \'undefined\' || !teamId) { %>\n          <a href="javascript:void(0);" class="btn teamworker-btn invite-link">添加微信好友</a>\n        <% } %>\n        <a href="javascript:void(0);" class="btn btn-ok teamworker-btn invite-users disable">确定</a>\n        \x3c!-- 团队创建最后的添加成员比较特殊，可以跳过，所以按钮上处理不太一样 --\x3e\n        <a href="javascript:void(0);" class="btn teamworker-btn cancel-invite"><%= (typeof isTeamCreator != \'undefined\' && isTeamCreator)? "跳过" : "取消"%></a>\n    </div>\n</div>\n'},function(e,t,n){var r=n(428).updateState,o={loaded:!1,shownSidebar:null,highLight:!0,data:null,showLockSidebar:!1,zoom:1,sheetId:""};e.exports=function(e,t){switch(e=e||o,t.type){case"TOGGLE_SIDEBAR":var n=e.shownSidebar,i=n!==t.sidebarName?t.sidebarName:null;return r(e,{shownSidebar:i,highLight:!0,showLockSidebar:!1});case"TOGGLE_HIGHLIGHT":return r(e,{highLight:!e.highLight});case"HIDE_SIDEBAR":return r(e,{shownSidebar:null,highLight:!0});case"SPREADSHEET_LOAD":return r(e,{loading:!0,loaded:!1});case"SPREADSHEET_LOAD_SUCCESS":return r(e,{loading:!1,loaded:!0,data:t.result});case"SPREADSHEET_LOAD_FAIL":return r(e,{loading:!1,loaded:!0,error:t.error});case"TOGGLE_LOCK_SIDEBAR":var a,s=e.showLockSidebar;return a=!(s&&!t.status)||!s,r(e,{shownSidebar:null,highLight:!0,showLockSidebar:a});case"CHANGE_SHEET_ZOOM":return r(e,{zoom:t.zoom});case"CHANGE_SHEET_ID":return r(e,{sheetId:t.sheetId})}return e}},function(e,t,n){(function(t){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){M.default.clear();var r=void 0,o=(0,E.v4)();try{r=window.sheetStorage=new D.default({userId:window.cow.currentUser.id,clientId:o})}catch(e){r=null}return(0,j.updateState)(e,(0,A.assign)(F,{submittedCS:t,revision:n,storage:r,clientId:o}))}function i(e,n,r){var o=e.submittedCS,i=e.committingCS,a=e.userCS,s=e.revision,u=o.compose(i).compose(a);if(!r){var l=void 0;try{l=u.invert(n)}catch(r){return P.default.notify("accept:error","invert_error"),t({submittedCS:k.default.pack(o),committingCS:k.default.pack(i),userCS:k.default.pack(a),newChange:k.default.pack(n),baseRev:s,guid:window.cow.currentFile.guid},"reducer/msg.js",0,0,{name:"sheet_changeset_error",message:"changeset invert error"}),e}M.default.record(l)}var c=e.userCS.compose(n),f=(0,j.updateState)(e,{userCS:c});return b(),v(f),f}function a(e){console.dir(e.userCS);var t,n;if(t=e.submittedCS.compose(e.userCS),!t.isDocument)return console.dir(t.ops),alert("文档出错，请刷新重试！"),e;var r=(0,E.v4)();n=y(e.userCS,e.revision,r,e.clientId),S.default.send("message",n);var o=(0,j.updateState)(e,{status:"sending",committingCS:e.userCS,userCS:new w.Delta,uuid:r});return v(o),o}function s(e){var t,n,r;return r=e.committingCS,e.isReconnect&&0!==r.length?(t=e.submittedCS.compose(r),t.isDocument?(n=y(r,e.revision,e.uuid,e.clientId),S.default.send("message",n),e):(console.dir(t.ops),alert("文档出错，请刷新重试！"),e)):e}function u(e,t,n){return g(e),"REPEAT_COMMIT"===n?(0,j.updateState)(e,{status:"sended",offline:!1,committingCS:new w.Delta}):(0,j.updateState)(e,{status:"sended",offline:!1,submittedCS:e.submittedCS.compose(e.committingCS),committingCS:new w.Delta,revision:t})}function l(e,t,n){if(n<=e.revision)return e;var r;return t=k.default.unpack(t),r=c(e,t),M.default.transform(t),(0,j.updateState)(e,{revision:n,submittedCS:r._a,committingCS:r._x,userCS:r._y,applyCS:r.d,fromPush:!0})}function c(e,t){var n,r,o,i,a,s,u,l;return n=e.userCS,r=e.committingCS,o=e.submittedCS,i=r.transform(t),a=o.compose(t),s=t.transform(r,!0),u=i.transform(n),l=n.transform(i),{_a:a,_x:s,_y:u,d:f(a.compose(s).compose(u),l)}}function f(e,t){for(var n=t.ops,r=n.length,o=[],i=void 0,a=0,s=0;s<r;s++)i=n[s],"object"===_(i.data)||"insert"===i.action?function(){var t=e.ops[a],n=t.getAttributes()||{},r={};i.data.cells.forEach(function(e){var n=i.data.cells.get(e),o=void 0;if(1===n.data)o=1;else{o=t.data.cells.get(e).data}r[e]=new w.CellOperator({action:"insert",data:o,attributes:n.getAttributes()})}),i=new w.TableOperator({action:i.action,attributes:(0,A.assign)({id:n.id},i.getAttributes()),data:{cells:r,rows:i.data.rows,cols:i.data.cols}}),a+=1}():a+=i.data,o.push(i);return new w.Delta(o)}function d(e){var t,n,r=e.submittedCS,o=e.committingCS,i=e.userCS,a=r.compose(o).compose(i);if(!(t=M.default.popUndo()))return e;n=a.invert(t),M.default.pushRedo(n);var s=i.compose(t),u=(0,j.updateState)(e,{userCS:s,applyCS:t,fromPush:!1});return b(),v(u),u}function p(e){var t,n,r=e.submittedCS,o=e.committingCS,i=e.userCS,a=r.compose(o).compose(i);if(!(n=M.default.popRedo()))return e;t=a.invert(n),M.default.record(t);var s=i.compose(n),u=(0,j.updateState)(e,{userCS:s,applyCS:n,fromPush:!1});return b(),v(u),u}function h(e,t,n){if(window.cow.idx)return e;var r={component:"pad",type:"ready"===t?"CLIENT_READY":"CLIENT_QUIT",padId:window.cow.currentSheetGuid,collabId:e.clientId,reconnect:!0,client_rev:e.revision,sessionID:N.default.get("sessionID"),token:N.default.get("token"),protocolVersion:2};return S.default.send("message",r),(0,j.updateState)(e,{isReady:!0,isReconnect:n||!1})}function m(e){return(0,j.updateState)(e,{offline:!0})}function y(e,t,n,r){return{type:"COLLABROOM",component:"pad",padId:window.cow.currentSheetGuid,collabId:r,data:{type:"USER_CHANGES",baseRev:t,changeset:k.default.pack(e),uuid:n}}}function v(e){var t=window.cow.currentFile.guid;if(!window.cow.usingNewSeq&&e.storage){var n=e.storage,r=e.committingCS,o=e.userCS,i=e.revision,a=e.uuid,s={committingCS:{guid:t,rev:i,changeset:k.default.pack(r),uuid:a},userCS:{changeset:k.default.pack(o),rev:i}};n.set(t,s).then(function(){e.offline&&P.default.notify("saveStatus:offlineSuccess")}).catch(function(){e.offline&&P.default.notify("accept:error","storage_exceeded_quota")})}}function g(e){var t=window.cow.currentFile.guid;!window.cow.usingNewSeq&&e.storage&&e.storage.set(t,{committingCS:null,userCS:null})}function b(){P.default.notify("saveStatus:start"),setTimeout(function(){window.cow.curSheetComposeUserChange&&window.cow.curSheetComposeUserChange()},0)}var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=n(53),k=r(w),E=n(176),C=n(898),M=r(C),T=n(711),S=r(T),O=n(9),P=r(O),x=n(89),N=r(x),j=n(428),I=n(328),D=r(I),A=n(1),F={status:"sended",offline:!1,isReady:!1,disableUndoRedo:!1,submittedCS:new w.Delta,committingCS:new w.Delta,userCS:new w.Delta,applyCS:null,fromPush:!1,revision:0,isReconnect:!1,uuid:null,storage:null,clientId:null};e.exports=function(e,t){switch(e=e||F,t.type){case"RECEIVE_INIT_SHEET":return o(e,t.submittedCS,t.revision);case"COMPOSE_USER_CHANGES":return i(e,t.newChange,t.disableRecords);case"SEND_CHANGE":return a(e);case"SEND_OFFLINE_CHANGE":return s(e);case"SEND_CHANGE_SUCCESS":return P.default.notify("saveStatus:success"),u(e,t.revision,t.msgType);case"NEW_CHANGE_FROM_SERVER":return P.default.notify("saveStatus:getUpdate"),l(e,t.newChange,t.revision);case"UNDO":return d(e);case"REDO":return p(e);case"DISABLE_UNDO_REDO":return(0,j.updateState)(e,{disableUndoRedo:!0});case"ENABLE_UNDO_REDO":return(0,j.updateState)(e,{disableUndoRedo:!1});case"SEND_CLIENT_STATUS":return h(e,t.status,t.isReconnect);case"OFFLINE":return P.default.notify("saveStatus:offline"),m(e);case"ENABLE_BY_LOCKCELL":return(0,j.updateState)(e,{disableByLockCell:!1});case"DISABLE_BY_LOCKCELL":return(0,j.updateState)(e,{disableByLockCell:!0})}return e}}).call(t,n(573))},function(e,t){var n={undoStack:[],redoStack:[],undoableNum:0,redoableNum:0,maxRecordLen:10,record:function(e){this.undoStack.length>=this.maxRecordLen&&(this.undoableNum-=1,this.undoStack.shift()),this.undoStack.push(e),this.undoableNum+=1},transform:function(e){var t=function(t){return e.transform(t,!0)};this.undoStack=this.undoStack.map(t),this.redoStack=this.redoStack.map(t)},isUndoable:function(){return!!this.undoableNum},isRedoable:function(){return!!this.redoableNum},popUndo:function(){var e=this.undoStack.pop();return this.undoableNum-=1,e},pushRedo:function(e){this.undoStack.length>=this.maxRecordLen&&(this.redoableNum-=1,this.undoStack.shift()),this.redoStack.push(e),this.redoableNum+=1},popRedo:function(){var e=this.redoStack.pop();return this.redoableNum-=1,e},clearUndo:function(){this.undoStack=[],this.undoableNum=0},clearRedo:function(){this.redoStack=[],this.redoableNum=0},clear:function(){this.clearUndo(),this.clearRedo()}};e.exports=n},function(e,t,n){function r(e,t){switch(e=e||i,t.type){case"UPDATE_SELECTED_CELL":return(0,o.updateState)(e,{selectedCellVal:t.selectedCellVal})}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(428),i={selectedCellVal:""};e.exports=t.default},function(e,t,n){(function(t){function r(e,t){return p.send("message",{type:"COLLABROOM",padId:window.cow.currentSheetGuid,data:{type:"SELECT",sheetId:window.cow.currentSheetId,range:t}}),e}function o(e,n){var r=t.cloneDeep(e.collaborators),o=t.cloneDeep(e.collabUserIds),i=n.data.userInfo.id,a=n.data.sheetId;return n.data.userInfo.color=d.getColor(i),r[a]&&o[a]||(r[a]=[],o[a]={}),void 0!==o[a][i]&&r[a].splice(o[a][i],1),o[a][i]=r[a].length,r[a].push(n),h(e,{collaborators:r,collabUserIds:o})}function i(e,n){var r=t.cloneDeep(e.collaborators);return r=c(r,n),h(e,{collaborators:r,updateCollab:!0})}function a(e,n){var r=t.cloneDeep(e.collaborators);return r=f(r,n),h(e,{collaborators:r,updateCollab:!0})}function s(e,n){var r=t.cloneDeep(e.collaborators);return r=f(r,n),h(e,{collaborators:r,updateCollab:!0})}function u(e){return h(e,{updateCollab:!1})}function l(e){return h(e,{collaborators:{},collabUserIds:{},updateCollab:!1})}function c(e,n){var r,o=n.data.sheetId;return e[o]||(e[o]=[]),r=e[o],t.remove(r,function(e){return e.data.userInfo.id===n.data.userInfo.id}),e}function f(e,t){var n,r=t.data.sheetId,o=0,i=0;for(e[r]||(e[r]=[]),n=e[r],o=0,i=n.length;o<i;o++)if(t.data.userInfo.id==n[o].data.userInfo.id){n[o].data.range=t.data.range;break}return o==i&&(t.data.userInfo.color=d.getColor(t.data.userInfo.id),n.push(t)),e}var d=n(433),p=n(711),h=n(428).updateState,m={collaborators:{},collabUserIds:{},updateCollab:!1};e.exports=function(e,t){switch(e=e||m,t.type){case"SEND_SELECT_CELL":return r(e,t.cords);case"RECIEVE_ENTER_COLLABORATOR":return o(e,t.collaborator);case"RECIEVE_LEAVE_COLLABORATOR":return i(e,t.collaborator);case"RECEIVE_COLLABORATOR_SELECTED":return a(e,t.collaborator);case"RECEIVE_COLLABORATOR_UNSELECTED":return s(e,t.collaborator);case"UPDATE_COLLAB_DONE":return u(e);case"RESET_COLLAB":return l(e)}return e}}).call(t,n(1))},function(e,t,n){var r=n(428).updateState,o={fontSize:"",color:"",background:"",align:"",vertical:"",boldSelected:!1,italicSelected:!1,underlineSelected:!1,strikethroughSelected:!1};e.exports=function(e,t){switch(e=e||o,t.type){case"SET_MENU_SELECTION":return r(e,t.selection)}return e}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"PATCH_USERS":return(0,u.default)({},t.payload);case"GET_SHARED_USERS_FAILED":return{};default:return e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"UPDATE_PERMISSIONS":return(0,u.default)({},e,t.payload);case"PATCH_PERMISSIONS":var n=t.payload,r=n.fileGuid,o=n.userId,i=n.permission;return e[r][o]=i,(0,u.default)({},e);default:return e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"PATCH_SHARED_USERS":return(0,u.default)({},e,t.payload);default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(345),u=r(s),l=n(151);t.default=(0,l.combineReducers)({users:o,permissions:i,filePermissions:a}),e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=s.default.unpack(e);return p.dispatch(d.default.receivedInitSheet(n,t)),n}function i(e,t,n){var r,i=window.cow.tempCurrentFile,a=i.content;if(e===i.guid&&!t&&a)return n||(r=o(a,i.head),r.guid=e),window.cow.tempCurrentFile.authorized=window.cow.authorized,i.tableData=r,Promise.resolve(i);var s="/-/"+e;return(0,u.ajaxGet)(s).then(function(t){var i;if(0===t.code)return i=t.data.file,i.authorized=t.data.authorized,n||(r=o(i.content,i.head),r.guid=e),window.cow.tempCurrentFile=i,i.tableData=r,i;throw new Error(t)}).catch(function(e){throw new Error(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.resolveTableData=o,t.getSpreadsheetByGuid=i;var a=n(53),s=r(a),u=n(22),l=n(842),c=r(l),f=n(709),d=r(f),p=c.default.getInstance();window.richdoc=s.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){(function(r,o){var i,a;i=[n(33),n(1039)],void 0!==(a=function(e,t){function n(){localStorage.getItem(f)!==s.text&&(l.html(o.template(u)(s)).removeClass("hide"),c.addClass("maintenance"))}function i(){l.html("").addClass("hide"),c.removeClass("maintenance"),localStorage.setItem(f,s.text)}function a(){l.on("click",".icon-delete",function(){i()}),e.bind("Maintenance",function(e){e.active?(s=e,n(e)):i()}),t.start()}var s,u='<span><% print(_.unescape(text)) %></span><a href="javascript:void(0);" class="hicon icon-delete"></a>',l=r("#list-view-wrap>.maintenance"),c=r("body"),f="maintenance_close";return{start:a}}.apply(t,i))&&(e.exports=a)}).call(t,n(2),n(1))},function(e,t,n){(function(r){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),a=o(i),s=n(34),u=o(s),l=r("#list-view-wrap>.maintenance"),c=r('<a href="javascript:void(0);" class="delete"></a>'),f=r('<div class="warning"></div>'),d=r('<div class="good-news"></div>'),p=function(e){var t=e.html,n=e.link,o=e.warning,i=e.goodNews,a=e.blue,s=e.onClose,u=r('<span class="content">'+t+"</span>");n&&(u.css({cursor:"pointer"}),u.click(function(){window.open(n,"_blank")})),c.click(function(e){s||(s=function(e){e&&e()}),s(function(){r(e.target.parentNode).remove()})}),o&&u.prepend(f),i&&u.prepend(d),a&&l.addClass("blue"),l.append(u).append(c).removeClass("hide")},h=function(){var e=".list-header-wrap",t=".sm-list-sidebar",n=".list-outer-container",r=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){var t=document.querySelector(e);t&&(t.className.match(/list-outer-container/)?t.style.marginTop="30px":(t.style.webkitTransform="translateY(30px)",t.style.transform="translateY(30px)"))})},o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){node=document.querySelector(e),node&&(node.style.webkitTransform="",node.style.transform="")})},i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){var t=document.querySelector(e);if(t){var n=parseInt(window.getComputedStyle(t,null).top);t.style.top=n+30+"px"}})},s=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){var t=document.querySelector(e);if(t){var n=parseInt(window.getComputedStyle(t,null).top);t.style.top=n-30+"px"}})},l=function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=!0,i=0;i<n.length;i++){var a=n[i];if(!document.querySelector(a)){o=!1;break}}return o?Promise.resolve():new Promise(function(t,r){setTimeout(function(){e.apply(void 0,n)},1e3)})};a.default.attach("enterprise-payment:renewal",function(c){var f=c.getMonth()+1+"月"+c.getDate()+"日",d=cow.currentUser.team.name,h="";h=cow.currentUser.isOfficial?"您的企业 "+d+" 将于 "+f+' 付费到期，为保证企业正常使用，请及时 <span class="link">续费</span> ':"您的企业 "+d+" 将于 "+f+' 试用到期，为保证企业正常使用，请<span class="link">购买企业版</span> ',p({html:h,link:"/enterprise/billing?dialog=purchase",blue:!0,onClose:function(r){u.default.post("/flash_messages/read",{message_name:"member_count_exceeded"}),o(e,t,n),s(t),r()}}),a.default.detach("enterprise-payment:renewal"),l(e,t,n).then(function(){r(e,n),i(t)})})};t.default={start:h},e.exports=t.default}).call(t,n(2))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(90),n(1331),e.exports=n(1332)},function(e,t,n){e.exports=n.p+"handsontable.full.min.css"},function(e,t,n){(function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}n(1333),n(1334);var o=n(21),i=n(702),a=r(i),s=n(33),u=r(s),l=n(1038),c=r(l);n(147),n(833);var f=n(5),d=r(f),p=n(22),h=n(903),m=function(n,r){switch(cow.pageType){case"home":cow.teamId=void 0,cow.permission="editable",document.body.id=cow.permission,r();break;case"folder":case"doc":case"spreadsheet":case"sheet":case"newdoc":"sheet"===cow.pageType?(0,h.getSpreadsheetByGuid)(n.params.guid,!1,!0).then(function(t){e.assign(window.cow,(0,o.getPermissionsForCow)(t)),r()}):(0,p.ajaxGet)("/-/"+n.params.guid).then(function(e){if(0!==e.code)return d.default.alert({title:e.message,type:"error"}),void t.back();cow.teamId=e.data.teamId,cow.permission=e.data.permission||"readonly";var n=e.data.file.permissions;n.readable&&(cow.permission="readonly"),n.commentable&&(cow.permission="commentable"),n.editable&&(cow.permission="editable"),1===e.data.file.type&&(cow.permission=n.childFileCreatable?"editable":"readonly"),document.body.id=cow.permission,r()});break;default:r()}},y=function(){var e=a.default.common,n=a.default.list,r=a.default.doc,o=a.default.spreadsheet,i=a.default.sheet;t("*",e.checkNewVersion,e.checkNewSeq,e.setPageType,e.syncOfflineData),t("/desktop",m,n.render),t.exit("/desktop",e.exit),t("/recent",n.render),t.exit("/recent",e.exit),t("/favorites",n.render),t.exit("/favorites",e.exit),t("/folder/:guid",m,n.render),t.exit("/folder/:guid",e.exit),t("/doc/:guid",m,r.init),t.exit("/doc/:guid",e.exit),t("/newdoc/:guid",m,r.init),t.exit("/newdoc/:guid",e.exit),t("/spreadsheet/:guid/:sheetId?",m,o.init),t.exit("/spreadsheet/:guid/:sheetId?",e.exit),t("/sheet/:guid/:sheetId?",m,i.init),t.exit("/sheet/:guid/:sheetId?",e.exit),t()},v=function(){u.default.init(),y()};c.default.start(),v()}).call(t,n(1),n(23))},function(e,t){},function(e,t){}]),[1330]);